{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[],"Cache":[{"_id":"themes/tranquilpeak/.gitignore","hash":"90f15ccac21292ee1f8825006ed2ab1a3158a9c2","modified":1570699468122},{"_id":"themes/tranquilpeak/.bowerrc","hash":"ec9134021efc0ffa8d5ab355d117d82eb67b392f","modified":1570699468121},{"_id":"themes/tranquilpeak/.eslintignore","hash":"5ae924d312cebbc073d3b73731241b3af6b203fc","modified":1570699468121},{"_id":"themes/tranquilpeak/.eslintrc","hash":"8c195ed1a1f0751e493f899e4fd0880b41fa01c6","modified":1570699468121},{"_id":"themes/tranquilpeak/Gruntfile.js","hash":"b2b078651cf8c5dcde2e847169ce242ad3319ca3","modified":1570699468122},{"_id":"themes/tranquilpeak/README.md","hash":"6a2897d1b57f40f77aa0d8ab96449e2d3af72b7e","modified":1570699468123},{"_id":"themes/tranquilpeak/LICENSE","hash":"7a3b30ddb56760b35a6b7cd210aeb271cd292b60","modified":1570699468122},{"_id":"themes/tranquilpeak/_config.yml","hash":"62a43fa8c2ba53b5377eb1f76e38af1b92d789d2","modified":1570699468123},{"_id":"themes/tranquilpeak/bower.json","hash":"2e55f85eb42ad1055b005f4242ee187979f3c9f0","modified":1570699468123},{"_id":"themes/tranquilpeak/build-tranquilpeak.sh","hash":"19c31f8ee900838d5e7490d3c34b8c6233484efd","modified":1570699468123},{"_id":"themes/tranquilpeak/package.json","hash":"6d52fd2d461aa5a3911459afa123cbbc3e2e3264","modified":1570699468131},{"_id":"themes/tranquilpeak/.github/CONTRIBUTING.md","hash":"95401403b0b8973b73a1a461024506c8f1f61be2","modified":1570699468121},{"_id":"themes/tranquilpeak/.github/ISSUE_TEMPLATE.md","hash":"655f8395a4a1be8f5e7d798445e8f004349e43ca","modified":1570699468122},{"_id":"themes/tranquilpeak/.github/PULL_REQUEST_TEMPLATE.md","hash":"733418cf1eb27fd88f5e25c74e8cac759cf46f2e","modified":1570699468122},{"_id":"themes/tranquilpeak/docs/developer.md","hash":"5c0ad72e2b722a2deb4055db32a7bcea762ef7c0","modified":1570699468123},{"_id":"themes/tranquilpeak/languages/de-DE.yml","hash":"6054dd34bf3ccc00cd0ef88abd63a8ab5d65d19c","modified":1570699468124},{"_id":"themes/tranquilpeak/languages/en.yml","hash":"fd83558201c695b43e2f14ce1592d6125432b685","modified":1570699468124},{"_id":"themes/tranquilpeak/languages/es.yml","hash":"b4e0558f2dd9656a6a6089eef462d211ed039a6c","modified":1570699468124},{"_id":"themes/tranquilpeak/languages/fa.yml","hash":"d1013afe247b2a240f5d03d25e2c870994af6d3d","modified":1570699468124},{"_id":"themes/tranquilpeak/languages/fr-FR.yml","hash":"48c0a62f405afce4bd340f3ab9442c3acff3b0a2","modified":1570699468124},{"_id":"themes/tranquilpeak/languages/it-IT.yml","hash":"2511c1dd63ac6c6c2c4da4e4aeaaf81eb5efb20d","modified":1570699468125},{"_id":"themes/tranquilpeak/languages/ja.yml","hash":"8c46dcbdfa981e614cf019b9b03c2d56b464a059","modified":1570699468125},{"_id":"themes/tranquilpeak/languages/pt-br.yml","hash":"e800caa9b58c5c07b0d7cf26abf74514121cb9eb","modified":1570699468125},{"_id":"themes/tranquilpeak/languages/ru.yml","hash":"b7f4d4df152d6e4a791958b7682c04fcd146c35e","modified":1570699468125},{"_id":"themes/tranquilpeak/languages/zh-cn.yml","hash":"20fb1f9e04dbe708e36d56336099c2ca69ece7c1","modified":1570699468125},{"_id":"themes/tranquilpeak/languages/zh-tw.yml","hash":"73409a47119360373bc4b6035062e2173a94c84f","modified":1570699468125},{"_id":"themes/tranquilpeak/layout/all-archives.ejs","hash":"28a4e97d1cfe4730dbcc8fde27b079320b5eec35","modified":1570699468130},{"_id":"themes/tranquilpeak/layout/all-categories.ejs","hash":"fa6f71b9543644df38cc1f33f8ed8223f91cc7a6","modified":1570699468130},{"_id":"themes/tranquilpeak/layout/all-tags.ejs","hash":"aabb765f51a8d7582a5bafdbc8876b46ff1e6ea1","modified":1570699468130},{"_id":"themes/tranquilpeak/layout/archive.ejs","hash":"0df1edf4ed40b316715ef1949b09aa9c98d22359","modified":1570699468130},{"_id":"themes/tranquilpeak/layout/category.ejs","hash":"67902c418e299399133fe2a7ebc39cadd17de861","modified":1570699468130},{"_id":"themes/tranquilpeak/layout/index.ejs","hash":"36e89b37f520533bef85fb32b714214257fad1d0","modified":1570699468130},{"_id":"themes/tranquilpeak/layout/layout.ejs","hash":"29c1291c7ca3f5da7bee6385b7f716d179199933","modified":1570699468131},{"_id":"themes/tranquilpeak/layout/page.ejs","hash":"ae761feddc98f4d3260e7591ed9fc91d9a49d0ab","modified":1570699468131},{"_id":"themes/tranquilpeak/layout/post.ejs","hash":"ae761feddc98f4d3260e7591ed9fc91d9a49d0ab","modified":1570699468131},{"_id":"themes/tranquilpeak/layout/tag.ejs","hash":"72bff1ae241fbe2ddca0537e8ed77c791a7d1766","modified":1570699468131},{"_id":"themes/tranquilpeak/scripts/.eslintrc.json","hash":"4cd7451f0bc15440bc8147912c63a11acd0e280f","modified":1570699468132},{"_id":"themes/tranquilpeak/tasks/pipeline.js","hash":"9c35bf63e39dcf989adf35b39c587290e6943e11","modified":1570699468161},{"_id":"source/_posts/Portfolio.md","hash":"97c20cd98d8e2b793cd6d67fafcb950c7fec8a53","modified":1570712230345},{"_id":"source/_posts/Resume.md","hash":"2f45468d74dc3201d3ab0e9238be50fefcf28ba3","modified":1570712439193},{"_id":"source/all-categories/index.md","hash":"3d47d4e31035e3c8d960730f36bd3ad27f88e9be","modified":1570699468104},{"_id":"source/all-archives/index.md","hash":"634c7e0b6841e3cdbb53b62fc5db80e1ad3a69f2","modified":1570699468104},{"_id":"source/all-tags/index.md","hash":"a9092fa374dd3f5b8b5c72f02fa0b128309f91ed","modified":1570699468104},{"_id":"themes/tranquilpeak/docs/user.md","hash":"f69f139e5d3204852b2fbe3d01c552f413c5aa4b","modified":1570699468123},{"_id":"themes/tranquilpeak/source/_fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1570699468142},{"_id":"themes/tranquilpeak/layout/_partial/archive.ejs","hash":"bdd73d1f70bd91533863943f940f8193d44e0fdd","modified":1570699468126},{"_id":"themes/tranquilpeak/layout/_partial/about.ejs","hash":"3e16c7ab5d2036576e92b618f735aca24b820a43","modified":1570699468126},{"_id":"themes/tranquilpeak/layout/_partial/archive-post.ejs","hash":"e19455749c5c1bf773214d965f173613dd8f30f6","modified":1570699468126},{"_id":"themes/tranquilpeak/layout/_partial/baidu-analytics.ejs","hash":"736eca2ecf6fdeea032d47c02c51688f006cafb4","modified":1570699468126},{"_id":"themes/tranquilpeak/layout/_partial/cover.ejs","hash":"18b9a620fca9b648fd59467a66b3f4fdbba42613","modified":1570699468126},{"_id":"themes/tranquilpeak/layout/_partial/head.ejs","hash":"1a2f07330a9bb2b433e90d2496131d08ca0e833f","modified":1570699468126},{"_id":"themes/tranquilpeak/layout/_partial/header.ejs","hash":"9579d6aa6011d927d079639e80b28763a57f6b0b","modified":1570699468127},{"_id":"themes/tranquilpeak/layout/_partial/footer.ejs","hash":"67962257d9e3cb6a4d56e3f0263f192ba9a413dd","modified":1570699468126},{"_id":"themes/tranquilpeak/layout/_partial/google-analytics.ejs","hash":"0d0bc2c67d2cfab5fbf3d5d21c209d799f5de528","modified":1570699468126},{"_id":"themes/tranquilpeak/layout/_partial/index.ejs","hash":"004f3b9b272c024cc8f02e99a3a2cc95ed1af876","modified":1570699468127},{"_id":"themes/tranquilpeak/layout/_partial/pagination.ejs","hash":"207dd207e01eacda76b89e88a2ce95d898eadfca","modified":1570699468127},{"_id":"themes/tranquilpeak/layout/_partial/post.ejs","hash":"47c8126fb7e1a5ac07a6a9340d1de20d9236a858","modified":1570699468127},{"_id":"themes/tranquilpeak/layout/_partial/script.ejs","hash":"e3394c304877b8e19fad21f957a1ec14cd2e6d93","modified":1570699468129},{"_id":"themes/tranquilpeak/layout/_partial/search.ejs","hash":"c2e7449b4a980197f73c1cb163ab21fdc673351e","modified":1570699468129},{"_id":"themes/tranquilpeak/layout/_partial/sidebar.ejs","hash":"737f5df45d478f64143c0a2e03707f08776759b0","modified":1570699468129},{"_id":"themes/tranquilpeak/scripts/filters/excerpt.js","hash":"5e0e473d46f8c7aac988ebf0b25ab2eab0af73bb","modified":1570699468132},{"_id":"themes/tranquilpeak/scripts/helpers/absolute_url.js","hash":"0d520a946b6f0abbac60529017ed3133265aac60","modified":1570699468132},{"_id":"themes/tranquilpeak/scripts/filters/thumbnail_image_url.js","hash":"0ad2d9304c991e2989708bdbfa6a59030ee691d3","modified":1570699468132},{"_id":"themes/tranquilpeak/scripts/helpers/generate_sharing_link.js","hash":"89069677e8acddef5fba0d3093f5f73fde4fa485","modified":1570699468132},{"_id":"themes/tranquilpeak/scripts/helpers/is_remote_url.js","hash":"471237ea295bcc9a392a5bb6738ef4c6ab673afb","modified":1570699468132},{"_id":"themes/tranquilpeak/scripts/helpers/resolve_asset_url.js","hash":"c813e9daaed374b386b91876923f10c0cf1d624c","modified":1570699468133},{"_id":"themes/tranquilpeak/scripts/migrators/1.4.0.js","hash":"0f04b8cc723002ad5073c1070d1d1d567ca87f41","modified":1570699468133},{"_id":"themes/tranquilpeak/scripts/tags/alert.js","hash":"5b86358dd53c9b0d44c385ec12cf9e76383e229a","modified":1570699468133},{"_id":"themes/tranquilpeak/scripts/tags/fancybox.js","hash":"55ce02f9ef084f43932eb9b0f10db1d5e9c3a250","modified":1570699468133},{"_id":"themes/tranquilpeak/scripts/tags/highlight_text.js","hash":"8e093f21e9a4b10c19be6f300dc90bcc39685ec9","modified":1570699468133},{"_id":"themes/tranquilpeak/scripts/tags/image.js","hash":"ab6b04db8fe2ad21ec52dac5e1c3ee76400c6a79","modified":1570699468134},{"_id":"themes/tranquilpeak/scripts/tags/tabbed_codeblock.js","hash":"480e1c58c8e9d99a8a7cfcfd523171139c32e4e6","modified":1570699468134},{"_id":"themes/tranquilpeak/scripts/tags/wide_image.js","hash":"d3596c62694548a3a684e8dfeb5372038ef6f450","modified":1570699468134},{"_id":"themes/tranquilpeak/source/_css/tranquilpeak.scss","hash":"e69c62b19ece4ab35d992e163b47f2a8374d7611","modified":1570699468140},{"_id":"themes/tranquilpeak/source/_images/icon144.png","hash":"a6af584a7d4c0a2874f7e3b8123efd0eba0aaf4e","modified":1570699468157},{"_id":"themes/tranquilpeak/source/_js/.eslintrc.json","hash":"27d4e7223eee3eca7eb717bea2d28d35714eccbc","modified":1570699468157},{"_id":"themes/tranquilpeak/source/_js/about.js","hash":"2c2e0bf35c8bbaa2b77df593e3425ab5b1ebcf0e","modified":1570699468157},{"_id":"themes/tranquilpeak/source/_js/archives-filter.js","hash":"8b8998b0e67c745a20450001c0739f6977b63309","modified":1570699468158},{"_id":"themes/tranquilpeak/source/_js/categories-filter.js","hash":"a5f3c4b9bbef1c8ec881eb39551060ca95bfbb33","modified":1570699468158},{"_id":"themes/tranquilpeak/source/_js/codeblock-resizer.js","hash":"391c2c9135579ea50c2060e0612e7105e06a8ff7","modified":1570699468158},{"_id":"themes/tranquilpeak/source/_js/fancybox.js","hash":"0b10859e219f65e182ab5b46e53ddb35ecc44e30","modified":1570699468158},{"_id":"themes/tranquilpeak/source/_js/header.js","hash":"c274adf8f8010b9f4ba46896063859ae3e413e97","modified":1570699468158},{"_id":"themes/tranquilpeak/source/_js/post-bottom-bar.js","hash":"11502f8c52489350c857b935a1a63f46d7ca5496","modified":1570699468158},{"_id":"themes/tranquilpeak/source/_js/image-gallery.js","hash":"90efc47246af69b7e17fab6e0bd1578043fcc2b0","modified":1570699468158},{"_id":"themes/tranquilpeak/source/_js/search-modal.js","hash":"7ea9ab668bc3118c28e6212516f366ef764d3550","modified":1570699468159},{"_id":"themes/tranquilpeak/source/_js/share-options.js","hash":"c2046697540786721ff7c4754774f94fcaf32696","modified":1570699468159},{"_id":"themes/tranquilpeak/source/_js/sidebar.js","hash":"18dc623dd237c519bb79ce93283a5446cc11a487","modified":1570699468159},{"_id":"themes/tranquilpeak/source/_js/smartresize.js","hash":"7342a21f94d7bb0525ccbd917d43a6824d7ae63e","modified":1570699468159},{"_id":"themes/tranquilpeak/source/_js/tabbed-codeblocks.js","hash":"465a7a60c609a3b2ac182ac164feea2fea00e0ec","modified":1570699468159},{"_id":"themes/tranquilpeak/source/_js/tags-filter.js","hash":"d33625df51d7b9788eeea338626f04387c96f053","modified":1570699468159},{"_id":"themes/tranquilpeak/tasks/config/bower.js","hash":"2e7716dc43058b4246fb2cbb573152f855b5a228","modified":1570699468160},{"_id":"themes/tranquilpeak/tasks/config/clean.js","hash":"ea70743eb4ed0d9ead68d6fc8b65b9f936229a00","modified":1570699468160},{"_id":"themes/tranquilpeak/tasks/config/cssmin.js","hash":"352185864437728c9c19169f4fec6fc3308e8b6d","modified":1570699468160},{"_id":"themes/tranquilpeak/tasks/config/concat.js","hash":"0c2c4dbbfac52f20a3035a2f8cd1c24f1759b17e","modified":1570699468160},{"_id":"themes/tranquilpeak/tasks/config/exec.js","hash":"33c141cf401fff3d1e251fc48dd2145486ef9465","modified":1570699468160},{"_id":"themes/tranquilpeak/tasks/config/replace.js","hash":"30fbbf51b8b41a70f5e76a335b50565f280f29e0","modified":1570699468160},{"_id":"themes/tranquilpeak/tasks/config/sails-linker.js","hash":"c1103119ec7d1f04cfbb1cda83b40d11e8f2d218","modified":1570699468160},{"_id":"themes/tranquilpeak/tasks/config/sass.js","hash":"79d65bad62ca0c2a8a155a76faa2be3b0c361bf0","modified":1570699468160},{"_id":"themes/tranquilpeak/tasks/config/sync.js","hash":"fbc09d0ed201993bc1918223b8f8ad5b68f50490","modified":1570699468161},{"_id":"themes/tranquilpeak/tasks/config/uglify.js","hash":"e31cc195decf8676047ac32255f99c0ca9c05f67","modified":1570699468161},{"_id":"themes/tranquilpeak/tasks/config/watch.js","hash":"933eecd8a2506c627dbb9a1137305a16dd2d9f9a","modified":1570699468161},{"_id":"themes/tranquilpeak/tasks/register/build.js","hash":"1d95f8cb31f0f1546f0ccdb6d3b35b6d6c5f7af2","modified":1570699468161},{"_id":"themes/tranquilpeak/tasks/register/buildProd.js","hash":"65842e2c17e4587dcba5880040a6780a48a06c35","modified":1570699468161},{"_id":"themes/tranquilpeak/tasks/register/compileAssets.js","hash":"a65122ba0d1a1b6044e3b635a644882577b628ba","modified":1570699468161},{"_id":"themes/tranquilpeak/tasks/register/eslint.js","hash":"718cd8a80d060e2587b84e0e20ceaa39c2cc9411","modified":1570699468161},{"_id":"themes/tranquilpeak/tasks/register/default.js","hash":"80174db9b8a729980770e639e70999ce5a816b78","modified":1570699468161},{"_id":"themes/tranquilpeak/tasks/register/linkAssets.js","hash":"079cd274cb29f9984eb7150d88f61819d2ef6235","modified":1570699468162},{"_id":"themes/tranquilpeak/tasks/register/linkAssetsProd.js","hash":"d0a1b0252db3fa8904063a592e8e0448a0cee590","modified":1570699468162},{"_id":"themes/tranquilpeak/tasks/register/syncAssets.js","hash":"ba579eae4f7791aad96c4f0a287079da5dc855a7","modified":1570699468162},{"_id":"source/_posts/D3/D3-v4-with-Vue-CANVAS-Donut-Chart.md","hash":"85e06fcc8ae9fa9346595a457657a0a3036b84aa","modified":1570699468097},{"_id":"source/_posts/D3/D3-v4-with-Vue-CANVAS-Horizontal-Bar-Chart.md","hash":"679164135c7de34fa958540950c47671284e3c2a","modified":1570699468097},{"_id":"source/_posts/D3/D3-v4-with-Vue-CANVAS-Vertical-Bar-Chart.md","hash":"aebfbd58702990edd2ad7d8fa43508841fa70953","modified":1570699468098},{"_id":"source/_posts/D3/D3-v4-with-Vue-CANVAS-Line-Chart.md","hash":"86a4fa7cca1da8ad43970de5466474fb8a37ee62","modified":1570699468098},{"_id":"source/_posts/D3/D3-v4-with-Vue-SVG-Horizontal-Bar-Chart.md","hash":"6ce2dc16b38d7a3036eefc95c291a2c23558ecae","modified":1570699468098},{"_id":"source/_posts/D3/D3-v4-with-Vue-SVG-Donut-Chart.md","hash":"3fabd8164602f396ac47fece82d4368ba102013c","modified":1570699468098},{"_id":"source/_posts/D3/D3-v4-with-Vue-SVG-Line-Chart.md","hash":"3b2f9c5477da4f33f12ada41dfb151c3a416699a","modified":1570699468098},{"_id":"source/_posts/D3/D3-v4-with-Vue-SVG-VS-CANVAS.md","hash":"c96c9d4c9d0f27981975dd540d6bf461c5267948","modified":1570699468099},{"_id":"source/_posts/D3/D3-v4-with-Vue-SVG-Vertical-Bar-Chart.md","hash":"58d7b1209521799b6d988291909b9e9672ad7635","modified":1570699468099},{"_id":"source/_posts/DotnetCore/NET-Core-3-SPA-with-Vue-Cli-3.md","hash":"3c7df01540e249da17e50bd57c7e44ffe1d4ccec","modified":1572680014568},{"_id":"source/_posts/DotnetCore/NET-Core-2-0-Debug-with-VScode.md","hash":"8cb531640ae64ca29e0759df6761263c888547ee","modified":1570699468099},{"_id":"source/_posts/DotnetCore/NET-Core-Upgrade-2-2-with-Webpack4-Vue.md","hash":"5d309960c83fab1c64caf72c139024f45a2b3ed6","modified":1570699468099},{"_id":"source/_posts/DotnetCore/NET-Core-2-0-SPA-with-Vue-Cli.md","hash":"55965bd38216d39d0ca401d1145b0b1d811fc8c7","modified":1570699468099},{"_id":"source/_posts/DotnetCore/Serverless-Azure-SignalR-with-C-and-Azure-Functions.md","hash":"4d55efcb67c85814843dd4f9c1c7f7b12ec53c18","modified":1570699468100},{"_id":"source/_posts/JS/Grab-Data-To-CSV-By-Using-NodeJS.md","hash":"1f21ccc94e3c087c657e904bf2635aea4d883def","modified":1570699468100},{"_id":"source/_posts/JS/JS-Retry-Function.md","hash":"50896df11711e9534af38d6676d89a2b6a903969","modified":1570699468100},{"_id":"source/_posts/UXUI/2018-My-Sketch-Useful-Plugins.md","hash":"2365b8f10e36adeabc5d9e35acdd8e60b3b20e3a","modified":1570699468101},{"_id":"source/_posts/JS/React-Redux-Practice.md","hash":"063f132c3c78769e2f5fddd64dc91f4e67afc8b2","modified":1570699468100},{"_id":"source/_posts/UXUI/Adobe-XD-New-Feature-Auto-Animate.md","hash":"337951150a41b8c0ef8f394bc2b2b355640a92c7","modified":1570699468101},{"_id":"source/_posts/UXUI/Git-Control-for-Using-Abstract-to-Manage-Sketch-Files.md","hash":"77646cd5628aefce28eb5244b29f35a6866e3f5c","modified":1570699468101},{"_id":"source/_posts/UXUI/Google-Material-Design-Introduction.md","hash":"41e61fc2c256ac432eee14c1ac7158b7e183d98d","modified":1570699468102},{"_id":"source/_posts/UXUI/Google-Material-Studies-Rally.md","hash":"2c8010288f4e518a8c45e77c491ef7c8fc03af2d","modified":1570699468102},{"_id":"source/_posts/UXUI/Google-Material-Studies-Reply.md","hash":"f74272fbda2767799bc6c7d0fc26dbc9e78bfca9","modified":1570699468102},{"_id":"source/_posts/UXUI/Google-Material-Studies-Shrine.md","hash":"e5ef055a9605a254d3e3f9a3322e6b9f38afcfc2","modified":1570699468102},{"_id":"source/_posts/VScode/Use-git-extention-in-VScode-goodbye-sourcetree.md","hash":"a15d4dfeeee1a5083fed7d52b7abac51ebbbff9e","modified":1574502336382},{"_id":"source/_posts/UXUI/Google-Material-Theming-Workflow-Tools.md","hash":"b558bde1bb771ba97c0fd9cac20cbdb95673bf2d","modified":1570699468102},{"_id":"source/_posts/UXUI/UX-UI-Workflow-Tool-in-2018.md","hash":"070423b24cfb37e3deb186851dccc0335f3c4bad","modified":1570699468102},{"_id":"source/_posts/Webpack/Webpack-3-Tutorial-HTML-Webpack-Plugin.md","hash":"763d7fa8e8df66e7f37772d1959fcde2d3f72a70","modified":1570699468103},{"_id":"source/_posts/Webpack/Webpack-3-Tutorial-Installation-and-Config.md","hash":"e72d1b2d4a7233663e2dc1390e58f9464b630388","modified":1570699468103},{"_id":"source/_posts/Webpack/Webpack-3-Tutorial-Webpack-Dev-Server.md","hash":"2a64d3c9e1a27143232c6515b856ae198e3f6b76","modified":1570699468103},{"_id":"source/_posts/Webpack/Webpack-3-Tutorial-Style-CSS-and-Sass-loaders.md","hash":"3e709ecf8febabbefa02a158a17716e2a3fc7c6c","modified":1570699468103},{"_id":"source/_posts/Webpack/Webpack-3-Tutorial-add-Babel-loader-to-write-js-use-ES6.md","hash":"9917b7c6960311966f7a3edfacdcec87d0863e77","modified":1570699468103},{"_id":"source/_posts/Webpack/Webpack-3-Tutorial-add-PUG-templates-to-write-html.md","hash":"a0c138ddb55eb2eae1e203eb09ad96a1981e1454","modified":1570699468104},{"_id":"themes/tranquilpeak/layout/_partial/post/disqus.ejs","hash":"9e0d238ed918e3138d5a9bb23a90408669e19169","modified":1570699468127},{"_id":"themes/tranquilpeak/layout/_partial/post/category.ejs","hash":"d4b26aa8c66aa8dbfae7a4aafed874745efb2f8e","modified":1570699468127},{"_id":"themes/tranquilpeak/layout/_partial/post/actions.ejs","hash":"7f34de188df5a6ab277e0bd51298e979eaaacdee","modified":1570699468127},{"_id":"themes/tranquilpeak/layout/_partial/post/duoshuo.ejs","hash":"992368f8863f34d1dccf90c0cabc33d5dcdbe92a","modified":1570699468128},{"_id":"themes/tranquilpeak/layout/_partial/post/gallery.ejs","hash":"77575c186f47a938c58b8a63c2572787642d538b","modified":1570699468128},{"_id":"themes/tranquilpeak/layout/_partial/post/header-cover.ejs","hash":"4d3a73d0c6f26769f778d02a559e5055ef1ee0ca","modified":1570699468128},{"_id":"themes/tranquilpeak/layout/_partial/post/gitment.ejs","hash":"1dcfdca4d20bab5a43bda44cf37df506ab3a0fb7","modified":1570699468128},{"_id":"themes/tranquilpeak/layout/_partial/post/header.ejs","hash":"4f6bf2608b78b5c4432699474a40810a53350676","modified":1570699468128},{"_id":"themes/tranquilpeak/layout/_partial/post/meta.ejs","hash":"709aeec54313eae49c335714e39c2849952a56db","modified":1570699468128},{"_id":"themes/tranquilpeak/layout/_partial/post/tag.ejs","hash":"2a52f38fa359f8ec8ae776e44e92c48795e31272","modified":1570699468129},{"_id":"themes/tranquilpeak/layout/_partial/post/share-options.ejs","hash":"b9b8b62345194f07542332771e71dad37f991847","modified":1570699468129},{"_id":"themes/tranquilpeak/source/_css/base/_base.scss","hash":"f0a46b090a0a4dd21edfd89095761895c5278ecb","modified":1570699468134},{"_id":"themes/tranquilpeak/source/_css/components/_alert.scss","hash":"3644442dfc16aa8a6894db1a605e325c856d44a9","modified":1570699468134},{"_id":"themes/tranquilpeak/source/_css/components/_archive.scss","hash":"6b7be2269d014c6c742a2c29c6a2aca39a383250","modified":1570699468134},{"_id":"themes/tranquilpeak/source/_css/components/_box.scss","hash":"eebaacf55234fdaa156edb7dc4d9a4f382eaf4d4","modified":1570699468135},{"_id":"themes/tranquilpeak/source/_css/components/_button.scss","hash":"ea9bd41800fe04860f7e892c17010588b2563a06","modified":1570699468135},{"_id":"themes/tranquilpeak/source/_css/components/_caption.scss","hash":"dad2683f5f3235b335eebcbda3db59a1cfbb2283","modified":1570699468135},{"_id":"themes/tranquilpeak/source/_css/components/_code.scss","hash":"0a14fe197c221a4d4d91ee9d41541ce7969043ca","modified":1570699468135},{"_id":"themes/tranquilpeak/source/_css/components/_fancybox.scss","hash":"e162e2ecafc2be70238a9885fd57a9a7ad642757","modified":1570699468135},{"_id":"themes/tranquilpeak/source/_css/components/_figure.scss","hash":"01152043de4e23f6595835941732563f09a033f3","modified":1570699468135},{"_id":"themes/tranquilpeak/source/_css/components/_form.scss","hash":"368187e0c5f1a57d8c423f2ec23e897ee94a1a27","modified":1570699468135},{"_id":"themes/tranquilpeak/source/_css/components/_hide.scss","hash":"c2f5ed51086b9ea5d94ff548bdc4653ea5cd7912","modified":1570699468135},{"_id":"themes/tranquilpeak/source/_css/components/_highlight-text.scss","hash":"7a7a8a78f75d6c43a46fd020e2d44546e716751b","modified":1570699468136},{"_id":"themes/tranquilpeak/source/_css/components/_icon.scss","hash":"60dc972bcd81b4f95ab2c067ca910a5bf324d907","modified":1570699468136},{"_id":"themes/tranquilpeak/source/_css/components/_link.scss","hash":"7460155ebf7ce0d3e9acd090b6b99673127fd0be","modified":1570699468136},{"_id":"themes/tranquilpeak/source/_css/components/_image-gallery.scss","hash":"f683e80d69a0d5ac4e832d236ff5576cc749858a","modified":1570699468136},{"_id":"themes/tranquilpeak/source/_css/components/_main-content.scss","hash":"90c46c87289a8b3cf7c14d36900f5ced9db36c25","modified":1570699468136},{"_id":"themes/tranquilpeak/source/_css/components/_markdown.scss","hash":"ba6d7e8f84b3b6dfef339f28b5c6ae372ead674f","modified":1570699468136},{"_id":"themes/tranquilpeak/source/_css/components/_media.scss","hash":"84aa03c01b741bbeb31c6b48122930f30ad40de3","modified":1570699468136},{"_id":"themes/tranquilpeak/source/_css/components/_modal.scss","hash":"bc56f823cd67b2ed65b5cf2c3e1851fa3e82f0f9","modified":1570699468137},{"_id":"themes/tranquilpeak/source/_css/components/_pagination.scss","hash":"809b9330a0e2d79c9285c1a452d61648248c8b70","modified":1570699468137},{"_id":"themes/tranquilpeak/source/_css/components/_post-actions.scss","hash":"6ecd72369cf03f59cfe749eab2712c5201cadd72","modified":1570699468137},{"_id":"themes/tranquilpeak/source/_css/components/_post-header-cover.scss","hash":"c4bf950602ccb3fbdad54938979651a7b488236e","modified":1570699468137},{"_id":"themes/tranquilpeak/source/_css/components/_post.scss","hash":"1607c8580c110466993bd09362b879a4b1eb1d8a","modified":1570699468137},{"_id":"themes/tranquilpeak/source/_css/components/_postShorten.scss","hash":"4b545d89a2c4ce9857c2d83c942b3d78c09d8296","modified":1570699468137},{"_id":"themes/tranquilpeak/source/_css/components/_pullquote.scss","hash":"86bc35ba358d1340debc459a344f5f6d34acaa42","modified":1570699468137},{"_id":"themes/tranquilpeak/source/_css/components/_tag.scss","hash":"ddd1c2ce17f0116655bdacda598e7f1d6fd18262","modified":1570699468138},{"_id":"themes/tranquilpeak/source/_css/components/_share-options-bar.scss","hash":"8965e62f215eff3209d9b6d3ff7b9203aa5f3974","modified":1570699468138},{"_id":"themes/tranquilpeak/source/_css/components/_text.scss","hash":"7b38858248da2f73cf64c5949fd475a8e0a246ae","modified":1570699468138},{"_id":"themes/tranquilpeak/source/_css/components/_tooltip.scss","hash":"f33ad3e677761af1ceb42d337691b8b354ff70bd","modified":1570699468138},{"_id":"themes/tranquilpeak/source/_css/layouts/_blog.scss","hash":"2450e07594a5e5186170fb5b5b157cc340808a9a","modified":1570699468138},{"_id":"themes/tranquilpeak/source/_css/components/_video.scss","hash":"f9727fd300d73e8844abf0e2575c45e6c7769333","modified":1570699468138},{"_id":"themes/tranquilpeak/source/_css/layouts/_about.scss","hash":"52bdadfccaf3bc2082412348cd419c9da5793530","modified":1570699468138},{"_id":"themes/tranquilpeak/source/_css/layouts/_bottom-bar.scss","hash":"c7816c7ebc253d46466355860ead6669a3707ac6","modified":1570699468139},{"_id":"themes/tranquilpeak/source/_css/layouts/_cover.scss","hash":"03a951c9b35dd4e35456caa36950e6d6bef77ac3","modified":1570699468139},{"_id":"themes/tranquilpeak/source/_css/layouts/_footer.scss","hash":"645161942c66e6afbd666b4755337a6a6261e5e0","modified":1570699468139},{"_id":"themes/tranquilpeak/source/_css/layouts/_header.scss","hash":"d840a4be850cb258167ee1081e1b288dc64b3d2c","modified":1570699468139},{"_id":"themes/tranquilpeak/source/_css/layouts/_main.scss","hash":"ee4648502b355db51fc6cb7b05375003331f2f6e","modified":1570699468139},{"_id":"themes/tranquilpeak/source/_css/layouts/_sidebar.scss","hash":"facaff0ca816a4ace67c7689e4286e88eb1010c2","modified":1570699468139},{"_id":"themes/tranquilpeak/source/_css/pages/_search.scss","hash":"5f7cde0b68156ea802c3caf6cd673cab948b09d9","modified":1570699468140},{"_id":"themes/tranquilpeak/source/_css/themes/_hljs-custom.scss","hash":"a0ffab53db35bbd4881aeb077400cba55551f3bd","modified":1570699468140},{"_id":"themes/tranquilpeak/source/_css/themes/_hljs-tranquilpeak.scss","hash":"72bb30af91d08dbbd4092271eef288c40eeb7dbb","modified":1570699468140},{"_id":"themes/tranquilpeak/source/_css/utils/_fonts.scss","hash":"b8c739d8d7bb435f7ad307b6229c99c4828328ee","modified":1570699468140},{"_id":"themes/tranquilpeak/source/_css/utils/_variables.scss","hash":"f85f996b36a56a07d927e58ebcfffd9e21beaf6c","modified":1570699468140},{"_id":"themes/tranquilpeak/source/_css/utils/mixins/_bottom-bar.scss","hash":"ab28b4d66f021e44d7a46a76157c6a2b5fd23496","modified":1570699468141},{"_id":"themes/tranquilpeak/source/_css/utils/mixins/_button.scss","hash":"70c64560144d7d6015bbedeca0531258f9bafa07","modified":1570699468141},{"_id":"themes/tranquilpeak/source/_css/utils/mixins/_category.scss","hash":"8cfc45772365e537949a4cd20cfa2a79e1a75dc8","modified":1570699468141},{"_id":"themes/tranquilpeak/source/_css/utils/mixins/_form.scss","hash":"14026f13b54ef9f2cd7109cf1bca43040816e542","modified":1570699468141},{"_id":"themes/tranquilpeak/source/_css/utils/mixins/_header.scss","hash":"52de2cb5f49a3b5748557fe2d25791ce52457d62","modified":1570699468141},{"_id":"themes/tranquilpeak/source/_css/utils/mixins/_opacity.scss","hash":"cfc9905b6df3b5100a30b5c47fd331068f238f97","modified":1570699468141},{"_id":"themes/tranquilpeak/source/_css/utils/mixins/_main.scss","hash":"0ad55a6191d0a533917845006ceae329353c0b90","modified":1570699468141},{"_id":"themes/tranquilpeak/source/_css/utils/mixins/_post-header-cover.scss","hash":"ecd9078372d8bd1b7f4979bae3251e8efb345a9b","modified":1570699468141},{"_id":"themes/tranquilpeak/source/_css/utils/mixins/_prefix.scss","hash":"5e04cd54ba375f69c97b62b7d4e535118ec78177","modified":1570699468142},{"_id":"themes/tranquilpeak/source/_css/utils/mixins/_share-options-bar.scss","hash":"06f84bceb82df4d3bda64144f6fe4ad8e3e45f89","modified":1570699468142},{"_id":"themes/tranquilpeak/source/_css/utils/mixins/_tag.scss","hash":"c8a87e586e27f999ffa46f273f78a812f1cf2f0a","modified":1570699468142},{"_id":"themes/tranquilpeak/source/_css/utils/mixins/_sidebar.scss","hash":"f9ef0a564553299225e9048462a0bea8760a2348","modified":1570699468142},{"_id":"themes/tranquilpeak/source/_images/cover-v1.2.0.jpg","hash":"a98b9bf4d6be3af0156c0b6e781f067e343a682d","modified":1570699468145},{"_id":"themes/tranquilpeak/source/_images/cover.jpg","hash":"5587d8d41b4b8c01eccd9ad9511849ef8dd69036","modified":1570699468157},{"_id":"public/atom.xml","hash":"4292cc45777e629250dfbcf7ee5502f22c227ec4","modified":1574502467694},{"_id":"public/all-categories/index.html","hash":"874eb3cfcf07ae5f4b788d40019c4e71b55494fb","modified":1574502468050},{"_id":"public/all-archives/index.html","hash":"9632b6c72e21bcd01572585826a2270800a1639b","modified":1574502468058},{"_id":"public/all-tags/index.html","hash":"12c67fc5ab61cbbf4b2f00de4793ebe0b91cdff3","modified":1574502468060},{"_id":"public/3017/12/03/Resume/index.html","hash":"908c2438fe4c3f3c9bcd63ed3f3a1c2f694f2748","modified":1574502468060},{"_id":"public/3017/12/01/Portfolio/index.html","hash":"8abd3281482c57233a37192d51c549b8e508ae7d","modified":1574502468060},{"_id":"public/2019/10/10/DotnetCore/NET-Core-3-SPA-with-Vue-Cli-3/index.html","hash":"121cdef3d839c744101f4973a358ef684d6644b0","modified":1574502468060},{"_id":"public/2019/09/10/DotnetCore/Serverless-Azure-SignalR-with-C-and-Azure-Functions/index.html","hash":"2ca87b021afc323c8efffd1b003dc38a98549121","modified":1574502468060},{"_id":"public/2019/07/04/JS/Grab-Data-To-CSV-By-Using-NodeJS/index.html","hash":"9026e80b952a1506cc4830d1d9b64604adb2b004","modified":1574502468060},{"_id":"public/2019/07/03/JS/React-Redux-Practice/index.html","hash":"526f8fc14cffffc190634d3723d87117a3f7a56d","modified":1574502468060},{"_id":"public/2019/06/07/UXUI/Google-Material-Studies-Shrine/index.html","hash":"83332f5f23f2f7d4340af965c72b6a86b93d26cb","modified":1574502468061},{"_id":"public/2019/05/01/JS/JS-Retry-Function/index.html","hash":"d9cfdd2a9215fab6deaf53aeb63262c2e9ab46e3","modified":1574502468061},{"_id":"public/2019/05/01/UXUI/Google-Material-Studies-Reply/index.html","hash":"b99eada676f76f0d7816f3629e1cf0747ab5aca5","modified":1574502468061},{"_id":"public/2019/04/05/UXUI/Google-Material-Studies-Rally/index.html","hash":"5b096f6e25739a64ed350f75a26d23be36dfd55b","modified":1574502468061},{"_id":"public/2019/03/01/UXUI/Google-Material-Theming-Workflow-Tools/index.html","hash":"4ccfa1d8c1db2f1a602980add805fc468d46084e","modified":1574502468061},{"_id":"public/2019/02/09/UXUI/Google-Material-Design-Introduction/index.html","hash":"caec9715183b2f39966d21f27d3f1af1ca6dc90c","modified":1574502468061},{"_id":"public/2019/01/01/DotnetCore/NET-Core-Upgrade-2-2-with-Webpack4-Vue/index.html","hash":"b8d646092528d2f35c61fabd40647bb603a1e8bb","modified":1574502468061},{"_id":"public/2018/12/02/UXUI/Adobe-XD-New-Feature-Auto-Animate/index.html","hash":"474b9ad4b2f5a926bcf3b24229cebd63f57ff0a2","modified":1574502468061},{"_id":"public/2018/11/04/UXUI/2018-My-Sketch-Useful-Plugins/index.html","hash":"7922c5ead641512881fbec86ba33301480a00628","modified":1574502468061},{"_id":"public/2018/11/04/UXUI/Git-Control-for-Using-Abstract-to-Manage-Sketch-Files/index.html","hash":"79542efe59856270a06e234b9c7fe6c70929572c","modified":1574502468061},{"_id":"public/2018/09/13/UXUI/UX-UI-Workflow-Tool-in-2018/index.html","hash":"daa9e300753ca25780cd82a2cd9c9b673515c939","modified":1574502468061},{"_id":"public/2018/09/11/D3/D3-v4-with-Vue-CANVAS-Donut-Chart/index.html","hash":"0e83e06a5fcdef02e43cd9bbba73e63807cb9641","modified":1574502468062},{"_id":"public/2018/08/05/D3/D3-v4-with-Vue-CANVAS-Vertical-Bar-Chart/index.html","hash":"9107a08707a946df1ba942bd73caa86761bb43a2","modified":1574502468062},{"_id":"public/2018/07/07/D3/D3-v4-with-Vue-CANVAS-Horizontal-Bar-Chart/index.html","hash":"20bdc0b428dcb5feaf9bfee286cacab2f61091b9","modified":1574502468062},{"_id":"public/2018/06/17/D3/D3-v4-with-Vue-SVG-VS-CANVAS/index.html","hash":"919ed6586e20d91bca51006c92fac1cff0ed5bb2","modified":1574502468062},{"_id":"public/2018/06/16/D3/D3-v4-with-Vue-CANVAS-Line-Chart/index.html","hash":"9896aa682b9d38ef7ff3756a7ec3970117894e9c","modified":1574502468062},{"_id":"public/2018/05/01/D3/D3-v4-with-Vue-SVG-Donut-Chart/index.html","hash":"116d362247b032e7db1bb5d17f20cab700c98b17","modified":1574502468062},{"_id":"public/2018/04/06/D3/D3-v4-with-Vue-SVG-Vertical-Bar-Chart/index.html","hash":"77137c6a44222525abba18119db128b2f03b94ca","modified":1574502468062},{"_id":"public/2018/03/04/D3/D3-v4-with-Vue-SVG-Horizontal-Bar-Chart/index.html","hash":"27fa97ccb4c39c4e63a2b39cb201a17b5e78d2d1","modified":1574502468062},{"_id":"public/2018/02/03/D3/D3-v4-with-Vue-SVG-Line-Chart/index.html","hash":"96721381d41003beaa6d7dd8f71ca13792d418f7","modified":1574502468062},{"_id":"public/2017/12/25/DotnetCore/NET-Core-2-0-Debug-with-VScode/index.html","hash":"375c1e354f5385090ed9142ff016f78f308abfb9","modified":1574502468063},{"_id":"public/2017/12/02/DotnetCore/NET-Core-2-0-SPA-with-Vue-Cli/index.html","hash":"82e085d154c87bd9cab1fce5b3c6be94a98743a3","modified":1574502468063},{"_id":"public/2017/11/01/Webpack/Webpack-3-Tutorial-add-PUG-templates-to-write-html/index.html","hash":"d77ede209a7ecbe6bbf936c1e1734f64c7e657c7","modified":1574502468063},{"_id":"public/2017/10/01/Webpack/Webpack-3-Tutorial-add-Babel-loader-to-write-js-use-ES6/index.html","hash":"d0f7e02ffc614d0347328cffd3790f5c045359a3","modified":1574502468063},{"_id":"public/2017/09/02/Webpack/Webpack-3-Tutorial-Webpack-Dev-Server/index.html","hash":"efe48616be404b9d919b2700684c21614ada10da","modified":1574502468063},{"_id":"public/2017/06/30/Webpack/Webpack-3-Tutorial-HTML-Webpack-Plugin/index.html","hash":"79ab6774f189aa5210ab23eb8aa30b57aff264de","modified":1574502468063},{"_id":"public/2017/08/01/Webpack/Webpack-3-Tutorial-Style-CSS-and-Sass-loaders/index.html","hash":"732b3303ca8468c5491e86e60e254fea3feb6e04","modified":1574502468063},{"_id":"public/2017/06/14/Webpack/Webpack-3-Tutorial-Installation-and-Config/index.html","hash":"1e61b5bbc6e784251f8bafa7dcc33758ae6bbd38","modified":1574502468063},{"_id":"public/categories/Portfolio/index.html","hash":"1dd7ca70670acdd996f33867febfa44a9ef7314a","modified":1574502468063},{"_id":"public/categories/Resume/index.html","hash":"f585cab048d8e5328a18a9f22436d73d0eef48fd","modified":1574502468063},{"_id":"public/categories/D3/index.html","hash":"16d7d1e7ed61b4794e02f1b392fa6668e489dd67","modified":1574502468063},{"_id":"public/categories/NET-Core/index.html","hash":"cc3c17aee0875f688bb78e76794a1bab0e84e866","modified":1574502468064},{"_id":"public/categories/JS/index.html","hash":"ca7f1d253c624478b25e2b33939ffff589d33a9d","modified":1574502468064},{"_id":"public/categories/UXUI/index.html","hash":"1ccff27c6afd66363178ba87554fcbcda472af66","modified":1574502468064},{"_id":"public/categories/UXUI/Material-Design/index.html","hash":"ac0062c297413076340ffeb98365e83d953771e0","modified":1574502468064},{"_id":"public/categories/JS/React/index.html","hash":"1efdf080358c792f50172581200ae09d4938eacb","modified":1574502468064},{"_id":"public/categories/Webpack/index.html","hash":"e06acd95658d93a849d8ee8f0b91fa5fdaa005cd","modified":1574502468064},{"_id":"public/archives/index.html","hash":"49273051865dea812226f3fbab582904eaf1da85","modified":1574502468064},{"_id":"public/archives/page/2/index.html","hash":"55203735c1d87a0f062b24c63c470278621497ca","modified":1574502468064},{"_id":"public/archives/page/3/index.html","hash":"9254ad6c7f733caadeb8359736947f11bf2dfd86","modified":1574502468064},{"_id":"public/archives/page/4/index.html","hash":"8ba4ec888c320030446b55d672c88f737d41ade6","modified":1574502468064},{"_id":"public/archives/2017/index.html","hash":"b553655c943d91e0429b72ac49896599374528db","modified":1574502468064},{"_id":"public/archives/2017/06/index.html","hash":"5ef2631ba75cd957048b4cd5c371c283df541ce8","modified":1574502468064},{"_id":"public/archives/2017/08/index.html","hash":"c20482f05d61437f0262b79cb4c19d75053bca63","modified":1574502468065},{"_id":"public/archives/2017/09/index.html","hash":"a61b0e8342c97d181e06ee960a2844aa15969186","modified":1574502468065},{"_id":"public/archives/2017/10/index.html","hash":"99dde7e50c5732eebaa18f30b7054edf445b8aad","modified":1574502468065},{"_id":"public/archives/2017/11/index.html","hash":"fba384f57163f5a25476760282b724208b962981","modified":1574502468065},{"_id":"public/archives/2017/12/index.html","hash":"a849dedf3cd2bd6a611ef11b9766203d672afd55","modified":1574502468065},{"_id":"public/archives/2018/index.html","hash":"796ef5c44e82c081bc13c87746b76357de4b5515","modified":1574502468065},{"_id":"public/archives/2018/page/2/index.html","hash":"7bf01c2e4810337c14fa3f26fee8336698c08977","modified":1574502468065},{"_id":"public/archives/2018/02/index.html","hash":"40927fc757814fced8bd744a8ecc7f94271725d4","modified":1574502468065},{"_id":"public/archives/2018/03/index.html","hash":"743d61a5dde6b641194018025b5227f574c24595","modified":1574502468065},{"_id":"public/archives/2018/04/index.html","hash":"3d32db139b9318da16cf60b8000b22d694fe8ac7","modified":1574502468065},{"_id":"public/archives/2018/05/index.html","hash":"25ec2a0736395ee284ed00c7420d03154ebd62a1","modified":1574502468066},{"_id":"public/archives/2018/06/index.html","hash":"c1ff390aea6560bb78dd542835a67769dcd452ed","modified":1574502468066},{"_id":"public/archives/2018/07/index.html","hash":"a9118786d4328a906e941e2b8d923b41f59aa42f","modified":1574502468066},{"_id":"public/archives/2018/08/index.html","hash":"b294fa1936479e034ad3522f1ec18ee70b0cf7b7","modified":1574502468066},{"_id":"public/archives/2018/09/index.html","hash":"a2c79da81fb5f09ec9b801cd8bb1908a95554c87","modified":1574502468066},{"_id":"public/archives/2018/11/index.html","hash":"7f0ecb6f3c75c1a3d321e318b7e33d5e941f2340","modified":1574502468066},{"_id":"public/archives/2018/12/index.html","hash":"b6e738f106631e6e9419868051490ccff8a3a05b","modified":1574502468066},{"_id":"public/archives/2019/index.html","hash":"ea4aef5f934f9d63e83e70d85ef49470a786a45d","modified":1574502468066},{"_id":"public/archives/2019/page/2/index.html","hash":"db5b678daa767ad844bb67c31d802e4b9319fbaf","modified":1574502468066},{"_id":"public/archives/2019/01/index.html","hash":"7c97bca5086fad76f873e9136d3d1a6b54b5decf","modified":1574502468066},{"_id":"public/archives/2019/02/index.html","hash":"2a97e3e18f430e3c4583999b0afd92478d49d6d0","modified":1574502468066},{"_id":"public/archives/2019/03/index.html","hash":"874b85bb6d10b4f38bffe81820a06a3de69b2de6","modified":1574502468067},{"_id":"public/archives/2019/04/index.html","hash":"27701c68fc9d5e5daf60ff798c761102da0ea6f4","modified":1574502468067},{"_id":"public/archives/2019/05/index.html","hash":"9ec4e7ee823118cf5e239a4e6cb2c870e43e916c","modified":1574502468067},{"_id":"public/archives/2019/06/index.html","hash":"2359e29c0fe2739e5d579b8cd4ebdcd673e58d22","modified":1574502468067},{"_id":"public/archives/2019/07/index.html","hash":"e13cb86db0afc3212a8cc13b70903e022bab5a37","modified":1574502468067},{"_id":"public/archives/2019/09/index.html","hash":"db1ac56813f4112b73c322cbc082a83145f9677b","modified":1574502468067},{"_id":"public/archives/2019/10/index.html","hash":"d756e365218aa48b23f171e6ac1e261e915357b0","modified":1574502468067},{"_id":"public/archives/3017/index.html","hash":"62bca40a02d923fcc491c90019c2f2ddeb9fa903","modified":1574502468067},{"_id":"public/archives/3017/12/index.html","hash":"c27f5aca52decc997988f3d8a25642460f66ffdc","modified":1574502468067},{"_id":"public/index.html","hash":"36b31ffec64df718fe87535c8a16095a5b2d880c","modified":1574502468067},{"_id":"public/page/2/index.html","hash":"40da55408cf94e521442680b437560167a441bdc","modified":1574502468067},{"_id":"public/page/3/index.html","hash":"d88b8609c2e33233e4f9ae4d458dabeb25866171","modified":1574502468067},{"_id":"public/page/4/index.html","hash":"b26836d08aae3499048e647396d907e757a1d86e","modified":1574502468067},{"_id":"public/tags/Portfolio/index.html","hash":"726160f5a259aef8541d46c75a3387af8dfd8699","modified":1574502468067},{"_id":"public/tags/作品集/index.html","hash":"de2450934a0deaf0f1f7e4d2ca544a4939c1c5cd","modified":1574502468068},{"_id":"public/tags/D3/index.html","hash":"cb28cf57123e6ca7563f37ab3e8e91b82876e1e3","modified":1574502468068},{"_id":"public/tags/Vue/index.html","hash":"3fa311a0c5619c0f34203dc4c073e599a8bb58da","modified":1574502468068},{"_id":"public/tags/Vue/page/2/index.html","hash":"8f89951991d20887185464792473b9df926178fe","modified":1574502468068},{"_id":"public/tags/CANVAS/index.html","hash":"ee927a9afe56c9e8973999bec6dc0fbace103bd7","modified":1574502468068},{"_id":"public/tags/SVG/index.html","hash":"f153b0adb9ad81a21275b3f2b9898f7395c38646","modified":1574502468068},{"_id":"public/tags/NET-Core/index.html","hash":"345dd22cdc6c72c9c03b1216302241aaf5304a8e","modified":1574502468068},{"_id":"public/tags/dotnet/index.html","hash":"6a6f8ad6416a005c3e3048b9d2f6b141f92aca4a","modified":1574502468068},{"_id":"public/tags/Webpack/index.html","hash":"673ecdf47d2224bf6a53b5f8a68f85f982a3ec8d","modified":1574502468068},{"_id":"public/tags/SPA/index.html","hash":"8dca6fa954f673faa2fe2ec86812b44774816d1d","modified":1574502468068},{"_id":"public/tags/MVC/index.html","hash":"c0ccd39a212d1800e71b102bd1f20817656bf6d1","modified":1574502468068},{"_id":"public/tags/VScode/index.html","hash":"dd807a74b58762e7f6ee92cba9de5e8d6cf87b0f","modified":1574502468068},{"_id":"public/tags/JS/index.html","hash":"73a9524a9c7b9e57ce8ade13931b28914a1401b8","modified":1574502468068},{"_id":"public/tags/SignalR/index.html","hash":"15d52235ef517364349042cd18156b4b99c114ef","modified":1574502468069},{"_id":"public/tags/Serverless/index.html","hash":"2fa63eacc93454df819c53f8f25abe5e80455962","modified":1574502468069},{"_id":"public/tags/Azure-Functions/index.html","hash":"ea7c2ca68ed9816e038a8bee02fec319acacc981","modified":1574502468069},{"_id":"public/tags/C/index.html","hash":"6763ca733f7df7ae8b27c1159c4eae511df7ae65","modified":1574502468069},{"_id":"public/tags/Sketch/index.html","hash":"adad7461b1a22f4f07fa3711ca97ccf56f671b9c","modified":1574502468069},{"_id":"public/tags/UX/index.html","hash":"6ed130063e00bf68760b051cb9b7ff049141972e","modified":1574502468069},{"_id":"public/tags/UI/index.html","hash":"9af5d09ffbce606a8969cde9deba4a550a610875","modified":1574502468069},{"_id":"public/tags/React/index.html","hash":"696bf083339da2ef893396758ca39a2be88284c8","modified":1574502468069},{"_id":"public/tags/Redux/index.html","hash":"79e4018e97c0e29bbaacea1b1954b53219db0d42","modified":1574502468069},{"_id":"public/tags/Adobe-XD/index.html","hash":"2d48f355cdac698347e9fc4cec9617b96d093751","modified":1574502468069},{"_id":"public/tags/Abstract/index.html","hash":"64ac7d3deb6058d1a141b114a1e17eb5c5c6efee","modified":1574502468069},{"_id":"public/tags/Material-Design/index.html","hash":"d1d0bc4161794e7278502fbfd4960c989dd66d5e","modified":1574502468069},{"_id":"public/2019/11/23/VScode/Use-git-extention-in-VScode-goodbye-sourcetree/index.html","hash":"3f6fca21ea620350139539f728d4465adef85db0","modified":1574502468072},{"_id":"public/categories/VScode/index.html","hash":"c155afd223c1b5c41b6d07bd3fc3966a0a8fb7cf","modified":1574502468072},{"_id":"public/archives/2019/11/index.html","hash":"4e59bd927c6e1598f27fc60d65980f6ecd36eb95","modified":1574502468072},{"_id":"public/tags/Git/index.html","hash":"7d9080504b660c21897d8abab5471dacc24b1d16","modified":1574502468072}],"Category":[{"name":"Portfolio","_id":"ck3bbu73f0004tudh8eanbujk"},{"name":"Resume","_id":"ck3bbu73i0007tudh97x28w34"},{"name":"D3","_id":"ck3bbu74a000ftudhguzmo7xf"},{"name":".NET Core","_id":"ck3bbu74n0013tudh3jtiu3y6"},{"name":"JS","_id":"ck3bbu74v001ptudhqzgglehp"},{"name":"UXUI","_id":"ck3bbu74y001xtudht7g33y1h"},{"name":"Material Design","parent":"ck3bbu74y001xtudht7g33y1h","_id":"ck3bbu759002rtudhrvv9yuuf"},{"name":"VScode","_id":"ck3bbu75f003htudhhm365qbq"},{"name":"React","parent":"ck3bbu74v001ptudhqzgglehp","_id":"ck3bbu75f003otudhc66pw2z0"},{"name":"Webpack","_id":"ck3bbu75h003ytudhojb3md5w"}],"Data":[],"Page":[{"title":"all-categories","layout":"all-categories","comments":0,"_content":"","source":"all-categories/index.md","raw":"---\ntitle: \"all-categories\"\nlayout: \"all-categories\"\ncomments: false\n---\n","date":"2019-10-10T09:24:28.104Z","updated":"2019-10-10T09:24:28.104Z","path":"all-categories/index.html","_id":"ck3bbu73c0001tudhrx8s83de","content":"","site":{"data":{}},"thumbnailImageUrl":null,"excerpt":"","more":""},{"title":"all-archives","layout":"all-archives","comments":0,"_content":"","source":"all-archives/index.md","raw":"---\ntitle: \"all-archives\"\nlayout: \"all-archives\"\ncomments: false\n---\n","date":"2019-10-10T09:24:28.104Z","updated":"2019-10-10T09:24:28.104Z","path":"all-archives/index.html","_id":"ck3bbu73e0003tudhnz6m2xic","content":"","site":{"data":{}},"thumbnailImageUrl":null,"excerpt":"","more":""},{"title":"all-tags","layout":"all-tags","comments":0,"_content":"","source":"all-tags/index.md","raw":"---\ntitle: \"all-tags\"\nlayout: \"all-tags\"\ncomments: false\n---\n","date":"2019-10-10T09:24:28.104Z","updated":"2019-10-10T09:24:28.104Z","path":"all-tags/index.html","_id":"ck3bbu73h0006tudh1myiv9xf","content":"","site":{"data":{}},"thumbnailImageUrl":null,"excerpt":"","more":""}],"Post":[{"title":"Anny Chang's Portfolio - 作品集","thumbnailImage":"https://images.unsplash.com/photo-1505330622279-bf7d7fc918f4?auto=format&fit=crop&w=1000&h=200&q=80&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D","thumbnailImagePosition":"bottom","coverImage":"https://images.unsplash.com/photo-1505330622279-bf7d7fc918f4?auto=format&fit=crop&w=1650&q=80&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D","coverMeta":"out","date":"3017-11-30T16:00:00.000Z","updated":"2019-10-09T16:00:00.000Z","_content":"\nMy portfolio.\n\n<!--more-->\n\n# Design Collection\n\n## Behance: [https://www.behance.net/annilla](https://www.behance.net/annilla)\n\n# Web Collection\n\n| 作品 | 分類 | 內容 |\n| --- | --- | --- |\n| 系統 | 公司 | Depanel (Web) |\n| 系統 | 公司 | IND4 (Web) |\n| 系統 | 公司 | SSO (Web) |\n| 系統 | 公司 | OPscan (Web) |\n| 網頁 | 公司 | Online User Manual (Hexo) |\n| 網頁 | 公司 | Reflow Supplement Page (Web) |\n| 系統 | 公司 | System Profile Management (Web) |\n| 系統 | 公司 | NXT (Web) |\n| 系統 | 公司 | Workflow Compliance (Web) |\n| 網頁 | 公司 | Kingston Mobile Team Portal (Hexo) |\n| 系統 | 公司 | B2B (Web) |\n| 系統 | 公司 | Material Requirement Planning (Web) |\n| 系統 | 公司 | Empolyee Authentication Service (Web) |\n| 系統 | 公司 | Notes SignOff APP (Mobile Web App) |\n| 系統 | 公司 | Quotation System (Web & iOS App Design) |\n| 網站 | 綜合 | [JUKSY 街星](https://www.juksy.com/) |\n| 網頁 | 展覽 | [《復仇者聯盟》世界巡迴展](https://www.juksy.com/events/avengersstation) |\n| 網頁 | 電影 | [《金剛戰士》Power Rangers GO GO！](https://www.juksy.com/events/MMPR2017) |\n| 網頁 | 名人 | [放肆越限 ● I Dare You](https://www.juksy.com/events/idareyoujune) - 陳建州 & 四葉草 |\n| 網頁 | 名人 | [回家才DOPE ● Home Sweet Home](https://www.juksy.com/events/dope2017may) - 兄弟本色 & 邵雨薇 |\n| 網頁 | 名人 | [南北潮什麼 / From North to South](https://www.juksy.com/events/northsouth2017April) - 盧廣仲 & 柯佳嬿 |\n| 網頁 | 名人 | [瘋面人物 / Out of control](https://www.juksy.com/events/outofcontrol2017) - 許瑋甯 & 吳慷仁 |\n| 網頁 | 名人 | [我單故我在 Valentine, So what?](https://www.juksy.com/events/month1702valentine/) - 藍正龍 |\n| 網頁 | 名人 | [人生F5鍵 Reborn](https://www.juksy.com/events/month1701F5reborn) - 瑤瑤 |\n| 網頁 | 名人 | [扳勢回潮　等不及的蓄勢待發！ Wait  to action](https://www.juksy.com/events/month1612waittoaction) - 吳建豪 |\n| 網頁 | 電影 | [刺客教條 12/28(三)跨年最強檔](https://www.juksy.com/events/assassin2016creed) |\n| 網頁 | 名人 | [Don't Judge me！玩跳．TONE](https://www.juksy.com/events/month1611donjudge) - 安心亞 |\n| 網頁 | 電影 | [《怪獸與牠們的產地》JUKSY特別企劃](https://www.juksy.com/events/fantastic2016beasts) |\n| 網頁 | 廠商 | [耍YOUNG無極限，玩酷做自己](https://www.juksy.com/events/brand201611angeliapets) - Angelia  &  Pets |\n| 網頁 | 廠商 | [精彩視界 一觸可及](https://www.juksy.com/events/brand201611samsung360) - SAMSUNG |\n| 網頁 | 廠商 | [分享屬於你的[城市時尚]─你的城市‧由你演繹](https://www.juksy.com/events/brand201611fashioncity) - SAMSUNG 打卡分享照片 |\n| 網頁 | 名人 | [The Bromance！絕對合拍](https://www.juksy.com/events/month1610bromance) - 蕭敬騰 |\n| 網頁 | 名人 | [大勢黑潮 INTO BLACK](https://www.juksy.com/events/month1609intoblack) - SPEXIAL |\n| 網頁 | 電影 | [屍速列車 屍裡逃生](https://www.juksy.com/events/train2016zombie) |\n| 網頁 | 遊戲 | [成神之路有你有我！寶可夢全攻略](https://www.juksy.com/events/pokemon2016go) |\n| 網頁 | 名人 | [熱浪來襲HITHOT](https://www.juksy.com/events/month1608hithot) - 劉以豪 |\n| 網頁 | 穿搭 | [熱辣無極限！2016年夏日潮妞穿搭公式](https://www.juksy.com/events/summer2016girlstyle) |\n| 網頁 | 穿搭 | [型到出火！體感41度的TO DO LIST](https://www.juksy.com/events/summer2016menstyle) |\n| 網頁 | 投票活動 | JUKSY超新星（連結失效） |\n| 網頁 | 名人 | 用歌聲唱出最真的自己（連結失效） - 汪小敏 |\n| 網站 | 公司 | [京達國際股份有限公司](http://www.taxxtron-tayu.com/) |\n| 網站 | 購物 | [LOVEBABY讓您在家也能呵護寶貝](http://web.ntnu.edu.tw/~60040004S/) |\n| 網站 | 研討會 | [PME36](http://tame.tw/pme36/) |\n","source":"_posts/Portfolio.md","raw":"---\ntitle: Anny Chang's Portfolio - 作品集\ncategories:\n  - Portfolio\nthumbnailImage: https://images.unsplash.com/photo-1505330622279-bf7d7fc918f4?auto=format&fit=crop&w=1000&h=200&q=80&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D\nthumbnailImagePosition: bottom\ncoverImage: https://images.unsplash.com/photo-1505330622279-bf7d7fc918f4?auto=format&fit=crop&w=1650&q=80&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D\ncoverMeta: out\ntags: [Portfolio, 作品集]\ndate: 3017/12/01\nupdated: 2019/10/10\n---\n\nMy portfolio.\n\n<!--more-->\n\n# Design Collection\n\n## Behance: [https://www.behance.net/annilla](https://www.behance.net/annilla)\n\n# Web Collection\n\n| 作品 | 分類 | 內容 |\n| --- | --- | --- |\n| 系統 | 公司 | Depanel (Web) |\n| 系統 | 公司 | IND4 (Web) |\n| 系統 | 公司 | SSO (Web) |\n| 系統 | 公司 | OPscan (Web) |\n| 網頁 | 公司 | Online User Manual (Hexo) |\n| 網頁 | 公司 | Reflow Supplement Page (Web) |\n| 系統 | 公司 | System Profile Management (Web) |\n| 系統 | 公司 | NXT (Web) |\n| 系統 | 公司 | Workflow Compliance (Web) |\n| 網頁 | 公司 | Kingston Mobile Team Portal (Hexo) |\n| 系統 | 公司 | B2B (Web) |\n| 系統 | 公司 | Material Requirement Planning (Web) |\n| 系統 | 公司 | Empolyee Authentication Service (Web) |\n| 系統 | 公司 | Notes SignOff APP (Mobile Web App) |\n| 系統 | 公司 | Quotation System (Web & iOS App Design) |\n| 網站 | 綜合 | [JUKSY 街星](https://www.juksy.com/) |\n| 網頁 | 展覽 | [《復仇者聯盟》世界巡迴展](https://www.juksy.com/events/avengersstation) |\n| 網頁 | 電影 | [《金剛戰士》Power Rangers GO GO！](https://www.juksy.com/events/MMPR2017) |\n| 網頁 | 名人 | [放肆越限 ● I Dare You](https://www.juksy.com/events/idareyoujune) - 陳建州 & 四葉草 |\n| 網頁 | 名人 | [回家才DOPE ● Home Sweet Home](https://www.juksy.com/events/dope2017may) - 兄弟本色 & 邵雨薇 |\n| 網頁 | 名人 | [南北潮什麼 / From North to South](https://www.juksy.com/events/northsouth2017April) - 盧廣仲 & 柯佳嬿 |\n| 網頁 | 名人 | [瘋面人物 / Out of control](https://www.juksy.com/events/outofcontrol2017) - 許瑋甯 & 吳慷仁 |\n| 網頁 | 名人 | [我單故我在 Valentine, So what?](https://www.juksy.com/events/month1702valentine/) - 藍正龍 |\n| 網頁 | 名人 | [人生F5鍵 Reborn](https://www.juksy.com/events/month1701F5reborn) - 瑤瑤 |\n| 網頁 | 名人 | [扳勢回潮　等不及的蓄勢待發！ Wait  to action](https://www.juksy.com/events/month1612waittoaction) - 吳建豪 |\n| 網頁 | 電影 | [刺客教條 12/28(三)跨年最強檔](https://www.juksy.com/events/assassin2016creed) |\n| 網頁 | 名人 | [Don't Judge me！玩跳．TONE](https://www.juksy.com/events/month1611donjudge) - 安心亞 |\n| 網頁 | 電影 | [《怪獸與牠們的產地》JUKSY特別企劃](https://www.juksy.com/events/fantastic2016beasts) |\n| 網頁 | 廠商 | [耍YOUNG無極限，玩酷做自己](https://www.juksy.com/events/brand201611angeliapets) - Angelia  &  Pets |\n| 網頁 | 廠商 | [精彩視界 一觸可及](https://www.juksy.com/events/brand201611samsung360) - SAMSUNG |\n| 網頁 | 廠商 | [分享屬於你的[城市時尚]─你的城市‧由你演繹](https://www.juksy.com/events/brand201611fashioncity) - SAMSUNG 打卡分享照片 |\n| 網頁 | 名人 | [The Bromance！絕對合拍](https://www.juksy.com/events/month1610bromance) - 蕭敬騰 |\n| 網頁 | 名人 | [大勢黑潮 INTO BLACK](https://www.juksy.com/events/month1609intoblack) - SPEXIAL |\n| 網頁 | 電影 | [屍速列車 屍裡逃生](https://www.juksy.com/events/train2016zombie) |\n| 網頁 | 遊戲 | [成神之路有你有我！寶可夢全攻略](https://www.juksy.com/events/pokemon2016go) |\n| 網頁 | 名人 | [熱浪來襲HITHOT](https://www.juksy.com/events/month1608hithot) - 劉以豪 |\n| 網頁 | 穿搭 | [熱辣無極限！2016年夏日潮妞穿搭公式](https://www.juksy.com/events/summer2016girlstyle) |\n| 網頁 | 穿搭 | [型到出火！體感41度的TO DO LIST](https://www.juksy.com/events/summer2016menstyle) |\n| 網頁 | 投票活動 | JUKSY超新星（連結失效） |\n| 網頁 | 名人 | 用歌聲唱出最真的自己（連結失效） - 汪小敏 |\n| 網站 | 公司 | [京達國際股份有限公司](http://www.taxxtron-tayu.com/) |\n| 網站 | 購物 | [LOVEBABY讓您在家也能呵護寶貝](http://web.ntnu.edu.tw/~60040004S/) |\n| 網站 | 研討會 | [PME36](http://tame.tw/pme36/) |\n","slug":"Portfolio","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu7390000tudhlm35mzjd","content":"<p>My portfolio.</p>\n<a id=\"more\"></a>\n<h1 id=\"Design-Collection\"><a href=\"#Design-Collection\" class=\"headerlink\" title=\"Design Collection\"></a>Design Collection</h1><h2 id=\"Behance-https-www-behance-net-annilla\"><a href=\"#Behance-https-www-behance-net-annilla\" class=\"headerlink\" title=\"Behance: https://www.behance.net/annilla\"></a>Behance: <a href=\"https://www.behance.net/annilla\" target=\"_blank\" rel=\"noopener\">https://www.behance.net/annilla</a></h2><h1 id=\"Web-Collection\"><a href=\"#Web-Collection\" class=\"headerlink\" title=\"Web Collection\"></a>Web Collection</h1><table>\n<thead>\n<tr>\n<th>作品</th>\n<th>分類</th>\n<th>內容</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>Depanel (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>IND4 (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>SSO (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>OPscan (Web)</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>公司</td>\n<td>Online User Manual (Hexo)</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>公司</td>\n<td>Reflow Supplement Page (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>System Profile Management (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>NXT (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>Workflow Compliance (Web)</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>公司</td>\n<td>Kingston Mobile Team Portal (Hexo)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>B2B (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>Material Requirement Planning (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>Empolyee Authentication Service (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>Notes SignOff APP (Mobile Web App)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>Quotation System (Web &amp; iOS App Design)</td>\n</tr>\n<tr>\n<td>網站</td>\n<td>綜合</td>\n<td><a href=\"https://www.juksy.com/\" target=\"_blank\" rel=\"noopener\">JUKSY 街星</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>展覽</td>\n<td><a href=\"https://www.juksy.com/events/avengersstation\" target=\"_blank\" rel=\"noopener\">《復仇者聯盟》世界巡迴展</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>電影</td>\n<td><a href=\"https://www.juksy.com/events/MMPR2017\" target=\"_blank\" rel=\"noopener\">《金剛戰士》Power Rangers GO GO！</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/idareyoujune\" target=\"_blank\" rel=\"noopener\">放肆越限 ● I Dare You</a> - 陳建州 &amp; 四葉草</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/dope2017may\" target=\"_blank\" rel=\"noopener\">回家才DOPE ● Home Sweet Home</a> - 兄弟本色 &amp; 邵雨薇</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/northsouth2017April\" target=\"_blank\" rel=\"noopener\">南北潮什麼 / From North to South</a> - 盧廣仲 &amp; 柯佳嬿</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/outofcontrol2017\" target=\"_blank\" rel=\"noopener\">瘋面人物 / Out of control</a> - 許瑋甯 &amp; 吳慷仁</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1702valentine/\" target=\"_blank\" rel=\"noopener\">我單故我在 Valentine, So what?</a> - 藍正龍</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1701F5reborn\" target=\"_blank\" rel=\"noopener\">人生F5鍵 Reborn</a> - 瑤瑤</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1612waittoaction\" target=\"_blank\" rel=\"noopener\">扳勢回潮　等不及的蓄勢待發！ Wait  to action</a> - 吳建豪</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>電影</td>\n<td><a href=\"https://www.juksy.com/events/assassin2016creed\" target=\"_blank\" rel=\"noopener\">刺客教條 12/28(三)跨年最強檔</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1611donjudge\" target=\"_blank\" rel=\"noopener\">Don’t Judge me！玩跳．TONE</a> - 安心亞</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>電影</td>\n<td><a href=\"https://www.juksy.com/events/fantastic2016beasts\" target=\"_blank\" rel=\"noopener\">《怪獸與牠們的產地》JUKSY特別企劃</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>廠商</td>\n<td><a href=\"https://www.juksy.com/events/brand201611angeliapets\" target=\"_blank\" rel=\"noopener\">耍YOUNG無極限，玩酷做自己</a> - Angelia  &amp;  Pets</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>廠商</td>\n<td><a href=\"https://www.juksy.com/events/brand201611samsung360\" target=\"_blank\" rel=\"noopener\">精彩視界 一觸可及</a> - SAMSUNG</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>廠商</td>\n<td><a href=\"https://www.juksy.com/events/brand201611fashioncity\" target=\"_blank\" rel=\"noopener\">分享屬於你的[城市時尚]─你的城市‧由你演繹</a> - SAMSUNG 打卡分享照片</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1610bromance\" target=\"_blank\" rel=\"noopener\">The Bromance！絕對合拍</a> - 蕭敬騰</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1609intoblack\" target=\"_blank\" rel=\"noopener\">大勢黑潮 INTO BLACK</a> - SPEXIAL</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>電影</td>\n<td><a href=\"https://www.juksy.com/events/train2016zombie\" target=\"_blank\" rel=\"noopener\">屍速列車 屍裡逃生</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>遊戲</td>\n<td><a href=\"https://www.juksy.com/events/pokemon2016go\" target=\"_blank\" rel=\"noopener\">成神之路有你有我！寶可夢全攻略</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1608hithot\" target=\"_blank\" rel=\"noopener\">熱浪來襲HITHOT</a> - 劉以豪</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>穿搭</td>\n<td><a href=\"https://www.juksy.com/events/summer2016girlstyle\" target=\"_blank\" rel=\"noopener\">熱辣無極限！2016年夏日潮妞穿搭公式</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>穿搭</td>\n<td><a href=\"https://www.juksy.com/events/summer2016menstyle\" target=\"_blank\" rel=\"noopener\">型到出火！體感41度的TO DO LIST</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>投票活動</td>\n<td>JUKSY超新星（連結失效）</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td>用歌聲唱出最真的自己（連結失效） - 汪小敏</td>\n</tr>\n<tr>\n<td>網站</td>\n<td>公司</td>\n<td><a href=\"http://www.taxxtron-tayu.com/\" target=\"_blank\" rel=\"noopener\">京達國際股份有限公司</a></td>\n</tr>\n<tr>\n<td>網站</td>\n<td>購物</td>\n<td><a href=\"http://web.ntnu.edu.tw/~60040004S/\" target=\"_blank\" rel=\"noopener\">LOVEBABY讓您在家也能呵護寶貝</a></td>\n</tr>\n<tr>\n<td>網站</td>\n<td>研討會</td>\n<td><a href=\"http://tame.tw/pme36/\" target=\"_blank\" rel=\"noopener\">PME36</a></td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{}},"thumbnailImageUrl":"https://images.unsplash.com/photo-1505330622279-bf7d7fc918f4?auto=format&fit=crop&w=1000&h=200&q=80&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D","excerpt":"<p>My portfolio.</p>","more":"<h1 id=\"Design-Collection\"><a href=\"#Design-Collection\" class=\"headerlink\" title=\"Design Collection\"></a>Design Collection</h1><h2 id=\"Behance-https-www-behance-net-annilla\"><a href=\"#Behance-https-www-behance-net-annilla\" class=\"headerlink\" title=\"Behance: https://www.behance.net/annilla\"></a>Behance: <a href=\"https://www.behance.net/annilla\" target=\"_blank\" rel=\"noopener\">https://www.behance.net/annilla</a></h2><h1 id=\"Web-Collection\"><a href=\"#Web-Collection\" class=\"headerlink\" title=\"Web Collection\"></a>Web Collection</h1><table>\n<thead>\n<tr>\n<th>作品</th>\n<th>分類</th>\n<th>內容</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>Depanel (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>IND4 (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>SSO (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>OPscan (Web)</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>公司</td>\n<td>Online User Manual (Hexo)</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>公司</td>\n<td>Reflow Supplement Page (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>System Profile Management (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>NXT (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>Workflow Compliance (Web)</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>公司</td>\n<td>Kingston Mobile Team Portal (Hexo)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>B2B (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>Material Requirement Planning (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>Empolyee Authentication Service (Web)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>Notes SignOff APP (Mobile Web App)</td>\n</tr>\n<tr>\n<td>系統</td>\n<td>公司</td>\n<td>Quotation System (Web &amp; iOS App Design)</td>\n</tr>\n<tr>\n<td>網站</td>\n<td>綜合</td>\n<td><a href=\"https://www.juksy.com/\" target=\"_blank\" rel=\"noopener\">JUKSY 街星</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>展覽</td>\n<td><a href=\"https://www.juksy.com/events/avengersstation\" target=\"_blank\" rel=\"noopener\">《復仇者聯盟》世界巡迴展</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>電影</td>\n<td><a href=\"https://www.juksy.com/events/MMPR2017\" target=\"_blank\" rel=\"noopener\">《金剛戰士》Power Rangers GO GO！</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/idareyoujune\" target=\"_blank\" rel=\"noopener\">放肆越限 ● I Dare You</a> - 陳建州 &amp; 四葉草</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/dope2017may\" target=\"_blank\" rel=\"noopener\">回家才DOPE ● Home Sweet Home</a> - 兄弟本色 &amp; 邵雨薇</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/northsouth2017April\" target=\"_blank\" rel=\"noopener\">南北潮什麼 / From North to South</a> - 盧廣仲 &amp; 柯佳嬿</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/outofcontrol2017\" target=\"_blank\" rel=\"noopener\">瘋面人物 / Out of control</a> - 許瑋甯 &amp; 吳慷仁</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1702valentine/\" target=\"_blank\" rel=\"noopener\">我單故我在 Valentine, So what?</a> - 藍正龍</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1701F5reborn\" target=\"_blank\" rel=\"noopener\">人生F5鍵 Reborn</a> - 瑤瑤</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1612waittoaction\" target=\"_blank\" rel=\"noopener\">扳勢回潮　等不及的蓄勢待發！ Wait  to action</a> - 吳建豪</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>電影</td>\n<td><a href=\"https://www.juksy.com/events/assassin2016creed\" target=\"_blank\" rel=\"noopener\">刺客教條 12/28(三)跨年最強檔</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1611donjudge\" target=\"_blank\" rel=\"noopener\">Don’t Judge me！玩跳．TONE</a> - 安心亞</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>電影</td>\n<td><a href=\"https://www.juksy.com/events/fantastic2016beasts\" target=\"_blank\" rel=\"noopener\">《怪獸與牠們的產地》JUKSY特別企劃</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>廠商</td>\n<td><a href=\"https://www.juksy.com/events/brand201611angeliapets\" target=\"_blank\" rel=\"noopener\">耍YOUNG無極限，玩酷做自己</a> - Angelia  &amp;  Pets</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>廠商</td>\n<td><a href=\"https://www.juksy.com/events/brand201611samsung360\" target=\"_blank\" rel=\"noopener\">精彩視界 一觸可及</a> - SAMSUNG</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>廠商</td>\n<td><a href=\"https://www.juksy.com/events/brand201611fashioncity\" target=\"_blank\" rel=\"noopener\">分享屬於你的[城市時尚]─你的城市‧由你演繹</a> - SAMSUNG 打卡分享照片</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1610bromance\" target=\"_blank\" rel=\"noopener\">The Bromance！絕對合拍</a> - 蕭敬騰</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1609intoblack\" target=\"_blank\" rel=\"noopener\">大勢黑潮 INTO BLACK</a> - SPEXIAL</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>電影</td>\n<td><a href=\"https://www.juksy.com/events/train2016zombie\" target=\"_blank\" rel=\"noopener\">屍速列車 屍裡逃生</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>遊戲</td>\n<td><a href=\"https://www.juksy.com/events/pokemon2016go\" target=\"_blank\" rel=\"noopener\">成神之路有你有我！寶可夢全攻略</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td><a href=\"https://www.juksy.com/events/month1608hithot\" target=\"_blank\" rel=\"noopener\">熱浪來襲HITHOT</a> - 劉以豪</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>穿搭</td>\n<td><a href=\"https://www.juksy.com/events/summer2016girlstyle\" target=\"_blank\" rel=\"noopener\">熱辣無極限！2016年夏日潮妞穿搭公式</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>穿搭</td>\n<td><a href=\"https://www.juksy.com/events/summer2016menstyle\" target=\"_blank\" rel=\"noopener\">型到出火！體感41度的TO DO LIST</a></td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>投票活動</td>\n<td>JUKSY超新星（連結失效）</td>\n</tr>\n<tr>\n<td>網頁</td>\n<td>名人</td>\n<td>用歌聲唱出最真的自己（連結失效） - 汪小敏</td>\n</tr>\n<tr>\n<td>網站</td>\n<td>公司</td>\n<td><a href=\"http://www.taxxtron-tayu.com/\" target=\"_blank\" rel=\"noopener\">京達國際股份有限公司</a></td>\n</tr>\n<tr>\n<td>網站</td>\n<td>購物</td>\n<td><a href=\"http://web.ntnu.edu.tw/~60040004S/\" target=\"_blank\" rel=\"noopener\">LOVEBABY讓您在家也能呵護寶貝</a></td>\n</tr>\n<tr>\n<td>網站</td>\n<td>研討會</td>\n<td><a href=\"http://tame.tw/pme36/\" target=\"_blank\" rel=\"noopener\">PME36</a></td>\n</tr>\n</tbody>\n</table>"},{"title":"Anny Chang's Resume - 履歷","thumbnailImage":"https://images.unsplash.com/photo-1484755560615-a4c64e778a6c?auto=format&fit=crop&w=1360&h=200&q=80&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D","thumbnailImagePosition":"bottom","coverImage":"https://images.unsplash.com/photo-1484755560615-a4c64e778a6c?auto=format&fit=crop&w=1360&q=80&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D","date":"3017-12-02T16:00:00.000Z","updated":"2019-10-09T16:00:00.000Z","_content":"\nMy resume.\n\n<!--more-->\n\n# Professional Info\n\n## 專長\n\n* 設計 `UI` 介面、 `RWD` 網頁製作、 `SPA` 程式撰寫\n\n* 擅用設計 `UI` 軟體（`Sketch`, `Adobe XD`, `Illustrator`, `Photoshop`）\n\n## 研討會 / 工作坊\n| 時間 | 研討會 / 工作坊 | 分享主題 |\n| --- | --- | --- |\n| 2019.09 | Kingston 2019 內訓 | [Why Vue.js](https://www.canva.com/design/DADkDdvRR9A/JzfYMOKl6_2DLqeFH-BOww/view?utm_content=DADkDdvRR9A&utm_campaign=designshare&utm_medium=link&utm_source=sharebutton) |\n| 2017.08 | Kingston 2017 Mobile Team Workshop | [Use Webpack + Vue-Loader in VS2017](https://speakerdeck.com/annilla/use-webpack-plus-vue-loader-in-vs2017) |\n| 2016.11 | 前端魔法師十一月份小聚 | [Facebook Instant Articles - 測試到發布](https://speakerdeck.com/annilla/facebook-instant-articles-ce-shi-dao-fa-bu) |\n\n## 證照\n\n| 時間 | 證書 |\n| --- | --- |\n| 2017.03 | 國際 TOEIC 藍色證書 765分 |\n| 2015.11 | 國家技術士網頁設計丙級證照 |\n| 2014.12 | 國際 ACA Illustrator CS6 證照 |\n| 2013.12 | Adobe Master Of Rich Media Web Design Courses 證書 |\n| 2013.06 | 中華民國斐陶斐榮譽學會榮譽會員 （碩士應屆第一名） |\n| 2013.03 | 國際 ACA Flash CS6 證照 |\n| 2013.03 | 國際 ACA Dreamweaver CS6 證照 |\n| 2012.11 | 國際 ACA Photoshop CS6 證照 |\n| 2011.12 | Adobe Digital Graphic Design Courses 證書 |\n| 高中 | 全民英檢中級 證書 |\n\n### [Adobe Badges (國際ACA認證獎章)](https://www.youracclaim.com/users/chiao-ni-chang)\n\n## 受訓\n\n| 時間 | 課程 |\n| --- | --- |\n| 2019.09 | 台灣微軟技術中心 Microsoft DevOps Workshop |\n| 2018.10 | 29761 使用微軟 T-SQL 查詢資料 |\n| 2017.09 | Skilltree JavaScript 實務測試新手班 第三梯 |\n| 2017.06 | 網站測試開發 with WebdriverIO 實戰講堂 |\n| 2014.11 | 色彩溝通立即上手 |\n| 2014.10 | 網路活動創意規劃與會員行銷管理 |\n| 2014.09 | 如何提升網路關鍵字行銷的成效 |\n| 2014.09 | JR-基層管理幹部工作關係與團隊力提昇 |\n| 2014.08 | eDM電子郵件行銷及電子報經營 |\n| 2014.08 | JM-基層幹部工作改善與執行力提昇培訓 |\n\n# Work​ Experience​​​\n\n| 時間 | 公司 | 職稱 |\n| --- | --- | --- |\n| 2017.06.12 - NOW | Kingston Technology | UI Designer & Front-end Developer |\n| 2015.04.06 - 2017.06.11 | JUKSY 街星 | 網頁UI設計 / 網頁前端工程師 |\n| 2013.07.01 - 2015.04.03 | 微璽科技股份有限公司 | 商業設計 / 網頁UI設計 |\n\n# Education\n\n| 時間 | 學校 |\n| --- | --- |\n| 2011 - 2013 | 國立台灣師範大學, 數學系碩士班數學教育組 |\n| 2007 - 2011 | 國立台灣師範大學, 數學系學士班 |\n| 2004 - 2007 | 中山女高 |\n\n# Skills\n\n* SKETCH\n\n* ADOBE XD\n\n* PHOTOSHOP\n\n* ILLUSTRATOR\n\n* VSCODE / VS2017\n\n* GITHUB\n\n* SOURCETREE\n\n* NPM\n\n* WEBPACK / GULP\n\n# Languages\n\n* HTML / PUG\n\n* CSS / SASS(SCSS) / STYLUS / POSTCSS\n\n* JS / JQUERY / VUE / ES6\n","source":"_posts/Resume.md","raw":"---\ntitle: Anny Chang's Resume - 履歷\ncategories:\n  - Resume\nthumbnailImage: https://images.unsplash.com/photo-1484755560615-a4c64e778a6c?auto=format&fit=crop&w=1360&h=200&q=80&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D\nthumbnailImagePosition: bottom\ncoverImage: https://images.unsplash.com/photo-1484755560615-a4c64e778a6c?auto=format&fit=crop&w=1360&q=80&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D\ndate: 3017/12/03\nupdated: 2019/10/10\n---\n\nMy resume.\n\n<!--more-->\n\n# Professional Info\n\n## 專長\n\n* 設計 `UI` 介面、 `RWD` 網頁製作、 `SPA` 程式撰寫\n\n* 擅用設計 `UI` 軟體（`Sketch`, `Adobe XD`, `Illustrator`, `Photoshop`）\n\n## 研討會 / 工作坊\n| 時間 | 研討會 / 工作坊 | 分享主題 |\n| --- | --- | --- |\n| 2019.09 | Kingston 2019 內訓 | [Why Vue.js](https://www.canva.com/design/DADkDdvRR9A/JzfYMOKl6_2DLqeFH-BOww/view?utm_content=DADkDdvRR9A&utm_campaign=designshare&utm_medium=link&utm_source=sharebutton) |\n| 2017.08 | Kingston 2017 Mobile Team Workshop | [Use Webpack + Vue-Loader in VS2017](https://speakerdeck.com/annilla/use-webpack-plus-vue-loader-in-vs2017) |\n| 2016.11 | 前端魔法師十一月份小聚 | [Facebook Instant Articles - 測試到發布](https://speakerdeck.com/annilla/facebook-instant-articles-ce-shi-dao-fa-bu) |\n\n## 證照\n\n| 時間 | 證書 |\n| --- | --- |\n| 2017.03 | 國際 TOEIC 藍色證書 765分 |\n| 2015.11 | 國家技術士網頁設計丙級證照 |\n| 2014.12 | 國際 ACA Illustrator CS6 證照 |\n| 2013.12 | Adobe Master Of Rich Media Web Design Courses 證書 |\n| 2013.06 | 中華民國斐陶斐榮譽學會榮譽會員 （碩士應屆第一名） |\n| 2013.03 | 國際 ACA Flash CS6 證照 |\n| 2013.03 | 國際 ACA Dreamweaver CS6 證照 |\n| 2012.11 | 國際 ACA Photoshop CS6 證照 |\n| 2011.12 | Adobe Digital Graphic Design Courses 證書 |\n| 高中 | 全民英檢中級 證書 |\n\n### [Adobe Badges (國際ACA認證獎章)](https://www.youracclaim.com/users/chiao-ni-chang)\n\n## 受訓\n\n| 時間 | 課程 |\n| --- | --- |\n| 2019.09 | 台灣微軟技術中心 Microsoft DevOps Workshop |\n| 2018.10 | 29761 使用微軟 T-SQL 查詢資料 |\n| 2017.09 | Skilltree JavaScript 實務測試新手班 第三梯 |\n| 2017.06 | 網站測試開發 with WebdriverIO 實戰講堂 |\n| 2014.11 | 色彩溝通立即上手 |\n| 2014.10 | 網路活動創意規劃與會員行銷管理 |\n| 2014.09 | 如何提升網路關鍵字行銷的成效 |\n| 2014.09 | JR-基層管理幹部工作關係與團隊力提昇 |\n| 2014.08 | eDM電子郵件行銷及電子報經營 |\n| 2014.08 | JM-基層幹部工作改善與執行力提昇培訓 |\n\n# Work​ Experience​​​\n\n| 時間 | 公司 | 職稱 |\n| --- | --- | --- |\n| 2017.06.12 - NOW | Kingston Technology | UI Designer & Front-end Developer |\n| 2015.04.06 - 2017.06.11 | JUKSY 街星 | 網頁UI設計 / 網頁前端工程師 |\n| 2013.07.01 - 2015.04.03 | 微璽科技股份有限公司 | 商業設計 / 網頁UI設計 |\n\n# Education\n\n| 時間 | 學校 |\n| --- | --- |\n| 2011 - 2013 | 國立台灣師範大學, 數學系碩士班數學教育組 |\n| 2007 - 2011 | 國立台灣師範大學, 數學系學士班 |\n| 2004 - 2007 | 中山女高 |\n\n# Skills\n\n* SKETCH\n\n* ADOBE XD\n\n* PHOTOSHOP\n\n* ILLUSTRATOR\n\n* VSCODE / VS2017\n\n* GITHUB\n\n* SOURCETREE\n\n* NPM\n\n* WEBPACK / GULP\n\n# Languages\n\n* HTML / PUG\n\n* CSS / SASS(SCSS) / STYLUS / POSTCSS\n\n* JS / JQUERY / VUE / ES6\n","slug":"Resume","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu73d0002tudhp0fdg78f","content":"<p>My resume.</p>\n<a id=\"more\"></a>\n<h1 id=\"Professional-Info\"><a href=\"#Professional-Info\" class=\"headerlink\" title=\"Professional Info\"></a>Professional Info</h1><h2 id=\"專長\"><a href=\"#專長\" class=\"headerlink\" title=\"專長\"></a>專長</h2><ul>\n<li><p>設計 <code>UI</code> 介面、 <code>RWD</code> 網頁製作、 <code>SPA</code> 程式撰寫</p>\n</li>\n<li><p>擅用設計 <code>UI</code> 軟體（<code>Sketch</code>, <code>Adobe XD</code>, <code>Illustrator</code>, <code>Photoshop</code>）</p>\n</li>\n</ul>\n<h2 id=\"研討會-工作坊\"><a href=\"#研討會-工作坊\" class=\"headerlink\" title=\"研討會 / 工作坊\"></a>研討會 / 工作坊</h2><table>\n<thead>\n<tr>\n<th>時間</th>\n<th>研討會 / 工作坊</th>\n<th>分享主題</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2019.09</td>\n<td>Kingston 2019 內訓</td>\n<td><a href=\"https://www.canva.com/design/DADkDdvRR9A/JzfYMOKl6_2DLqeFH-BOww/view?utm_content=DADkDdvRR9A&amp;utm_campaign=designshare&amp;utm_medium=link&amp;utm_source=sharebutton\" target=\"_blank\" rel=\"noopener\">Why Vue.js</a></td>\n</tr>\n<tr>\n<td>2017.08</td>\n<td>Kingston 2017 Mobile Team Workshop</td>\n<td><a href=\"https://speakerdeck.com/annilla/use-webpack-plus-vue-loader-in-vs2017\" target=\"_blank\" rel=\"noopener\">Use Webpack + Vue-Loader in VS2017</a></td>\n</tr>\n<tr>\n<td>2016.11</td>\n<td>前端魔法師十一月份小聚</td>\n<td><a href=\"https://speakerdeck.com/annilla/facebook-instant-articles-ce-shi-dao-fa-bu\" target=\"_blank\" rel=\"noopener\">Facebook Instant Articles - 測試到發布</a></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"證照\"><a href=\"#證照\" class=\"headerlink\" title=\"證照\"></a>證照</h2><table>\n<thead>\n<tr>\n<th>時間</th>\n<th>證書</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2017.03</td>\n<td>國際 TOEIC 藍色證書 765分</td>\n</tr>\n<tr>\n<td>2015.11</td>\n<td>國家技術士網頁設計丙級證照</td>\n</tr>\n<tr>\n<td>2014.12</td>\n<td>國際 ACA Illustrator CS6 證照</td>\n</tr>\n<tr>\n<td>2013.12</td>\n<td>Adobe Master Of Rich Media Web Design Courses 證書</td>\n</tr>\n<tr>\n<td>2013.06</td>\n<td>中華民國斐陶斐榮譽學會榮譽會員 （碩士應屆第一名）</td>\n</tr>\n<tr>\n<td>2013.03</td>\n<td>國際 ACA Flash CS6 證照</td>\n</tr>\n<tr>\n<td>2013.03</td>\n<td>國際 ACA Dreamweaver CS6 證照</td>\n</tr>\n<tr>\n<td>2012.11</td>\n<td>國際 ACA Photoshop CS6 證照</td>\n</tr>\n<tr>\n<td>2011.12</td>\n<td>Adobe Digital Graphic Design Courses 證書</td>\n</tr>\n<tr>\n<td>高中</td>\n<td>全民英檢中級 證書</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"Adobe-Badges-國際ACA認證獎章\"><a href=\"#Adobe-Badges-國際ACA認證獎章\" class=\"headerlink\" title=\"Adobe Badges (國際ACA認證獎章)\"></a><a href=\"https://www.youracclaim.com/users/chiao-ni-chang\" target=\"_blank\" rel=\"noopener\">Adobe Badges (國際ACA認證獎章)</a></h3><h2 id=\"受訓\"><a href=\"#受訓\" class=\"headerlink\" title=\"受訓\"></a>受訓</h2><table>\n<thead>\n<tr>\n<th>時間</th>\n<th>課程</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2019.09</td>\n<td>台灣微軟技術中心 Microsoft DevOps Workshop</td>\n</tr>\n<tr>\n<td>2018.10</td>\n<td>29761 使用微軟 T-SQL 查詢資料</td>\n</tr>\n<tr>\n<td>2017.09</td>\n<td>Skilltree JavaScript 實務測試新手班 第三梯</td>\n</tr>\n<tr>\n<td>2017.06</td>\n<td>網站測試開發 with WebdriverIO 實戰講堂</td>\n</tr>\n<tr>\n<td>2014.11</td>\n<td>色彩溝通立即上手</td>\n</tr>\n<tr>\n<td>2014.10</td>\n<td>網路活動創意規劃與會員行銷管理</td>\n</tr>\n<tr>\n<td>2014.09</td>\n<td>如何提升網路關鍵字行銷的成效</td>\n</tr>\n<tr>\n<td>2014.09</td>\n<td>JR-基層管理幹部工作關係與團隊力提昇</td>\n</tr>\n<tr>\n<td>2014.08</td>\n<td>eDM電子郵件行銷及電子報經營</td>\n</tr>\n<tr>\n<td>2014.08</td>\n<td>JM-基層幹部工作改善與執行力提昇培訓</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Work​-Experience​​​\"><a href=\"#Work​-Experience​​​\" class=\"headerlink\" title=\"Work​ Experience​​​\"></a>Work​ Experience​​​</h1><table>\n<thead>\n<tr>\n<th>時間</th>\n<th>公司</th>\n<th>職稱</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2017.06.12 - NOW</td>\n<td>Kingston Technology</td>\n<td>UI Designer &amp; Front-end Developer</td>\n</tr>\n<tr>\n<td>2015.04.06 - 2017.06.11</td>\n<td>JUKSY 街星</td>\n<td>網頁UI設計 / 網頁前端工程師</td>\n</tr>\n<tr>\n<td>2013.07.01 - 2015.04.03</td>\n<td>微璽科技股份有限公司</td>\n<td>商業設計 / 網頁UI設計</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Education\"><a href=\"#Education\" class=\"headerlink\" title=\"Education\"></a>Education</h1><table>\n<thead>\n<tr>\n<th>時間</th>\n<th>學校</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2011 - 2013</td>\n<td>國立台灣師範大學, 數學系碩士班數學教育組</td>\n</tr>\n<tr>\n<td>2007 - 2011</td>\n<td>國立台灣師範大學, 數學系學士班</td>\n</tr>\n<tr>\n<td>2004 - 2007</td>\n<td>中山女高</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Skills\"><a href=\"#Skills\" class=\"headerlink\" title=\"Skills\"></a>Skills</h1><ul>\n<li><p>SKETCH</p>\n</li>\n<li><p>ADOBE XD</p>\n</li>\n<li><p>PHOTOSHOP</p>\n</li>\n<li><p>ILLUSTRATOR</p>\n</li>\n<li><p>VSCODE / VS2017</p>\n</li>\n<li><p>GITHUB</p>\n</li>\n<li><p>SOURCETREE</p>\n</li>\n<li><p>NPM</p>\n</li>\n<li><p>WEBPACK / GULP</p>\n</li>\n</ul>\n<h1 id=\"Languages\"><a href=\"#Languages\" class=\"headerlink\" title=\"Languages\"></a>Languages</h1><ul>\n<li><p>HTML / PUG</p>\n</li>\n<li><p>CSS / SASS(SCSS) / STYLUS / POSTCSS</p>\n</li>\n<li><p>JS / JQUERY / VUE / ES6</p>\n</li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://images.unsplash.com/photo-1484755560615-a4c64e778a6c?auto=format&fit=crop&w=1360&h=200&q=80&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D","excerpt":"<p>My resume.</p>","more":"<h1 id=\"Professional-Info\"><a href=\"#Professional-Info\" class=\"headerlink\" title=\"Professional Info\"></a>Professional Info</h1><h2 id=\"專長\"><a href=\"#專長\" class=\"headerlink\" title=\"專長\"></a>專長</h2><ul>\n<li><p>設計 <code>UI</code> 介面、 <code>RWD</code> 網頁製作、 <code>SPA</code> 程式撰寫</p>\n</li>\n<li><p>擅用設計 <code>UI</code> 軟體（<code>Sketch</code>, <code>Adobe XD</code>, <code>Illustrator</code>, <code>Photoshop</code>）</p>\n</li>\n</ul>\n<h2 id=\"研討會-工作坊\"><a href=\"#研討會-工作坊\" class=\"headerlink\" title=\"研討會 / 工作坊\"></a>研討會 / 工作坊</h2><table>\n<thead>\n<tr>\n<th>時間</th>\n<th>研討會 / 工作坊</th>\n<th>分享主題</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2019.09</td>\n<td>Kingston 2019 內訓</td>\n<td><a href=\"https://www.canva.com/design/DADkDdvRR9A/JzfYMOKl6_2DLqeFH-BOww/view?utm_content=DADkDdvRR9A&amp;utm_campaign=designshare&amp;utm_medium=link&amp;utm_source=sharebutton\" target=\"_blank\" rel=\"noopener\">Why Vue.js</a></td>\n</tr>\n<tr>\n<td>2017.08</td>\n<td>Kingston 2017 Mobile Team Workshop</td>\n<td><a href=\"https://speakerdeck.com/annilla/use-webpack-plus-vue-loader-in-vs2017\" target=\"_blank\" rel=\"noopener\">Use Webpack + Vue-Loader in VS2017</a></td>\n</tr>\n<tr>\n<td>2016.11</td>\n<td>前端魔法師十一月份小聚</td>\n<td><a href=\"https://speakerdeck.com/annilla/facebook-instant-articles-ce-shi-dao-fa-bu\" target=\"_blank\" rel=\"noopener\">Facebook Instant Articles - 測試到發布</a></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"證照\"><a href=\"#證照\" class=\"headerlink\" title=\"證照\"></a>證照</h2><table>\n<thead>\n<tr>\n<th>時間</th>\n<th>證書</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2017.03</td>\n<td>國際 TOEIC 藍色證書 765分</td>\n</tr>\n<tr>\n<td>2015.11</td>\n<td>國家技術士網頁設計丙級證照</td>\n</tr>\n<tr>\n<td>2014.12</td>\n<td>國際 ACA Illustrator CS6 證照</td>\n</tr>\n<tr>\n<td>2013.12</td>\n<td>Adobe Master Of Rich Media Web Design Courses 證書</td>\n</tr>\n<tr>\n<td>2013.06</td>\n<td>中華民國斐陶斐榮譽學會榮譽會員 （碩士應屆第一名）</td>\n</tr>\n<tr>\n<td>2013.03</td>\n<td>國際 ACA Flash CS6 證照</td>\n</tr>\n<tr>\n<td>2013.03</td>\n<td>國際 ACA Dreamweaver CS6 證照</td>\n</tr>\n<tr>\n<td>2012.11</td>\n<td>國際 ACA Photoshop CS6 證照</td>\n</tr>\n<tr>\n<td>2011.12</td>\n<td>Adobe Digital Graphic Design Courses 證書</td>\n</tr>\n<tr>\n<td>高中</td>\n<td>全民英檢中級 證書</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"Adobe-Badges-國際ACA認證獎章\"><a href=\"#Adobe-Badges-國際ACA認證獎章\" class=\"headerlink\" title=\"Adobe Badges (國際ACA認證獎章)\"></a><a href=\"https://www.youracclaim.com/users/chiao-ni-chang\" target=\"_blank\" rel=\"noopener\">Adobe Badges (國際ACA認證獎章)</a></h3><h2 id=\"受訓\"><a href=\"#受訓\" class=\"headerlink\" title=\"受訓\"></a>受訓</h2><table>\n<thead>\n<tr>\n<th>時間</th>\n<th>課程</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2019.09</td>\n<td>台灣微軟技術中心 Microsoft DevOps Workshop</td>\n</tr>\n<tr>\n<td>2018.10</td>\n<td>29761 使用微軟 T-SQL 查詢資料</td>\n</tr>\n<tr>\n<td>2017.09</td>\n<td>Skilltree JavaScript 實務測試新手班 第三梯</td>\n</tr>\n<tr>\n<td>2017.06</td>\n<td>網站測試開發 with WebdriverIO 實戰講堂</td>\n</tr>\n<tr>\n<td>2014.11</td>\n<td>色彩溝通立即上手</td>\n</tr>\n<tr>\n<td>2014.10</td>\n<td>網路活動創意規劃與會員行銷管理</td>\n</tr>\n<tr>\n<td>2014.09</td>\n<td>如何提升網路關鍵字行銷的成效</td>\n</tr>\n<tr>\n<td>2014.09</td>\n<td>JR-基層管理幹部工作關係與團隊力提昇</td>\n</tr>\n<tr>\n<td>2014.08</td>\n<td>eDM電子郵件行銷及電子報經營</td>\n</tr>\n<tr>\n<td>2014.08</td>\n<td>JM-基層幹部工作改善與執行力提昇培訓</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Work​-Experience​​​\"><a href=\"#Work​-Experience​​​\" class=\"headerlink\" title=\"Work​ Experience​​​\"></a>Work​ Experience​​​</h1><table>\n<thead>\n<tr>\n<th>時間</th>\n<th>公司</th>\n<th>職稱</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2017.06.12 - NOW</td>\n<td>Kingston Technology</td>\n<td>UI Designer &amp; Front-end Developer</td>\n</tr>\n<tr>\n<td>2015.04.06 - 2017.06.11</td>\n<td>JUKSY 街星</td>\n<td>網頁UI設計 / 網頁前端工程師</td>\n</tr>\n<tr>\n<td>2013.07.01 - 2015.04.03</td>\n<td>微璽科技股份有限公司</td>\n<td>商業設計 / 網頁UI設計</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Education\"><a href=\"#Education\" class=\"headerlink\" title=\"Education\"></a>Education</h1><table>\n<thead>\n<tr>\n<th>時間</th>\n<th>學校</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2011 - 2013</td>\n<td>國立台灣師範大學, 數學系碩士班數學教育組</td>\n</tr>\n<tr>\n<td>2007 - 2011</td>\n<td>國立台灣師範大學, 數學系學士班</td>\n</tr>\n<tr>\n<td>2004 - 2007</td>\n<td>中山女高</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Skills\"><a href=\"#Skills\" class=\"headerlink\" title=\"Skills\"></a>Skills</h1><ul>\n<li><p>SKETCH</p>\n</li>\n<li><p>ADOBE XD</p>\n</li>\n<li><p>PHOTOSHOP</p>\n</li>\n<li><p>ILLUSTRATOR</p>\n</li>\n<li><p>VSCODE / VS2017</p>\n</li>\n<li><p>GITHUB</p>\n</li>\n<li><p>SOURCETREE</p>\n</li>\n<li><p>NPM</p>\n</li>\n<li><p>WEBPACK / GULP</p>\n</li>\n</ul>\n<h1 id=\"Languages\"><a href=\"#Languages\" class=\"headerlink\" title=\"Languages\"></a>Languages</h1><ul>\n<li><p>HTML / PUG</p>\n</li>\n<li><p>CSS / SASS(SCSS) / STYLUS / POSTCSS</p>\n</li>\n<li><p>JS / JQUERY / VUE / ES6</p>\n</li>\n</ul>"},{"title":"D3 v4 with Vue - CANVAS Donut Chart","thumbnailImage":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no","coverMeta":"out","date":"2018-09-10T16:00:00.000Z","updated":"2018-09-10T16:00:00.000Z","_content":"\n此篇練習使用 `CANVAS` 來做甜甜圈圖。這篇是這個系列的最後一篇了，我們趕緊來看吧。\n\n<!--more-->\n\n***\n## 甜甜圈圖動畫\n\n```js\nanimationLine(elapsed) {\n  let duration = 700;\n  let t = Math.min(1, elapsed / duration); // compute how far through the animation we are (0 to 1)\n\n  // Clear Canvas\n  this.ctx.clearRect(0, 0, this.conWidth, this.conHeight);\n\n  /*-------------------------\n    甜甜圈\n  -------------------------*/\n  this.ctx.save();\n  this.pie.forEach((e, i) => {\n    // 開始繪製\n    this.ctx.beginPath();\n    this.ctx.arc(\n      this.conWidth / 2,\n      this.conHeight / 2,\n      this.radius,\n      e.startAngle,\n      e.startAngle + (e.endAngle - e.startAngle) * t\n    );\n    // 邊框色\n    this.ctx.lineWidth = this.chartOuterRadius - this.chartInnerRadius;\n    this.ctx.strokeStyle = e.color;\n    this.ctx.globalAlpha = t;\n    this.ctx.stroke();\n  });\n\n  /*-------------------------\n    甜甜圈文字\n  -------------------------*/\n  this.pie.forEach((e, i) => {\n    let theta = e.startAngle + (e.endAngle - e.startAngle) / 2;\n    let x = this.radius * Math.cos(theta);\n    let y = this.radius * Math.sin(theta);\n\n    // 開始繪製\n    this.ctx.textAlign = \"center\";\n    this.ctx.textBaseline = \"middle\";\n    this.ctx.font = \"16px sans-serif\";\n    this.ctx.fillStyle = \"#fff\";\n    this.ctx.fillText(\n      e.percentage,\n      this.conWidth / 2 + x,\n      this.conHeight / 2 + y\n    );\n  });\n  this.ctx.restore();\n\n  // if this animation is over\n  if (t === 1) {\n    // stop this timer since we are done animating.\n    this.timer.stop();\n  }\n},\n```\n\n因為甜甜圈不需要 x 軸、 y 軸等靜態元素，標籤的部分用 HTML render 就好，所以只要把甜甜圈動畫長好就完成囉!線上 demo [在此](https://annilla.github.io/d3-practice-vue-canvas/dist/)，也可以在[Github](https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/DonutChart.vue)查看完整程式碼，此主題到這裡告一段亂～之後會有全新的篇章，謝謝收看 ：）","source":"_posts/D3/D3-v4-with-Vue-CANVAS-Donut-Chart.md","raw":"---\ntitle: D3 v4 with Vue - CANVAS Donut Chart\ncategories:\n  - D3\nthumbnailImage: https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no\ncoverMeta: out\ntags: [D3, Vue, CANVAS]\ndate: 2018/09/11\nupdated: 2018/09/11\n---\n\n此篇練習使用 `CANVAS` 來做甜甜圈圖。這篇是這個系列的最後一篇了，我們趕緊來看吧。\n\n<!--more-->\n\n***\n## 甜甜圈圖動畫\n\n```js\nanimationLine(elapsed) {\n  let duration = 700;\n  let t = Math.min(1, elapsed / duration); // compute how far through the animation we are (0 to 1)\n\n  // Clear Canvas\n  this.ctx.clearRect(0, 0, this.conWidth, this.conHeight);\n\n  /*-------------------------\n    甜甜圈\n  -------------------------*/\n  this.ctx.save();\n  this.pie.forEach((e, i) => {\n    // 開始繪製\n    this.ctx.beginPath();\n    this.ctx.arc(\n      this.conWidth / 2,\n      this.conHeight / 2,\n      this.radius,\n      e.startAngle,\n      e.startAngle + (e.endAngle - e.startAngle) * t\n    );\n    // 邊框色\n    this.ctx.lineWidth = this.chartOuterRadius - this.chartInnerRadius;\n    this.ctx.strokeStyle = e.color;\n    this.ctx.globalAlpha = t;\n    this.ctx.stroke();\n  });\n\n  /*-------------------------\n    甜甜圈文字\n  -------------------------*/\n  this.pie.forEach((e, i) => {\n    let theta = e.startAngle + (e.endAngle - e.startAngle) / 2;\n    let x = this.radius * Math.cos(theta);\n    let y = this.radius * Math.sin(theta);\n\n    // 開始繪製\n    this.ctx.textAlign = \"center\";\n    this.ctx.textBaseline = \"middle\";\n    this.ctx.font = \"16px sans-serif\";\n    this.ctx.fillStyle = \"#fff\";\n    this.ctx.fillText(\n      e.percentage,\n      this.conWidth / 2 + x,\n      this.conHeight / 2 + y\n    );\n  });\n  this.ctx.restore();\n\n  // if this animation is over\n  if (t === 1) {\n    // stop this timer since we are done animating.\n    this.timer.stop();\n  }\n},\n```\n\n因為甜甜圈不需要 x 軸、 y 軸等靜態元素，標籤的部分用 HTML render 就好，所以只要把甜甜圈動畫長好就完成囉!線上 demo [在此](https://annilla.github.io/d3-practice-vue-canvas/dist/)，也可以在[Github](https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/DonutChart.vue)查看完整程式碼，此主題到這裡告一段亂～之後會有全新的篇章，謝謝收看 ：）","slug":"D3/D3-v4-with-Vue-CANVAS-Donut-Chart","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu748000dtudhaqswovo5","content":"<p>此篇練習使用 <code>CANVAS</code> 來做甜甜圈圖。這篇是這個系列的最後一篇了，我們趕緊來看吧。</p>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"甜甜圈圖動畫\"><a href=\"#甜甜圈圖動畫\" class=\"headerlink\" title=\"甜甜圈圖動畫\"></a>甜甜圈圖動畫</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">animationLine(elapsed) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> duration = <span class=\"number\">700</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">1</span>, elapsed / duration); <span class=\"comment\">// compute how far through the animation we are (0 to 1)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Clear Canvas</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"keyword\">this</span>.conWidth, <span class=\"keyword\">this</span>.conHeight);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    甜甜圈</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.pie.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.arc(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.conWidth / <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.conHeight / <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.radius,</span><br><span class=\"line\">      e.startAngle,</span><br><span class=\"line\">      e.startAngle + (e.endAngle - e.startAngle) * t</span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"comment\">// 邊框色</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineWidth = <span class=\"keyword\">this</span>.chartOuterRadius - <span class=\"keyword\">this</span>.chartInnerRadius;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.strokeStyle = e.color;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.globalAlpha = t;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    甜甜圈文字</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.pie.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> theta = e.startAngle + (e.endAngle - e.startAngle) / <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> x = <span class=\"keyword\">this</span>.radius * <span class=\"built_in\">Math</span>.cos(theta);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> y = <span class=\"keyword\">this</span>.radius * <span class=\"built_in\">Math</span>.sin(theta);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"string\">\"#fff\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      e.percentage,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.conWidth / <span class=\"number\">2</span> + x,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.conHeight / <span class=\"number\">2</span> + y</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// if this animation is over</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (t === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// stop this timer since we are done animating.</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer.stop();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>因為甜甜圈不需要 x 軸、 y 軸等靜態元素，標籤的部分用 HTML render 就好，所以只要把甜甜圈動畫長好就完成囉!線上 demo <a href=\"https://annilla.github.io/d3-practice-vue-canvas/dist/\">在此</a>，也可以在<a href=\"https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/DonutChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a>查看完整程式碼，此主題到這裡告一段亂～之後會有全新的篇章，謝謝收看 ：）</p>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","excerpt":"<p>此篇練習使用 <code>CANVAS</code> 來做甜甜圈圖。這篇是這個系列的最後一篇了，我們趕緊來看吧。</p>","more":"<hr>\n<h2 id=\"甜甜圈圖動畫\"><a href=\"#甜甜圈圖動畫\" class=\"headerlink\" title=\"甜甜圈圖動畫\"></a>甜甜圈圖動畫</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">animationLine(elapsed) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> duration = <span class=\"number\">700</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">1</span>, elapsed / duration); <span class=\"comment\">// compute how far through the animation we are (0 to 1)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Clear Canvas</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"keyword\">this</span>.conWidth, <span class=\"keyword\">this</span>.conHeight);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    甜甜圈</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.pie.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.arc(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.conWidth / <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.conHeight / <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.radius,</span><br><span class=\"line\">      e.startAngle,</span><br><span class=\"line\">      e.startAngle + (e.endAngle - e.startAngle) * t</span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"comment\">// 邊框色</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineWidth = <span class=\"keyword\">this</span>.chartOuterRadius - <span class=\"keyword\">this</span>.chartInnerRadius;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.strokeStyle = e.color;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.globalAlpha = t;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    甜甜圈文字</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.pie.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> theta = e.startAngle + (e.endAngle - e.startAngle) / <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> x = <span class=\"keyword\">this</span>.radius * <span class=\"built_in\">Math</span>.cos(theta);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> y = <span class=\"keyword\">this</span>.radius * <span class=\"built_in\">Math</span>.sin(theta);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"string\">\"#fff\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      e.percentage,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.conWidth / <span class=\"number\">2</span> + x,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.conHeight / <span class=\"number\">2</span> + y</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// if this animation is over</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (t === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// stop this timer since we are done animating.</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer.stop();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>因為甜甜圈不需要 x 軸、 y 軸等靜態元素，標籤的部分用 HTML render 就好，所以只要把甜甜圈動畫長好就完成囉!線上 demo <a href=\"https://annilla.github.io/d3-practice-vue-canvas/dist/\">在此</a>，也可以在<a href=\"https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/DonutChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a>查看完整程式碼，此主題到這裡告一段亂～之後會有全新的篇章，謝謝收看 ：）</p>"},{"title":"D3 v4 with Vue - CANVAS Horizontal Bar Chart","thumbnailImage":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no","coverMeta":"out","date":"2018-07-06T16:00:00.000Z","updated":"2018-07-06T16:00:00.000Z","_content":"\n此篇練習使用 `CANVAS` 來做橫條圖。主要的隨機資料和準備 `Canvas` 畫布在折線圖那篇有解釋過，所以這邊就直接進入橫條圖動畫的部分。\n\n<!--more-->\n\n***\n## 橫條圖動畫\n\n```js\nanimationLine(elapsed) {\n  let duration = 800;\n  let t = Math.min(1, elapsed / duration); // compute how far through the animation we are (0 to 1)\n\n  // Clear Canvas\n  this.ctx.clearRect(0, 0, this.conWidth, this.conHeight);\n\n  // 繪製不須動畫的元素\n  this.drawStatic();\n\n  /*-------------------------\n  橫條\n  -------------------------*/\n  this.ctx.save();\n  this.bars.forEach((e, i) => {\n    // 開始繪製\n    this.ctx.beginPath();\n    this.ctx.rect(e.x, e.y, e.width * t, e.height);\n    this.ctx.globalAlpha = t;\n    this.ctx.fillStyle = e.color;\n    this.ctx.fill();\n  });\n\n  /*-------------------------\n  橫條文字\n  -------------------------*/\n  this.ctx.textBaseline = \"middle\";\n  this.ctx.font = \"16px sans-serif\";\n  this.bars.forEach((e, i) => {\n  let x = e.width + this.chartLeft - 5; // 修正x太低數值的文字改在橫條外顯示\n\n  // 修正x太低數值的文字改在橫條外顯示\n  if (x < this.chartLeft + 50) {\n    this.ctx.fillStyle = \"#000\";\n    this.ctx.textAlign = \"left\";\n    x = e.width + this.chartLeft + 5;\n  } else {\n    this.ctx.fillStyle = \"#fff\";\n    this.ctx.textAlign = \"right\";\n  }\n\n    this.ctx.fillText(e.number, x, e.y + this.barWidth / 2);\n  });\n  this.ctx.restore();\n\n  // if this animation is over\n  if (t === 1) {\n    // stop this timer since we are done animating.\n    this.timer.stop();\n  }\n},\n```\n\n> 繪製的前後順序會影響繪製出來的圖層疊加效果，越後面繪製出來的元素會蓋在舊的元素上方。所以不需動畫的元素(ex: X軸、Y軸、標籤...)才特別拉出來寫成一個 function 放在繪製動畫之前。\n\n***\n## 不需動畫的元素\n\n```js\ndrawStatic() { // 繪製不須動畫的元素\n  let tickSize = 6; // 軸點大小\n\n  /*-------------------------\n    X軸\n  -------------------------*/\n  this.xTick = this.custom\n    .append(\"g\")\n    .attr(\"class\", \"axis axisX\")\n    .call(this.xAxis)\n    .selectAll(\"g.tick\");\n  // 繪製X軸點\n  this.ctx.save();\n  this.ctx.beginPath();\n  // 中間內部灰線\n  this.xTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let xTrans = node.attr(\"transform\");\n    let xPos = Number(xTrans.split(\",\")[0].split(\"(\")[1]) + this.chartLeft;\n\n    // 跳過 0 的軸點\n    if (index === 0) return;\n\n    // 繪製軸點\n    this.ctx.moveTo(xPos, this.chartTop);\n    this.ctx.lineTo(xPos, this.chartTop + this.chartHeight);\n  });\n  this.ctx.setLineDash([4, 6]);\n  this.ctx.lineWidth = 2;\n  this.ctx.strokeStyle = \"#efefef\"; // 線顏色\n  this.ctx.stroke();\n  this.ctx.restore();\n\n  // 繪製X軸文字\n  this.ctx.textAlign = \"center\";\n  this.ctx.textBaseline = \"top\";\n  this.xTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let xTrans = node.attr(\"transform\");\n    let xPos = Number(xTrans.split(\",\")[0].split(\"(\")[1]) + this.chartLeft;\n\n    this.ctx.fillText(\n      node.property(\"innerText\"),\n      xPos,\n      this.chartTop + this.chartHeight\n    );\n  });\n\n  // 繪製X軸標籤\n  this.ctx.save();\n  this.ctx.textAlign = \"center\";\n  this.ctx.textBaseline = \"top\";\n  this.ctx.font = \"16px sans-serif\";\n  this.ctx.fillText(\n    \"件數\",\n    this.conWidth / 2,\n    this.chartTop + this.chartHeight + 30\n  );\n  this.ctx.restore();\n\n  /*-------------------------\n    Y軸\n  -------------------------*/\n  this.yTick = this.custom\n    .append(\"g\")\n    .attr(\"class\", \"axis axisY\")\n    .call(this.yAxis)\n    .selectAll(\"g.tick\");\n  // 繪製Y軸點\n  this.ctx.beginPath();\n  // 黑色刻點\n  this.yTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let yTrans = node.attr(\"transform\");\n    let yPos = Number(yTrans.split(\",\")[1].split(\")\")[0]) + this.chartTop;\n\n    // 跳過 0 的軸點\n    if (index === 0) return;\n\n    // 繪製軸點\n    this.ctx.moveTo(this.chartLeft - tickSize, yPos);\n    this.ctx.lineTo(this.chartLeft, yPos);\n  });\n  this.ctx.stroke();\n  // 最下方的刻點\n  this.ctx.beginPath();\n  this.ctx.moveTo(\n    this.chartLeft - tickSize,\n    this.chartTop + this.chartHeight\n  );\n  this.ctx.lineTo(this.chartLeft, this.chartTop + this.chartHeight);\n  this.ctx.stroke();\n\n  // 繪製Y軸線\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft, this.chartTop);\n  this.ctx.lineTo(this.chartLeft, this.chartTop + this.chartHeight);\n  this.ctx.stroke();\n\n  // 繪製Y軸文字\n  this.ctx.textAlign = \"right\";\n  this.ctx.textBaseline = \"middle\";\n  this.yTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let yTrans = node.attr(\"transform\");\n    let yPos = Number(yTrans.split(\",\")[1].split(\")\")[0]) + this.chartTop;\n\n    this.ctx.fillText(\n      node.property(\"innerText\"),\n      this.chartLeft - tickSize,\n      yPos\n    );\n  });\n},\n```\n\n整個骨架如果熟悉的話，其實就是把動態部分跟靜態部分替換掉想要的圖形就完成囉，線上 demo [在此](https://annilla.github.io/d3-practice-vue-canvas/dist/)，也可以在[Github](https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/BarPChart.vue)查看完整程式碼，我們下回見～\n","source":"_posts/D3/D3-v4-with-Vue-CANVAS-Horizontal-Bar-Chart.md","raw":"---\ntitle: D3 v4 with Vue - CANVAS Horizontal Bar Chart\ncategories:\n  - D3\nthumbnailImage: https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no\ncoverMeta: out\ntags: [D3, Vue, CANVAS]\ndate: 2018/07/07\nupdated: 2018/07/07\n---\n\n此篇練習使用 `CANVAS` 來做橫條圖。主要的隨機資料和準備 `Canvas` 畫布在折線圖那篇有解釋過，所以這邊就直接進入橫條圖動畫的部分。\n\n<!--more-->\n\n***\n## 橫條圖動畫\n\n```js\nanimationLine(elapsed) {\n  let duration = 800;\n  let t = Math.min(1, elapsed / duration); // compute how far through the animation we are (0 to 1)\n\n  // Clear Canvas\n  this.ctx.clearRect(0, 0, this.conWidth, this.conHeight);\n\n  // 繪製不須動畫的元素\n  this.drawStatic();\n\n  /*-------------------------\n  橫條\n  -------------------------*/\n  this.ctx.save();\n  this.bars.forEach((e, i) => {\n    // 開始繪製\n    this.ctx.beginPath();\n    this.ctx.rect(e.x, e.y, e.width * t, e.height);\n    this.ctx.globalAlpha = t;\n    this.ctx.fillStyle = e.color;\n    this.ctx.fill();\n  });\n\n  /*-------------------------\n  橫條文字\n  -------------------------*/\n  this.ctx.textBaseline = \"middle\";\n  this.ctx.font = \"16px sans-serif\";\n  this.bars.forEach((e, i) => {\n  let x = e.width + this.chartLeft - 5; // 修正x太低數值的文字改在橫條外顯示\n\n  // 修正x太低數值的文字改在橫條外顯示\n  if (x < this.chartLeft + 50) {\n    this.ctx.fillStyle = \"#000\";\n    this.ctx.textAlign = \"left\";\n    x = e.width + this.chartLeft + 5;\n  } else {\n    this.ctx.fillStyle = \"#fff\";\n    this.ctx.textAlign = \"right\";\n  }\n\n    this.ctx.fillText(e.number, x, e.y + this.barWidth / 2);\n  });\n  this.ctx.restore();\n\n  // if this animation is over\n  if (t === 1) {\n    // stop this timer since we are done animating.\n    this.timer.stop();\n  }\n},\n```\n\n> 繪製的前後順序會影響繪製出來的圖層疊加效果，越後面繪製出來的元素會蓋在舊的元素上方。所以不需動畫的元素(ex: X軸、Y軸、標籤...)才特別拉出來寫成一個 function 放在繪製動畫之前。\n\n***\n## 不需動畫的元素\n\n```js\ndrawStatic() { // 繪製不須動畫的元素\n  let tickSize = 6; // 軸點大小\n\n  /*-------------------------\n    X軸\n  -------------------------*/\n  this.xTick = this.custom\n    .append(\"g\")\n    .attr(\"class\", \"axis axisX\")\n    .call(this.xAxis)\n    .selectAll(\"g.tick\");\n  // 繪製X軸點\n  this.ctx.save();\n  this.ctx.beginPath();\n  // 中間內部灰線\n  this.xTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let xTrans = node.attr(\"transform\");\n    let xPos = Number(xTrans.split(\",\")[0].split(\"(\")[1]) + this.chartLeft;\n\n    // 跳過 0 的軸點\n    if (index === 0) return;\n\n    // 繪製軸點\n    this.ctx.moveTo(xPos, this.chartTop);\n    this.ctx.lineTo(xPos, this.chartTop + this.chartHeight);\n  });\n  this.ctx.setLineDash([4, 6]);\n  this.ctx.lineWidth = 2;\n  this.ctx.strokeStyle = \"#efefef\"; // 線顏色\n  this.ctx.stroke();\n  this.ctx.restore();\n\n  // 繪製X軸文字\n  this.ctx.textAlign = \"center\";\n  this.ctx.textBaseline = \"top\";\n  this.xTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let xTrans = node.attr(\"transform\");\n    let xPos = Number(xTrans.split(\",\")[0].split(\"(\")[1]) + this.chartLeft;\n\n    this.ctx.fillText(\n      node.property(\"innerText\"),\n      xPos,\n      this.chartTop + this.chartHeight\n    );\n  });\n\n  // 繪製X軸標籤\n  this.ctx.save();\n  this.ctx.textAlign = \"center\";\n  this.ctx.textBaseline = \"top\";\n  this.ctx.font = \"16px sans-serif\";\n  this.ctx.fillText(\n    \"件數\",\n    this.conWidth / 2,\n    this.chartTop + this.chartHeight + 30\n  );\n  this.ctx.restore();\n\n  /*-------------------------\n    Y軸\n  -------------------------*/\n  this.yTick = this.custom\n    .append(\"g\")\n    .attr(\"class\", \"axis axisY\")\n    .call(this.yAxis)\n    .selectAll(\"g.tick\");\n  // 繪製Y軸點\n  this.ctx.beginPath();\n  // 黑色刻點\n  this.yTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let yTrans = node.attr(\"transform\");\n    let yPos = Number(yTrans.split(\",\")[1].split(\")\")[0]) + this.chartTop;\n\n    // 跳過 0 的軸點\n    if (index === 0) return;\n\n    // 繪製軸點\n    this.ctx.moveTo(this.chartLeft - tickSize, yPos);\n    this.ctx.lineTo(this.chartLeft, yPos);\n  });\n  this.ctx.stroke();\n  // 最下方的刻點\n  this.ctx.beginPath();\n  this.ctx.moveTo(\n    this.chartLeft - tickSize,\n    this.chartTop + this.chartHeight\n  );\n  this.ctx.lineTo(this.chartLeft, this.chartTop + this.chartHeight);\n  this.ctx.stroke();\n\n  // 繪製Y軸線\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft, this.chartTop);\n  this.ctx.lineTo(this.chartLeft, this.chartTop + this.chartHeight);\n  this.ctx.stroke();\n\n  // 繪製Y軸文字\n  this.ctx.textAlign = \"right\";\n  this.ctx.textBaseline = \"middle\";\n  this.yTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let yTrans = node.attr(\"transform\");\n    let yPos = Number(yTrans.split(\",\")[1].split(\")\")[0]) + this.chartTop;\n\n    this.ctx.fillText(\n      node.property(\"innerText\"),\n      this.chartLeft - tickSize,\n      yPos\n    );\n  });\n},\n```\n\n整個骨架如果熟悉的話，其實就是把動態部分跟靜態部分替換掉想要的圖形就完成囉，線上 demo [在此](https://annilla.github.io/d3-practice-vue-canvas/dist/)，也可以在[Github](https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/BarPChart.vue)查看完整程式碼，我們下回見～\n","slug":"D3/D3-v4-with-Vue-CANVAS-Horizontal-Bar-Chart","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu749000etudh7wlttfty","content":"<p>此篇練習使用 <code>CANVAS</code> 來做橫條圖。主要的隨機資料和準備 <code>Canvas</code> 畫布在折線圖那篇有解釋過，所以這邊就直接進入橫條圖動畫的部分。</p>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"橫條圖動畫\"><a href=\"#橫條圖動畫\" class=\"headerlink\" title=\"橫條圖動畫\"></a>橫條圖動畫</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">animationLine(elapsed) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> duration = <span class=\"number\">800</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">1</span>, elapsed / duration); <span class=\"comment\">// compute how far through the animation we are (0 to 1)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Clear Canvas</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"keyword\">this</span>.conWidth, <span class=\"keyword\">this</span>.conHeight);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製不須動畫的元素</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.drawStatic();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">  橫條</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.bars.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.rect(e.x, e.y, e.width * t, e.height);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.globalAlpha = t;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = e.color;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fill();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">  橫條文字</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.bars.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> x = e.width + <span class=\"keyword\">this</span>.chartLeft - <span class=\"number\">5</span>; <span class=\"comment\">// 修正x太低數值的文字改在橫條外顯示</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 修正x太低數值的文字改在橫條外顯示</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (x &lt; <span class=\"keyword\">this</span>.chartLeft + <span class=\"number\">50</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"string\">\"#000\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"left\"</span>;</span><br><span class=\"line\">    x = e.width + <span class=\"keyword\">this</span>.chartLeft + <span class=\"number\">5</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"string\">\"#fff\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"right\"</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(e.number, x, e.y + <span class=\"keyword\">this</span>.barWidth / <span class=\"number\">2</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// if this animation is over</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (t === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// stop this timer since we are done animating.</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer.stop();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>繪製的前後順序會影響繪製出來的圖層疊加效果，越後面繪製出來的元素會蓋在舊的元素上方。所以不需動畫的元素(ex: X軸、Y軸、標籤…)才特別拉出來寫成一個 function 放在繪製動畫之前。</p>\n</blockquote>\n<hr>\n<h2 id=\"不需動畫的元素\"><a href=\"#不需動畫的元素\" class=\"headerlink\" title=\"不需動畫的元素\"></a>不需動畫的元素</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drawStatic() &#123; <span class=\"comment\">// 繪製不須動畫的元素</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> tickSize = <span class=\"number\">6</span>; <span class=\"comment\">// 軸點大小</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    X軸</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.xTick = <span class=\"keyword\">this</span>.custom</span><br><span class=\"line\">    .append(<span class=\"string\">\"g\"</span>)</span><br><span class=\"line\">    .attr(<span class=\"string\">\"class\"</span>, <span class=\"string\">\"axis axisX\"</span>)</span><br><span class=\"line\">    .call(<span class=\"keyword\">this</span>.xAxis)</span><br><span class=\"line\">    .selectAll(<span class=\"string\">\"g.tick\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"comment\">// 中間內部灰線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.xTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xPos = <span class=\"built_in\">Number</span>(xTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">0</span>].split(<span class=\"string\">\"(\"</span>)[<span class=\"number\">1</span>]) + <span class=\"keyword\">this</span>.chartLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 跳過 0 的軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 繪製軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.moveTo(xPos, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineTo(xPos, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.setLineDash([<span class=\"number\">4</span>, <span class=\"number\">6</span>]);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineWidth = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.strokeStyle = <span class=\"string\">\"#efefef\"</span>; <span class=\"comment\">// 線顏色</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸文字</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"top\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.xTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xPos = <span class=\"built_in\">Number</span>(xTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">0</span>].split(<span class=\"string\">\"(\"</span>)[<span class=\"number\">1</span>]) + <span class=\"keyword\">this</span>.chartLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      node.property(<span class=\"string\">\"innerText\"</span>),</span><br><span class=\"line\">      xPos,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸標籤</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"top\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">    <span class=\"string\">\"件數\"</span>,</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.conWidth / <span class=\"number\">2</span>,</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + <span class=\"number\">30</span></span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    Y軸</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick = <span class=\"keyword\">this</span>.custom</span><br><span class=\"line\">    .append(<span class=\"string\">\"g\"</span>)</span><br><span class=\"line\">    .attr(<span class=\"string\">\"class\"</span>, <span class=\"string\">\"axis axisY\"</span>)</span><br><span class=\"line\">    .call(<span class=\"keyword\">this</span>.yAxis)</span><br><span class=\"line\">    .selectAll(<span class=\"string\">\"g.tick\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"comment\">// 黑色刻點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yPos = <span class=\"built_in\">Number</span>(yTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">1</span>].split(<span class=\"string\">\")\"</span>)[<span class=\"number\">0</span>]) + <span class=\"keyword\">this</span>.chartTop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 跳過 0 的軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 繪製軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft - tickSize, yPos);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, yPos);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\">  <span class=\"comment\">// 最下方的刻點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartLeft - tickSize,</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight</span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸文字</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"right\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yPos = <span class=\"built_in\">Number</span>(yTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">1</span>].split(<span class=\"string\">\")\"</span>)[<span class=\"number\">0</span>]) + <span class=\"keyword\">this</span>.chartTop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      node.property(<span class=\"string\">\"innerText\"</span>),</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft - tickSize,</span><br><span class=\"line\">      yPos</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>整個骨架如果熟悉的話，其實就是把動態部分跟靜態部分替換掉想要的圖形就完成囉，線上 demo <a href=\"https://annilla.github.io/d3-practice-vue-canvas/dist/\">在此</a>，也可以在<a href=\"https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/BarPChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a>查看完整程式碼，我們下回見～</p>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","excerpt":"<p>此篇練習使用 <code>CANVAS</code> 來做橫條圖。主要的隨機資料和準備 <code>Canvas</code> 畫布在折線圖那篇有解釋過，所以這邊就直接進入橫條圖動畫的部分。</p>","more":"<hr>\n<h2 id=\"橫條圖動畫\"><a href=\"#橫條圖動畫\" class=\"headerlink\" title=\"橫條圖動畫\"></a>橫條圖動畫</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">animationLine(elapsed) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> duration = <span class=\"number\">800</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">1</span>, elapsed / duration); <span class=\"comment\">// compute how far through the animation we are (0 to 1)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Clear Canvas</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"keyword\">this</span>.conWidth, <span class=\"keyword\">this</span>.conHeight);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製不須動畫的元素</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.drawStatic();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">  橫條</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.bars.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.rect(e.x, e.y, e.width * t, e.height);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.globalAlpha = t;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = e.color;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fill();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">  橫條文字</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.bars.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> x = e.width + <span class=\"keyword\">this</span>.chartLeft - <span class=\"number\">5</span>; <span class=\"comment\">// 修正x太低數值的文字改在橫條外顯示</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 修正x太低數值的文字改在橫條外顯示</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (x &lt; <span class=\"keyword\">this</span>.chartLeft + <span class=\"number\">50</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"string\">\"#000\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"left\"</span>;</span><br><span class=\"line\">    x = e.width + <span class=\"keyword\">this</span>.chartLeft + <span class=\"number\">5</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"string\">\"#fff\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"right\"</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(e.number, x, e.y + <span class=\"keyword\">this</span>.barWidth / <span class=\"number\">2</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// if this animation is over</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (t === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// stop this timer since we are done animating.</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer.stop();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>繪製的前後順序會影響繪製出來的圖層疊加效果，越後面繪製出來的元素會蓋在舊的元素上方。所以不需動畫的元素(ex: X軸、Y軸、標籤…)才特別拉出來寫成一個 function 放在繪製動畫之前。</p>\n</blockquote>\n<hr>\n<h2 id=\"不需動畫的元素\"><a href=\"#不需動畫的元素\" class=\"headerlink\" title=\"不需動畫的元素\"></a>不需動畫的元素</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drawStatic() &#123; <span class=\"comment\">// 繪製不須動畫的元素</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> tickSize = <span class=\"number\">6</span>; <span class=\"comment\">// 軸點大小</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    X軸</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.xTick = <span class=\"keyword\">this</span>.custom</span><br><span class=\"line\">    .append(<span class=\"string\">\"g\"</span>)</span><br><span class=\"line\">    .attr(<span class=\"string\">\"class\"</span>, <span class=\"string\">\"axis axisX\"</span>)</span><br><span class=\"line\">    .call(<span class=\"keyword\">this</span>.xAxis)</span><br><span class=\"line\">    .selectAll(<span class=\"string\">\"g.tick\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"comment\">// 中間內部灰線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.xTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xPos = <span class=\"built_in\">Number</span>(xTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">0</span>].split(<span class=\"string\">\"(\"</span>)[<span class=\"number\">1</span>]) + <span class=\"keyword\">this</span>.chartLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 跳過 0 的軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 繪製軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.moveTo(xPos, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineTo(xPos, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.setLineDash([<span class=\"number\">4</span>, <span class=\"number\">6</span>]);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineWidth = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.strokeStyle = <span class=\"string\">\"#efefef\"</span>; <span class=\"comment\">// 線顏色</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸文字</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"top\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.xTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xPos = <span class=\"built_in\">Number</span>(xTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">0</span>].split(<span class=\"string\">\"(\"</span>)[<span class=\"number\">1</span>]) + <span class=\"keyword\">this</span>.chartLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      node.property(<span class=\"string\">\"innerText\"</span>),</span><br><span class=\"line\">      xPos,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸標籤</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"top\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">    <span class=\"string\">\"件數\"</span>,</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.conWidth / <span class=\"number\">2</span>,</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + <span class=\"number\">30</span></span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    Y軸</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick = <span class=\"keyword\">this</span>.custom</span><br><span class=\"line\">    .append(<span class=\"string\">\"g\"</span>)</span><br><span class=\"line\">    .attr(<span class=\"string\">\"class\"</span>, <span class=\"string\">\"axis axisY\"</span>)</span><br><span class=\"line\">    .call(<span class=\"keyword\">this</span>.yAxis)</span><br><span class=\"line\">    .selectAll(<span class=\"string\">\"g.tick\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"comment\">// 黑色刻點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yPos = <span class=\"built_in\">Number</span>(yTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">1</span>].split(<span class=\"string\">\")\"</span>)[<span class=\"number\">0</span>]) + <span class=\"keyword\">this</span>.chartTop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 跳過 0 的軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 繪製軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft - tickSize, yPos);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, yPos);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\">  <span class=\"comment\">// 最下方的刻點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartLeft - tickSize,</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight</span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸文字</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"right\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yPos = <span class=\"built_in\">Number</span>(yTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">1</span>].split(<span class=\"string\">\")\"</span>)[<span class=\"number\">0</span>]) + <span class=\"keyword\">this</span>.chartTop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      node.property(<span class=\"string\">\"innerText\"</span>),</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft - tickSize,</span><br><span class=\"line\">      yPos</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>整個骨架如果熟悉的話，其實就是把動態部分跟靜態部分替換掉想要的圖形就完成囉，線上 demo <a href=\"https://annilla.github.io/d3-practice-vue-canvas/dist/\">在此</a>，也可以在<a href=\"https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/BarPChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a>查看完整程式碼，我們下回見～</p>"},{"title":"D3 v4 with Vue - CANVAS Line Chart","thumbnailImage":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no","coverMeta":"out","date":"2018-06-15T16:00:00.000Z","updated":"2018-06-15T16:00:00.000Z","_content":"\n前幾篇介紹完 `SVG` 的基本繪圖方式後，我們要來練習使用 `CANVAS` 來做一樣的折線圖，並在下一篇比較兩者的優缺點。\n\n<!--more-->\n\n***\n## 準備隨機資料 & `CANVAS` 畫布\n\n這邊的 `Canvas` 畫布因為需要動態計算寬高，所以會利用 `js` 動態插入 `html` 中。當視窗進行 `resize` 時，也是透過 `js` 清除畫布重新繪製。\n\n* HTML\n\n```html\n<!-- chartContain 主要就是 js 做判別插入 canvas 的定位點 -->\n<div class=\"chartContain\">\n  <!-- calPath 是將 D3 動態算出來的值做暫時存放的位置 -->\n  <svg version=\"1.1\" id=\"calPath\"><path d=\"\"></path></svg>\n  <!-- tooltip 和往常一樣是做滑過顯示資訊的功能 -->\n  <div :class=\"{ tooltip: true, hidden: hideTooltip}\">\n    <div class=\"name\">左營區 / 10月</div>\n    <div class=\"value\">214 件</div>\n  </div>\n</div>\n```\n\n在 randomData 完後，插入動態計算的 `Canvas` 畫布。\n\n```js\nmounted() {\n  // 隨機產生資料\n  this.randomData();\n},\nmethods: {\n  randomData() { // 隨機產生資料\n    let min = 0;\n    let max = 500;\n    let random = [...];\n\n    // 隨機產生資料\n    for (let i = 0; i < 3; i++) {\n      random[i].value.forEach(e => {\n        e.number = Math.floor(Math.random() * (max - min + 1)) + min;\n      });\n    }\n\n    this.data = random;\n\n    // Init Canvas\n    this.initCanvas();\n\n    // Window Resize\n    window.addEventListener(\"resize\", this.initCanvas);\n  },\n  initCanvas() { // 插入動態計算的 Canvas 區塊\n    let chartContain = document.querySelector(\".chartContain\");\n    let canvas = document.getElementById(\"canvas\");\n\n    // Clear Canvas Element\n    if (canvas !== null) {\n      canvas.parentNode.removeChild(canvas);\n    }\n\n    // Get Container Width\n    this.conWidth = chartContain.offsetWidth;\n\n    // For D3 Draw Canvas\n    this.canvas = d3\n      .select(\".chartContain\")\n      .append(\"canvas\")\n      .attr(\"id\", \"canvas\")\n      .attr(\"class\", \"chart\")\n      .attr(\"width\", this.conWidth)\n      .attr(\"height\", this.conHeight);\n\n    this.ctx = this.canvas.node().getContext(\"2d\");\n\n    // Set the parent of all other elements\n    this.customBase = document.createElement(\"custom\");\n    this.custom = d3.select(this.customBase);\n\n    // Draw Canvas\n    this.drawCanvas();\n  },\n}\n```\n\n```css\n.lineChart {\n  /* 說明 */\n  .detail {\n    color: gray;\n  }\n  .chartContain { /* 放置主要畫布的容器 */\n    max-width: 600px;\n    margin: 0 auto;\n    position: relative;\n    #calPath {\n      display: none; /* 隱藏暫時計算的 path 元件 */\n    }\n    .tooltip {\n      ...\n    }\n  }\n}\n```\n\n***\n## 繪製折線圖\n\n因為這邊要仿造 `SVG` 進行動畫，所以會用 `d3.timer` 的方式，隨著計時器每次清掉畫布再進行重新繪製的動作，所以整體畫面全靠 `js` 繪製，而不是 `html` 或 `css`。\n\n`mousemove` 的部分是當滑鼠滑過特定的點時，需要判別是否有經過繪製的折點，顯示相對的 `tooltip` 資訊。\n\n```js\ndrawCanvas() {\n  let canvas = document.querySelector(\"#canvas\");\n\n  /*-------------------------\n    動畫\n  -------------------------*/\n  this.timer = d3.timer(elapsed => {\n    this.animationLine(elapsed);\n  });\n\n  // Canvas On Mouseover\n  canvas.addEventListener(\"mousemove\", e => {\n    this.showTooltip(e);\n  });\n},\n```\n\n***\n## 折線圖動畫\n\n> 注意！這邊不使用 `requestAnimationFrame()` 的原因是不同瀏覽器要加相對應的前綴詞，且 `mobile` 支持度低，可參考線上 [MDN](https://developer.mozilla.org/zh-TW/docs/Web/API/Window.requestAnimationFrame) 說明。\n\n```js\nanimationLine(elapsed) {\n  let duration = 500;\n  let t = Math.min(1, elapsed / duration); // compute how far through the animation we are (0 to 1)\n\n  // Clear Canvas\n  this.ctx.clearRect(0, 0, this.conWidth, this.conHeight);\n\n  // 繪製不須動畫的元素\n  this.drawStatic();\n\n  /*-------------------------\n    折線\n  -------------------------*/\n  this.ctx.save();\n  this.lines.forEach((e, i) => {\n    let path = document.querySelector(\"#calPath path\");\n    let totalLength; // Path Length\n\n    path.setAttribute(\"d\", e.d); // 這邊將 D3 算好的折點佔存在 #calPath path 上\n    totalLength = path.getTotalLength();\n\n    this.ctx.setLineDash([totalLength]);\n    this.ctx.lineDashOffset = totalLength * (1 - t);\n    this.ctx.beginPath(); // 開始繪製\n    this.lineCanvas(this.dataArray[i]);\n    this.ctx.strokeStyle = e.color; // 線顏色\n    this.ctx.stroke(); // 繪製線\n  });\n\n  /*-------------------------\n    折點\n  -------------------------*/\n  this.dots.forEach((e, i) => {\n    // 開始繪製\n    this.ctx.beginPath();\n    // 繪製點\n    this.ctx.arc(e.cx, e.cy, e.r * t, 0, 2 * Math.PI);\n    // 填色\n    this.ctx.fillStyle = e.color;\n    this.ctx.fill();\n    // 邊框色\n    this.ctx.strokeStyle = \"#fff\";\n    this.ctx.stroke();\n    // 結束繪製\n    this.ctx.closePath();\n  });\n  this.ctx.restore();\n\n  // if this animation is over\n  if (t === 1) {\n    // stop this timer since we are done animating.\n    this.timer.stop();\n  }\n},\n```\n\n> 繪製的前後順序會影響繪製出來的圖層疊加效果，越後面繪製出來的元素會蓋在舊的元素上方。所以不需動畫的元素(ex: X軸、Y軸、標籤...)才特別拉出來寫成一個 function 放在繪製動畫之前。\n\n***\n## 不需動畫的元素\n\n```js\ndrawStatic() { // 繪製不須動畫的元素\n  let tickSize = 6; // 軸點大小\n\n  /*-------------------------\n    X軸\n  -------------------------*/\n  // 繪製X軸點\n  this.ctx.beginPath();\n  this.data[0].value.forEach((d, i) => {\n    this.ctx.moveTo(\n      this.xScale(i + 1) + this.chartLeft,\n      this.chartTop + this.chartHeight\n    );\n    this.ctx.lineTo(\n      this.xScale(i + 1) + this.chartLeft,\n      this.chartTop + this.chartHeight + tickSize\n    );\n  });\n  this.ctx.stroke();\n\n  // 繪製X軸線\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft, this.chartTop + this.chartHeight);\n  this.ctx.lineTo(\n    this.chartLeft + this.chartWidth,\n    this.chartTop + this.chartHeight\n  );\n  this.ctx.stroke();\n\n  // 繪製X軸文字\n  this.ctx.textAlign = \"center\";\n  this.ctx.textBaseline = \"top\";\n  this.data[0].value.forEach((d, i) => {\n    this.ctx.fillText(\n      d.month,\n      this.xScale(i + 1) + this.chartLeft,\n      this.chartTop + this.chartHeight + tickSize\n    );\n  });\n\n  // 繪製X軸標籤\n  this.data.forEach((el, index) => {\n    // 圓點\n    // 開始繪製\n    this.ctx.save();\n    this.ctx.beginPath();\n    // 繪製點\n    this.ctx.arc(\n      this.chartLeft + index * 100,\n      this.chartTop + this.chartHeight + 50,\n      5,\n      0,\n      2 * Math.PI\n    );\n    // 填色\n    this.ctx.fillStyle = this.color(index);\n    this.ctx.fill();\n    // 結束繪製\n    this.ctx.closePath();\n\n    // 文字\n    this.ctx.textAlign = \"left\";\n    this.ctx.textBaseline = \"middle\";\n    this.ctx.font = \"16px sans-serif\";\n    this.ctx.fillStyle = \"#000\";\n    this.ctx.fillText(\n      el.name,\n      this.chartLeft + index * 100 + 10,\n      this.chartTop + this.chartHeight + 50\n    );\n    this.ctx.restore();\n  });\n\n  /*-------------------------\n    Y軸\n  -------------------------*/\n  // Y軸節點\n  this.yTick = this.custom\n    .append(\"g\")\n    .attr(\"class\", \"axis axisY\")\n    .call(this.yAxis)\n    .selectAll(\"g.tick\");\n  \n  // 繪製Y軸點\n  this.ctx.beginPath();\n  // 中間內部灰線\n  this.yTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let yTrans = node.attr(\"transform\");\n    let yPos = Number(yTrans.split(\",\")[1].split(\")\")[0]) + this.chartTop;\n\n    // 跳過 0 的軸點\n    if (index === 0) return;\n\n    // 繪製軸點\n    this.ctx.moveTo(this.chartLeft, yPos);\n    this.ctx.lineTo(this.chartLeft + this.chartWidth, yPos);\n  });\n  this.ctx.strokeStyle = \"#e6e6e6\"; // 線顏色\n  this.ctx.stroke();\n  // 最上方的刻點\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft - tickSize, this.chartTop);\n  this.ctx.lineTo(this.chartLeft, this.chartTop);\n  this.ctx.strokeStyle = \"#000\"; // 線顏色\n  this.ctx.stroke();\n\n  // 繪製Y軸線\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft, this.chartTop);\n  this.ctx.lineTo(this.chartLeft, this.chartTop + this.chartHeight);\n  this.ctx.stroke();\n\n  // 繪製Y軸文字\n  this.ctx.textAlign = \"right\";\n  this.ctx.textBaseline = \"middle\";\n  this.yTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let yTrans = node.attr(\"transform\");\n    let yPos = Number(yTrans.split(\",\")[1].split(\")\")[0]) + this.chartTop;\n\n    this.ctx.fillText(\n      node.property(\"innerText\"),\n      this.chartLeft - tickSize,\n      yPos\n    );\n  });\n\n  // 繪製Y軸標籤\n  // start by saving the current context (current orientation, origin)\n  this.ctx.save();\n  this.ctx.translate(0, 0);\n  this.ctx.rotate(-Math.PI / 2);\n  this.ctx.textAlign = \"center\";\n  this.ctx.textBaseline = \"top\";\n  this.ctx.font = \"16px sans-serif\";\n  this.ctx.fillText(\"件數\", -(this.chartTop + this.chartHeight / 2), 0);\n  this.ctx.restore(); // now restore the canvas flipping it back to its original orientation\n},\n```\n\n其他部分跟 `SVG` 的做法很類似，主要觀念就是要把 `html`, `css` rendor 的部分全部移交給 `js` 做，線上 demo [在此](https://annilla.github.io/d3-practice-vue-canvas/dist/)，也可以在 [Github](https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/LineChart.vue)查看完整程式碼，下一篇我們就要來分析 SVG 和 Canvas 的差異和各自的優勢。\n","source":"_posts/D3/D3-v4-with-Vue-CANVAS-Line-Chart.md","raw":"---\ntitle: D3 v4 with Vue - CANVAS Line Chart\ncategories:\n  - D3\nthumbnailImage: https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no\ncoverMeta: out\ntags: [D3, Vue, CANVAS]\ndate: 2018/06/16\nupdated: 2018/06/16\n---\n\n前幾篇介紹完 `SVG` 的基本繪圖方式後，我們要來練習使用 `CANVAS` 來做一樣的折線圖，並在下一篇比較兩者的優缺點。\n\n<!--more-->\n\n***\n## 準備隨機資料 & `CANVAS` 畫布\n\n這邊的 `Canvas` 畫布因為需要動態計算寬高，所以會利用 `js` 動態插入 `html` 中。當視窗進行 `resize` 時，也是透過 `js` 清除畫布重新繪製。\n\n* HTML\n\n```html\n<!-- chartContain 主要就是 js 做判別插入 canvas 的定位點 -->\n<div class=\"chartContain\">\n  <!-- calPath 是將 D3 動態算出來的值做暫時存放的位置 -->\n  <svg version=\"1.1\" id=\"calPath\"><path d=\"\"></path></svg>\n  <!-- tooltip 和往常一樣是做滑過顯示資訊的功能 -->\n  <div :class=\"{ tooltip: true, hidden: hideTooltip}\">\n    <div class=\"name\">左營區 / 10月</div>\n    <div class=\"value\">214 件</div>\n  </div>\n</div>\n```\n\n在 randomData 完後，插入動態計算的 `Canvas` 畫布。\n\n```js\nmounted() {\n  // 隨機產生資料\n  this.randomData();\n},\nmethods: {\n  randomData() { // 隨機產生資料\n    let min = 0;\n    let max = 500;\n    let random = [...];\n\n    // 隨機產生資料\n    for (let i = 0; i < 3; i++) {\n      random[i].value.forEach(e => {\n        e.number = Math.floor(Math.random() * (max - min + 1)) + min;\n      });\n    }\n\n    this.data = random;\n\n    // Init Canvas\n    this.initCanvas();\n\n    // Window Resize\n    window.addEventListener(\"resize\", this.initCanvas);\n  },\n  initCanvas() { // 插入動態計算的 Canvas 區塊\n    let chartContain = document.querySelector(\".chartContain\");\n    let canvas = document.getElementById(\"canvas\");\n\n    // Clear Canvas Element\n    if (canvas !== null) {\n      canvas.parentNode.removeChild(canvas);\n    }\n\n    // Get Container Width\n    this.conWidth = chartContain.offsetWidth;\n\n    // For D3 Draw Canvas\n    this.canvas = d3\n      .select(\".chartContain\")\n      .append(\"canvas\")\n      .attr(\"id\", \"canvas\")\n      .attr(\"class\", \"chart\")\n      .attr(\"width\", this.conWidth)\n      .attr(\"height\", this.conHeight);\n\n    this.ctx = this.canvas.node().getContext(\"2d\");\n\n    // Set the parent of all other elements\n    this.customBase = document.createElement(\"custom\");\n    this.custom = d3.select(this.customBase);\n\n    // Draw Canvas\n    this.drawCanvas();\n  },\n}\n```\n\n```css\n.lineChart {\n  /* 說明 */\n  .detail {\n    color: gray;\n  }\n  .chartContain { /* 放置主要畫布的容器 */\n    max-width: 600px;\n    margin: 0 auto;\n    position: relative;\n    #calPath {\n      display: none; /* 隱藏暫時計算的 path 元件 */\n    }\n    .tooltip {\n      ...\n    }\n  }\n}\n```\n\n***\n## 繪製折線圖\n\n因為這邊要仿造 `SVG` 進行動畫，所以會用 `d3.timer` 的方式，隨著計時器每次清掉畫布再進行重新繪製的動作，所以整體畫面全靠 `js` 繪製，而不是 `html` 或 `css`。\n\n`mousemove` 的部分是當滑鼠滑過特定的點時，需要判別是否有經過繪製的折點，顯示相對的 `tooltip` 資訊。\n\n```js\ndrawCanvas() {\n  let canvas = document.querySelector(\"#canvas\");\n\n  /*-------------------------\n    動畫\n  -------------------------*/\n  this.timer = d3.timer(elapsed => {\n    this.animationLine(elapsed);\n  });\n\n  // Canvas On Mouseover\n  canvas.addEventListener(\"mousemove\", e => {\n    this.showTooltip(e);\n  });\n},\n```\n\n***\n## 折線圖動畫\n\n> 注意！這邊不使用 `requestAnimationFrame()` 的原因是不同瀏覽器要加相對應的前綴詞，且 `mobile` 支持度低，可參考線上 [MDN](https://developer.mozilla.org/zh-TW/docs/Web/API/Window.requestAnimationFrame) 說明。\n\n```js\nanimationLine(elapsed) {\n  let duration = 500;\n  let t = Math.min(1, elapsed / duration); // compute how far through the animation we are (0 to 1)\n\n  // Clear Canvas\n  this.ctx.clearRect(0, 0, this.conWidth, this.conHeight);\n\n  // 繪製不須動畫的元素\n  this.drawStatic();\n\n  /*-------------------------\n    折線\n  -------------------------*/\n  this.ctx.save();\n  this.lines.forEach((e, i) => {\n    let path = document.querySelector(\"#calPath path\");\n    let totalLength; // Path Length\n\n    path.setAttribute(\"d\", e.d); // 這邊將 D3 算好的折點佔存在 #calPath path 上\n    totalLength = path.getTotalLength();\n\n    this.ctx.setLineDash([totalLength]);\n    this.ctx.lineDashOffset = totalLength * (1 - t);\n    this.ctx.beginPath(); // 開始繪製\n    this.lineCanvas(this.dataArray[i]);\n    this.ctx.strokeStyle = e.color; // 線顏色\n    this.ctx.stroke(); // 繪製線\n  });\n\n  /*-------------------------\n    折點\n  -------------------------*/\n  this.dots.forEach((e, i) => {\n    // 開始繪製\n    this.ctx.beginPath();\n    // 繪製點\n    this.ctx.arc(e.cx, e.cy, e.r * t, 0, 2 * Math.PI);\n    // 填色\n    this.ctx.fillStyle = e.color;\n    this.ctx.fill();\n    // 邊框色\n    this.ctx.strokeStyle = \"#fff\";\n    this.ctx.stroke();\n    // 結束繪製\n    this.ctx.closePath();\n  });\n  this.ctx.restore();\n\n  // if this animation is over\n  if (t === 1) {\n    // stop this timer since we are done animating.\n    this.timer.stop();\n  }\n},\n```\n\n> 繪製的前後順序會影響繪製出來的圖層疊加效果，越後面繪製出來的元素會蓋在舊的元素上方。所以不需動畫的元素(ex: X軸、Y軸、標籤...)才特別拉出來寫成一個 function 放在繪製動畫之前。\n\n***\n## 不需動畫的元素\n\n```js\ndrawStatic() { // 繪製不須動畫的元素\n  let tickSize = 6; // 軸點大小\n\n  /*-------------------------\n    X軸\n  -------------------------*/\n  // 繪製X軸點\n  this.ctx.beginPath();\n  this.data[0].value.forEach((d, i) => {\n    this.ctx.moveTo(\n      this.xScale(i + 1) + this.chartLeft,\n      this.chartTop + this.chartHeight\n    );\n    this.ctx.lineTo(\n      this.xScale(i + 1) + this.chartLeft,\n      this.chartTop + this.chartHeight + tickSize\n    );\n  });\n  this.ctx.stroke();\n\n  // 繪製X軸線\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft, this.chartTop + this.chartHeight);\n  this.ctx.lineTo(\n    this.chartLeft + this.chartWidth,\n    this.chartTop + this.chartHeight\n  );\n  this.ctx.stroke();\n\n  // 繪製X軸文字\n  this.ctx.textAlign = \"center\";\n  this.ctx.textBaseline = \"top\";\n  this.data[0].value.forEach((d, i) => {\n    this.ctx.fillText(\n      d.month,\n      this.xScale(i + 1) + this.chartLeft,\n      this.chartTop + this.chartHeight + tickSize\n    );\n  });\n\n  // 繪製X軸標籤\n  this.data.forEach((el, index) => {\n    // 圓點\n    // 開始繪製\n    this.ctx.save();\n    this.ctx.beginPath();\n    // 繪製點\n    this.ctx.arc(\n      this.chartLeft + index * 100,\n      this.chartTop + this.chartHeight + 50,\n      5,\n      0,\n      2 * Math.PI\n    );\n    // 填色\n    this.ctx.fillStyle = this.color(index);\n    this.ctx.fill();\n    // 結束繪製\n    this.ctx.closePath();\n\n    // 文字\n    this.ctx.textAlign = \"left\";\n    this.ctx.textBaseline = \"middle\";\n    this.ctx.font = \"16px sans-serif\";\n    this.ctx.fillStyle = \"#000\";\n    this.ctx.fillText(\n      el.name,\n      this.chartLeft + index * 100 + 10,\n      this.chartTop + this.chartHeight + 50\n    );\n    this.ctx.restore();\n  });\n\n  /*-------------------------\n    Y軸\n  -------------------------*/\n  // Y軸節點\n  this.yTick = this.custom\n    .append(\"g\")\n    .attr(\"class\", \"axis axisY\")\n    .call(this.yAxis)\n    .selectAll(\"g.tick\");\n  \n  // 繪製Y軸點\n  this.ctx.beginPath();\n  // 中間內部灰線\n  this.yTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let yTrans = node.attr(\"transform\");\n    let yPos = Number(yTrans.split(\",\")[1].split(\")\")[0]) + this.chartTop;\n\n    // 跳過 0 的軸點\n    if (index === 0) return;\n\n    // 繪製軸點\n    this.ctx.moveTo(this.chartLeft, yPos);\n    this.ctx.lineTo(this.chartLeft + this.chartWidth, yPos);\n  });\n  this.ctx.strokeStyle = \"#e6e6e6\"; // 線顏色\n  this.ctx.stroke();\n  // 最上方的刻點\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft - tickSize, this.chartTop);\n  this.ctx.lineTo(this.chartLeft, this.chartTop);\n  this.ctx.strokeStyle = \"#000\"; // 線顏色\n  this.ctx.stroke();\n\n  // 繪製Y軸線\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft, this.chartTop);\n  this.ctx.lineTo(this.chartLeft, this.chartTop + this.chartHeight);\n  this.ctx.stroke();\n\n  // 繪製Y軸文字\n  this.ctx.textAlign = \"right\";\n  this.ctx.textBaseline = \"middle\";\n  this.yTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let yTrans = node.attr(\"transform\");\n    let yPos = Number(yTrans.split(\",\")[1].split(\")\")[0]) + this.chartTop;\n\n    this.ctx.fillText(\n      node.property(\"innerText\"),\n      this.chartLeft - tickSize,\n      yPos\n    );\n  });\n\n  // 繪製Y軸標籤\n  // start by saving the current context (current orientation, origin)\n  this.ctx.save();\n  this.ctx.translate(0, 0);\n  this.ctx.rotate(-Math.PI / 2);\n  this.ctx.textAlign = \"center\";\n  this.ctx.textBaseline = \"top\";\n  this.ctx.font = \"16px sans-serif\";\n  this.ctx.fillText(\"件數\", -(this.chartTop + this.chartHeight / 2), 0);\n  this.ctx.restore(); // now restore the canvas flipping it back to its original orientation\n},\n```\n\n其他部分跟 `SVG` 的做法很類似，主要觀念就是要把 `html`, `css` rendor 的部分全部移交給 `js` 做，線上 demo [在此](https://annilla.github.io/d3-practice-vue-canvas/dist/)，也可以在 [Github](https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/LineChart.vue)查看完整程式碼，下一篇我們就要來分析 SVG 和 Canvas 的差異和各自的優勢。\n","slug":"D3/D3-v4-with-Vue-CANVAS-Line-Chart","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74a000htudhyk7ktcx5","content":"<p>前幾篇介紹完 <code>SVG</code> 的基本繪圖方式後，我們要來練習使用 <code>CANVAS</code> 來做一樣的折線圖，並在下一篇比較兩者的優缺點。</p>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"準備隨機資料-amp-CANVAS-畫布\"><a href=\"#準備隨機資料-amp-CANVAS-畫布\" class=\"headerlink\" title=\"準備隨機資料 &amp; CANVAS 畫布\"></a>準備隨機資料 &amp; <code>CANVAS</code> 畫布</h2><p>這邊的 <code>Canvas</code> 畫布因為需要動態計算寬高，所以會利用 <code>js</code> 動態插入 <code>html</code> 中。當視窗進行 <code>resize</code> 時，也是透過 <code>js</code> 清除畫布重新繪製。</p>\n<ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- chartContain 主要就是 js 做判別插入 canvas 的定位點 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"chartContain\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- calPath 是將 D3 動態算出來的值做暫時存放的位置 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">svg</span> <span class=\"attr\">version</span>=<span class=\"string\">\"1.1\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"calPath\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">path</span> <span class=\"attr\">d</span>=<span class=\"string\">\"\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">path</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- tooltip 和往常一樣是做滑過顯示資訊的功能 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"&#123; tooltip: true, hidden: hideTooltip&#125;\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"name\"</span>&gt;</span>左營區 / 10月<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"value\"</span>&gt;</span>214 件<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>在 randomData 完後，插入動態計算的 <code>Canvas</code> 畫布。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mounted() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 隨機產生資料</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.randomData();</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  randomData() &#123; <span class=\"comment\">// 隨機產生資料</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> min = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> max = <span class=\"number\">500</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> random = [...];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 隨機產生資料</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">      random[i].value.forEach(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">        e.number = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * (max - min + <span class=\"number\">1</span>)) + min;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.data = random;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Init Canvas</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.initCanvas();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Window Resize</span></span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">\"resize\"</span>, <span class=\"keyword\">this</span>.initCanvas);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  initCanvas() &#123; <span class=\"comment\">// 插入動態計算的 Canvas 區塊</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> chartContain = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\".chartContain\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> canvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"canvas\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Clear Canvas Element</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (canvas !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      canvas.parentNode.removeChild(canvas);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Get Container Width</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.conWidth = chartContain.offsetWidth;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// For D3 Draw Canvas</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.canvas = d3</span><br><span class=\"line\">      .select(<span class=\"string\">\".chartContain\"</span>)</span><br><span class=\"line\">      .append(<span class=\"string\">\"canvas\"</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">\"id\"</span>, <span class=\"string\">\"canvas\"</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">\"class\"</span>, <span class=\"string\">\"chart\"</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">\"width\"</span>, <span class=\"keyword\">this</span>.conWidth)</span><br><span class=\"line\">      .attr(<span class=\"string\">\"height\"</span>, <span class=\"keyword\">this</span>.conHeight);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx = <span class=\"keyword\">this</span>.canvas.node().getContext(<span class=\"string\">\"2d\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Set the parent of all other elements</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.customBase = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"custom\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.custom = d3.select(<span class=\"keyword\">this</span>.customBase);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Draw Canvas</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.drawCanvas();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.lineChart</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* 說明 */</span></span><br><span class=\"line\">  .detail &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">color</span>: <span class=\"selector-tag\">gray</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-class\">.chartContain</span> &#123; <span class=\"comment\">/* 放置主要畫布的容器 */</span></span><br><span class=\"line\">    <span class=\"attribute\">max-width</span>: <span class=\"number\">600px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">    #calPath &#123;</span><br><span class=\"line\">      <span class=\"selector-tag\">display</span>: <span class=\"selector-tag\">none</span>; <span class=\"comment\">/* 隱藏暫時計算的 path 元件 */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.tooltip</span> &#123;</span><br><span class=\"line\">      ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"繪製折線圖\"><a href=\"#繪製折線圖\" class=\"headerlink\" title=\"繪製折線圖\"></a>繪製折線圖</h2><p>因為這邊要仿造 <code>SVG</code> 進行動畫，所以會用 <code>d3.timer</code> 的方式，隨著計時器每次清掉畫布再進行重新繪製的動作，所以整體畫面全靠 <code>js</code> 繪製，而不是 <code>html</code> 或 <code>css</code>。</p>\n<p><code>mousemove</code> 的部分是當滑鼠滑過特定的點時，需要判別是否有經過繪製的折點，顯示相對的 <code>tooltip</code> 資訊。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drawCanvas() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> canvas = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\"#canvas\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    動畫</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.timer = d3.timer(<span class=\"function\"><span class=\"params\">elapsed</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.animationLine(elapsed);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Canvas On Mouseover</span></span><br><span class=\"line\">  canvas.addEventListener(<span class=\"string\">\"mousemove\"</span>, e =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.showTooltip(e);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"折線圖動畫\"><a href=\"#折線圖動畫\" class=\"headerlink\" title=\"折線圖動畫\"></a>折線圖動畫</h2><blockquote>\n<p>注意！這邊不使用 <code>requestAnimationFrame()</code> 的原因是不同瀏覽器要加相對應的前綴詞，且 <code>mobile</code> 支持度低，可參考線上 <a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/Window.requestAnimationFrame\" target=\"_blank\" rel=\"noopener\">MDN</a> 說明。</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">animationLine(elapsed) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> duration = <span class=\"number\">500</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">1</span>, elapsed / duration); <span class=\"comment\">// compute how far through the animation we are (0 to 1)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Clear Canvas</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"keyword\">this</span>.conWidth, <span class=\"keyword\">this</span>.conHeight);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製不須動畫的元素</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.drawStatic();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    折線</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.lines.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> path = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\"#calPath path\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> totalLength; <span class=\"comment\">// Path Length</span></span><br><span class=\"line\"></span><br><span class=\"line\">    path.setAttribute(<span class=\"string\">\"d\"</span>, e.d); <span class=\"comment\">// 這邊將 D3 算好的折點佔存在 #calPath path 上</span></span><br><span class=\"line\">    totalLength = path.getTotalLength();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.setLineDash([totalLength]);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineDashOffset = totalLength * (<span class=\"number\">1</span> - t);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.beginPath(); <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.lineCanvas(<span class=\"keyword\">this</span>.dataArray[i]);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.strokeStyle = e.color; <span class=\"comment\">// 線顏色</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.stroke(); <span class=\"comment\">// 繪製線</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    折點</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.dots.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">    <span class=\"comment\">// 繪製點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.arc(e.cx, e.cy, e.r * t, <span class=\"number\">0</span>, <span class=\"number\">2</span> * <span class=\"built_in\">Math</span>.PI);</span><br><span class=\"line\">    <span class=\"comment\">// 填色</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = e.color;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fill();</span><br><span class=\"line\">    <span class=\"comment\">// 邊框色</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.strokeStyle = <span class=\"string\">\"#fff\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\">    <span class=\"comment\">// 結束繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.closePath();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// if this animation is over</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (t === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// stop this timer since we are done animating.</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer.stop();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>繪製的前後順序會影響繪製出來的圖層疊加效果，越後面繪製出來的元素會蓋在舊的元素上方。所以不需動畫的元素(ex: X軸、Y軸、標籤…)才特別拉出來寫成一個 function 放在繪製動畫之前。</p>\n</blockquote>\n<hr>\n<h2 id=\"不需動畫的元素\"><a href=\"#不需動畫的元素\" class=\"headerlink\" title=\"不需動畫的元素\"></a>不需動畫的元素</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drawStatic() &#123; <span class=\"comment\">// 繪製不須動畫的元素</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> tickSize = <span class=\"number\">6</span>; <span class=\"comment\">// 軸點大小</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    X軸</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.data[<span class=\"number\">0</span>].value.forEach(<span class=\"function\">(<span class=\"params\">d, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.moveTo(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.xScale(i + <span class=\"number\">1</span>) + <span class=\"keyword\">this</span>.chartLeft,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight</span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineTo(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.xScale(i + <span class=\"number\">1</span>) + <span class=\"keyword\">this</span>.chartLeft,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + tickSize</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartLeft + <span class=\"keyword\">this</span>.chartWidth,</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight</span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸文字</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"top\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.data[<span class=\"number\">0</span>].value.forEach(<span class=\"function\">(<span class=\"params\">d, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      d.month,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.xScale(i + <span class=\"number\">1</span>) + <span class=\"keyword\">this</span>.chartLeft,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + tickSize</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸標籤</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\">(<span class=\"params\">el, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 圓點</span></span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">    <span class=\"comment\">// 繪製點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.arc(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft + index * <span class=\"number\">100</span>,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + <span class=\"number\">50</span>,</span><br><span class=\"line\">      <span class=\"number\">5</span>,</span><br><span class=\"line\">      <span class=\"number\">0</span>,</span><br><span class=\"line\">      <span class=\"number\">2</span> * <span class=\"built_in\">Math</span>.PI</span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"comment\">// 填色</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"keyword\">this</span>.color(index);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fill();</span><br><span class=\"line\">    <span class=\"comment\">// 結束繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.closePath();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 文字</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"left\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"string\">\"#000\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      el.name,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft + index * <span class=\"number\">100</span> + <span class=\"number\">10</span>,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + <span class=\"number\">50</span></span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    Y軸</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"comment\">// Y軸節點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick = <span class=\"keyword\">this</span>.custom</span><br><span class=\"line\">    .append(<span class=\"string\">\"g\"</span>)</span><br><span class=\"line\">    .attr(<span class=\"string\">\"class\"</span>, <span class=\"string\">\"axis axisY\"</span>)</span><br><span class=\"line\">    .call(<span class=\"keyword\">this</span>.yAxis)</span><br><span class=\"line\">    .selectAll(<span class=\"string\">\"g.tick\"</span>);</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"comment\">// 中間內部灰線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yPos = <span class=\"built_in\">Number</span>(yTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">1</span>].split(<span class=\"string\">\")\"</span>)[<span class=\"number\">0</span>]) + <span class=\"keyword\">this</span>.chartTop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 跳過 0 的軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 繪製軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, yPos);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft + <span class=\"keyword\">this</span>.chartWidth, yPos);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.strokeStyle = <span class=\"string\">\"#e6e6e6\"</span>; <span class=\"comment\">// 線顏色</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\">  <span class=\"comment\">// 最上方的刻點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft - tickSize, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.strokeStyle = <span class=\"string\">\"#000\"</span>; <span class=\"comment\">// 線顏色</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸文字</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"right\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yPos = <span class=\"built_in\">Number</span>(yTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">1</span>].split(<span class=\"string\">\")\"</span>)[<span class=\"number\">0</span>]) + <span class=\"keyword\">this</span>.chartTop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      node.property(<span class=\"string\">\"innerText\"</span>),</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft - tickSize,</span><br><span class=\"line\">      yPos</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸標籤</span></span><br><span class=\"line\">  <span class=\"comment\">// start by saving the current context (current orientation, origin)</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.translate(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.rotate(-<span class=\"built_in\">Math</span>.PI / <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"top\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.fillText(<span class=\"string\">\"件數\"</span>, -(<span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight / <span class=\"number\">2</span>), <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore(); <span class=\"comment\">// now restore the canvas flipping it back to its original orientation</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>其他部分跟 <code>SVG</code> 的做法很類似，主要觀念就是要把 <code>html</code>, <code>css</code> rendor 的部分全部移交給 <code>js</code> 做，線上 demo <a href=\"https://annilla.github.io/d3-practice-vue-canvas/dist/\">在此</a>，也可以在 <a href=\"https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/LineChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a>查看完整程式碼，下一篇我們就要來分析 SVG 和 Canvas 的差異和各自的優勢。</p>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","excerpt":"<p>前幾篇介紹完 <code>SVG</code> 的基本繪圖方式後，我們要來練習使用 <code>CANVAS</code> 來做一樣的折線圖，並在下一篇比較兩者的優缺點。</p>","more":"<hr>\n<h2 id=\"準備隨機資料-amp-CANVAS-畫布\"><a href=\"#準備隨機資料-amp-CANVAS-畫布\" class=\"headerlink\" title=\"準備隨機資料 &amp; CANVAS 畫布\"></a>準備隨機資料 &amp; <code>CANVAS</code> 畫布</h2><p>這邊的 <code>Canvas</code> 畫布因為需要動態計算寬高，所以會利用 <code>js</code> 動態插入 <code>html</code> 中。當視窗進行 <code>resize</code> 時，也是透過 <code>js</code> 清除畫布重新繪製。</p>\n<ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- chartContain 主要就是 js 做判別插入 canvas 的定位點 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"chartContain\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- calPath 是將 D3 動態算出來的值做暫時存放的位置 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">svg</span> <span class=\"attr\">version</span>=<span class=\"string\">\"1.1\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"calPath\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">path</span> <span class=\"attr\">d</span>=<span class=\"string\">\"\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">path</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- tooltip 和往常一樣是做滑過顯示資訊的功能 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"&#123; tooltip: true, hidden: hideTooltip&#125;\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"name\"</span>&gt;</span>左營區 / 10月<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"value\"</span>&gt;</span>214 件<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>在 randomData 完後，插入動態計算的 <code>Canvas</code> 畫布。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mounted() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 隨機產生資料</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.randomData();</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  randomData() &#123; <span class=\"comment\">// 隨機產生資料</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> min = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> max = <span class=\"number\">500</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> random = [...];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 隨機產生資料</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">      random[i].value.forEach(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">        e.number = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * (max - min + <span class=\"number\">1</span>)) + min;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.data = random;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Init Canvas</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.initCanvas();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Window Resize</span></span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">\"resize\"</span>, <span class=\"keyword\">this</span>.initCanvas);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  initCanvas() &#123; <span class=\"comment\">// 插入動態計算的 Canvas 區塊</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> chartContain = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\".chartContain\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> canvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"canvas\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Clear Canvas Element</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (canvas !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      canvas.parentNode.removeChild(canvas);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Get Container Width</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.conWidth = chartContain.offsetWidth;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// For D3 Draw Canvas</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.canvas = d3</span><br><span class=\"line\">      .select(<span class=\"string\">\".chartContain\"</span>)</span><br><span class=\"line\">      .append(<span class=\"string\">\"canvas\"</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">\"id\"</span>, <span class=\"string\">\"canvas\"</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">\"class\"</span>, <span class=\"string\">\"chart\"</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">\"width\"</span>, <span class=\"keyword\">this</span>.conWidth)</span><br><span class=\"line\">      .attr(<span class=\"string\">\"height\"</span>, <span class=\"keyword\">this</span>.conHeight);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx = <span class=\"keyword\">this</span>.canvas.node().getContext(<span class=\"string\">\"2d\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Set the parent of all other elements</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.customBase = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"custom\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.custom = d3.select(<span class=\"keyword\">this</span>.customBase);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Draw Canvas</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.drawCanvas();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.lineChart</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* 說明 */</span></span><br><span class=\"line\">  .detail &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">color</span>: <span class=\"selector-tag\">gray</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-class\">.chartContain</span> &#123; <span class=\"comment\">/* 放置主要畫布的容器 */</span></span><br><span class=\"line\">    <span class=\"attribute\">max-width</span>: <span class=\"number\">600px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">    #calPath &#123;</span><br><span class=\"line\">      <span class=\"selector-tag\">display</span>: <span class=\"selector-tag\">none</span>; <span class=\"comment\">/* 隱藏暫時計算的 path 元件 */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.tooltip</span> &#123;</span><br><span class=\"line\">      ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"繪製折線圖\"><a href=\"#繪製折線圖\" class=\"headerlink\" title=\"繪製折線圖\"></a>繪製折線圖</h2><p>因為這邊要仿造 <code>SVG</code> 進行動畫，所以會用 <code>d3.timer</code> 的方式，隨著計時器每次清掉畫布再進行重新繪製的動作，所以整體畫面全靠 <code>js</code> 繪製，而不是 <code>html</code> 或 <code>css</code>。</p>\n<p><code>mousemove</code> 的部分是當滑鼠滑過特定的點時，需要判別是否有經過繪製的折點，顯示相對的 <code>tooltip</code> 資訊。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drawCanvas() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> canvas = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\"#canvas\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    動畫</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.timer = d3.timer(<span class=\"function\"><span class=\"params\">elapsed</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.animationLine(elapsed);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Canvas On Mouseover</span></span><br><span class=\"line\">  canvas.addEventListener(<span class=\"string\">\"mousemove\"</span>, e =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.showTooltip(e);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"折線圖動畫\"><a href=\"#折線圖動畫\" class=\"headerlink\" title=\"折線圖動畫\"></a>折線圖動畫</h2><blockquote>\n<p>注意！這邊不使用 <code>requestAnimationFrame()</code> 的原因是不同瀏覽器要加相對應的前綴詞，且 <code>mobile</code> 支持度低，可參考線上 <a href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/Window.requestAnimationFrame\" target=\"_blank\" rel=\"noopener\">MDN</a> 說明。</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">animationLine(elapsed) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> duration = <span class=\"number\">500</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">1</span>, elapsed / duration); <span class=\"comment\">// compute how far through the animation we are (0 to 1)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Clear Canvas</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"keyword\">this</span>.conWidth, <span class=\"keyword\">this</span>.conHeight);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製不須動畫的元素</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.drawStatic();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    折線</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.lines.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> path = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\"#calPath path\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> totalLength; <span class=\"comment\">// Path Length</span></span><br><span class=\"line\"></span><br><span class=\"line\">    path.setAttribute(<span class=\"string\">\"d\"</span>, e.d); <span class=\"comment\">// 這邊將 D3 算好的折點佔存在 #calPath path 上</span></span><br><span class=\"line\">    totalLength = path.getTotalLength();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.setLineDash([totalLength]);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineDashOffset = totalLength * (<span class=\"number\">1</span> - t);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.beginPath(); <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.lineCanvas(<span class=\"keyword\">this</span>.dataArray[i]);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.strokeStyle = e.color; <span class=\"comment\">// 線顏色</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.stroke(); <span class=\"comment\">// 繪製線</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    折點</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.dots.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">    <span class=\"comment\">// 繪製點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.arc(e.cx, e.cy, e.r * t, <span class=\"number\">0</span>, <span class=\"number\">2</span> * <span class=\"built_in\">Math</span>.PI);</span><br><span class=\"line\">    <span class=\"comment\">// 填色</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = e.color;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fill();</span><br><span class=\"line\">    <span class=\"comment\">// 邊框色</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.strokeStyle = <span class=\"string\">\"#fff\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\">    <span class=\"comment\">// 結束繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.closePath();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// if this animation is over</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (t === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// stop this timer since we are done animating.</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer.stop();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>繪製的前後順序會影響繪製出來的圖層疊加效果，越後面繪製出來的元素會蓋在舊的元素上方。所以不需動畫的元素(ex: X軸、Y軸、標籤…)才特別拉出來寫成一個 function 放在繪製動畫之前。</p>\n</blockquote>\n<hr>\n<h2 id=\"不需動畫的元素\"><a href=\"#不需動畫的元素\" class=\"headerlink\" title=\"不需動畫的元素\"></a>不需動畫的元素</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drawStatic() &#123; <span class=\"comment\">// 繪製不須動畫的元素</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> tickSize = <span class=\"number\">6</span>; <span class=\"comment\">// 軸點大小</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    X軸</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.data[<span class=\"number\">0</span>].value.forEach(<span class=\"function\">(<span class=\"params\">d, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.moveTo(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.xScale(i + <span class=\"number\">1</span>) + <span class=\"keyword\">this</span>.chartLeft,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight</span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineTo(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.xScale(i + <span class=\"number\">1</span>) + <span class=\"keyword\">this</span>.chartLeft,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + tickSize</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartLeft + <span class=\"keyword\">this</span>.chartWidth,</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight</span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸文字</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"top\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.data[<span class=\"number\">0</span>].value.forEach(<span class=\"function\">(<span class=\"params\">d, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      d.month,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.xScale(i + <span class=\"number\">1</span>) + <span class=\"keyword\">this</span>.chartLeft,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + tickSize</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸標籤</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\">(<span class=\"params\">el, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 圓點</span></span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">    <span class=\"comment\">// 繪製點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.arc(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft + index * <span class=\"number\">100</span>,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + <span class=\"number\">50</span>,</span><br><span class=\"line\">      <span class=\"number\">5</span>,</span><br><span class=\"line\">      <span class=\"number\">0</span>,</span><br><span class=\"line\">      <span class=\"number\">2</span> * <span class=\"built_in\">Math</span>.PI</span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"comment\">// 填色</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"keyword\">this</span>.color(index);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fill();</span><br><span class=\"line\">    <span class=\"comment\">// 結束繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.closePath();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 文字</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"left\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"string\">\"#000\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      el.name,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft + index * <span class=\"number\">100</span> + <span class=\"number\">10</span>,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + <span class=\"number\">50</span></span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    Y軸</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"comment\">// Y軸節點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick = <span class=\"keyword\">this</span>.custom</span><br><span class=\"line\">    .append(<span class=\"string\">\"g\"</span>)</span><br><span class=\"line\">    .attr(<span class=\"string\">\"class\"</span>, <span class=\"string\">\"axis axisY\"</span>)</span><br><span class=\"line\">    .call(<span class=\"keyword\">this</span>.yAxis)</span><br><span class=\"line\">    .selectAll(<span class=\"string\">\"g.tick\"</span>);</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"comment\">// 中間內部灰線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yPos = <span class=\"built_in\">Number</span>(yTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">1</span>].split(<span class=\"string\">\")\"</span>)[<span class=\"number\">0</span>]) + <span class=\"keyword\">this</span>.chartTop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 跳過 0 的軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 繪製軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, yPos);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft + <span class=\"keyword\">this</span>.chartWidth, yPos);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.strokeStyle = <span class=\"string\">\"#e6e6e6\"</span>; <span class=\"comment\">// 線顏色</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\">  <span class=\"comment\">// 最上方的刻點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft - tickSize, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.strokeStyle = <span class=\"string\">\"#000\"</span>; <span class=\"comment\">// 線顏色</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸文字</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"right\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yPos = <span class=\"built_in\">Number</span>(yTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">1</span>].split(<span class=\"string\">\")\"</span>)[<span class=\"number\">0</span>]) + <span class=\"keyword\">this</span>.chartTop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      node.property(<span class=\"string\">\"innerText\"</span>),</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft - tickSize,</span><br><span class=\"line\">      yPos</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸標籤</span></span><br><span class=\"line\">  <span class=\"comment\">// start by saving the current context (current orientation, origin)</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.translate(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.rotate(-<span class=\"built_in\">Math</span>.PI / <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"top\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.fillText(<span class=\"string\">\"件數\"</span>, -(<span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight / <span class=\"number\">2</span>), <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore(); <span class=\"comment\">// now restore the canvas flipping it back to its original orientation</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>其他部分跟 <code>SVG</code> 的做法很類似，主要觀念就是要把 <code>html</code>, <code>css</code> rendor 的部分全部移交給 <code>js</code> 做，線上 demo <a href=\"https://annilla.github.io/d3-practice-vue-canvas/dist/\">在此</a>，也可以在 <a href=\"https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/LineChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a>查看完整程式碼，下一篇我們就要來分析 SVG 和 Canvas 的差異和各自的優勢。</p>"},{"title":"D3 v4 with Vue - SVG Horizontal Bar Chart","thumbnailImage":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no","coverMeta":"out","date":"2018-03-03T16:00:00.000Z","updated":"2018-03-03T16:00:00.000Z","_content":"\n今天要來練習用 `D3` 搭配 `Vue` 做簡易的 `SVG` 橫條圖囉～\n\n<!--more-->\n\n上一篇有描述過:\n\n* 準備 `SVG` 畫布\n\n* 準備隨機資料\n\n* 加上提示資料的 tooltip\n\n這幾個部分大同小異，所以這裡就不再次解釋，我們直接從處理座標軸開始說起。\n\n***\n## 插入座標軸\n\n* HTML\n\n```html\n<!-- X軸座標 -->\n<g :transform=\"`translate(0, ${chart.height})`\" class=\"axis axisX\" fill=\"none\" font-size=\"10\" font-family=\"sans-serif\" text-anchor=\"middle\"></g>\n<!-- Y軸座標 -->\n<g class=\"axis axisY\" fill=\"none\" font-size=\"10\" font-family=\"sans-serif\" text-anchor=\"end\"></g>\n<!-- Y軸標籤 -->\n<text class=\"axisYText\" :x=\"axisYText[0]\" :y=\"axisYText[1]\" dy=\"1em\" text-anchor=\"middle\">件數</text>\n```\n\n* CSS\n\n```css\n.chart {\n  ......\n  .chartWrap {\n    .axis.axisX {\n      .domain {\n        display: none;\n      }\n      .tick {\n        line {\n          stroke: #efefef;\n          stroke-width: 2;\n          stroke-dasharray: 1, 6;\n          stroke-linecap: round;\n        }\n      }\n    }\n  }\n}\n```\n\n* JS\n\n因程式碼過多，這邊只講用到的 D3 函數部分，文章最後會有完整程式碼連結。\n\n```js\n// X軸線性比例縮放\nxScale() {\n  let Xmin = 0;\n  let Xmax; // 找出所有X值的最大\n  let newArray = [];\n\n  // 找出所有X值的最大數\n  this.data.value.forEach(function(e) {\n    newArray.push(e.number);\n  });\n  Xmax = d3.max(newArray);\n\n  return d3\n    .scaleLinear() // 線性縮放函式\n    .domain([Xmin, Xmax]) // 設定轉換後的定義域\n    .range([0, this.chart.width]); // 設定轉換前的範圍\n},\n// X軸設定\nxAxis() {\n  return d3\n    .axisBottom(this.xScale) // 下方座標軸函式\n    .tickSizeInner(-this.chart.width); // 設定内侧刻度大小\n},\n```\n\n```js\n// Y軸線性比例縮放\nyScale() {\n  return d3\n    .scaleLinear() // 線性縮放函式\n    .domain([0, this.data.value.length + 1]) // 設定轉換後的定義域\n    .range([this.chart.height, 0]); // 設定轉換前的範圍\n},\n// Y軸設定\nyAxis() {\n  // 計算座標軸標註點個數，小於三個月要多加一個標註點 （ex: 6~10月，共 5 個標註點）\n  let tickNum =\n    this.valueLength < 3 ? this.valueLength + 1 : this.valueLength;\n\n  return d3\n    .axisLeft(this.yScale) // 左方座標軸函式\n    .ticks(tickNum) // 設定座標軸標註點個數\n    .tickFormat((d, i) => { // 設定標註點呈現的文字陣列\n      return this.yLabel[i];\n    });\n},\n```\n\n在每次隨機資料後，動態插入座標軸。\n\n```js\nrandomData() {\n  ......\n  //清除坐標軸\n  document.querySelector(\".chart .axisX\").innerHTML = \"\";\n  document.querySelector(\".chart .axisY\").innerHTML = \"\";\n\n  // 插入X軸座標\n  d3.select(\".chart .axisX\").call(this.xAxis);\n  // 插入Y軸座標\n  d3.select(\".chart .axisY\").call(this.yAxis);\n},\n```\n\n***\n## 繪製橫條\n\n* HTML\n\n```html\n<!-- 橫條 -->\n<transition-group tag=\"g\" name=\"growBarp\">\n  <rect class=\"bar\" v-for=\"(rect, key) in bar\" :key=\"`${key}${rect.width}${rect.y}`\" :fill=\"rect.color\" :x=\"rect.x\" :y=\"rect.y\" :width=\"rect.width\" :height=\"rect.height\" v-on:mouseover=\"showTooltip(key, $event)\" v-on:mouseout=\"hiddenTooltip\"></rect>\n</transition-group>\n```\n\n* CSS\n\n```css\n/* 動畫 */\n.growBarp-enter-active { /* 進入動畫：進行中 */\n  transition: all 1s; /* 動畫時間： 1秒 */\n}\n.growBarp-enter { /* 進入動畫：開始 */\n  transform: scaleX(0); /* 水平縮放從0開始 */\n  opacity: 0; /* 淡入從透明度0開始 */\n}\n```\n\n* JS\n\n```js\n// 顏色函數\ncolor() {\n  // 使用 D3 內建 10種顏色輪迴的函式\n  return d3.scaleOrdinal(d3.schemeCategory10);\n},\n// 橫條寬度、間隔設定\nbarWidth() {\n  // 間隔\n  let gap = 20;\n\n  // 計算橫條的寬度\n  return this.chart.height / (this.valueLength + 1) - gap;\n},\n// 橫條座標、顏色\nbar() {\n  let rectArray = [];\n\n  // 產生橫條的陣列\n  if (this.data.value) {\n    this.data.value.forEach((e, i) => {\n      rectArray.push({\n        color: this.color(0), // 設定顏色\n        x: 0, // 設定x座標\n        y: this.yScale(i + 1) - this.barWidth / 2, // 設定y座標\n        width: this.xScale(e.number), // 設定寬度\n        height: this.barWidth // 設定高度\n      });\n    });\n  }\n\n  return rectArray;\n},\n// 橫條文字座標、內容\nbarText() {\n  let textArray = [];\n\n  // 產生橫條文字的陣列\n  if (this.data.value) {\n    this.data.value.forEach((e, i) => {\n      textArray.push({\n        x: this.xScale(e.number) - 20, // 設定x座標\n        y: this.yScale(i + 1) + 5, // 設定y座標\n        number: e.number // 設定顯示的值\n      });\n    });\n  }\n\n  return textArray;\n}\n```\n\n全部畫好的樣子如下圖，可以去 [Github](https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/BarPChart.vue) 查看完整程式碼喔！也可以在[這裡](https://annilla.github.io/d3-practice-vue-svg/dist/)查看橫條圖的 Demo，我們下回見～\n\n![橫條圖完成](https://lh3.googleusercontent.com/UKjKyxBO-9dZHOpAj_zv75uJiYbW2rclJzVfNf9H4pqSaBjORKXVtpnXTn_c023LtDb54pUS-ggsy_aa73DpxRLm7pSCfpHAbGqjswpoc7DZz4vX5_5a2TCpGvQMZCAAuvGw-k4bw4zy0qIuC-1pccneHc2y6dS8zrL3oNZega1lV4RP1zj_C4G5tIoU3TKKeFh-KdNZO5W36ZLahvjumi066FUJX04CbLc5i5TW6pADmptSPfcQ4xgrH4CeM76pTW8WwQytXOWscAt-OJPuEHcMx7gdQJGvCpCI1OUNLViG4PoVNT3aDvzYX51sw0rR8V3mX0QZTtkQQCmLFfK71iX7xJgHKb_CAOCbq1EdiC4jpp4js_iny-ssB8YQafwzLoZQIQk81Fia7OUzoTUxQ02QkNHwjItDFek050IVMBKClKwPLx1o7anAND860jT6A5lZmwG9QVjkfNO4TMcKbGyTjaEDEXgnZIy51qYTj2tTDxN2J1na7cgvjG8U1X-7vPr0rAWa-qXS2kDJIQdStT6Byh058BeIqMQpjtXeGZXLgxlDo4A8qSL6GfVxioJpvBvKsQApY5d_O1i0O_CMMEb5IIUTXL5OYerBURrTozs4V6ypZUc3aQTiV1O_MTtFFqOlM3PAufGC2QNwZghUolODR6rk2Ae6=w921-h1024-no \"橫條圖\")","source":"_posts/D3/D3-v4-with-Vue-SVG-Horizontal-Bar-Chart.md","raw":"---\ntitle: D3 v4 with Vue - SVG Horizontal Bar Chart\ncategories:\n  - D3\nthumbnailImage: https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no\ncoverMeta: out\ntags: [D3, Vue, SVG]\ndate: 2018/03/04\nupdated: 2018/03/04\n---\n\n今天要來練習用 `D3` 搭配 `Vue` 做簡易的 `SVG` 橫條圖囉～\n\n<!--more-->\n\n上一篇有描述過:\n\n* 準備 `SVG` 畫布\n\n* 準備隨機資料\n\n* 加上提示資料的 tooltip\n\n這幾個部分大同小異，所以這裡就不再次解釋，我們直接從處理座標軸開始說起。\n\n***\n## 插入座標軸\n\n* HTML\n\n```html\n<!-- X軸座標 -->\n<g :transform=\"`translate(0, ${chart.height})`\" class=\"axis axisX\" fill=\"none\" font-size=\"10\" font-family=\"sans-serif\" text-anchor=\"middle\"></g>\n<!-- Y軸座標 -->\n<g class=\"axis axisY\" fill=\"none\" font-size=\"10\" font-family=\"sans-serif\" text-anchor=\"end\"></g>\n<!-- Y軸標籤 -->\n<text class=\"axisYText\" :x=\"axisYText[0]\" :y=\"axisYText[1]\" dy=\"1em\" text-anchor=\"middle\">件數</text>\n```\n\n* CSS\n\n```css\n.chart {\n  ......\n  .chartWrap {\n    .axis.axisX {\n      .domain {\n        display: none;\n      }\n      .tick {\n        line {\n          stroke: #efefef;\n          stroke-width: 2;\n          stroke-dasharray: 1, 6;\n          stroke-linecap: round;\n        }\n      }\n    }\n  }\n}\n```\n\n* JS\n\n因程式碼過多，這邊只講用到的 D3 函數部分，文章最後會有完整程式碼連結。\n\n```js\n// X軸線性比例縮放\nxScale() {\n  let Xmin = 0;\n  let Xmax; // 找出所有X值的最大\n  let newArray = [];\n\n  // 找出所有X值的最大數\n  this.data.value.forEach(function(e) {\n    newArray.push(e.number);\n  });\n  Xmax = d3.max(newArray);\n\n  return d3\n    .scaleLinear() // 線性縮放函式\n    .domain([Xmin, Xmax]) // 設定轉換後的定義域\n    .range([0, this.chart.width]); // 設定轉換前的範圍\n},\n// X軸設定\nxAxis() {\n  return d3\n    .axisBottom(this.xScale) // 下方座標軸函式\n    .tickSizeInner(-this.chart.width); // 設定内侧刻度大小\n},\n```\n\n```js\n// Y軸線性比例縮放\nyScale() {\n  return d3\n    .scaleLinear() // 線性縮放函式\n    .domain([0, this.data.value.length + 1]) // 設定轉換後的定義域\n    .range([this.chart.height, 0]); // 設定轉換前的範圍\n},\n// Y軸設定\nyAxis() {\n  // 計算座標軸標註點個數，小於三個月要多加一個標註點 （ex: 6~10月，共 5 個標註點）\n  let tickNum =\n    this.valueLength < 3 ? this.valueLength + 1 : this.valueLength;\n\n  return d3\n    .axisLeft(this.yScale) // 左方座標軸函式\n    .ticks(tickNum) // 設定座標軸標註點個數\n    .tickFormat((d, i) => { // 設定標註點呈現的文字陣列\n      return this.yLabel[i];\n    });\n},\n```\n\n在每次隨機資料後，動態插入座標軸。\n\n```js\nrandomData() {\n  ......\n  //清除坐標軸\n  document.querySelector(\".chart .axisX\").innerHTML = \"\";\n  document.querySelector(\".chart .axisY\").innerHTML = \"\";\n\n  // 插入X軸座標\n  d3.select(\".chart .axisX\").call(this.xAxis);\n  // 插入Y軸座標\n  d3.select(\".chart .axisY\").call(this.yAxis);\n},\n```\n\n***\n## 繪製橫條\n\n* HTML\n\n```html\n<!-- 橫條 -->\n<transition-group tag=\"g\" name=\"growBarp\">\n  <rect class=\"bar\" v-for=\"(rect, key) in bar\" :key=\"`${key}${rect.width}${rect.y}`\" :fill=\"rect.color\" :x=\"rect.x\" :y=\"rect.y\" :width=\"rect.width\" :height=\"rect.height\" v-on:mouseover=\"showTooltip(key, $event)\" v-on:mouseout=\"hiddenTooltip\"></rect>\n</transition-group>\n```\n\n* CSS\n\n```css\n/* 動畫 */\n.growBarp-enter-active { /* 進入動畫：進行中 */\n  transition: all 1s; /* 動畫時間： 1秒 */\n}\n.growBarp-enter { /* 進入動畫：開始 */\n  transform: scaleX(0); /* 水平縮放從0開始 */\n  opacity: 0; /* 淡入從透明度0開始 */\n}\n```\n\n* JS\n\n```js\n// 顏色函數\ncolor() {\n  // 使用 D3 內建 10種顏色輪迴的函式\n  return d3.scaleOrdinal(d3.schemeCategory10);\n},\n// 橫條寬度、間隔設定\nbarWidth() {\n  // 間隔\n  let gap = 20;\n\n  // 計算橫條的寬度\n  return this.chart.height / (this.valueLength + 1) - gap;\n},\n// 橫條座標、顏色\nbar() {\n  let rectArray = [];\n\n  // 產生橫條的陣列\n  if (this.data.value) {\n    this.data.value.forEach((e, i) => {\n      rectArray.push({\n        color: this.color(0), // 設定顏色\n        x: 0, // 設定x座標\n        y: this.yScale(i + 1) - this.barWidth / 2, // 設定y座標\n        width: this.xScale(e.number), // 設定寬度\n        height: this.barWidth // 設定高度\n      });\n    });\n  }\n\n  return rectArray;\n},\n// 橫條文字座標、內容\nbarText() {\n  let textArray = [];\n\n  // 產生橫條文字的陣列\n  if (this.data.value) {\n    this.data.value.forEach((e, i) => {\n      textArray.push({\n        x: this.xScale(e.number) - 20, // 設定x座標\n        y: this.yScale(i + 1) + 5, // 設定y座標\n        number: e.number // 設定顯示的值\n      });\n    });\n  }\n\n  return textArray;\n}\n```\n\n全部畫好的樣子如下圖，可以去 [Github](https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/BarPChart.vue) 查看完整程式碼喔！也可以在[這裡](https://annilla.github.io/d3-practice-vue-svg/dist/)查看橫條圖的 Demo，我們下回見～\n\n![橫條圖完成](https://lh3.googleusercontent.com/UKjKyxBO-9dZHOpAj_zv75uJiYbW2rclJzVfNf9H4pqSaBjORKXVtpnXTn_c023LtDb54pUS-ggsy_aa73DpxRLm7pSCfpHAbGqjswpoc7DZz4vX5_5a2TCpGvQMZCAAuvGw-k4bw4zy0qIuC-1pccneHc2y6dS8zrL3oNZega1lV4RP1zj_C4G5tIoU3TKKeFh-KdNZO5W36ZLahvjumi066FUJX04CbLc5i5TW6pADmptSPfcQ4xgrH4CeM76pTW8WwQytXOWscAt-OJPuEHcMx7gdQJGvCpCI1OUNLViG4PoVNT3aDvzYX51sw0rR8V3mX0QZTtkQQCmLFfK71iX7xJgHKb_CAOCbq1EdiC4jpp4js_iny-ssB8YQafwzLoZQIQk81Fia7OUzoTUxQ02QkNHwjItDFek050IVMBKClKwPLx1o7anAND860jT6A5lZmwG9QVjkfNO4TMcKbGyTjaEDEXgnZIy51qYTj2tTDxN2J1na7cgvjG8U1X-7vPr0rAWa-qXS2kDJIQdStT6Byh058BeIqMQpjtXeGZXLgxlDo4A8qSL6GfVxioJpvBvKsQApY5d_O1i0O_CMMEb5IIUTXL5OYerBURrTozs4V6ypZUc3aQTiV1O_MTtFFqOlM3PAufGC2QNwZghUolODR6rk2Ae6=w921-h1024-no \"橫條圖\")","slug":"D3/D3-v4-with-Vue-SVG-Horizontal-Bar-Chart","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74b000itudhr4b6chqe","content":"<p>今天要來練習用 <code>D3</code> 搭配 <code>Vue</code> 做簡易的 <code>SVG</code> 橫條圖囉～</p>\n<a id=\"more\"></a>\n<p>上一篇有描述過:</p>\n<ul>\n<li><p>準備 <code>SVG</code> 畫布</p>\n</li>\n<li><p>準備隨機資料</p>\n</li>\n<li><p>加上提示資料的 tooltip</p>\n</li>\n</ul>\n<p>這幾個部分大同小異，所以這裡就不再次解釋，我們直接從處理座標軸開始說起。</p>\n<hr>\n<h2 id=\"插入座標軸\"><a href=\"#插入座標軸\" class=\"headerlink\" title=\"插入座標軸\"></a>插入座標軸</h2><ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- X軸座標 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">:transform</span>=<span class=\"string\">\"`translate(0, $&#123;chart.height&#125;)`\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"axis axisX\"</span> <span class=\"attr\">fill</span>=<span class=\"string\">\"none\"</span> <span class=\"attr\">font-size</span>=<span class=\"string\">\"10\"</span> <span class=\"attr\">font-family</span>=<span class=\"string\">\"sans-serif\"</span> <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"middle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Y軸座標 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">class</span>=<span class=\"string\">\"axis axisY\"</span> <span class=\"attr\">fill</span>=<span class=\"string\">\"none\"</span> <span class=\"attr\">font-size</span>=<span class=\"string\">\"10\"</span> <span class=\"attr\">font-family</span>=<span class=\"string\">\"sans-serif\"</span> <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"end\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Y軸標籤 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">text</span> <span class=\"attr\">class</span>=<span class=\"string\">\"axisYText\"</span> <span class=\"attr\">:x</span>=<span class=\"string\">\"axisYText[0]\"</span> <span class=\"attr\">:y</span>=<span class=\"string\">\"axisYText[1]\"</span> <span class=\"attr\">dy</span>=<span class=\"string\">\"1em\"</span> <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"middle\"</span>&gt;</span>件數<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.chart</span> &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"selector-class\">.chartWrap</span> &#123;</span><br><span class=\"line\">    .axis.axisX &#123;</span><br><span class=\"line\">      <span class=\"selector-class\">.domain</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">display</span>: none;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"selector-class\">.tick</span> &#123;</span><br><span class=\"line\">        line &#123;</span><br><span class=\"line\">          <span class=\"selector-tag\">stroke</span>: <span class=\"selector-id\">#efefef</span>;</span><br><span class=\"line\">          <span class=\"selector-tag\">stroke-width</span>: 2;</span><br><span class=\"line\">          <span class=\"selector-tag\">stroke-dasharray</span>: 1, 6;</span><br><span class=\"line\">          <span class=\"selector-tag\">stroke-linecap</span>: <span class=\"selector-tag\">round</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<p>因程式碼過多，這邊只講用到的 D3 函數部分，文章最後會有完整程式碼連結。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// X軸線性比例縮放</span></span><br><span class=\"line\">xScale() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> Xmin = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> Xmax; <span class=\"comment\">// 找出所有X值的最大</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> newArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 找出所有X值的最大數</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.data.value.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    newArray.push(e.number);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  Xmax = d3.max(newArray);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .scaleLinear() <span class=\"comment\">// 線性縮放函式</span></span><br><span class=\"line\">    .domain([Xmin, Xmax]) <span class=\"comment\">// 設定轉換後的定義域</span></span><br><span class=\"line\">    .range([<span class=\"number\">0</span>, <span class=\"keyword\">this</span>.chart.width]); <span class=\"comment\">// 設定轉換前的範圍</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// X軸設定</span></span><br><span class=\"line\">xAxis() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .axisBottom(<span class=\"keyword\">this</span>.xScale) <span class=\"comment\">// 下方座標軸函式</span></span><br><span class=\"line\">    .tickSizeInner(-<span class=\"keyword\">this</span>.chart.width); <span class=\"comment\">// 設定内侧刻度大小</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Y軸線性比例縮放</span></span><br><span class=\"line\">yScale() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .scaleLinear() <span class=\"comment\">// 線性縮放函式</span></span><br><span class=\"line\">    .domain([<span class=\"number\">0</span>, <span class=\"keyword\">this</span>.data.value.length + <span class=\"number\">1</span>]) <span class=\"comment\">// 設定轉換後的定義域</span></span><br><span class=\"line\">    .range([<span class=\"keyword\">this</span>.chart.height, <span class=\"number\">0</span>]); <span class=\"comment\">// 設定轉換前的範圍</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// Y軸設定</span></span><br><span class=\"line\">yAxis() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 計算座標軸標註點個數，小於三個月要多加一個標註點 （ex: 6~10月，共 5 個標註點）</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> tickNum =</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.valueLength &lt; <span class=\"number\">3</span> ? <span class=\"keyword\">this</span>.valueLength + <span class=\"number\">1</span> : <span class=\"keyword\">this</span>.valueLength;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .axisLeft(<span class=\"keyword\">this</span>.yScale) <span class=\"comment\">// 左方座標軸函式</span></span><br><span class=\"line\">    .ticks(tickNum) <span class=\"comment\">// 設定座標軸標註點個數</span></span><br><span class=\"line\">    .tickFormat(<span class=\"function\">(<span class=\"params\">d, i</span>) =&gt;</span> &#123; <span class=\"comment\">// 設定標註點呈現的文字陣列</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.yLabel[i];</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>在每次隨機資料後，動態插入座標軸。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">randomData() &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"comment\">//清除坐標軸</span></span><br><span class=\"line\">  <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\".chart .axisX\"</span>).innerHTML = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\".chart .axisY\"</span>).innerHTML = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 插入X軸座標</span></span><br><span class=\"line\">  d3.select(<span class=\"string\">\".chart .axisX\"</span>).call(<span class=\"keyword\">this</span>.xAxis);</span><br><span class=\"line\">  <span class=\"comment\">// 插入Y軸座標</span></span><br><span class=\"line\">  d3.select(<span class=\"string\">\".chart .axisY\"</span>).call(<span class=\"keyword\">this</span>.yAxis);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"繪製橫條\"><a href=\"#繪製橫條\" class=\"headerlink\" title=\"繪製橫條\"></a>繪製橫條</h2><ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 橫條 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">transition-group</span> <span class=\"attr\">tag</span>=<span class=\"string\">\"g\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"growBarp\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">rect</span> <span class=\"attr\">class</span>=<span class=\"string\">\"bar\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(rect, key) in bar\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;key&#125;$&#123;rect.width&#125;$&#123;rect.y&#125;`\"</span> <span class=\"attr\">:fill</span>=<span class=\"string\">\"rect.color\"</span> <span class=\"attr\">:x</span>=<span class=\"string\">\"rect.x\"</span> <span class=\"attr\">:y</span>=<span class=\"string\">\"rect.y\"</span> <span class=\"attr\">:width</span>=<span class=\"string\">\"rect.width\"</span> <span class=\"attr\">:height</span>=<span class=\"string\">\"rect.height\"</span> <span class=\"attr\">v-on:mouseover</span>=<span class=\"string\">\"showTooltip(key, $event)\"</span> <span class=\"attr\">v-on:mouseout</span>=<span class=\"string\">\"hiddenTooltip\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">rect</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 動畫 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.growBarp-enter-active</span> &#123; <span class=\"comment\">/* 進入動畫：進行中 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all <span class=\"number\">1s</span>; <span class=\"comment\">/* 動畫時間： 1秒 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.growBarp-enter</span> &#123; <span class=\"comment\">/* 進入動畫：開始 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">scaleX</span>(0); <span class=\"comment\">/* 水平縮放從0開始 */</span></span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>; <span class=\"comment\">/* 淡入從透明度0開始 */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 顏色函數</span></span><br><span class=\"line\">color() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 使用 D3 內建 10種顏色輪迴的函式</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3.scaleOrdinal(d3.schemeCategory10);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// 橫條寬度、間隔設定</span></span><br><span class=\"line\">barWidth() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 間隔</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> gap = <span class=\"number\">20</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 計算橫條的寬度</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.chart.height / (<span class=\"keyword\">this</span>.valueLength + <span class=\"number\">1</span>) - gap;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// 橫條座標、顏色</span></span><br><span class=\"line\">bar() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> rectArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 產生橫條的陣列</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.value) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.data.value.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      rectArray.push(&#123;</span><br><span class=\"line\">        color: <span class=\"keyword\">this</span>.color(<span class=\"number\">0</span>), <span class=\"comment\">// 設定顏色</span></span><br><span class=\"line\">        x: <span class=\"number\">0</span>, <span class=\"comment\">// 設定x座標</span></span><br><span class=\"line\">        y: <span class=\"keyword\">this</span>.yScale(i + <span class=\"number\">1</span>) - <span class=\"keyword\">this</span>.barWidth / <span class=\"number\">2</span>, <span class=\"comment\">// 設定y座標</span></span><br><span class=\"line\">        width: <span class=\"keyword\">this</span>.xScale(e.number), <span class=\"comment\">// 設定寬度</span></span><br><span class=\"line\">        height: <span class=\"keyword\">this</span>.barWidth <span class=\"comment\">// 設定高度</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> rectArray;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// 橫條文字座標、內容</span></span><br><span class=\"line\">barText() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> textArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 產生橫條文字的陣列</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.value) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.data.value.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      textArray.push(&#123;</span><br><span class=\"line\">        x: <span class=\"keyword\">this</span>.xScale(e.number) - <span class=\"number\">20</span>, <span class=\"comment\">// 設定x座標</span></span><br><span class=\"line\">        y: <span class=\"keyword\">this</span>.yScale(i + <span class=\"number\">1</span>) + <span class=\"number\">5</span>, <span class=\"comment\">// 設定y座標</span></span><br><span class=\"line\">        number: e.number <span class=\"comment\">// 設定顯示的值</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> textArray;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>全部畫好的樣子如下圖，可以去 <a href=\"https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/BarPChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a> 查看完整程式碼喔！也可以在<a href=\"https://annilla.github.io/d3-practice-vue-svg/dist/\">這裡</a>查看橫條圖的 Demo，我們下回見～</p>\n<p><img src=\"https://lh3.googleusercontent.com/UKjKyxBO-9dZHOpAj_zv75uJiYbW2rclJzVfNf9H4pqSaBjORKXVtpnXTn_c023LtDb54pUS-ggsy_aa73DpxRLm7pSCfpHAbGqjswpoc7DZz4vX5_5a2TCpGvQMZCAAuvGw-k4bw4zy0qIuC-1pccneHc2y6dS8zrL3oNZega1lV4RP1zj_C4G5tIoU3TKKeFh-KdNZO5W36ZLahvjumi066FUJX04CbLc5i5TW6pADmptSPfcQ4xgrH4CeM76pTW8WwQytXOWscAt-OJPuEHcMx7gdQJGvCpCI1OUNLViG4PoVNT3aDvzYX51sw0rR8V3mX0QZTtkQQCmLFfK71iX7xJgHKb_CAOCbq1EdiC4jpp4js_iny-ssB8YQafwzLoZQIQk81Fia7OUzoTUxQ02QkNHwjItDFek050IVMBKClKwPLx1o7anAND860jT6A5lZmwG9QVjkfNO4TMcKbGyTjaEDEXgnZIy51qYTj2tTDxN2J1na7cgvjG8U1X-7vPr0rAWa-qXS2kDJIQdStT6Byh058BeIqMQpjtXeGZXLgxlDo4A8qSL6GfVxioJpvBvKsQApY5d_O1i0O_CMMEb5IIUTXL5OYerBURrTozs4V6ypZUc3aQTiV1O_MTtFFqOlM3PAufGC2QNwZghUolODR6rk2Ae6=w921-h1024-no\" alt=\"橫條圖完成\" title=\"橫條圖\"></p>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","excerpt":"<p>今天要來練習用 <code>D3</code> 搭配 <code>Vue</code> 做簡易的 <code>SVG</code> 橫條圖囉～</p>","more":"<p>上一篇有描述過:</p>\n<ul>\n<li><p>準備 <code>SVG</code> 畫布</p>\n</li>\n<li><p>準備隨機資料</p>\n</li>\n<li><p>加上提示資料的 tooltip</p>\n</li>\n</ul>\n<p>這幾個部分大同小異，所以這裡就不再次解釋，我們直接從處理座標軸開始說起。</p>\n<hr>\n<h2 id=\"插入座標軸\"><a href=\"#插入座標軸\" class=\"headerlink\" title=\"插入座標軸\"></a>插入座標軸</h2><ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- X軸座標 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">:transform</span>=<span class=\"string\">\"`translate(0, $&#123;chart.height&#125;)`\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"axis axisX\"</span> <span class=\"attr\">fill</span>=<span class=\"string\">\"none\"</span> <span class=\"attr\">font-size</span>=<span class=\"string\">\"10\"</span> <span class=\"attr\">font-family</span>=<span class=\"string\">\"sans-serif\"</span> <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"middle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Y軸座標 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">class</span>=<span class=\"string\">\"axis axisY\"</span> <span class=\"attr\">fill</span>=<span class=\"string\">\"none\"</span> <span class=\"attr\">font-size</span>=<span class=\"string\">\"10\"</span> <span class=\"attr\">font-family</span>=<span class=\"string\">\"sans-serif\"</span> <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"end\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Y軸標籤 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">text</span> <span class=\"attr\">class</span>=<span class=\"string\">\"axisYText\"</span> <span class=\"attr\">:x</span>=<span class=\"string\">\"axisYText[0]\"</span> <span class=\"attr\">:y</span>=<span class=\"string\">\"axisYText[1]\"</span> <span class=\"attr\">dy</span>=<span class=\"string\">\"1em\"</span> <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"middle\"</span>&gt;</span>件數<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.chart</span> &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"selector-class\">.chartWrap</span> &#123;</span><br><span class=\"line\">    .axis.axisX &#123;</span><br><span class=\"line\">      <span class=\"selector-class\">.domain</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">display</span>: none;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"selector-class\">.tick</span> &#123;</span><br><span class=\"line\">        line &#123;</span><br><span class=\"line\">          <span class=\"selector-tag\">stroke</span>: <span class=\"selector-id\">#efefef</span>;</span><br><span class=\"line\">          <span class=\"selector-tag\">stroke-width</span>: 2;</span><br><span class=\"line\">          <span class=\"selector-tag\">stroke-dasharray</span>: 1, 6;</span><br><span class=\"line\">          <span class=\"selector-tag\">stroke-linecap</span>: <span class=\"selector-tag\">round</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<p>因程式碼過多，這邊只講用到的 D3 函數部分，文章最後會有完整程式碼連結。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// X軸線性比例縮放</span></span><br><span class=\"line\">xScale() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> Xmin = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> Xmax; <span class=\"comment\">// 找出所有X值的最大</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> newArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 找出所有X值的最大數</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.data.value.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    newArray.push(e.number);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  Xmax = d3.max(newArray);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .scaleLinear() <span class=\"comment\">// 線性縮放函式</span></span><br><span class=\"line\">    .domain([Xmin, Xmax]) <span class=\"comment\">// 設定轉換後的定義域</span></span><br><span class=\"line\">    .range([<span class=\"number\">0</span>, <span class=\"keyword\">this</span>.chart.width]); <span class=\"comment\">// 設定轉換前的範圍</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// X軸設定</span></span><br><span class=\"line\">xAxis() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .axisBottom(<span class=\"keyword\">this</span>.xScale) <span class=\"comment\">// 下方座標軸函式</span></span><br><span class=\"line\">    .tickSizeInner(-<span class=\"keyword\">this</span>.chart.width); <span class=\"comment\">// 設定内侧刻度大小</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Y軸線性比例縮放</span></span><br><span class=\"line\">yScale() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .scaleLinear() <span class=\"comment\">// 線性縮放函式</span></span><br><span class=\"line\">    .domain([<span class=\"number\">0</span>, <span class=\"keyword\">this</span>.data.value.length + <span class=\"number\">1</span>]) <span class=\"comment\">// 設定轉換後的定義域</span></span><br><span class=\"line\">    .range([<span class=\"keyword\">this</span>.chart.height, <span class=\"number\">0</span>]); <span class=\"comment\">// 設定轉換前的範圍</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// Y軸設定</span></span><br><span class=\"line\">yAxis() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 計算座標軸標註點個數，小於三個月要多加一個標註點 （ex: 6~10月，共 5 個標註點）</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> tickNum =</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.valueLength &lt; <span class=\"number\">3</span> ? <span class=\"keyword\">this</span>.valueLength + <span class=\"number\">1</span> : <span class=\"keyword\">this</span>.valueLength;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .axisLeft(<span class=\"keyword\">this</span>.yScale) <span class=\"comment\">// 左方座標軸函式</span></span><br><span class=\"line\">    .ticks(tickNum) <span class=\"comment\">// 設定座標軸標註點個數</span></span><br><span class=\"line\">    .tickFormat(<span class=\"function\">(<span class=\"params\">d, i</span>) =&gt;</span> &#123; <span class=\"comment\">// 設定標註點呈現的文字陣列</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.yLabel[i];</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>在每次隨機資料後，動態插入座標軸。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">randomData() &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"comment\">//清除坐標軸</span></span><br><span class=\"line\">  <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\".chart .axisX\"</span>).innerHTML = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\".chart .axisY\"</span>).innerHTML = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 插入X軸座標</span></span><br><span class=\"line\">  d3.select(<span class=\"string\">\".chart .axisX\"</span>).call(<span class=\"keyword\">this</span>.xAxis);</span><br><span class=\"line\">  <span class=\"comment\">// 插入Y軸座標</span></span><br><span class=\"line\">  d3.select(<span class=\"string\">\".chart .axisY\"</span>).call(<span class=\"keyword\">this</span>.yAxis);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"繪製橫條\"><a href=\"#繪製橫條\" class=\"headerlink\" title=\"繪製橫條\"></a>繪製橫條</h2><ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 橫條 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">transition-group</span> <span class=\"attr\">tag</span>=<span class=\"string\">\"g\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"growBarp\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">rect</span> <span class=\"attr\">class</span>=<span class=\"string\">\"bar\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(rect, key) in bar\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;key&#125;$&#123;rect.width&#125;$&#123;rect.y&#125;`\"</span> <span class=\"attr\">:fill</span>=<span class=\"string\">\"rect.color\"</span> <span class=\"attr\">:x</span>=<span class=\"string\">\"rect.x\"</span> <span class=\"attr\">:y</span>=<span class=\"string\">\"rect.y\"</span> <span class=\"attr\">:width</span>=<span class=\"string\">\"rect.width\"</span> <span class=\"attr\">:height</span>=<span class=\"string\">\"rect.height\"</span> <span class=\"attr\">v-on:mouseover</span>=<span class=\"string\">\"showTooltip(key, $event)\"</span> <span class=\"attr\">v-on:mouseout</span>=<span class=\"string\">\"hiddenTooltip\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">rect</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 動畫 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.growBarp-enter-active</span> &#123; <span class=\"comment\">/* 進入動畫：進行中 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all <span class=\"number\">1s</span>; <span class=\"comment\">/* 動畫時間： 1秒 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.growBarp-enter</span> &#123; <span class=\"comment\">/* 進入動畫：開始 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">scaleX</span>(0); <span class=\"comment\">/* 水平縮放從0開始 */</span></span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>; <span class=\"comment\">/* 淡入從透明度0開始 */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 顏色函數</span></span><br><span class=\"line\">color() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 使用 D3 內建 10種顏色輪迴的函式</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3.scaleOrdinal(d3.schemeCategory10);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// 橫條寬度、間隔設定</span></span><br><span class=\"line\">barWidth() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 間隔</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> gap = <span class=\"number\">20</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 計算橫條的寬度</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.chart.height / (<span class=\"keyword\">this</span>.valueLength + <span class=\"number\">1</span>) - gap;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// 橫條座標、顏色</span></span><br><span class=\"line\">bar() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> rectArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 產生橫條的陣列</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.value) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.data.value.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      rectArray.push(&#123;</span><br><span class=\"line\">        color: <span class=\"keyword\">this</span>.color(<span class=\"number\">0</span>), <span class=\"comment\">// 設定顏色</span></span><br><span class=\"line\">        x: <span class=\"number\">0</span>, <span class=\"comment\">// 設定x座標</span></span><br><span class=\"line\">        y: <span class=\"keyword\">this</span>.yScale(i + <span class=\"number\">1</span>) - <span class=\"keyword\">this</span>.barWidth / <span class=\"number\">2</span>, <span class=\"comment\">// 設定y座標</span></span><br><span class=\"line\">        width: <span class=\"keyword\">this</span>.xScale(e.number), <span class=\"comment\">// 設定寬度</span></span><br><span class=\"line\">        height: <span class=\"keyword\">this</span>.barWidth <span class=\"comment\">// 設定高度</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> rectArray;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// 橫條文字座標、內容</span></span><br><span class=\"line\">barText() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> textArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 產生橫條文字的陣列</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.value) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.data.value.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      textArray.push(&#123;</span><br><span class=\"line\">        x: <span class=\"keyword\">this</span>.xScale(e.number) - <span class=\"number\">20</span>, <span class=\"comment\">// 設定x座標</span></span><br><span class=\"line\">        y: <span class=\"keyword\">this</span>.yScale(i + <span class=\"number\">1</span>) + <span class=\"number\">5</span>, <span class=\"comment\">// 設定y座標</span></span><br><span class=\"line\">        number: e.number <span class=\"comment\">// 設定顯示的值</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> textArray;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>全部畫好的樣子如下圖，可以去 <a href=\"https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/BarPChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a> 查看完整程式碼喔！也可以在<a href=\"https://annilla.github.io/d3-practice-vue-svg/dist/\">這裡</a>查看橫條圖的 Demo，我們下回見～</p>\n<p><img src=\"https://lh3.googleusercontent.com/UKjKyxBO-9dZHOpAj_zv75uJiYbW2rclJzVfNf9H4pqSaBjORKXVtpnXTn_c023LtDb54pUS-ggsy_aa73DpxRLm7pSCfpHAbGqjswpoc7DZz4vX5_5a2TCpGvQMZCAAuvGw-k4bw4zy0qIuC-1pccneHc2y6dS8zrL3oNZega1lV4RP1zj_C4G5tIoU3TKKeFh-KdNZO5W36ZLahvjumi066FUJX04CbLc5i5TW6pADmptSPfcQ4xgrH4CeM76pTW8WwQytXOWscAt-OJPuEHcMx7gdQJGvCpCI1OUNLViG4PoVNT3aDvzYX51sw0rR8V3mX0QZTtkQQCmLFfK71iX7xJgHKb_CAOCbq1EdiC4jpp4js_iny-ssB8YQafwzLoZQIQk81Fia7OUzoTUxQ02QkNHwjItDFek050IVMBKClKwPLx1o7anAND860jT6A5lZmwG9QVjkfNO4TMcKbGyTjaEDEXgnZIy51qYTj2tTDxN2J1na7cgvjG8U1X-7vPr0rAWa-qXS2kDJIQdStT6Byh058BeIqMQpjtXeGZXLgxlDo4A8qSL6GfVxioJpvBvKsQApY5d_O1i0O_CMMEb5IIUTXL5OYerBURrTozs4V6ypZUc3aQTiV1O_MTtFFqOlM3PAufGC2QNwZghUolODR6rk2Ae6=w921-h1024-no\" alt=\"橫條圖完成\" title=\"橫條圖\"></p>"},{"title":"D3 v4 with Vue - SVG Donut Chart","thumbnailImage":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no","coverMeta":"out","date":"2018-04-30T16:00:00.000Z","updated":"2018-04-30T16:00:00.000Z","_content":"\n這次要來練習用 `D3` 搭配 `Vue` 做 `SVG` 甜甜圈圖囉～如果要做中間不要洞的圓餅圖，把內圈半徑改成 0 即可。\n\n<!--more-->\n\n一開始想說動畫的部分希望由 `CSS` `transition` 來主導 `stroke-dasharray` 進行動畫，但後來發現沒有實際的圖形範圍做 `Tooltip` 的功能（因為 `CSS` 做的圓圈每個都一樣，只是透過 `stroke-dasharray` 長度不同造成甜甜圈的假象）。所以後來透過 `D3` 計算每個區塊的 `<path>` 才得以完成 `Tooltip` 的功能。因為以上種種的考量後，下面就拆分成兩個部分來解釋，一個部分是執行動畫的 `<circle>` 部分，另一個則是製作 `Tooltip` 功能的 `<path>` 部分。\n\n***\n## 執行動畫的 `<circle>`\n\n![執行動畫的 <circle>](https://lh3.googleusercontent.com/y3ciNP2itQDbjSzjgXxlukSy-kfrNSRuyhAcs6afRYhZoU3jMXL7jB098ANZEWAV8eSsovPlqPCgjuwx5dbtff_ItDj6vvTBiPPmTQRyThIX-XHeeXwgoWCFeGji1KA9DJRyY2_lRjoV0elfwsKcyVn1VaIICoGD5uFBiH2K5vbJvuTPnOLXcgE4Ng6rQZ8d6NNEHWYtPa0UqaGtMpbBXzVGFQmA7U48vwIJdQJwzuyYy0Pj6dmfa7IVDUCSOp84EXTO0tZsoBufOpjUF9miUGNwoQS43xwKtPfl0ur6cA4hTpbn9FlCU4rDym8Jaa9mkBarS8T1Y8hH09udOeiv9dIaKJrniqoXnf4G3wTB79sKLVmDiKv6vQIB504mby_sbn1c3aQVoQlyJfahu59J2IRVFlZ1_jVpkSi9SCu9kf-O_gyMdCQcID79yYuLKsq3nG5X-UwlbX5SDKvPif8YW-r0MtdxZVuMX95Ot4FB0nh5M0l3pSd2NhllyL_Xsa4U9MwgKQB6vPCajdSYNsM6NtTgfUKJfUFANreODCXT9uYwCLd50nkUhOcf9QA0k3gORRJxbDozlchw4y8nuc3EA3G36KVFLM50NYjLnHmw19i05cEnduWlg3d--Ku4Hx6n_NQwPEFjsJVZpX2IU5VZdXU4PBRKgBWS=w600-h576-no \"<circle>\")\n\n* HTML\n\n```html\n<!-- 執行動畫的圓圈 -->\n<circle class=\"circle\"\n  v-for=\"(c, key) in donut\"\n  ref=\"circles\"\n  :key=\"`${key}${c.percentage}${c.offset}`\"\n  :r=\"radius\"\n  :cx=\"chart.outerRadius\"\n  :cy=\"chart.outerRadius\"\n  :stroke-width=\"chart.outerRadius - chart.innerRadius\"\n  :stroke-dashoffset=\"c.offset\"\n  :stroke=\"c.color\"\n  fill= \"transparent\"/>\n```\n\n* CSS\n\n```css\n.donutChart {\n  /* 說明 */\n  .detail {\n    color: gray;\n  }\n  /* 統計圖 */\n  .chartContain {\n    ....\n    .chartWrap {\n      ...\n      .chart {\n        ...\n        /* 因為 <circle> 0 度從右邊開始，但我們想要從上方開始，所以加了往上旋轉 90 度變形 */\n        transform: rotate(-90deg);\n        .circle {\n          transition: 1s; /* 漸變動畫進行的秒數 */\n        }\n      }\n    }\n  }\n}\n```\n\n* JS\n\n```js\nexport default {\n  computed: {\n    // 圓周長\n    circum() {\n      // circumference = 2 * pi * radius\n      return 2 * Math.PI * this.radius;\n    },\n    // 顏色函數\n    color() {\n      return d3.scaleOrdinal(d3.schemeCategory20c);\n    },\n    // 所有資料值總合\n    totalSum() {\n      let sum = 0;\n\n      if (this.data.length) {\n        this.data.forEach((e, i) => {\n          sum = sum + e.value;\n        });\n      }\n\n      return sum;\n    },\n    // <circle> 屬性\n    donut() {\n      let newArray = [];\n      let afterPer = 0; // 把前面的 percentage 累加 (0.xxx)\n\n      // 產生 <circle> 屬性陣列\n      if (this.data.length) {\n        this.data.forEach((e, i) => {\n          // 新增陣列\n          newArray.push({\n            // 拿來計算跑動畫的線條長度 （在 randomData 後半）\n            percentage: e.value / this.totalSum * 100,\n            // 位移長度 = 圓周長 * (1 - 前面累加的長度比例)\n            offset: this.circum * (1 - afterPer),\n            color: this.color(i) // 填色\n          });\n\n          // 把前面的 percentage 累加 (0.xxx)\n          afterPer = afterPer + e.value / this.totalSum;\n        });\n      }\n\n      return newArray;\n    },\n  },\n  ...\n  methods: {\n    randomData() {\n      ...\n\n      // 用 js 跑展開動畫\n      this.$nextTick().then(() => {\n        // DOM updated\n        this.donut.forEach((el, index) => {\n          let totalTime = 100; // 設定切換 css 狀態的時間間隔\n          let stroke = this.dasharray(el.percentage); // 計算 stroke-dasharray\n\n          // 起始位置\n          this.$refs.circles[index].style.cssText = `stroke-dasharray: 0 ${this.circum}; opacity: 0`;\n\n          // 設定 Interval\n          setTimeout(() => {\n            // 結束位置\n            this.$refs.circles[index].style.cssText = `stroke-dasharray: ${stroke.dash} ${stroke.gap}; opacity: 1`;\n          }, totalTime);\n        });\n      });\n    },\n    // 計算 stroke-dasharray 的 dash & gap\n    dasharray(percentage) {\n      let dash = this.circum / 100 * percentage; // percentage %\n      let gap = this.circum / 100 * (100 - percentage);\n\n      return { dash: dash, gap: gap };\n    },\n  }\n}\n```\n\n***\n## 製作 `Tooltip` 功能的 `<path>`\n\n![製作 Tooltip 功能的 <path>](https://lh3.googleusercontent.com/PYNMBI1NGyZvd-VuUfGSGcZR5B4HlbvrPPyBFGPPRV93iTPzhYyQoGipBmZw7xLAuHGvYALgqaunKM3AygQOJQvN-vf7JqiJqyu3pGsrqHOizHIAb37MK7__M8Z7bGsBYqgfhKsmmFr6hnHcYD2V8KUAD8LesMx6bPBvxvw1HdFeAHFIm3zeOtnzdYLeo9CoPE0Cjk-V_SylGwg8vNmp11OBESjJbGfshslHV0ih3FHkB5F7DmGbzY_7usoUDnVOgXdzFAIFMlWrJnR-k_Y_HYeOgfZkk5__OqhokFbvBsAYmuHhIWLNIin3Zs96XgVgF0DAKDLdpJfpVthZTdSdAXYmE9izJnaNf5AbeXKgtspy8ARAoXx4h3soWWg8IorSidCfULUEtUOtNWQ8ZBJ-fGqSzCXYFB4Yr12RI4YDaoB1e51JATaQGDmIu8hwbaUoUecZe0Ryo04VjUZ1bGmRzXMmsoRvNcb2rkPF3n-t1csEU48dxSzZgcgRm7gCWprA2qRbIt-5c_LthwXteMkFsYQj3XRxmZTvl9AOom7Ypme0juX6tcjHEj1ogkSopwGhxr-NZvHNU5qax5vKIcpBF5wLpdAS7INTkNsr_Dxyo3-rTk8tFriT8b2mTY9vLCWOrNm2_seIi8ZM74qPVq-jc9HqE8AfvS8V=w600-h576-no \"<path>\")\n\n這邊你可能會發現很奇怪的事情，就是為什麼上面已經算過百分比了，但這邊還要再算一次？如果仔細看的話，你應該會發現這邊的百分比是用在甜甜圈上方顯示的文字。想一想，如果統計圖出現小數點後十六位數的百分比，是不是超奇怪！！！所以這邊文字其實是透過 `D3` 格式換算成我們較易閱讀的百分比，並不是真實的比例。\n\n* HTML\n\n```html\n<!-- 滑鼠滑過的區塊 -->\n<g\n  class=\"arc\"\n  v-for=\"(p, key) in pie\"\n  :key=\"`${key}${p.d}`\"\n  :transform=\"`translate(${chart.outerRadius},${chart.outerRadius}) rotate(90)`\"\n  v-on:mouseover=\"showTooltip(key, $event)\" v-on:mouseout=\"hiddenTooltip\">\n  <path\n    fill=\"transparent\"\n    :d=\"p.d\">\n  </path>\n  <!-- 文字位置需要由 path 的座標透過 D3 計算，才能把文字放在各自的區塊中間。 -->\n  <text\n    :transform=\"`translate(${p.centroid})`\"\n    text-anchor=\"middle\"\n    fill=\"white\">{{ p.percentage }}\n  </text>\n</g>\n```\n\n* JS\n\n```js\npie() {\n  let newArray = [];\n  let format = d3.format(\".0%\"); // D3 格式化單位（百分比）\n  let pie = d3\n    .pie() // 使用 pie 函數\n    .sort(null) // 不做重新排序\n    .value(function(d) {\n      return d.value;\n    })(this.data); // 為了等下要使用 arc 角度，先造好 pie 物件\n\n  // 產生 <path> & <text> 屬性陣列\n  if (this.data.length) {\n    this.data.forEach((e, i) => {\n      // 準備好 arc 路徑\n      let arc = d3\n        .arc() // 使用 arc 函數\n        .innerRadius(this.chart.innerRadius) // 甜甜圈內半徑\n        .outerRadius(this.chart.outerRadius); // 甜甜圈外半徑\n\n      // 新增陣列\n      newArray.push({\n        // 計算 path 路徑，使用剛剛造好的 arc 函數\n        d: arc({\n          // 透過上方建立的 pie 函數，得知 arc 的起始角度\n          startAngle: pie[i].startAngle, \n          // 透過上方建立的 pie 函數，得知 arc 的結束角度\n          endAngle: pie[i].endAngle\n        }),\n        // 使用 arc.centroid 函數取得 <text> 相對於 <path> 位移至正中間 x, y\n        centroid: arc.centroid(pie[i]),\n        // 將顯示的文字轉成易閱讀的格式\n        percentage: format(e.value / this.totalSum)\n      });\n    });\n  }\n\n  return newArray;\n}\n```\n\n全部畫好的樣子如下圖，可以去 [Github](https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/DonutChart.vue) 查看完整程式碼喔！也可以在[這裡](https://annilla.github.io/d3-practice-vue-svg/dist/)查看直條圖的 Demo，我們下回見～\n\n![甜甜圈圖完成](https://lh3.googleusercontent.com/b5xMuJcWbNk6hgHI5RT0FbGiIN6_XK8pJsXqSmiK-6kXykrTkgYLC4rOtrpZt1fcw3OjOtjgwvNHBkewBHST6Z1WoCrRPo6AD4oekyvYh24S1JS2ja2QGSMFyfhIOSD_eY9AZTvfprwIqDBPs3_E-sFsUpr1YcidoinaoGbhCRT9yJom_ztql5N6isa5lznQ_xLWkbg_8-3QS9_J21qVgBAly90yKebDGLrXmJFNyJG75wZP_vDIyINy2H2fYTg49-spVM76MavB-9ESNxSKFTRbAGaE3xcBR7wmAICq8SzP__ucHYOehi2sWGNsFbc4Vn3jf23QT2JXI6N9aLgmiwrDaRAkYDqGgpYPSJZPzW0gZZysf5nEHLluS8B2q_B5Ewrmz54HWF-ZVpSYoXYbC2G4ynMaOT7g83ils5zDDfZMitBqE9zb7l8esPvxsKa-ODi4qoThsmlj5UfUjWsNT8XuxCb83VwCjPbVF5fZdNJcuC5SAaFqN1IjdKRAwMpgq3ukvg6ITv4TjPSDGE8MXnNQzG2kff-bSnzWUxWaVVA79aRyw4dmEuy74tMV8nTMVZRmQ7o8sRJEzp11f0Qvz91Lqn0HRvEzt6uigBkrfLqno0m0alzaIJj8nBhy2CUEP7BR_VsHtZ1s_GWD927Jbpl2n6o-lilU=w1024-h983-no \"甜甜圈圖\")","source":"_posts/D3/D3-v4-with-Vue-SVG-Donut-Chart.md","raw":"---\ntitle: D3 v4 with Vue - SVG Donut Chart\ncategories:\n  - D3\nthumbnailImage: https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no\ncoverMeta: out\ntags: [D3, Vue, SVG]\ndate: 2018/05/01\nupdated: 2018/05/01\n---\n\n這次要來練習用 `D3` 搭配 `Vue` 做 `SVG` 甜甜圈圖囉～如果要做中間不要洞的圓餅圖，把內圈半徑改成 0 即可。\n\n<!--more-->\n\n一開始想說動畫的部分希望由 `CSS` `transition` 來主導 `stroke-dasharray` 進行動畫，但後來發現沒有實際的圖形範圍做 `Tooltip` 的功能（因為 `CSS` 做的圓圈每個都一樣，只是透過 `stroke-dasharray` 長度不同造成甜甜圈的假象）。所以後來透過 `D3` 計算每個區塊的 `<path>` 才得以完成 `Tooltip` 的功能。因為以上種種的考量後，下面就拆分成兩個部分來解釋，一個部分是執行動畫的 `<circle>` 部分，另一個則是製作 `Tooltip` 功能的 `<path>` 部分。\n\n***\n## 執行動畫的 `<circle>`\n\n![執行動畫的 <circle>](https://lh3.googleusercontent.com/y3ciNP2itQDbjSzjgXxlukSy-kfrNSRuyhAcs6afRYhZoU3jMXL7jB098ANZEWAV8eSsovPlqPCgjuwx5dbtff_ItDj6vvTBiPPmTQRyThIX-XHeeXwgoWCFeGji1KA9DJRyY2_lRjoV0elfwsKcyVn1VaIICoGD5uFBiH2K5vbJvuTPnOLXcgE4Ng6rQZ8d6NNEHWYtPa0UqaGtMpbBXzVGFQmA7U48vwIJdQJwzuyYy0Pj6dmfa7IVDUCSOp84EXTO0tZsoBufOpjUF9miUGNwoQS43xwKtPfl0ur6cA4hTpbn9FlCU4rDym8Jaa9mkBarS8T1Y8hH09udOeiv9dIaKJrniqoXnf4G3wTB79sKLVmDiKv6vQIB504mby_sbn1c3aQVoQlyJfahu59J2IRVFlZ1_jVpkSi9SCu9kf-O_gyMdCQcID79yYuLKsq3nG5X-UwlbX5SDKvPif8YW-r0MtdxZVuMX95Ot4FB0nh5M0l3pSd2NhllyL_Xsa4U9MwgKQB6vPCajdSYNsM6NtTgfUKJfUFANreODCXT9uYwCLd50nkUhOcf9QA0k3gORRJxbDozlchw4y8nuc3EA3G36KVFLM50NYjLnHmw19i05cEnduWlg3d--Ku4Hx6n_NQwPEFjsJVZpX2IU5VZdXU4PBRKgBWS=w600-h576-no \"<circle>\")\n\n* HTML\n\n```html\n<!-- 執行動畫的圓圈 -->\n<circle class=\"circle\"\n  v-for=\"(c, key) in donut\"\n  ref=\"circles\"\n  :key=\"`${key}${c.percentage}${c.offset}`\"\n  :r=\"radius\"\n  :cx=\"chart.outerRadius\"\n  :cy=\"chart.outerRadius\"\n  :stroke-width=\"chart.outerRadius - chart.innerRadius\"\n  :stroke-dashoffset=\"c.offset\"\n  :stroke=\"c.color\"\n  fill= \"transparent\"/>\n```\n\n* CSS\n\n```css\n.donutChart {\n  /* 說明 */\n  .detail {\n    color: gray;\n  }\n  /* 統計圖 */\n  .chartContain {\n    ....\n    .chartWrap {\n      ...\n      .chart {\n        ...\n        /* 因為 <circle> 0 度從右邊開始，但我們想要從上方開始，所以加了往上旋轉 90 度變形 */\n        transform: rotate(-90deg);\n        .circle {\n          transition: 1s; /* 漸變動畫進行的秒數 */\n        }\n      }\n    }\n  }\n}\n```\n\n* JS\n\n```js\nexport default {\n  computed: {\n    // 圓周長\n    circum() {\n      // circumference = 2 * pi * radius\n      return 2 * Math.PI * this.radius;\n    },\n    // 顏色函數\n    color() {\n      return d3.scaleOrdinal(d3.schemeCategory20c);\n    },\n    // 所有資料值總合\n    totalSum() {\n      let sum = 0;\n\n      if (this.data.length) {\n        this.data.forEach((e, i) => {\n          sum = sum + e.value;\n        });\n      }\n\n      return sum;\n    },\n    // <circle> 屬性\n    donut() {\n      let newArray = [];\n      let afterPer = 0; // 把前面的 percentage 累加 (0.xxx)\n\n      // 產生 <circle> 屬性陣列\n      if (this.data.length) {\n        this.data.forEach((e, i) => {\n          // 新增陣列\n          newArray.push({\n            // 拿來計算跑動畫的線條長度 （在 randomData 後半）\n            percentage: e.value / this.totalSum * 100,\n            // 位移長度 = 圓周長 * (1 - 前面累加的長度比例)\n            offset: this.circum * (1 - afterPer),\n            color: this.color(i) // 填色\n          });\n\n          // 把前面的 percentage 累加 (0.xxx)\n          afterPer = afterPer + e.value / this.totalSum;\n        });\n      }\n\n      return newArray;\n    },\n  },\n  ...\n  methods: {\n    randomData() {\n      ...\n\n      // 用 js 跑展開動畫\n      this.$nextTick().then(() => {\n        // DOM updated\n        this.donut.forEach((el, index) => {\n          let totalTime = 100; // 設定切換 css 狀態的時間間隔\n          let stroke = this.dasharray(el.percentage); // 計算 stroke-dasharray\n\n          // 起始位置\n          this.$refs.circles[index].style.cssText = `stroke-dasharray: 0 ${this.circum}; opacity: 0`;\n\n          // 設定 Interval\n          setTimeout(() => {\n            // 結束位置\n            this.$refs.circles[index].style.cssText = `stroke-dasharray: ${stroke.dash} ${stroke.gap}; opacity: 1`;\n          }, totalTime);\n        });\n      });\n    },\n    // 計算 stroke-dasharray 的 dash & gap\n    dasharray(percentage) {\n      let dash = this.circum / 100 * percentage; // percentage %\n      let gap = this.circum / 100 * (100 - percentage);\n\n      return { dash: dash, gap: gap };\n    },\n  }\n}\n```\n\n***\n## 製作 `Tooltip` 功能的 `<path>`\n\n![製作 Tooltip 功能的 <path>](https://lh3.googleusercontent.com/PYNMBI1NGyZvd-VuUfGSGcZR5B4HlbvrPPyBFGPPRV93iTPzhYyQoGipBmZw7xLAuHGvYALgqaunKM3AygQOJQvN-vf7JqiJqyu3pGsrqHOizHIAb37MK7__M8Z7bGsBYqgfhKsmmFr6hnHcYD2V8KUAD8LesMx6bPBvxvw1HdFeAHFIm3zeOtnzdYLeo9CoPE0Cjk-V_SylGwg8vNmp11OBESjJbGfshslHV0ih3FHkB5F7DmGbzY_7usoUDnVOgXdzFAIFMlWrJnR-k_Y_HYeOgfZkk5__OqhokFbvBsAYmuHhIWLNIin3Zs96XgVgF0DAKDLdpJfpVthZTdSdAXYmE9izJnaNf5AbeXKgtspy8ARAoXx4h3soWWg8IorSidCfULUEtUOtNWQ8ZBJ-fGqSzCXYFB4Yr12RI4YDaoB1e51JATaQGDmIu8hwbaUoUecZe0Ryo04VjUZ1bGmRzXMmsoRvNcb2rkPF3n-t1csEU48dxSzZgcgRm7gCWprA2qRbIt-5c_LthwXteMkFsYQj3XRxmZTvl9AOom7Ypme0juX6tcjHEj1ogkSopwGhxr-NZvHNU5qax5vKIcpBF5wLpdAS7INTkNsr_Dxyo3-rTk8tFriT8b2mTY9vLCWOrNm2_seIi8ZM74qPVq-jc9HqE8AfvS8V=w600-h576-no \"<path>\")\n\n這邊你可能會發現很奇怪的事情，就是為什麼上面已經算過百分比了，但這邊還要再算一次？如果仔細看的話，你應該會發現這邊的百分比是用在甜甜圈上方顯示的文字。想一想，如果統計圖出現小數點後十六位數的百分比，是不是超奇怪！！！所以這邊文字其實是透過 `D3` 格式換算成我們較易閱讀的百分比，並不是真實的比例。\n\n* HTML\n\n```html\n<!-- 滑鼠滑過的區塊 -->\n<g\n  class=\"arc\"\n  v-for=\"(p, key) in pie\"\n  :key=\"`${key}${p.d}`\"\n  :transform=\"`translate(${chart.outerRadius},${chart.outerRadius}) rotate(90)`\"\n  v-on:mouseover=\"showTooltip(key, $event)\" v-on:mouseout=\"hiddenTooltip\">\n  <path\n    fill=\"transparent\"\n    :d=\"p.d\">\n  </path>\n  <!-- 文字位置需要由 path 的座標透過 D3 計算，才能把文字放在各自的區塊中間。 -->\n  <text\n    :transform=\"`translate(${p.centroid})`\"\n    text-anchor=\"middle\"\n    fill=\"white\">{{ p.percentage }}\n  </text>\n</g>\n```\n\n* JS\n\n```js\npie() {\n  let newArray = [];\n  let format = d3.format(\".0%\"); // D3 格式化單位（百分比）\n  let pie = d3\n    .pie() // 使用 pie 函數\n    .sort(null) // 不做重新排序\n    .value(function(d) {\n      return d.value;\n    })(this.data); // 為了等下要使用 arc 角度，先造好 pie 物件\n\n  // 產生 <path> & <text> 屬性陣列\n  if (this.data.length) {\n    this.data.forEach((e, i) => {\n      // 準備好 arc 路徑\n      let arc = d3\n        .arc() // 使用 arc 函數\n        .innerRadius(this.chart.innerRadius) // 甜甜圈內半徑\n        .outerRadius(this.chart.outerRadius); // 甜甜圈外半徑\n\n      // 新增陣列\n      newArray.push({\n        // 計算 path 路徑，使用剛剛造好的 arc 函數\n        d: arc({\n          // 透過上方建立的 pie 函數，得知 arc 的起始角度\n          startAngle: pie[i].startAngle, \n          // 透過上方建立的 pie 函數，得知 arc 的結束角度\n          endAngle: pie[i].endAngle\n        }),\n        // 使用 arc.centroid 函數取得 <text> 相對於 <path> 位移至正中間 x, y\n        centroid: arc.centroid(pie[i]),\n        // 將顯示的文字轉成易閱讀的格式\n        percentage: format(e.value / this.totalSum)\n      });\n    });\n  }\n\n  return newArray;\n}\n```\n\n全部畫好的樣子如下圖，可以去 [Github](https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/DonutChart.vue) 查看完整程式碼喔！也可以在[這裡](https://annilla.github.io/d3-practice-vue-svg/dist/)查看直條圖的 Demo，我們下回見～\n\n![甜甜圈圖完成](https://lh3.googleusercontent.com/b5xMuJcWbNk6hgHI5RT0FbGiIN6_XK8pJsXqSmiK-6kXykrTkgYLC4rOtrpZt1fcw3OjOtjgwvNHBkewBHST6Z1WoCrRPo6AD4oekyvYh24S1JS2ja2QGSMFyfhIOSD_eY9AZTvfprwIqDBPs3_E-sFsUpr1YcidoinaoGbhCRT9yJom_ztql5N6isa5lznQ_xLWkbg_8-3QS9_J21qVgBAly90yKebDGLrXmJFNyJG75wZP_vDIyINy2H2fYTg49-spVM76MavB-9ESNxSKFTRbAGaE3xcBR7wmAICq8SzP__ucHYOehi2sWGNsFbc4Vn3jf23QT2JXI6N9aLgmiwrDaRAkYDqGgpYPSJZPzW0gZZysf5nEHLluS8B2q_B5Ewrmz54HWF-ZVpSYoXYbC2G4ynMaOT7g83ils5zDDfZMitBqE9zb7l8esPvxsKa-ODi4qoThsmlj5UfUjWsNT8XuxCb83VwCjPbVF5fZdNJcuC5SAaFqN1IjdKRAwMpgq3ukvg6ITv4TjPSDGE8MXnNQzG2kff-bSnzWUxWaVVA79aRyw4dmEuy74tMV8nTMVZRmQ7o8sRJEzp11f0Qvz91Lqn0HRvEzt6uigBkrfLqno0m0alzaIJj8nBhy2CUEP7BR_VsHtZ1s_GWD927Jbpl2n6o-lilU=w1024-h983-no \"甜甜圈圖\")","slug":"D3/D3-v4-with-Vue-SVG-Donut-Chart","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74d000jtudh2i9zmu93","content":"<p>這次要來練習用 <code>D3</code> 搭配 <code>Vue</code> 做 <code>SVG</code> 甜甜圈圖囉～如果要做中間不要洞的圓餅圖，把內圈半徑改成 0 即可。</p>\n<a id=\"more\"></a>\n<p>一開始想說動畫的部分希望由 <code>CSS</code> <code>transition</code> 來主導 <code>stroke-dasharray</code> 進行動畫，但後來發現沒有實際的圖形範圍做 <code>Tooltip</code> 的功能（因為 <code>CSS</code> 做的圓圈每個都一樣，只是透過 <code>stroke-dasharray</code> 長度不同造成甜甜圈的假象）。所以後來透過 <code>D3</code> 計算每個區塊的 <code>&lt;path&gt;</code> 才得以完成 <code>Tooltip</code> 的功能。因為以上種種的考量後，下面就拆分成兩個部分來解釋，一個部分是執行動畫的 <code>&lt;circle&gt;</code> 部分，另一個則是製作 <code>Tooltip</code> 功能的 <code>&lt;path&gt;</code> 部分。</p>\n<hr>\n<h2 id=\"執行動畫的-lt-circle-gt\"><a href=\"#執行動畫的-lt-circle-gt\" class=\"headerlink\" title=\"執行動畫的 &lt;circle&gt;\"></a>執行動畫的 <code>&lt;circle&gt;</code></h2><p><img src=\"https://lh3.googleusercontent.com/y3ciNP2itQDbjSzjgXxlukSy-kfrNSRuyhAcs6afRYhZoU3jMXL7jB098ANZEWAV8eSsovPlqPCgjuwx5dbtff_ItDj6vvTBiPPmTQRyThIX-XHeeXwgoWCFeGji1KA9DJRyY2_lRjoV0elfwsKcyVn1VaIICoGD5uFBiH2K5vbJvuTPnOLXcgE4Ng6rQZ8d6NNEHWYtPa0UqaGtMpbBXzVGFQmA7U48vwIJdQJwzuyYy0Pj6dmfa7IVDUCSOp84EXTO0tZsoBufOpjUF9miUGNwoQS43xwKtPfl0ur6cA4hTpbn9FlCU4rDym8Jaa9mkBarS8T1Y8hH09udOeiv9dIaKJrniqoXnf4G3wTB79sKLVmDiKv6vQIB504mby_sbn1c3aQVoQlyJfahu59J2IRVFlZ1_jVpkSi9SCu9kf-O_gyMdCQcID79yYuLKsq3nG5X-UwlbX5SDKvPif8YW-r0MtdxZVuMX95Ot4FB0nh5M0l3pSd2NhllyL_Xsa4U9MwgKQB6vPCajdSYNsM6NtTgfUKJfUFANreODCXT9uYwCLd50nkUhOcf9QA0k3gORRJxbDozlchw4y8nuc3EA3G36KVFLM50NYjLnHmw19i05cEnduWlg3d--Ku4Hx6n_NQwPEFjsJVZpX2IU5VZdXU4PBRKgBWS=w600-h576-no\" alt=\"執行動畫的 &lt;circle&gt;\" title=\"&lt;circle&gt;\"></p>\n<ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 執行動畫的圓圈 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">circle</span> <span class=\"attr\">class</span>=<span class=\"string\">\"circle\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">v-for</span>=<span class=\"string\">\"(c, key) in donut\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">ref</span>=<span class=\"string\">\"circles\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;key&#125;$&#123;c.percentage&#125;$&#123;c.offset&#125;`\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:r</span>=<span class=\"string\">\"radius\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:cx</span>=<span class=\"string\">\"chart.outerRadius\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:cy</span>=<span class=\"string\">\"chart.outerRadius\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:stroke-width</span>=<span class=\"string\">\"chart.outerRadius - chart.innerRadius\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:stroke-dashoffset</span>=<span class=\"string\">\"c.offset\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:stroke</span>=<span class=\"string\">\"c.color\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">fill</span>= <span class=\"string\">\"transparent\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.donutChart</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* 說明 */</span></span><br><span class=\"line\">  .detail &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">color</span>: <span class=\"selector-tag\">gray</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/* 統計圖 */</span></span><br><span class=\"line\">  <span class=\"selector-class\">.chartContain</span> &#123;</span><br><span class=\"line\">    ....</span><br><span class=\"line\">    <span class=\"selector-class\">.chartWrap</span> &#123;</span><br><span class=\"line\">      ...</span><br><span class=\"line\">      <span class=\"selector-class\">.chart</span> &#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"comment\">/* 因為 &lt;circle&gt; 0 度從右邊開始，但我們想要從上方開始，所以加了往上旋轉 90 度變形 */</span></span><br><span class=\"line\">        <span class=\"selector-tag\">transform</span>: <span class=\"selector-tag\">rotate</span>(<span class=\"selector-tag\">-90deg</span>);</span><br><span class=\"line\">        <span class=\"selector-class\">.circle</span> &#123;</span><br><span class=\"line\">          <span class=\"attribute\">transition</span>: <span class=\"number\">1s</span>; <span class=\"comment\">/* 漸變動畫進行的秒數 */</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 圓周長</span></span><br><span class=\"line\">    circum() &#123;</span><br><span class=\"line\">      <span class=\"comment\">// circumference = 2 * pi * radius</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">2</span> * <span class=\"built_in\">Math</span>.PI * <span class=\"keyword\">this</span>.radius;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 顏色函數</span></span><br><span class=\"line\">    color() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> d3.scaleOrdinal(d3.schemeCategory20c);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 所有資料值總合</span></span><br><span class=\"line\">    totalSum() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.length) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          sum = sum + e.value;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> sum;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// &lt;circle&gt; 屬性</span></span><br><span class=\"line\">    donut() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> newArray = [];</span><br><span class=\"line\">      <span class=\"keyword\">let</span> afterPer = <span class=\"number\">0</span>; <span class=\"comment\">// 把前面的 percentage 累加 (0.xxx)</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 產生 &lt;circle&gt; 屬性陣列</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.length) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 新增陣列</span></span><br><span class=\"line\">          newArray.push(&#123;</span><br><span class=\"line\">            <span class=\"comment\">// 拿來計算跑動畫的線條長度 （在 randomData 後半）</span></span><br><span class=\"line\">            percentage: e.value / <span class=\"keyword\">this</span>.totalSum * <span class=\"number\">100</span>,</span><br><span class=\"line\">            <span class=\"comment\">// 位移長度 = 圓周長 * (1 - 前面累加的長度比例)</span></span><br><span class=\"line\">            offset: <span class=\"keyword\">this</span>.circum * (<span class=\"number\">1</span> - afterPer),</span><br><span class=\"line\">            color: <span class=\"keyword\">this</span>.color(i) <span class=\"comment\">// 填色</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"comment\">// 把前面的 percentage 累加 (0.xxx)</span></span><br><span class=\"line\">          afterPer = afterPer + e.value / <span class=\"keyword\">this</span>.totalSum;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> newArray;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    randomData() &#123;</span><br><span class=\"line\">      ...</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 用 js 跑展開動畫</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$nextTick().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// DOM updated</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.donut.forEach(<span class=\"function\">(<span class=\"params\">el, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> totalTime = <span class=\"number\">100</span>; <span class=\"comment\">// 設定切換 css 狀態的時間間隔</span></span><br><span class=\"line\">          <span class=\"keyword\">let</span> stroke = <span class=\"keyword\">this</span>.dasharray(el.percentage); <span class=\"comment\">// 計算 stroke-dasharray</span></span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"comment\">// 起始位置</span></span><br><span class=\"line\">          <span class=\"keyword\">this</span>.$refs.circles[index].style.cssText = <span class=\"string\">`stroke-dasharray: 0 <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.circum&#125;</span>; opacity: 0`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"comment\">// 設定 Interval</span></span><br><span class=\"line\">          setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 結束位置</span></span><br><span class=\"line\">            <span class=\"keyword\">this</span>.$refs.circles[index].style.cssText = <span class=\"string\">`stroke-dasharray: <span class=\"subst\">$&#123;stroke.dash&#125;</span> <span class=\"subst\">$&#123;stroke.gap&#125;</span>; opacity: 1`</span>;</span><br><span class=\"line\">          &#125;, totalTime);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 計算 stroke-dasharray 的 dash &amp; gap</span></span><br><span class=\"line\">    dasharray(percentage) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> dash = <span class=\"keyword\">this</span>.circum / <span class=\"number\">100</span> * percentage; <span class=\"comment\">// percentage %</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> gap = <span class=\"keyword\">this</span>.circum / <span class=\"number\">100</span> * (<span class=\"number\">100</span> - percentage);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">dash</span>: dash, <span class=\"attr\">gap</span>: gap &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"製作-Tooltip-功能的-lt-path-gt\"><a href=\"#製作-Tooltip-功能的-lt-path-gt\" class=\"headerlink\" title=\"製作 Tooltip 功能的 &lt;path&gt;\"></a>製作 <code>Tooltip</code> 功能的 <code>&lt;path&gt;</code></h2><p><img src=\"https://lh3.googleusercontent.com/PYNMBI1NGyZvd-VuUfGSGcZR5B4HlbvrPPyBFGPPRV93iTPzhYyQoGipBmZw7xLAuHGvYALgqaunKM3AygQOJQvN-vf7JqiJqyu3pGsrqHOizHIAb37MK7__M8Z7bGsBYqgfhKsmmFr6hnHcYD2V8KUAD8LesMx6bPBvxvw1HdFeAHFIm3zeOtnzdYLeo9CoPE0Cjk-V_SylGwg8vNmp11OBESjJbGfshslHV0ih3FHkB5F7DmGbzY_7usoUDnVOgXdzFAIFMlWrJnR-k_Y_HYeOgfZkk5__OqhokFbvBsAYmuHhIWLNIin3Zs96XgVgF0DAKDLdpJfpVthZTdSdAXYmE9izJnaNf5AbeXKgtspy8ARAoXx4h3soWWg8IorSidCfULUEtUOtNWQ8ZBJ-fGqSzCXYFB4Yr12RI4YDaoB1e51JATaQGDmIu8hwbaUoUecZe0Ryo04VjUZ1bGmRzXMmsoRvNcb2rkPF3n-t1csEU48dxSzZgcgRm7gCWprA2qRbIt-5c_LthwXteMkFsYQj3XRxmZTvl9AOom7Ypme0juX6tcjHEj1ogkSopwGhxr-NZvHNU5qax5vKIcpBF5wLpdAS7INTkNsr_Dxyo3-rTk8tFriT8b2mTY9vLCWOrNm2_seIi8ZM74qPVq-jc9HqE8AfvS8V=w600-h576-no\" alt=\"製作 Tooltip 功能的 &lt;path&gt;\" title=\"&lt;path&gt;\"></p>\n<p>這邊你可能會發現很奇怪的事情，就是為什麼上面已經算過百分比了，但這邊還要再算一次？如果仔細看的話，你應該會發現這邊的百分比是用在甜甜圈上方顯示的文字。想一想，如果統計圖出現小數點後十六位數的百分比，是不是超奇怪！！！所以這邊文字其實是透過 <code>D3</code> 格式換算成我們較易閱讀的百分比，並不是真實的比例。</p>\n<ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 滑鼠滑過的區塊 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">g</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">class</span>=<span class=\"string\">\"arc\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">v-for</span>=<span class=\"string\">\"(p, key) in pie\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;key&#125;$&#123;p.d&#125;`\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:transform</span>=<span class=\"string\">\"`translate($&#123;chart.outerRadius&#125;,$&#123;chart.outerRadius&#125;) rotate(90)`\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">v-on:mouseover</span>=<span class=\"string\">\"showTooltip(key, $event)\"</span> <span class=\"attr\">v-on:mouseout</span>=<span class=\"string\">\"hiddenTooltip\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">path</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">fill</span>=<span class=\"string\">\"transparent\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:d</span>=<span class=\"string\">\"p.d\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">path</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 文字位置需要由 path 的座標透過 D3 計算，才能把文字放在各自的區塊中間。 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">text</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:transform</span>=<span class=\"string\">\"`translate($&#123;p.centroid&#125;)`\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"middle\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">fill</span>=<span class=\"string\">\"white\"</span>&gt;</span>&#123;&#123; p.percentage &#125;&#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pie() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> newArray = [];</span><br><span class=\"line\">  <span class=\"keyword\">let</span> format = d3.format(<span class=\"string\">\".0%\"</span>); <span class=\"comment\">// D3 格式化單位（百分比）</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> pie = d3</span><br><span class=\"line\">    .pie() <span class=\"comment\">// 使用 pie 函數</span></span><br><span class=\"line\">    .sort(<span class=\"literal\">null</span>) <span class=\"comment\">// 不做重新排序</span></span><br><span class=\"line\">    .value(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">d</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> d.value;</span><br><span class=\"line\">    &#125;)(<span class=\"keyword\">this</span>.data); <span class=\"comment\">// 為了等下要使用 arc 角度，先造好 pie 物件</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 產生 &lt;path&gt; &amp; &lt;text&gt; 屬性陣列</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.length) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 準備好 arc 路徑</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> arc = d3</span><br><span class=\"line\">        .arc() <span class=\"comment\">// 使用 arc 函數</span></span><br><span class=\"line\">        .innerRadius(<span class=\"keyword\">this</span>.chart.innerRadius) <span class=\"comment\">// 甜甜圈內半徑</span></span><br><span class=\"line\">        .outerRadius(<span class=\"keyword\">this</span>.chart.outerRadius); <span class=\"comment\">// 甜甜圈外半徑</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 新增陣列</span></span><br><span class=\"line\">      newArray.push(&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 計算 path 路徑，使用剛剛造好的 arc 函數</span></span><br><span class=\"line\">        d: arc(&#123;</span><br><span class=\"line\">          <span class=\"comment\">// 透過上方建立的 pie 函數，得知 arc 的起始角度</span></span><br><span class=\"line\">          startAngle: pie[i].startAngle, </span><br><span class=\"line\">          <span class=\"comment\">// 透過上方建立的 pie 函數，得知 arc 的結束角度</span></span><br><span class=\"line\">          endAngle: pie[i].endAngle</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">        <span class=\"comment\">// 使用 arc.centroid 函數取得 &lt;text&gt; 相對於 &lt;path&gt; 位移至正中間 x, y</span></span><br><span class=\"line\">        centroid: arc.centroid(pie[i]),</span><br><span class=\"line\">        <span class=\"comment\">// 將顯示的文字轉成易閱讀的格式</span></span><br><span class=\"line\">        percentage: format(e.value / <span class=\"keyword\">this</span>.totalSum)</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> newArray;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>全部畫好的樣子如下圖，可以去 <a href=\"https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/DonutChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a> 查看完整程式碼喔！也可以在<a href=\"https://annilla.github.io/d3-practice-vue-svg/dist/\">這裡</a>查看直條圖的 Demo，我們下回見～</p>\n<p><img src=\"https://lh3.googleusercontent.com/b5xMuJcWbNk6hgHI5RT0FbGiIN6_XK8pJsXqSmiK-6kXykrTkgYLC4rOtrpZt1fcw3OjOtjgwvNHBkewBHST6Z1WoCrRPo6AD4oekyvYh24S1JS2ja2QGSMFyfhIOSD_eY9AZTvfprwIqDBPs3_E-sFsUpr1YcidoinaoGbhCRT9yJom_ztql5N6isa5lznQ_xLWkbg_8-3QS9_J21qVgBAly90yKebDGLrXmJFNyJG75wZP_vDIyINy2H2fYTg49-spVM76MavB-9ESNxSKFTRbAGaE3xcBR7wmAICq8SzP__ucHYOehi2sWGNsFbc4Vn3jf23QT2JXI6N9aLgmiwrDaRAkYDqGgpYPSJZPzW0gZZysf5nEHLluS8B2q_B5Ewrmz54HWF-ZVpSYoXYbC2G4ynMaOT7g83ils5zDDfZMitBqE9zb7l8esPvxsKa-ODi4qoThsmlj5UfUjWsNT8XuxCb83VwCjPbVF5fZdNJcuC5SAaFqN1IjdKRAwMpgq3ukvg6ITv4TjPSDGE8MXnNQzG2kff-bSnzWUxWaVVA79aRyw4dmEuy74tMV8nTMVZRmQ7o8sRJEzp11f0Qvz91Lqn0HRvEzt6uigBkrfLqno0m0alzaIJj8nBhy2CUEP7BR_VsHtZ1s_GWD927Jbpl2n6o-lilU=w1024-h983-no\" alt=\"甜甜圈圖完成\" title=\"甜甜圈圖\"></p>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","excerpt":"<p>這次要來練習用 <code>D3</code> 搭配 <code>Vue</code> 做 <code>SVG</code> 甜甜圈圖囉～如果要做中間不要洞的圓餅圖，把內圈半徑改成 0 即可。</p>","more":"<p>一開始想說動畫的部分希望由 <code>CSS</code> <code>transition</code> 來主導 <code>stroke-dasharray</code> 進行動畫，但後來發現沒有實際的圖形範圍做 <code>Tooltip</code> 的功能（因為 <code>CSS</code> 做的圓圈每個都一樣，只是透過 <code>stroke-dasharray</code> 長度不同造成甜甜圈的假象）。所以後來透過 <code>D3</code> 計算每個區塊的 <code>&lt;path&gt;</code> 才得以完成 <code>Tooltip</code> 的功能。因為以上種種的考量後，下面就拆分成兩個部分來解釋，一個部分是執行動畫的 <code>&lt;circle&gt;</code> 部分，另一個則是製作 <code>Tooltip</code> 功能的 <code>&lt;path&gt;</code> 部分。</p>\n<hr>\n<h2 id=\"執行動畫的-lt-circle-gt\"><a href=\"#執行動畫的-lt-circle-gt\" class=\"headerlink\" title=\"執行動畫的 &lt;circle&gt;\"></a>執行動畫的 <code>&lt;circle&gt;</code></h2><p><img src=\"https://lh3.googleusercontent.com/y3ciNP2itQDbjSzjgXxlukSy-kfrNSRuyhAcs6afRYhZoU3jMXL7jB098ANZEWAV8eSsovPlqPCgjuwx5dbtff_ItDj6vvTBiPPmTQRyThIX-XHeeXwgoWCFeGji1KA9DJRyY2_lRjoV0elfwsKcyVn1VaIICoGD5uFBiH2K5vbJvuTPnOLXcgE4Ng6rQZ8d6NNEHWYtPa0UqaGtMpbBXzVGFQmA7U48vwIJdQJwzuyYy0Pj6dmfa7IVDUCSOp84EXTO0tZsoBufOpjUF9miUGNwoQS43xwKtPfl0ur6cA4hTpbn9FlCU4rDym8Jaa9mkBarS8T1Y8hH09udOeiv9dIaKJrniqoXnf4G3wTB79sKLVmDiKv6vQIB504mby_sbn1c3aQVoQlyJfahu59J2IRVFlZ1_jVpkSi9SCu9kf-O_gyMdCQcID79yYuLKsq3nG5X-UwlbX5SDKvPif8YW-r0MtdxZVuMX95Ot4FB0nh5M0l3pSd2NhllyL_Xsa4U9MwgKQB6vPCajdSYNsM6NtTgfUKJfUFANreODCXT9uYwCLd50nkUhOcf9QA0k3gORRJxbDozlchw4y8nuc3EA3G36KVFLM50NYjLnHmw19i05cEnduWlg3d--Ku4Hx6n_NQwPEFjsJVZpX2IU5VZdXU4PBRKgBWS=w600-h576-no\" alt=\"執行動畫的 &lt;circle&gt;\" title=\"&lt;circle&gt;\"></p>\n<ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 執行動畫的圓圈 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">circle</span> <span class=\"attr\">class</span>=<span class=\"string\">\"circle\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">v-for</span>=<span class=\"string\">\"(c, key) in donut\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">ref</span>=<span class=\"string\">\"circles\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;key&#125;$&#123;c.percentage&#125;$&#123;c.offset&#125;`\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:r</span>=<span class=\"string\">\"radius\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:cx</span>=<span class=\"string\">\"chart.outerRadius\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:cy</span>=<span class=\"string\">\"chart.outerRadius\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:stroke-width</span>=<span class=\"string\">\"chart.outerRadius - chart.innerRadius\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:stroke-dashoffset</span>=<span class=\"string\">\"c.offset\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:stroke</span>=<span class=\"string\">\"c.color\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">fill</span>= <span class=\"string\">\"transparent\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.donutChart</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* 說明 */</span></span><br><span class=\"line\">  .detail &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">color</span>: <span class=\"selector-tag\">gray</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/* 統計圖 */</span></span><br><span class=\"line\">  <span class=\"selector-class\">.chartContain</span> &#123;</span><br><span class=\"line\">    ....</span><br><span class=\"line\">    <span class=\"selector-class\">.chartWrap</span> &#123;</span><br><span class=\"line\">      ...</span><br><span class=\"line\">      <span class=\"selector-class\">.chart</span> &#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"comment\">/* 因為 &lt;circle&gt; 0 度從右邊開始，但我們想要從上方開始，所以加了往上旋轉 90 度變形 */</span></span><br><span class=\"line\">        <span class=\"selector-tag\">transform</span>: <span class=\"selector-tag\">rotate</span>(<span class=\"selector-tag\">-90deg</span>);</span><br><span class=\"line\">        <span class=\"selector-class\">.circle</span> &#123;</span><br><span class=\"line\">          <span class=\"attribute\">transition</span>: <span class=\"number\">1s</span>; <span class=\"comment\">/* 漸變動畫進行的秒數 */</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 圓周長</span></span><br><span class=\"line\">    circum() &#123;</span><br><span class=\"line\">      <span class=\"comment\">// circumference = 2 * pi * radius</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">2</span> * <span class=\"built_in\">Math</span>.PI * <span class=\"keyword\">this</span>.radius;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 顏色函數</span></span><br><span class=\"line\">    color() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> d3.scaleOrdinal(d3.schemeCategory20c);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 所有資料值總合</span></span><br><span class=\"line\">    totalSum() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.length) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          sum = sum + e.value;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> sum;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// &lt;circle&gt; 屬性</span></span><br><span class=\"line\">    donut() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> newArray = [];</span><br><span class=\"line\">      <span class=\"keyword\">let</span> afterPer = <span class=\"number\">0</span>; <span class=\"comment\">// 把前面的 percentage 累加 (0.xxx)</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 產生 &lt;circle&gt; 屬性陣列</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.length) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 新增陣列</span></span><br><span class=\"line\">          newArray.push(&#123;</span><br><span class=\"line\">            <span class=\"comment\">// 拿來計算跑動畫的線條長度 （在 randomData 後半）</span></span><br><span class=\"line\">            percentage: e.value / <span class=\"keyword\">this</span>.totalSum * <span class=\"number\">100</span>,</span><br><span class=\"line\">            <span class=\"comment\">// 位移長度 = 圓周長 * (1 - 前面累加的長度比例)</span></span><br><span class=\"line\">            offset: <span class=\"keyword\">this</span>.circum * (<span class=\"number\">1</span> - afterPer),</span><br><span class=\"line\">            color: <span class=\"keyword\">this</span>.color(i) <span class=\"comment\">// 填色</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"comment\">// 把前面的 percentage 累加 (0.xxx)</span></span><br><span class=\"line\">          afterPer = afterPer + e.value / <span class=\"keyword\">this</span>.totalSum;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> newArray;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    randomData() &#123;</span><br><span class=\"line\">      ...</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 用 js 跑展開動畫</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$nextTick().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// DOM updated</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.donut.forEach(<span class=\"function\">(<span class=\"params\">el, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> totalTime = <span class=\"number\">100</span>; <span class=\"comment\">// 設定切換 css 狀態的時間間隔</span></span><br><span class=\"line\">          <span class=\"keyword\">let</span> stroke = <span class=\"keyword\">this</span>.dasharray(el.percentage); <span class=\"comment\">// 計算 stroke-dasharray</span></span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"comment\">// 起始位置</span></span><br><span class=\"line\">          <span class=\"keyword\">this</span>.$refs.circles[index].style.cssText = <span class=\"string\">`stroke-dasharray: 0 <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.circum&#125;</span>; opacity: 0`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"comment\">// 設定 Interval</span></span><br><span class=\"line\">          setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 結束位置</span></span><br><span class=\"line\">            <span class=\"keyword\">this</span>.$refs.circles[index].style.cssText = <span class=\"string\">`stroke-dasharray: <span class=\"subst\">$&#123;stroke.dash&#125;</span> <span class=\"subst\">$&#123;stroke.gap&#125;</span>; opacity: 1`</span>;</span><br><span class=\"line\">          &#125;, totalTime);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 計算 stroke-dasharray 的 dash &amp; gap</span></span><br><span class=\"line\">    dasharray(percentage) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> dash = <span class=\"keyword\">this</span>.circum / <span class=\"number\">100</span> * percentage; <span class=\"comment\">// percentage %</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> gap = <span class=\"keyword\">this</span>.circum / <span class=\"number\">100</span> * (<span class=\"number\">100</span> - percentage);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">dash</span>: dash, <span class=\"attr\">gap</span>: gap &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"製作-Tooltip-功能的-lt-path-gt\"><a href=\"#製作-Tooltip-功能的-lt-path-gt\" class=\"headerlink\" title=\"製作 Tooltip 功能的 &lt;path&gt;\"></a>製作 <code>Tooltip</code> 功能的 <code>&lt;path&gt;</code></h2><p><img src=\"https://lh3.googleusercontent.com/PYNMBI1NGyZvd-VuUfGSGcZR5B4HlbvrPPyBFGPPRV93iTPzhYyQoGipBmZw7xLAuHGvYALgqaunKM3AygQOJQvN-vf7JqiJqyu3pGsrqHOizHIAb37MK7__M8Z7bGsBYqgfhKsmmFr6hnHcYD2V8KUAD8LesMx6bPBvxvw1HdFeAHFIm3zeOtnzdYLeo9CoPE0Cjk-V_SylGwg8vNmp11OBESjJbGfshslHV0ih3FHkB5F7DmGbzY_7usoUDnVOgXdzFAIFMlWrJnR-k_Y_HYeOgfZkk5__OqhokFbvBsAYmuHhIWLNIin3Zs96XgVgF0DAKDLdpJfpVthZTdSdAXYmE9izJnaNf5AbeXKgtspy8ARAoXx4h3soWWg8IorSidCfULUEtUOtNWQ8ZBJ-fGqSzCXYFB4Yr12RI4YDaoB1e51JATaQGDmIu8hwbaUoUecZe0Ryo04VjUZ1bGmRzXMmsoRvNcb2rkPF3n-t1csEU48dxSzZgcgRm7gCWprA2qRbIt-5c_LthwXteMkFsYQj3XRxmZTvl9AOom7Ypme0juX6tcjHEj1ogkSopwGhxr-NZvHNU5qax5vKIcpBF5wLpdAS7INTkNsr_Dxyo3-rTk8tFriT8b2mTY9vLCWOrNm2_seIi8ZM74qPVq-jc9HqE8AfvS8V=w600-h576-no\" alt=\"製作 Tooltip 功能的 &lt;path&gt;\" title=\"&lt;path&gt;\"></p>\n<p>這邊你可能會發現很奇怪的事情，就是為什麼上面已經算過百分比了，但這邊還要再算一次？如果仔細看的話，你應該會發現這邊的百分比是用在甜甜圈上方顯示的文字。想一想，如果統計圖出現小數點後十六位數的百分比，是不是超奇怪！！！所以這邊文字其實是透過 <code>D3</code> 格式換算成我們較易閱讀的百分比，並不是真實的比例。</p>\n<ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 滑鼠滑過的區塊 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">g</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">class</span>=<span class=\"string\">\"arc\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">v-for</span>=<span class=\"string\">\"(p, key) in pie\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;key&#125;$&#123;p.d&#125;`\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:transform</span>=<span class=\"string\">\"`translate($&#123;chart.outerRadius&#125;,$&#123;chart.outerRadius&#125;) rotate(90)`\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">v-on:mouseover</span>=<span class=\"string\">\"showTooltip(key, $event)\"</span> <span class=\"attr\">v-on:mouseout</span>=<span class=\"string\">\"hiddenTooltip\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">path</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">fill</span>=<span class=\"string\">\"transparent\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:d</span>=<span class=\"string\">\"p.d\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">path</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 文字位置需要由 path 的座標透過 D3 計算，才能把文字放在各自的區塊中間。 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">text</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:transform</span>=<span class=\"string\">\"`translate($&#123;p.centroid&#125;)`\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"middle\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">fill</span>=<span class=\"string\">\"white\"</span>&gt;</span>&#123;&#123; p.percentage &#125;&#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pie() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> newArray = [];</span><br><span class=\"line\">  <span class=\"keyword\">let</span> format = d3.format(<span class=\"string\">\".0%\"</span>); <span class=\"comment\">// D3 格式化單位（百分比）</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> pie = d3</span><br><span class=\"line\">    .pie() <span class=\"comment\">// 使用 pie 函數</span></span><br><span class=\"line\">    .sort(<span class=\"literal\">null</span>) <span class=\"comment\">// 不做重新排序</span></span><br><span class=\"line\">    .value(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">d</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> d.value;</span><br><span class=\"line\">    &#125;)(<span class=\"keyword\">this</span>.data); <span class=\"comment\">// 為了等下要使用 arc 角度，先造好 pie 物件</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 產生 &lt;path&gt; &amp; &lt;text&gt; 屬性陣列</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.data.length) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 準備好 arc 路徑</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> arc = d3</span><br><span class=\"line\">        .arc() <span class=\"comment\">// 使用 arc 函數</span></span><br><span class=\"line\">        .innerRadius(<span class=\"keyword\">this</span>.chart.innerRadius) <span class=\"comment\">// 甜甜圈內半徑</span></span><br><span class=\"line\">        .outerRadius(<span class=\"keyword\">this</span>.chart.outerRadius); <span class=\"comment\">// 甜甜圈外半徑</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 新增陣列</span></span><br><span class=\"line\">      newArray.push(&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 計算 path 路徑，使用剛剛造好的 arc 函數</span></span><br><span class=\"line\">        d: arc(&#123;</span><br><span class=\"line\">          <span class=\"comment\">// 透過上方建立的 pie 函數，得知 arc 的起始角度</span></span><br><span class=\"line\">          startAngle: pie[i].startAngle, </span><br><span class=\"line\">          <span class=\"comment\">// 透過上方建立的 pie 函數，得知 arc 的結束角度</span></span><br><span class=\"line\">          endAngle: pie[i].endAngle</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">        <span class=\"comment\">// 使用 arc.centroid 函數取得 &lt;text&gt; 相對於 &lt;path&gt; 位移至正中間 x, y</span></span><br><span class=\"line\">        centroid: arc.centroid(pie[i]),</span><br><span class=\"line\">        <span class=\"comment\">// 將顯示的文字轉成易閱讀的格式</span></span><br><span class=\"line\">        percentage: format(e.value / <span class=\"keyword\">this</span>.totalSum)</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> newArray;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>全部畫好的樣子如下圖，可以去 <a href=\"https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/DonutChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a> 查看完整程式碼喔！也可以在<a href=\"https://annilla.github.io/d3-practice-vue-svg/dist/\">這裡</a>查看直條圖的 Demo，我們下回見～</p>\n<p><img src=\"https://lh3.googleusercontent.com/b5xMuJcWbNk6hgHI5RT0FbGiIN6_XK8pJsXqSmiK-6kXykrTkgYLC4rOtrpZt1fcw3OjOtjgwvNHBkewBHST6Z1WoCrRPo6AD4oekyvYh24S1JS2ja2QGSMFyfhIOSD_eY9AZTvfprwIqDBPs3_E-sFsUpr1YcidoinaoGbhCRT9yJom_ztql5N6isa5lznQ_xLWkbg_8-3QS9_J21qVgBAly90yKebDGLrXmJFNyJG75wZP_vDIyINy2H2fYTg49-spVM76MavB-9ESNxSKFTRbAGaE3xcBR7wmAICq8SzP__ucHYOehi2sWGNsFbc4Vn3jf23QT2JXI6N9aLgmiwrDaRAkYDqGgpYPSJZPzW0gZZysf5nEHLluS8B2q_B5Ewrmz54HWF-ZVpSYoXYbC2G4ynMaOT7g83ils5zDDfZMitBqE9zb7l8esPvxsKa-ODi4qoThsmlj5UfUjWsNT8XuxCb83VwCjPbVF5fZdNJcuC5SAaFqN1IjdKRAwMpgq3ukvg6ITv4TjPSDGE8MXnNQzG2kff-bSnzWUxWaVVA79aRyw4dmEuy74tMV8nTMVZRmQ7o8sRJEzp11f0Qvz91Lqn0HRvEzt6uigBkrfLqno0m0alzaIJj8nBhy2CUEP7BR_VsHtZ1s_GWD927Jbpl2n6o-lilU=w1024-h983-no\" alt=\"甜甜圈圖完成\" title=\"甜甜圈圖\"></p>"},{"title":"D3 v4 with Vue - CANVAS Vertical Bar Chart","thumbnailImage":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no","coverMeta":"out","date":"2018-08-04T16:00:00.000Z","updated":"2018-08-04T16:00:00.000Z","_content":"\n作者：Anny Chang\n\n此篇練習使用 `CANVAS` 來做直條圖。因為和橫條圖的結構很相像，所以這邊就直接進入直條圖動畫的部分。\n\n<!--more-->\n\n***\n## 直條圖動畫\n\n```js\nanimationLine(elapsed) {\n  let duration = 800;\n  let t = Math.min(1, elapsed / duration); // compute how far through the animation we are (0 to 1)\n\n  // Clear Canvas\n  this.ctx.clearRect(0, 0, this.conWidth, this.conHeight);\n\n  // 繪製不須動畫的元素\n  this.drawStatic();\n\n  /*-------------------------\n    直條\n  -------------------------*/\n  this.ctx.save();\n  this.bars.forEach((e, i) => {\n  \t// 開始繪製\n\t\tthis.ctx.beginPath();\n  \tthis.ctx.rect(e.x, e.y + e.height * (1 - t), e.width, e.height * t);\n    this.ctx.globalAlpha = t;\n    this.ctx.fillStyle = e.color;\n    this.ctx.fill();\n  });\n\n  /*-------------------------\n    直條文字\n  -------------------------*/\n  this.ctx.font = \"12px sans-serif\";\n  this.ctx.textBaseline = \"bottom\";\n  this.ctx.textAlign = \"center\";\n  this.ctx.fillStyle = \"gray\";\n  this.bars.forEach((e, i) => {\n    // 開始繪製\n    this.ctx.fillText(e.number, e.x + this.barWidth / 2, e.y);\n  });\n  this.ctx.restore();\n\n  // if this animation is over\n  if (t === 1) {\n    // stop this timer since we are done animating.\n    this.timer.stop();\n  }\n},\n```\n\n> 繪製的前後順序會影響繪製出來的圖層疊加效果，越後面繪製出來的元素會蓋在舊的元素上方。所以不需動畫的元素(ex: X軸、Y軸、標籤...)才特別拉出來寫成一個 function 放在繪製動畫之前。\n\n***\n## 不需動畫的元素\n\n```js\ndrawStatic() {\n  let tickSize = 6; // 軸點大小\n\n  /*-------------------------\n    X軸\n  -------------------------*/\n  this.xTick = this.custom\n    .append(\"g\")\n    .attr(\"class\", \"axis axisX\")\n    .call(this.xAxis)\n    .selectAll(\"g.tick\");\n  // 繪製X軸點\n  this.ctx.beginPath();\n  // 黑色刻點\n  this.xTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let xTrans = node.attr(\"transform\");\n    let xPos = Number(xTrans.split(\",\")[0].split(\"(\")[1]) + this.chartLeft;\n\n    // 跳過 0 的軸點\n    if (index === 0) return;\n\n    // 繪製軸點\n    this.ctx.moveTo(xPos, this.chartTop + this.chartHeight);\n    this.ctx.lineTo(xPos, this.chartTop + this.chartHeight + tickSize);\n  });\n  this.ctx.stroke();\n\n  // 繪製X軸線\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft, this.chartTop + this.chartHeight);\n  this.ctx.lineTo(\n    this.chartLeft + this.chartHeight,\n    this.chartTop + this.chartWidth\n  );\n  this.ctx.stroke();\n\n  // 繪製X軸文字\n  this.ctx.textAlign = \"center\";\n  this.ctx.textBaseline = \"top\";\n  this.xTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let xTrans = node.attr(\"transform\");\n    let xPos = Number(xTrans.split(\",\")[0].split(\"(\")[1]) + this.chartLeft;\n\n    this.ctx.fillText(\n      node.property(\"innerText\"),\n      xPos,\n    \tthis.chartTop + this.chartHeight + tickSize\n      );\n  });\n\n  // 繪製X軸標籤\n  this.data.forEach((el, index) => {\n    // 圓點\n    // 開始繪製\n    this.ctx.save();\n    this.ctx.beginPath();\n    // 繪製點\n    this.ctx.arc(\n      this.chartLeft + index * 100,\n      this.chartTop + this.chartHeight + 50,\n      5,\n      0,\n      2 * Math.PI\n    );\n    // 填色\n    this.ctx.fillStyle = this.color(index);\n    this.ctx.fill();\n    // 結束繪製\n    this.ctx.closePath();\n\n    // 文字\n    this.ctx.textAlign = \"left\";\n    this.ctx.textBaseline = \"middle\";\n  \tthis.ctx.font = \"16px sans-serif\";\n    this.ctx.fillStyle = \"#000\";\n    this.ctx.fillText(\n      el.name,\n      this.chartLeft + index * 100 + 10,\n      this.chartTop + this.chartHeight + 50\n    );\n    this.ctx.restore();\n  });\n\n  /*-------------------------\n    Y軸\n  -------------------------*/\n  this.yTick = this.custom\n    .append(\"g\")\n    .attr(\"class\", \"axis axisY\")\n    .call(this.yAxis)\n    .selectAll(\"g.tick\");\n  // 繪製Y軸點\n  this.ctx.save();\n  this.ctx.beginPath();\n  // 內部灰色刻線\n  this.yTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let yTrans = node.attr(\"transform\");\n    let yPos = Number(yTrans.split(\",\")[1].split(\")\")[0]) + this.chartTop;\n\n    // 跳過 0 的軸點\n    if (index === 0) return;\n\n    // 繪製軸點\n    this.ctx.moveTo(this.chartLeft, yPos);\n    this.ctx.lineTo(this.chartLeft + this.chartWidth, yPos);\n  });\n  this.ctx.strokeStyle = \"#efefef\"; // 線顏色\n  this.ctx.stroke();\n  this.ctx.restore();\n\n  // 最上方的刻點\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft - tickSize, this.chartTop);\n  this.ctx.lineTo(this.chartLeft, this.chartTop);\n  this.ctx.stroke();\n\n  // 繪製Y軸線\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft, this.chartTop);\n  this.ctx.lineTo(this.chartLeft, this.chartTop + this.chartHeight);\n  this.ctx.stroke();\n\n  // 繪製Y軸文字\n  this.ctx.textAlign = \"right\";\n  this.ctx.textBaseline = \"middle\";\n  this.yTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let yTrans = node.attr(\"transform\");\n    let yPos = Number(yTrans.split(\",\")[1].split(\")\")[0]) + this.chartTop;\n\n    this.ctx.fillText(\n      node.property(\"innerText\"),\n      this.chartLeft - tickSize,\n      yPos\n    );\n  });\n\n  // 繪製Y軸標籤\n  // start by saving the current context (current orientation, origin)\n  this.ctx.save();\n  this.ctx.translate(0, 0);\n  this.ctx.rotate(-Math.PI / 2);\n  this.ctx.textAlign = \"center\";\n  this.ctx.textBaseline = \"top\";\n  this.ctx.font = \"16px sans-serif\";\n  this.ctx.fillText(\"件數\", -(this.chartTop + this.chartHeight / 2), 0);\n  this.ctx.restore(); // now restore the canvas flipping it back to its original orientation\n},\n```\n\n線上 demo [在此](https://annilla.github.io/d3-practice-vue-canvas/dist/)，也可以在[Github](https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/BarVChart.vue)查看完整程式碼，下次我們要講最後一個甜甜圈圖了，之後我們將會有新的主題～敬請期待 ：）\n","source":"_posts/D3/D3-v4-with-Vue-CANVAS-Vertical-Bar-Chart.md","raw":"---\ntitle: D3 v4 with Vue - CANVAS Vertical Bar Chart\ncategories:\n  - D3\nthumbnailImage: https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no\ncoverMeta: out\ntags: [D3, Vue, CANVAS]\ndate: 2018/08/05\nupdated: 2018/08/05\n---\n\n作者：Anny Chang\n\n此篇練習使用 `CANVAS` 來做直條圖。因為和橫條圖的結構很相像，所以這邊就直接進入直條圖動畫的部分。\n\n<!--more-->\n\n***\n## 直條圖動畫\n\n```js\nanimationLine(elapsed) {\n  let duration = 800;\n  let t = Math.min(1, elapsed / duration); // compute how far through the animation we are (0 to 1)\n\n  // Clear Canvas\n  this.ctx.clearRect(0, 0, this.conWidth, this.conHeight);\n\n  // 繪製不須動畫的元素\n  this.drawStatic();\n\n  /*-------------------------\n    直條\n  -------------------------*/\n  this.ctx.save();\n  this.bars.forEach((e, i) => {\n  \t// 開始繪製\n\t\tthis.ctx.beginPath();\n  \tthis.ctx.rect(e.x, e.y + e.height * (1 - t), e.width, e.height * t);\n    this.ctx.globalAlpha = t;\n    this.ctx.fillStyle = e.color;\n    this.ctx.fill();\n  });\n\n  /*-------------------------\n    直條文字\n  -------------------------*/\n  this.ctx.font = \"12px sans-serif\";\n  this.ctx.textBaseline = \"bottom\";\n  this.ctx.textAlign = \"center\";\n  this.ctx.fillStyle = \"gray\";\n  this.bars.forEach((e, i) => {\n    // 開始繪製\n    this.ctx.fillText(e.number, e.x + this.barWidth / 2, e.y);\n  });\n  this.ctx.restore();\n\n  // if this animation is over\n  if (t === 1) {\n    // stop this timer since we are done animating.\n    this.timer.stop();\n  }\n},\n```\n\n> 繪製的前後順序會影響繪製出來的圖層疊加效果，越後面繪製出來的元素會蓋在舊的元素上方。所以不需動畫的元素(ex: X軸、Y軸、標籤...)才特別拉出來寫成一個 function 放在繪製動畫之前。\n\n***\n## 不需動畫的元素\n\n```js\ndrawStatic() {\n  let tickSize = 6; // 軸點大小\n\n  /*-------------------------\n    X軸\n  -------------------------*/\n  this.xTick = this.custom\n    .append(\"g\")\n    .attr(\"class\", \"axis axisX\")\n    .call(this.xAxis)\n    .selectAll(\"g.tick\");\n  // 繪製X軸點\n  this.ctx.beginPath();\n  // 黑色刻點\n  this.xTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let xTrans = node.attr(\"transform\");\n    let xPos = Number(xTrans.split(\",\")[0].split(\"(\")[1]) + this.chartLeft;\n\n    // 跳過 0 的軸點\n    if (index === 0) return;\n\n    // 繪製軸點\n    this.ctx.moveTo(xPos, this.chartTop + this.chartHeight);\n    this.ctx.lineTo(xPos, this.chartTop + this.chartHeight + tickSize);\n  });\n  this.ctx.stroke();\n\n  // 繪製X軸線\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft, this.chartTop + this.chartHeight);\n  this.ctx.lineTo(\n    this.chartLeft + this.chartHeight,\n    this.chartTop + this.chartWidth\n  );\n  this.ctx.stroke();\n\n  // 繪製X軸文字\n  this.ctx.textAlign = \"center\";\n  this.ctx.textBaseline = \"top\";\n  this.xTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let xTrans = node.attr(\"transform\");\n    let xPos = Number(xTrans.split(\",\")[0].split(\"(\")[1]) + this.chartLeft;\n\n    this.ctx.fillText(\n      node.property(\"innerText\"),\n      xPos,\n    \tthis.chartTop + this.chartHeight + tickSize\n      );\n  });\n\n  // 繪製X軸標籤\n  this.data.forEach((el, index) => {\n    // 圓點\n    // 開始繪製\n    this.ctx.save();\n    this.ctx.beginPath();\n    // 繪製點\n    this.ctx.arc(\n      this.chartLeft + index * 100,\n      this.chartTop + this.chartHeight + 50,\n      5,\n      0,\n      2 * Math.PI\n    );\n    // 填色\n    this.ctx.fillStyle = this.color(index);\n    this.ctx.fill();\n    // 結束繪製\n    this.ctx.closePath();\n\n    // 文字\n    this.ctx.textAlign = \"left\";\n    this.ctx.textBaseline = \"middle\";\n  \tthis.ctx.font = \"16px sans-serif\";\n    this.ctx.fillStyle = \"#000\";\n    this.ctx.fillText(\n      el.name,\n      this.chartLeft + index * 100 + 10,\n      this.chartTop + this.chartHeight + 50\n    );\n    this.ctx.restore();\n  });\n\n  /*-------------------------\n    Y軸\n  -------------------------*/\n  this.yTick = this.custom\n    .append(\"g\")\n    .attr(\"class\", \"axis axisY\")\n    .call(this.yAxis)\n    .selectAll(\"g.tick\");\n  // 繪製Y軸點\n  this.ctx.save();\n  this.ctx.beginPath();\n  // 內部灰色刻線\n  this.yTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let yTrans = node.attr(\"transform\");\n    let yPos = Number(yTrans.split(\",\")[1].split(\")\")[0]) + this.chartTop;\n\n    // 跳過 0 的軸點\n    if (index === 0) return;\n\n    // 繪製軸點\n    this.ctx.moveTo(this.chartLeft, yPos);\n    this.ctx.lineTo(this.chartLeft + this.chartWidth, yPos);\n  });\n  this.ctx.strokeStyle = \"#efefef\"; // 線顏色\n  this.ctx.stroke();\n  this.ctx.restore();\n\n  // 最上方的刻點\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft - tickSize, this.chartTop);\n  this.ctx.lineTo(this.chartLeft, this.chartTop);\n  this.ctx.stroke();\n\n  // 繪製Y軸線\n  this.ctx.beginPath();\n  this.ctx.moveTo(this.chartLeft, this.chartTop);\n  this.ctx.lineTo(this.chartLeft, this.chartTop + this.chartHeight);\n  this.ctx.stroke();\n\n  // 繪製Y軸文字\n  this.ctx.textAlign = \"right\";\n  this.ctx.textBaseline = \"middle\";\n  this.yTick.each((el, index, arr) => {\n    let node = d3.select(arr[index]);\n    let yTrans = node.attr(\"transform\");\n    let yPos = Number(yTrans.split(\",\")[1].split(\")\")[0]) + this.chartTop;\n\n    this.ctx.fillText(\n      node.property(\"innerText\"),\n      this.chartLeft - tickSize,\n      yPos\n    );\n  });\n\n  // 繪製Y軸標籤\n  // start by saving the current context (current orientation, origin)\n  this.ctx.save();\n  this.ctx.translate(0, 0);\n  this.ctx.rotate(-Math.PI / 2);\n  this.ctx.textAlign = \"center\";\n  this.ctx.textBaseline = \"top\";\n  this.ctx.font = \"16px sans-serif\";\n  this.ctx.fillText(\"件數\", -(this.chartTop + this.chartHeight / 2), 0);\n  this.ctx.restore(); // now restore the canvas flipping it back to its original orientation\n},\n```\n\n線上 demo [在此](https://annilla.github.io/d3-practice-vue-canvas/dist/)，也可以在[Github](https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/BarVChart.vue)查看完整程式碼，下次我們要講最後一個甜甜圈圖了，之後我們將會有新的主題～敬請期待 ：）\n","slug":"D3/D3-v4-with-Vue-CANVAS-Vertical-Bar-Chart","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74f000mtudhzkqfame5","content":"<p>作者：Anny Chang</p>\n<p>此篇練習使用 <code>CANVAS</code> 來做直條圖。因為和橫條圖的結構很相像，所以這邊就直接進入直條圖動畫的部分。</p>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"直條圖動畫\"><a href=\"#直條圖動畫\" class=\"headerlink\" title=\"直條圖動畫\"></a>直條圖動畫</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">animationLine(elapsed) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> duration = <span class=\"number\">800</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">1</span>, elapsed / duration); <span class=\"comment\">// compute how far through the animation we are (0 to 1)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Clear Canvas</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"keyword\">this</span>.conWidth, <span class=\"keyword\">this</span>.conHeight);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製不須動畫的元素</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.drawStatic();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    直條</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.bars.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  \t<span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  \t<span class=\"keyword\">this</span>.ctx.rect(e.x, e.y + e.height * (<span class=\"number\">1</span> - t), e.width, e.height * t);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.globalAlpha = t;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = e.color;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fill();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    直條文字</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"12px sans-serif\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"bottom\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"string\">\"gray\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.bars.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(e.number, e.x + <span class=\"keyword\">this</span>.barWidth / <span class=\"number\">2</span>, e.y);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// if this animation is over</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (t === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// stop this timer since we are done animating.</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer.stop();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>繪製的前後順序會影響繪製出來的圖層疊加效果，越後面繪製出來的元素會蓋在舊的元素上方。所以不需動畫的元素(ex: X軸、Y軸、標籤…)才特別拉出來寫成一個 function 放在繪製動畫之前。</p>\n</blockquote>\n<hr>\n<h2 id=\"不需動畫的元素\"><a href=\"#不需動畫的元素\" class=\"headerlink\" title=\"不需動畫的元素\"></a>不需動畫的元素</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drawStatic() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> tickSize = <span class=\"number\">6</span>; <span class=\"comment\">// 軸點大小</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    X軸</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.xTick = <span class=\"keyword\">this</span>.custom</span><br><span class=\"line\">    .append(<span class=\"string\">\"g\"</span>)</span><br><span class=\"line\">    .attr(<span class=\"string\">\"class\"</span>, <span class=\"string\">\"axis axisX\"</span>)</span><br><span class=\"line\">    .call(<span class=\"keyword\">this</span>.xAxis)</span><br><span class=\"line\">    .selectAll(<span class=\"string\">\"g.tick\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"comment\">// 黑色刻點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.xTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xPos = <span class=\"built_in\">Number</span>(xTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">0</span>].split(<span class=\"string\">\"(\"</span>)[<span class=\"number\">1</span>]) + <span class=\"keyword\">this</span>.chartLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 跳過 0 的軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 繪製軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.moveTo(xPos, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineTo(xPos, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + tickSize);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartLeft + <span class=\"keyword\">this</span>.chartHeight,</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartWidth</span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸文字</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"top\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.xTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xPos = <span class=\"built_in\">Number</span>(xTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">0</span>].split(<span class=\"string\">\"(\"</span>)[<span class=\"number\">1</span>]) + <span class=\"keyword\">this</span>.chartLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      node.property(<span class=\"string\">\"innerText\"</span>),</span><br><span class=\"line\">      xPos,</span><br><span class=\"line\">    \t<span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + tickSize</span><br><span class=\"line\">      );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸標籤</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\">(<span class=\"params\">el, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 圓點</span></span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">    <span class=\"comment\">// 繪製點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.arc(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft + index * <span class=\"number\">100</span>,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + <span class=\"number\">50</span>,</span><br><span class=\"line\">      <span class=\"number\">5</span>,</span><br><span class=\"line\">      <span class=\"number\">0</span>,</span><br><span class=\"line\">      <span class=\"number\">2</span> * <span class=\"built_in\">Math</span>.PI</span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"comment\">// 填色</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"keyword\">this</span>.color(index);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fill();</span><br><span class=\"line\">    <span class=\"comment\">// 結束繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.closePath();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 文字</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"left\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">  \t<span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"string\">\"#000\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      el.name,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft + index * <span class=\"number\">100</span> + <span class=\"number\">10</span>,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + <span class=\"number\">50</span></span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    Y軸</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick = <span class=\"keyword\">this</span>.custom</span><br><span class=\"line\">    .append(<span class=\"string\">\"g\"</span>)</span><br><span class=\"line\">    .attr(<span class=\"string\">\"class\"</span>, <span class=\"string\">\"axis axisY\"</span>)</span><br><span class=\"line\">    .call(<span class=\"keyword\">this</span>.yAxis)</span><br><span class=\"line\">    .selectAll(<span class=\"string\">\"g.tick\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"comment\">// 內部灰色刻線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yPos = <span class=\"built_in\">Number</span>(yTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">1</span>].split(<span class=\"string\">\")\"</span>)[<span class=\"number\">0</span>]) + <span class=\"keyword\">this</span>.chartTop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 跳過 0 的軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 繪製軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, yPos);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft + <span class=\"keyword\">this</span>.chartWidth, yPos);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.strokeStyle = <span class=\"string\">\"#efefef\"</span>; <span class=\"comment\">// 線顏色</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 最上方的刻點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft - tickSize, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸文字</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"right\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yPos = <span class=\"built_in\">Number</span>(yTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">1</span>].split(<span class=\"string\">\")\"</span>)[<span class=\"number\">0</span>]) + <span class=\"keyword\">this</span>.chartTop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      node.property(<span class=\"string\">\"innerText\"</span>),</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft - tickSize,</span><br><span class=\"line\">      yPos</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸標籤</span></span><br><span class=\"line\">  <span class=\"comment\">// start by saving the current context (current orientation, origin)</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.translate(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.rotate(-<span class=\"built_in\">Math</span>.PI / <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"top\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.fillText(<span class=\"string\">\"件數\"</span>, -(<span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight / <span class=\"number\">2</span>), <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore(); <span class=\"comment\">// now restore the canvas flipping it back to its original orientation</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>線上 demo <a href=\"https://annilla.github.io/d3-practice-vue-canvas/dist/\">在此</a>，也可以在<a href=\"https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/BarVChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a>查看完整程式碼，下次我們要講最後一個甜甜圈圖了，之後我們將會有新的主題～敬請期待 ：）</p>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","excerpt":"<p>作者：Anny Chang</p>\n<p>此篇練習使用 <code>CANVAS</code> 來做直條圖。因為和橫條圖的結構很相像，所以這邊就直接進入直條圖動畫的部分。</p>","more":"<hr>\n<h2 id=\"直條圖動畫\"><a href=\"#直條圖動畫\" class=\"headerlink\" title=\"直條圖動畫\"></a>直條圖動畫</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">animationLine(elapsed) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> duration = <span class=\"number\">800</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">1</span>, elapsed / duration); <span class=\"comment\">// compute how far through the animation we are (0 to 1)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Clear Canvas</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"keyword\">this</span>.conWidth, <span class=\"keyword\">this</span>.conHeight);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製不須動畫的元素</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.drawStatic();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    直條</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.bars.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  \t<span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  \t<span class=\"keyword\">this</span>.ctx.rect(e.x, e.y + e.height * (<span class=\"number\">1</span> - t), e.width, e.height * t);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.globalAlpha = t;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = e.color;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fill();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    直條文字</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"12px sans-serif\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"bottom\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"string\">\"gray\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.bars.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(e.number, e.x + <span class=\"keyword\">this</span>.barWidth / <span class=\"number\">2</span>, e.y);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// if this animation is over</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (t === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// stop this timer since we are done animating.</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer.stop();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>繪製的前後順序會影響繪製出來的圖層疊加效果，越後面繪製出來的元素會蓋在舊的元素上方。所以不需動畫的元素(ex: X軸、Y軸、標籤…)才特別拉出來寫成一個 function 放在繪製動畫之前。</p>\n</blockquote>\n<hr>\n<h2 id=\"不需動畫的元素\"><a href=\"#不需動畫的元素\" class=\"headerlink\" title=\"不需動畫的元素\"></a>不需動畫的元素</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drawStatic() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> tickSize = <span class=\"number\">6</span>; <span class=\"comment\">// 軸點大小</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    X軸</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.xTick = <span class=\"keyword\">this</span>.custom</span><br><span class=\"line\">    .append(<span class=\"string\">\"g\"</span>)</span><br><span class=\"line\">    .attr(<span class=\"string\">\"class\"</span>, <span class=\"string\">\"axis axisX\"</span>)</span><br><span class=\"line\">    .call(<span class=\"keyword\">this</span>.xAxis)</span><br><span class=\"line\">    .selectAll(<span class=\"string\">\"g.tick\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"comment\">// 黑色刻點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.xTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xPos = <span class=\"built_in\">Number</span>(xTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">0</span>].split(<span class=\"string\">\"(\"</span>)[<span class=\"number\">1</span>]) + <span class=\"keyword\">this</span>.chartLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 跳過 0 的軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 繪製軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.moveTo(xPos, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineTo(xPos, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + tickSize);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartLeft + <span class=\"keyword\">this</span>.chartHeight,</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartWidth</span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸文字</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"top\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.xTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xPos = <span class=\"built_in\">Number</span>(xTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">0</span>].split(<span class=\"string\">\"(\"</span>)[<span class=\"number\">1</span>]) + <span class=\"keyword\">this</span>.chartLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      node.property(<span class=\"string\">\"innerText\"</span>),</span><br><span class=\"line\">      xPos,</span><br><span class=\"line\">    \t<span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + tickSize</span><br><span class=\"line\">      );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製X軸標籤</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\">(<span class=\"params\">el, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 圓點</span></span><br><span class=\"line\">    <span class=\"comment\">// 開始繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">    <span class=\"comment\">// 繪製點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.arc(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft + index * <span class=\"number\">100</span>,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + <span class=\"number\">50</span>,</span><br><span class=\"line\">      <span class=\"number\">5</span>,</span><br><span class=\"line\">      <span class=\"number\">0</span>,</span><br><span class=\"line\">      <span class=\"number\">2</span> * <span class=\"built_in\">Math</span>.PI</span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"comment\">// 填色</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"keyword\">this</span>.color(index);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fill();</span><br><span class=\"line\">    <span class=\"comment\">// 結束繪製</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.closePath();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 文字</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"left\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">  \t<span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillStyle = <span class=\"string\">\"#000\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      el.name,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft + index * <span class=\"number\">100</span> + <span class=\"number\">10</span>,</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight + <span class=\"number\">50</span></span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*-------------------------</span></span><br><span class=\"line\"><span class=\"comment\">    Y軸</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------------*/</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick = <span class=\"keyword\">this</span>.custom</span><br><span class=\"line\">    .append(<span class=\"string\">\"g\"</span>)</span><br><span class=\"line\">    .attr(<span class=\"string\">\"class\"</span>, <span class=\"string\">\"axis axisY\"</span>)</span><br><span class=\"line\">    .call(<span class=\"keyword\">this</span>.yAxis)</span><br><span class=\"line\">    .selectAll(<span class=\"string\">\"g.tick\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"comment\">// 內部灰色刻線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yPos = <span class=\"built_in\">Number</span>(yTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">1</span>].split(<span class=\"string\">\")\"</span>)[<span class=\"number\">0</span>]) + <span class=\"keyword\">this</span>.chartTop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 跳過 0 的軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 繪製軸點</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, yPos);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft + <span class=\"keyword\">this</span>.chartWidth, yPos);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.strokeStyle = <span class=\"string\">\"#efefef\"</span>; <span class=\"comment\">// 線顏色</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 最上方的刻點</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft - tickSize, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸線</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.beginPath();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.moveTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.lineTo(<span class=\"keyword\">this</span>.chartLeft, <span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸文字</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"right\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"middle\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.yTick.each(<span class=\"function\">(<span class=\"params\">el, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> node = d3.select(arr[index]);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yTrans = node.attr(<span class=\"string\">\"transform\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yPos = <span class=\"built_in\">Number</span>(yTrans.split(<span class=\"string\">\",\"</span>)[<span class=\"number\">1</span>].split(<span class=\"string\">\")\"</span>)[<span class=\"number\">0</span>]) + <span class=\"keyword\">this</span>.chartTop;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ctx.fillText(</span><br><span class=\"line\">      node.property(<span class=\"string\">\"innerText\"</span>),</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chartLeft - tickSize,</span><br><span class=\"line\">      yPos</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 繪製Y軸標籤</span></span><br><span class=\"line\">  <span class=\"comment\">// start by saving the current context (current orientation, origin)</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.save();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.translate(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.rotate(-<span class=\"built_in\">Math</span>.PI / <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textAlign = <span class=\"string\">\"center\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.textBaseline = <span class=\"string\">\"top\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.font = <span class=\"string\">\"16px sans-serif\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.fillText(<span class=\"string\">\"件數\"</span>, -(<span class=\"keyword\">this</span>.chartTop + <span class=\"keyword\">this</span>.chartHeight / <span class=\"number\">2</span>), <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.ctx.restore(); <span class=\"comment\">// now restore the canvas flipping it back to its original orientation</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>線上 demo <a href=\"https://annilla.github.io/d3-practice-vue-canvas/dist/\">在此</a>，也可以在<a href=\"https://github.com/Annilla/d3-practice-vue-canvas/blob/master/src/components/BarVChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a>查看完整程式碼，下次我們要講最後一個甜甜圈圖了，之後我們將會有新的主題～敬請期待 ：）</p>"},{"title":"D3 v4 with Vue - SVG Vertical Bar Chart","thumbnailImage":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no","coverMeta":"out","date":"2018-04-05T16:00:00.000Z","updated":"2018-04-05T16:00:00.000Z","_content":"\n這次要來練習用 `D3` 搭配 `Vue` 做多組動態的 `SVG` 直條圖囉～\n<!--more-->\n\n前面幾篇有講過的原理這裡就不再次解釋，我們直接從繪製直條開始說起。\n\n***\n## 繪製直條\n\n* HTML\n\n這邊直條圖外面包了兩次 `transition-group` 是因為第一次進來頁面的時候，並不會呈現動畫，所以為了 Fixed 這個 Bug 所以外面又包了一次 `transition-group`。\n\n```html\n<!-- 直條 -->\n<!-- 為了初始有動畫，所以包了兩次 transition-group -->\n<transition-group tag=\"g\" name=\"growBar\">\n  <transition-group tag=\"g\" name=\"growBar\" class=\"bar\" v-for=\"(group, key) in bar\" :key=\"`${key}${group.rect.height}${group.rect.x}`\">\n      <rect\n      v-for=\"(r, k) in group.rect\"\n      :key=\"`${k}${r.height}${r.x}`\"\n      :fill=\"group.color\"\n      :x=\"r.x\"\n      :y=\"r.y\"\n      :width=\"r.width\"\n      :height=\"r.height\"\n      v-on:mouseover=\"showTooltip(key, k, $event)\"\n      v-on:mouseout=\"hiddenTooltip\"\n      ></rect>\n  </transition-group>\n</transition-group>\n```\n\n* CSS\n\n```css\n/* 動畫 */\n.growBar-enter-active { /* 進入動畫：進行中 */\n  /* 動畫時間： 伸縮變形1秒, 透明度1秒 */\n  transition: transform 0.7s, opacity 1s;\n}\n.growBar-enter { /* 進入動畫：開始 */\n  /* 因為直條的起始點 x, y 位於矩形的左上角，\n  若用 js 的方式是要同時變動 y 座標和高度，\n  但因為我們使用 css transition 的方式，\n  所以只能微調縮放和位移的比例，做到近乎相似的效果。\n  垂直縮放從0.55開始，垂直位移從-12%開始 */\n  transform: scaleY(0.55) translateY(-12%);\n  opacity: 0; /* 淡入從透明度0開始 */\n}\n......\n/* 統計圖 */\n.chartContain {\n  ....\n  .chart {\n    ....\n    .chartWrap {\n      ....\n      /* 因為起始點預設是左上角，所以要改成縮放中心為中間底部開始。\n         包了兩次 transition-group 所以群組.bar也要設定縮放中心。 */\n      .bar {\n        transform-origin: 50% 100%;\n        rect {\n          transform-origin: 50% 100%;\n        }\n      }\n    }\n  }\n}\n```\n\n* JS\n\n直條寬度(barWidth)和個別 x 座標這兩個比較難懂的地方，在後面會用圖解的方式說明。\n\n```js\n// 顏色函數\ncolor() {\n  return d3.scaleOrdinal(d3.schemeCategory20c);\n},\nbarWidth() {\n  /* --------------------\n  1. 剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)\n      this.chart.width / (this.valueLength + 1) * this.valueLength\n  2. 扣掉長條圖中間的間隔\n      - (this.chart.gap * this.data.length)\n  3. 剩下的寬度分給所有長條\n      / (this.valueLength * this.data.length)\n  -------------------- */\n  return (\n    (this.chart.width / (this.valueLength + 1) * this.valueLength -\n      this.chart.gap * this.data.length) /\n    (this.valueLength * this.data.length)\n  );\n},\n// 直條座標、顏色\nbar() {\n  let rectArray = [];\n\n  // 產生直條的陣列\n  if (this.valueLength) {\n    this.data.forEach((group, index) => {\n      let rectGroup = [];\n\n      group.value.forEach((e, i) => {\n        rectGroup.push({\n          /* --------------------\n          1. 把群組直條往左推整體的一半\n              - this.barWidth * this.data.length / 2\n          2. 依個別順序向右平移\n              + this.barWidth * index\n          -------------------- */\n          x:\n            this.xScale(i + 1) -\n            this.barWidth * this.data.length / 2 +\n            this.barWidth * index, // 設定x座標\n          y: this.yScale(e.number), // 設定y座標\n          width: this.barWidth, // 設定寬度\n          height: this.chart.height - this.yScale(e.number) // 設定高度\n        });\n      });\n\n      rectArray.push({\n        rect: rectGroup,\n        color: this.color(index) // 設定顏色\n      });\n    });\n  }\n\n  return rectArray;\n},\n```\n\n***\n## 直條寬度(barWidth)\n\n![剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)](https://lh3.googleusercontent.com/jZblvHrlEVkWivyJRdqbnChcpzjIGTO0W51dGDMQTSJqtL6Fz3OgGclg79-eXpB9suVivseGe0NCGUcl3kA1n14BIBuUeS0KDzDq8LTTXVMBNiYtjm-KiY8-BnvmkaSxeF-qCUZIKL6atH_5Kh8utztXHtG-hhbq49oXesaVbGiHoc1bpwpA_YT3hcox7eqPiTt-oOTWmC_Uu3VSN8tZ1NKi0k6xpFqlJTrLxLc4PZ3SyDxHSDtscDZPMwAip5Ee7Dz3FnvETQxusKCu_7mnsosIVmY48P55F00UepRxv3gX_wGJ03dH7faNCLFeXShHVH54-Aw4iY8nLEX_p8qjPuhVgII9FO9BCR3Zrc7Y4AKRh6xnTPfNzGana3cm_Hfc01Imz_Dg_4dDnwimmzMOaDsF9wiMIhDlVc9O44RRu8L1T665QvIyANpYCnm8ujL6GAzZ39j6hXh1u-WKglTUpUBlgpO5GeOTSiG9XgKrA3pVL80fIq9kvgD61TZPmhSXId4Aj-m7tPkVMGJeDp-K_ukaoZW15RN-MIkQsRIxSurqhoGWkQ20lsKdKh4FvyAMbbG_Y1u68sPbdYvFZ5ka41-a5f7VtAu_alWZFw3XSLIBgXzoXfkHQtedzByyafq57wGhMLBb8qA__hutfVu4Omcvf3Zfbu9Q=w604-h694-no \"剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)\")\n\n![扣掉長條圖中間的間隔，剩下的寬度分給所有長條](https://lh3.googleusercontent.com/TTY0912pddpHrNUxQY04UZm2rUYh9fucfjoaoxX33yjbSRf__xOZq-rIgZFjvJbR8Q4cIKD9kLZGyR10lt8uBG0_gUzDKmWF1Vmzy5ijYWybjCAkeo27OkiYiXDSyPdFJM89WcdajieDv0KyqaFj7swZ8mVpQNYSX76kvDN565oR6iIejII7hbHC4Oi69k6x897AdXx_uPWHrWmbshttNWoWtKkEoxHZQO37AR9HouaTD1vDGyh7EvfdP0zKL1lQOiLNqbmk2-CTdw3JrKysn84gVAa3ulKKVtg269fmV-vK3ITRyvh0Bp5kpgv_HfnUMenVp_HYdh0ldGimVi9FhmXJqjIY4emmKOH55Up5oaMMW2Z91C_dJA8mbex3Cev6AZXjU8aWsXmpGQIalHzjAzBXIUese1T3W6zMYrJeXNuxX_26ZfF_hKIMtuKMsHDtKRRsHwmgi1ZnBohh8vBArUJWpL210_i2feIToAWpm0doTzCNEiYMx6Lp75ySeejMjsunMzBPF_gPNKEDQPwwHovKxzgJbfQ22vvov4DNl-DVkJgqSPK-7tGPAcbttInT2VjU6BmHkV4EHsSZPQHRCQynilcLdrfKMGKyVVCx2jpChOrLZlSebOwESJ1q6mKV7CK4-EMbjm3whgVhuN1KjMwyyNEYC9pm=w604-h694-no \"扣掉長條圖中間的間隔，剩下的寬度分給所有長條\")\n\n1. 剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)\n\n2. 扣掉長條圖中間的間隔\n\n3. 剩下的寬度分給所有長條\n\n***\n## 直條x座標\n\n![扣掉長條圖中間的間隔，剩下的寬度分給所有長條](https://lh3.googleusercontent.com/oPWMvbdY76bF-4K5gZKM6Lmees8dv6dDwCEz_hFvqcCK0vuGfcB2I_PafS41ajU3ehgU43swWfptKkqBFP1ap-WxQ8VeY0bWhypPglFygisUB8rtqBEJ6BhfPUgHw-dwQE23Z9QEMPH1geS5TsR4RrMHVmqQJBuKYhx0CPuvfOyuDoWoq2ynppBF7f0UMkaX6Qbko1nbw-T0RPHs9UgwxIUcvw4072hgGGVoXfwEFjXMFF3hHnepRt6Ap6aZh1pFPD6k9ZCOJKFvooaR0HiFE71nKfot2xwk3Q-aVEKjVAuwfDIu8EgPziuPDmZKkYnP1bFhXXvJIRw2pQCYFDnZSdL4eOwZ_JgOhRVc9aZwnrPkCN_CJDn0Ps4Uw6h5cvdlSITjjTyFPuQ_7oBrXAOnO0lVHzxqhb0SFrUbIEj_1AIdp5IkpoyuM3rKxiOlzBcS9I1DW9efIyDEUqF0KwBuMxwjoJaSyoxryGW0HWkFNaCCshb9PJZHWEvxI_63H-l7X1Uxn3Kv3StFS2VgzuvU0o4MfdYYEFH1STCK_6vZMv_xbCtXyWZM1Ag-ci2LqATgfQ9GyGD3Se1oxjmDrRBP8MOdfH_guJLmvCGEQYm7FK-YZZX1YsiGR_p1zM4X7KtS77Zd6hpXVJa31bzQISz7kUStKR01lCZG=w604-h694-no \"扣掉長條圖中間的間隔，剩下的寬度分給所有長條\")\n\n1. 把群組直條往左推整體的一半\n\n2. 依個別順序向右平移\n\n全部畫好的樣子如下圖，可以去 [Github](https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/BarVChart.vue) 查看完整程式碼喔！也可以在[這裡](https://annilla.github.io/d3-practice-vue-svg/dist/)查看直條圖的 Demo，我們下回見～\n\n![直條圖完成](https://lh3.googleusercontent.com/B6TzzgsZw8pI0JAbb7_DHD3on1AKCSLQPs3N0uMIfiJQRNY1hvZ803AcoXCcFrYEfxHzDxCOau_DUmhILVyNumh_ZRWDd3332BsI787fiD3oO8UCBOI7qzwUjk0B_42izUfJJAKseu6mzDgkBePYY1e2_RiMysSHBc_hQ_rjupXuZyYeBjRY7HOd_VuyWMbjaYMzgDVbTy5Szs1cOC4obFVrc-E_-NynRtkTRQXrfoPF_sS6259qxcDMs6nvXeoFoVsIhwo56uCAw2K07ciS-Md-4m7WwV-kx-YMJMFAilrZ_aJXUPRwYdTA_8u9AmCynhASNzOpSUmfeiDPvYFsjdWD9FeR7UmRjRaRP0KrROeQRmLPx0B4hbfuy467v83Zkvp7ghEwyymFOTyB83kvXWzjLPij4k5xziN5dPKX7cQnuAOvpnumew3Dx7wrXDST9wx6qPOrisLUoeQjjEVnwl2L012UT0ow7fh21HBjSCglX33mipaAD5QJZz_iYf6Yff4HlRXvPSr3a_kkRAw_BLxm0J-5RI8Q-T9js8vIXn3At2u6Nk7MwKhede7Mkcq3W4MjCu7ZEZdMuMdBMskdNl4takHf5FFgUjPhid1EpXkASa9RWVpYicmaeuf4QvcBu3IfIl4b3zGMbB_j8M4_QwFBA4cz1gw_=w917-h1024-no \"直條圖\")","source":"_posts/D3/D3-v4-with-Vue-SVG-Vertical-Bar-Chart.md","raw":"---\ntitle: D3 v4 with Vue - SVG Vertical Bar Chart\ncategories:\n  - D3\nthumbnailImage: https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no\ncoverMeta: out\ntags: [D3, Vue, SVG]\ndate: 2018/04/06\nupdated: 2018/04/06\n---\n\n這次要來練習用 `D3` 搭配 `Vue` 做多組動態的 `SVG` 直條圖囉～\n<!--more-->\n\n前面幾篇有講過的原理這裡就不再次解釋，我們直接從繪製直條開始說起。\n\n***\n## 繪製直條\n\n* HTML\n\n這邊直條圖外面包了兩次 `transition-group` 是因為第一次進來頁面的時候，並不會呈現動畫，所以為了 Fixed 這個 Bug 所以外面又包了一次 `transition-group`。\n\n```html\n<!-- 直條 -->\n<!-- 為了初始有動畫，所以包了兩次 transition-group -->\n<transition-group tag=\"g\" name=\"growBar\">\n  <transition-group tag=\"g\" name=\"growBar\" class=\"bar\" v-for=\"(group, key) in bar\" :key=\"`${key}${group.rect.height}${group.rect.x}`\">\n      <rect\n      v-for=\"(r, k) in group.rect\"\n      :key=\"`${k}${r.height}${r.x}`\"\n      :fill=\"group.color\"\n      :x=\"r.x\"\n      :y=\"r.y\"\n      :width=\"r.width\"\n      :height=\"r.height\"\n      v-on:mouseover=\"showTooltip(key, k, $event)\"\n      v-on:mouseout=\"hiddenTooltip\"\n      ></rect>\n  </transition-group>\n</transition-group>\n```\n\n* CSS\n\n```css\n/* 動畫 */\n.growBar-enter-active { /* 進入動畫：進行中 */\n  /* 動畫時間： 伸縮變形1秒, 透明度1秒 */\n  transition: transform 0.7s, opacity 1s;\n}\n.growBar-enter { /* 進入動畫：開始 */\n  /* 因為直條的起始點 x, y 位於矩形的左上角，\n  若用 js 的方式是要同時變動 y 座標和高度，\n  但因為我們使用 css transition 的方式，\n  所以只能微調縮放和位移的比例，做到近乎相似的效果。\n  垂直縮放從0.55開始，垂直位移從-12%開始 */\n  transform: scaleY(0.55) translateY(-12%);\n  opacity: 0; /* 淡入從透明度0開始 */\n}\n......\n/* 統計圖 */\n.chartContain {\n  ....\n  .chart {\n    ....\n    .chartWrap {\n      ....\n      /* 因為起始點預設是左上角，所以要改成縮放中心為中間底部開始。\n         包了兩次 transition-group 所以群組.bar也要設定縮放中心。 */\n      .bar {\n        transform-origin: 50% 100%;\n        rect {\n          transform-origin: 50% 100%;\n        }\n      }\n    }\n  }\n}\n```\n\n* JS\n\n直條寬度(barWidth)和個別 x 座標這兩個比較難懂的地方，在後面會用圖解的方式說明。\n\n```js\n// 顏色函數\ncolor() {\n  return d3.scaleOrdinal(d3.schemeCategory20c);\n},\nbarWidth() {\n  /* --------------------\n  1. 剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)\n      this.chart.width / (this.valueLength + 1) * this.valueLength\n  2. 扣掉長條圖中間的間隔\n      - (this.chart.gap * this.data.length)\n  3. 剩下的寬度分給所有長條\n      / (this.valueLength * this.data.length)\n  -------------------- */\n  return (\n    (this.chart.width / (this.valueLength + 1) * this.valueLength -\n      this.chart.gap * this.data.length) /\n    (this.valueLength * this.data.length)\n  );\n},\n// 直條座標、顏色\nbar() {\n  let rectArray = [];\n\n  // 產生直條的陣列\n  if (this.valueLength) {\n    this.data.forEach((group, index) => {\n      let rectGroup = [];\n\n      group.value.forEach((e, i) => {\n        rectGroup.push({\n          /* --------------------\n          1. 把群組直條往左推整體的一半\n              - this.barWidth * this.data.length / 2\n          2. 依個別順序向右平移\n              + this.barWidth * index\n          -------------------- */\n          x:\n            this.xScale(i + 1) -\n            this.barWidth * this.data.length / 2 +\n            this.barWidth * index, // 設定x座標\n          y: this.yScale(e.number), // 設定y座標\n          width: this.barWidth, // 設定寬度\n          height: this.chart.height - this.yScale(e.number) // 設定高度\n        });\n      });\n\n      rectArray.push({\n        rect: rectGroup,\n        color: this.color(index) // 設定顏色\n      });\n    });\n  }\n\n  return rectArray;\n},\n```\n\n***\n## 直條寬度(barWidth)\n\n![剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)](https://lh3.googleusercontent.com/jZblvHrlEVkWivyJRdqbnChcpzjIGTO0W51dGDMQTSJqtL6Fz3OgGclg79-eXpB9suVivseGe0NCGUcl3kA1n14BIBuUeS0KDzDq8LTTXVMBNiYtjm-KiY8-BnvmkaSxeF-qCUZIKL6atH_5Kh8utztXHtG-hhbq49oXesaVbGiHoc1bpwpA_YT3hcox7eqPiTt-oOTWmC_Uu3VSN8tZ1NKi0k6xpFqlJTrLxLc4PZ3SyDxHSDtscDZPMwAip5Ee7Dz3FnvETQxusKCu_7mnsosIVmY48P55F00UepRxv3gX_wGJ03dH7faNCLFeXShHVH54-Aw4iY8nLEX_p8qjPuhVgII9FO9BCR3Zrc7Y4AKRh6xnTPfNzGana3cm_Hfc01Imz_Dg_4dDnwimmzMOaDsF9wiMIhDlVc9O44RRu8L1T665QvIyANpYCnm8ujL6GAzZ39j6hXh1u-WKglTUpUBlgpO5GeOTSiG9XgKrA3pVL80fIq9kvgD61TZPmhSXId4Aj-m7tPkVMGJeDp-K_ukaoZW15RN-MIkQsRIxSurqhoGWkQ20lsKdKh4FvyAMbbG_Y1u68sPbdYvFZ5ka41-a5f7VtAu_alWZFw3XSLIBgXzoXfkHQtedzByyafq57wGhMLBb8qA__hutfVu4Omcvf3Zfbu9Q=w604-h694-no \"剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)\")\n\n![扣掉長條圖中間的間隔，剩下的寬度分給所有長條](https://lh3.googleusercontent.com/TTY0912pddpHrNUxQY04UZm2rUYh9fucfjoaoxX33yjbSRf__xOZq-rIgZFjvJbR8Q4cIKD9kLZGyR10lt8uBG0_gUzDKmWF1Vmzy5ijYWybjCAkeo27OkiYiXDSyPdFJM89WcdajieDv0KyqaFj7swZ8mVpQNYSX76kvDN565oR6iIejII7hbHC4Oi69k6x897AdXx_uPWHrWmbshttNWoWtKkEoxHZQO37AR9HouaTD1vDGyh7EvfdP0zKL1lQOiLNqbmk2-CTdw3JrKysn84gVAa3ulKKVtg269fmV-vK3ITRyvh0Bp5kpgv_HfnUMenVp_HYdh0ldGimVi9FhmXJqjIY4emmKOH55Up5oaMMW2Z91C_dJA8mbex3Cev6AZXjU8aWsXmpGQIalHzjAzBXIUese1T3W6zMYrJeXNuxX_26ZfF_hKIMtuKMsHDtKRRsHwmgi1ZnBohh8vBArUJWpL210_i2feIToAWpm0doTzCNEiYMx6Lp75ySeejMjsunMzBPF_gPNKEDQPwwHovKxzgJbfQ22vvov4DNl-DVkJgqSPK-7tGPAcbttInT2VjU6BmHkV4EHsSZPQHRCQynilcLdrfKMGKyVVCx2jpChOrLZlSebOwESJ1q6mKV7CK4-EMbjm3whgVhuN1KjMwyyNEYC9pm=w604-h694-no \"扣掉長條圖中間的間隔，剩下的寬度分給所有長條\")\n\n1. 剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)\n\n2. 扣掉長條圖中間的間隔\n\n3. 剩下的寬度分給所有長條\n\n***\n## 直條x座標\n\n![扣掉長條圖中間的間隔，剩下的寬度分給所有長條](https://lh3.googleusercontent.com/oPWMvbdY76bF-4K5gZKM6Lmees8dv6dDwCEz_hFvqcCK0vuGfcB2I_PafS41ajU3ehgU43swWfptKkqBFP1ap-WxQ8VeY0bWhypPglFygisUB8rtqBEJ6BhfPUgHw-dwQE23Z9QEMPH1geS5TsR4RrMHVmqQJBuKYhx0CPuvfOyuDoWoq2ynppBF7f0UMkaX6Qbko1nbw-T0RPHs9UgwxIUcvw4072hgGGVoXfwEFjXMFF3hHnepRt6Ap6aZh1pFPD6k9ZCOJKFvooaR0HiFE71nKfot2xwk3Q-aVEKjVAuwfDIu8EgPziuPDmZKkYnP1bFhXXvJIRw2pQCYFDnZSdL4eOwZ_JgOhRVc9aZwnrPkCN_CJDn0Ps4Uw6h5cvdlSITjjTyFPuQ_7oBrXAOnO0lVHzxqhb0SFrUbIEj_1AIdp5IkpoyuM3rKxiOlzBcS9I1DW9efIyDEUqF0KwBuMxwjoJaSyoxryGW0HWkFNaCCshb9PJZHWEvxI_63H-l7X1Uxn3Kv3StFS2VgzuvU0o4MfdYYEFH1STCK_6vZMv_xbCtXyWZM1Ag-ci2LqATgfQ9GyGD3Se1oxjmDrRBP8MOdfH_guJLmvCGEQYm7FK-YZZX1YsiGR_p1zM4X7KtS77Zd6hpXVJa31bzQISz7kUStKR01lCZG=w604-h694-no \"扣掉長條圖中間的間隔，剩下的寬度分給所有長條\")\n\n1. 把群組直條往左推整體的一半\n\n2. 依個別順序向右平移\n\n全部畫好的樣子如下圖，可以去 [Github](https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/BarVChart.vue) 查看完整程式碼喔！也可以在[這裡](https://annilla.github.io/d3-practice-vue-svg/dist/)查看直條圖的 Demo，我們下回見～\n\n![直條圖完成](https://lh3.googleusercontent.com/B6TzzgsZw8pI0JAbb7_DHD3on1AKCSLQPs3N0uMIfiJQRNY1hvZ803AcoXCcFrYEfxHzDxCOau_DUmhILVyNumh_ZRWDd3332BsI787fiD3oO8UCBOI7qzwUjk0B_42izUfJJAKseu6mzDgkBePYY1e2_RiMysSHBc_hQ_rjupXuZyYeBjRY7HOd_VuyWMbjaYMzgDVbTy5Szs1cOC4obFVrc-E_-NynRtkTRQXrfoPF_sS6259qxcDMs6nvXeoFoVsIhwo56uCAw2K07ciS-Md-4m7WwV-kx-YMJMFAilrZ_aJXUPRwYdTA_8u9AmCynhASNzOpSUmfeiDPvYFsjdWD9FeR7UmRjRaRP0KrROeQRmLPx0B4hbfuy467v83Zkvp7ghEwyymFOTyB83kvXWzjLPij4k5xziN5dPKX7cQnuAOvpnumew3Dx7wrXDST9wx6qPOrisLUoeQjjEVnwl2L012UT0ow7fh21HBjSCglX33mipaAD5QJZz_iYf6Yff4HlRXvPSr3a_kkRAw_BLxm0J-5RI8Q-T9js8vIXn3At2u6Nk7MwKhede7Mkcq3W4MjCu7ZEZdMuMdBMskdNl4takHf5FFgUjPhid1EpXkASa9RWVpYicmaeuf4QvcBu3IfIl4b3zGMbB_j8M4_QwFBA4cz1gw_=w917-h1024-no \"直條圖\")","slug":"D3/D3-v4-with-Vue-SVG-Vertical-Bar-Chart","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74g000ntudhm7er8pgh","content":"<p>這次要來練習用 <code>D3</code> 搭配 <code>Vue</code> 做多組動態的 <code>SVG</code> 直條圖囉～<br><a id=\"more\"></a></p>\n<p>前面幾篇有講過的原理這裡就不再次解釋，我們直接從繪製直條開始說起。</p>\n<hr>\n<h2 id=\"繪製直條\"><a href=\"#繪製直條\" class=\"headerlink\" title=\"繪製直條\"></a>繪製直條</h2><ul>\n<li>HTML</li>\n</ul>\n<p>這邊直條圖外面包了兩次 <code>transition-group</code> 是因為第一次進來頁面的時候，並不會呈現動畫，所以為了 Fixed 這個 Bug 所以外面又包了一次 <code>transition-group</code>。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 直條 --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 為了初始有動畫，所以包了兩次 transition-group --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">transition-group</span> <span class=\"attr\">tag</span>=<span class=\"string\">\"g\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"growBar\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">transition-group</span> <span class=\"attr\">tag</span>=<span class=\"string\">\"g\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"growBar\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"bar\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(group, key) in bar\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;key&#125;$&#123;group.rect.height&#125;$&#123;group.rect.x&#125;`\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">rect</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">v-for</span>=<span class=\"string\">\"(r, k) in group.rect\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;k&#125;$&#123;r.height&#125;$&#123;r.x&#125;`\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:fill</span>=<span class=\"string\">\"group.color\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:x</span>=<span class=\"string\">\"r.x\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:y</span>=<span class=\"string\">\"r.y\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:width</span>=<span class=\"string\">\"r.width\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:height</span>=<span class=\"string\">\"r.height\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">v-on:mouseover</span>=<span class=\"string\">\"showTooltip(key, k, $event)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">v-on:mouseout</span>=<span class=\"string\">\"hiddenTooltip\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">rect</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">transition-group</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 動畫 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.growBar-enter-active</span> &#123; <span class=\"comment\">/* 進入動畫：進行中 */</span></span><br><span class=\"line\">  <span class=\"comment\">/* 動畫時間： 伸縮變形1秒, 透明度1秒 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: transform <span class=\"number\">0.7s</span>, opacity <span class=\"number\">1s</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.growBar-enter</span> &#123; <span class=\"comment\">/* 進入動畫：開始 */</span></span><br><span class=\"line\">  <span class=\"comment\">/* 因為直條的起始點 x, y 位於矩形的左上角，</span></span><br><span class=\"line\"><span class=\"comment\">  若用 js 的方式是要同時變動 y 座標和高度，</span></span><br><span class=\"line\"><span class=\"comment\">  但因為我們使用 css transition 的方式，</span></span><br><span class=\"line\"><span class=\"comment\">  所以只能微調縮放和位移的比例，做到近乎相似的效果。</span></span><br><span class=\"line\"><span class=\"comment\">  垂直縮放從0.55開始，垂直位移從-12%開始 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">scaleY</span>(0.55) <span class=\"built_in\">translateY</span>(-12%);</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>; <span class=\"comment\">/* 淡入從透明度0開始 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">......</span><br><span class=\"line\"><span class=\"comment\">/* 統計圖 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.chartContain</span> &#123;</span><br><span class=\"line\">  ....</span><br><span class=\"line\">  <span class=\"selector-class\">.chart</span> &#123;</span><br><span class=\"line\">    ....</span><br><span class=\"line\">    <span class=\"selector-class\">.chartWrap</span> &#123;</span><br><span class=\"line\">      ....</span><br><span class=\"line\">      <span class=\"comment\">/* 因為起始點預設是左上角，所以要改成縮放中心為中間底部開始。</span></span><br><span class=\"line\"><span class=\"comment\">         包了兩次 transition-group 所以群組.bar也要設定縮放中心。 */</span></span><br><span class=\"line\">      <span class=\"selector-class\">.bar</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">transform-origin</span>: <span class=\"number\">50%</span> <span class=\"number\">100%</span>;</span><br><span class=\"line\">        rect &#123;</span><br><span class=\"line\">          <span class=\"selector-tag\">transform-origin</span>: 50% 100%;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<p>直條寬度(barWidth)和個別 x 座標這兩個比較難懂的地方，在後面會用圖解的方式說明。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 顏色函數</span></span><br><span class=\"line\">color() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3.scaleOrdinal(d3.schemeCategory20c);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">barWidth() &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* --------------------</span></span><br><span class=\"line\"><span class=\"comment\">  1. 剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)</span></span><br><span class=\"line\"><span class=\"comment\">      this.chart.width / (this.valueLength + 1) * this.valueLength</span></span><br><span class=\"line\"><span class=\"comment\">  2. 扣掉長條圖中間的間隔</span></span><br><span class=\"line\"><span class=\"comment\">      - (this.chart.gap * this.data.length)</span></span><br><span class=\"line\"><span class=\"comment\">  3. 剩下的寬度分給所有長條</span></span><br><span class=\"line\"><span class=\"comment\">      / (this.valueLength * this.data.length)</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------- */</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    (<span class=\"keyword\">this</span>.chart.width / (<span class=\"keyword\">this</span>.valueLength + <span class=\"number\">1</span>) * <span class=\"keyword\">this</span>.valueLength -</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chart.gap * <span class=\"keyword\">this</span>.data.length) /</span><br><span class=\"line\">    (<span class=\"keyword\">this</span>.valueLength * <span class=\"keyword\">this</span>.data.length)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// 直條座標、顏色</span></span><br><span class=\"line\">bar() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> rectArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 產生直條的陣列</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.valueLength) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\">(<span class=\"params\">group, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> rectGroup = [];</span><br><span class=\"line\"></span><br><span class=\"line\">      group.value.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        rectGroup.push(&#123;</span><br><span class=\"line\">          <span class=\"comment\">/* --------------------</span></span><br><span class=\"line\"><span class=\"comment\">          1. 把群組直條往左推整體的一半</span></span><br><span class=\"line\"><span class=\"comment\">              - this.barWidth * this.data.length / 2</span></span><br><span class=\"line\"><span class=\"comment\">          2. 依個別順序向右平移</span></span><br><span class=\"line\"><span class=\"comment\">              + this.barWidth * index</span></span><br><span class=\"line\"><span class=\"comment\">          -------------------- */</span></span><br><span class=\"line\">          x:</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.xScale(i + <span class=\"number\">1</span>) -</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.barWidth * <span class=\"keyword\">this</span>.data.length / <span class=\"number\">2</span> +</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.barWidth * index, <span class=\"comment\">// 設定x座標</span></span><br><span class=\"line\">          y: <span class=\"keyword\">this</span>.yScale(e.number), <span class=\"comment\">// 設定y座標</span></span><br><span class=\"line\">          width: <span class=\"keyword\">this</span>.barWidth, <span class=\"comment\">// 設定寬度</span></span><br><span class=\"line\">          height: <span class=\"keyword\">this</span>.chart.height - <span class=\"keyword\">this</span>.yScale(e.number) <span class=\"comment\">// 設定高度</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">      rectArray.push(&#123;</span><br><span class=\"line\">        rect: rectGroup,</span><br><span class=\"line\">        color: <span class=\"keyword\">this</span>.color(index) <span class=\"comment\">// 設定顏色</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> rectArray;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"直條寬度-barWidth\"><a href=\"#直條寬度-barWidth\" class=\"headerlink\" title=\"直條寬度(barWidth)\"></a>直條寬度(barWidth)</h2><p><img src=\"https://lh3.googleusercontent.com/jZblvHrlEVkWivyJRdqbnChcpzjIGTO0W51dGDMQTSJqtL6Fz3OgGclg79-eXpB9suVivseGe0NCGUcl3kA1n14BIBuUeS0KDzDq8LTTXVMBNiYtjm-KiY8-BnvmkaSxeF-qCUZIKL6atH_5Kh8utztXHtG-hhbq49oXesaVbGiHoc1bpwpA_YT3hcox7eqPiTt-oOTWmC_Uu3VSN8tZ1NKi0k6xpFqlJTrLxLc4PZ3SyDxHSDtscDZPMwAip5Ee7Dz3FnvETQxusKCu_7mnsosIVmY48P55F00UepRxv3gX_wGJ03dH7faNCLFeXShHVH54-Aw4iY8nLEX_p8qjPuhVgII9FO9BCR3Zrc7Y4AKRh6xnTPfNzGana3cm_Hfc01Imz_Dg_4dDnwimmzMOaDsF9wiMIhDlVc9O44RRu8L1T665QvIyANpYCnm8ujL6GAzZ39j6hXh1u-WKglTUpUBlgpO5GeOTSiG9XgKrA3pVL80fIq9kvgD61TZPmhSXId4Aj-m7tPkVMGJeDp-K_ukaoZW15RN-MIkQsRIxSurqhoGWkQ20lsKdKh4FvyAMbbG_Y1u68sPbdYvFZ5ka41-a5f7VtAu_alWZFw3XSLIBgXzoXfkHQtedzByyafq57wGhMLBb8qA__hutfVu4Omcvf3Zfbu9Q=w604-h694-no\" alt=\"剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)\" title=\"剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/TTY0912pddpHrNUxQY04UZm2rUYh9fucfjoaoxX33yjbSRf__xOZq-rIgZFjvJbR8Q4cIKD9kLZGyR10lt8uBG0_gUzDKmWF1Vmzy5ijYWybjCAkeo27OkiYiXDSyPdFJM89WcdajieDv0KyqaFj7swZ8mVpQNYSX76kvDN565oR6iIejII7hbHC4Oi69k6x897AdXx_uPWHrWmbshttNWoWtKkEoxHZQO37AR9HouaTD1vDGyh7EvfdP0zKL1lQOiLNqbmk2-CTdw3JrKysn84gVAa3ulKKVtg269fmV-vK3ITRyvh0Bp5kpgv_HfnUMenVp_HYdh0ldGimVi9FhmXJqjIY4emmKOH55Up5oaMMW2Z91C_dJA8mbex3Cev6AZXjU8aWsXmpGQIalHzjAzBXIUese1T3W6zMYrJeXNuxX_26ZfF_hKIMtuKMsHDtKRRsHwmgi1ZnBohh8vBArUJWpL210_i2feIToAWpm0doTzCNEiYMx6Lp75ySeejMjsunMzBPF_gPNKEDQPwwHovKxzgJbfQ22vvov4DNl-DVkJgqSPK-7tGPAcbttInT2VjU6BmHkV4EHsSZPQHRCQynilcLdrfKMGKyVVCx2jpChOrLZlSebOwESJ1q6mKV7CK4-EMbjm3whgVhuN1KjMwyyNEYC9pm=w604-h694-no\" alt=\"扣掉長條圖中間的間隔，剩下的寬度分給所有長條\" title=\"扣掉長條圖中間的間隔，剩下的寬度分給所有長條\"></p>\n<ol>\n<li><p>剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)</p>\n</li>\n<li><p>扣掉長條圖中間的間隔</p>\n</li>\n<li><p>剩下的寬度分給所有長條</p>\n</li>\n</ol>\n<hr>\n<h2 id=\"直條x座標\"><a href=\"#直條x座標\" class=\"headerlink\" title=\"直條x座標\"></a>直條x座標</h2><p><img src=\"https://lh3.googleusercontent.com/oPWMvbdY76bF-4K5gZKM6Lmees8dv6dDwCEz_hFvqcCK0vuGfcB2I_PafS41ajU3ehgU43swWfptKkqBFP1ap-WxQ8VeY0bWhypPglFygisUB8rtqBEJ6BhfPUgHw-dwQE23Z9QEMPH1geS5TsR4RrMHVmqQJBuKYhx0CPuvfOyuDoWoq2ynppBF7f0UMkaX6Qbko1nbw-T0RPHs9UgwxIUcvw4072hgGGVoXfwEFjXMFF3hHnepRt6Ap6aZh1pFPD6k9ZCOJKFvooaR0HiFE71nKfot2xwk3Q-aVEKjVAuwfDIu8EgPziuPDmZKkYnP1bFhXXvJIRw2pQCYFDnZSdL4eOwZ_JgOhRVc9aZwnrPkCN_CJDn0Ps4Uw6h5cvdlSITjjTyFPuQ_7oBrXAOnO0lVHzxqhb0SFrUbIEj_1AIdp5IkpoyuM3rKxiOlzBcS9I1DW9efIyDEUqF0KwBuMxwjoJaSyoxryGW0HWkFNaCCshb9PJZHWEvxI_63H-l7X1Uxn3Kv3StFS2VgzuvU0o4MfdYYEFH1STCK_6vZMv_xbCtXyWZM1Ag-ci2LqATgfQ9GyGD3Se1oxjmDrRBP8MOdfH_guJLmvCGEQYm7FK-YZZX1YsiGR_p1zM4X7KtS77Zd6hpXVJa31bzQISz7kUStKR01lCZG=w604-h694-no\" alt=\"扣掉長條圖中間的間隔，剩下的寬度分給所有長條\" title=\"扣掉長條圖中間的間隔，剩下的寬度分給所有長條\"></p>\n<ol>\n<li><p>把群組直條往左推整體的一半</p>\n</li>\n<li><p>依個別順序向右平移</p>\n</li>\n</ol>\n<p>全部畫好的樣子如下圖，可以去 <a href=\"https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/BarVChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a> 查看完整程式碼喔！也可以在<a href=\"https://annilla.github.io/d3-practice-vue-svg/dist/\">這裡</a>查看直條圖的 Demo，我們下回見～</p>\n<p><img src=\"https://lh3.googleusercontent.com/B6TzzgsZw8pI0JAbb7_DHD3on1AKCSLQPs3N0uMIfiJQRNY1hvZ803AcoXCcFrYEfxHzDxCOau_DUmhILVyNumh_ZRWDd3332BsI787fiD3oO8UCBOI7qzwUjk0B_42izUfJJAKseu6mzDgkBePYY1e2_RiMysSHBc_hQ_rjupXuZyYeBjRY7HOd_VuyWMbjaYMzgDVbTy5Szs1cOC4obFVrc-E_-NynRtkTRQXrfoPF_sS6259qxcDMs6nvXeoFoVsIhwo56uCAw2K07ciS-Md-4m7WwV-kx-YMJMFAilrZ_aJXUPRwYdTA_8u9AmCynhASNzOpSUmfeiDPvYFsjdWD9FeR7UmRjRaRP0KrROeQRmLPx0B4hbfuy467v83Zkvp7ghEwyymFOTyB83kvXWzjLPij4k5xziN5dPKX7cQnuAOvpnumew3Dx7wrXDST9wx6qPOrisLUoeQjjEVnwl2L012UT0ow7fh21HBjSCglX33mipaAD5QJZz_iYf6Yff4HlRXvPSr3a_kkRAw_BLxm0J-5RI8Q-T9js8vIXn3At2u6Nk7MwKhede7Mkcq3W4MjCu7ZEZdMuMdBMskdNl4takHf5FFgUjPhid1EpXkASa9RWVpYicmaeuf4QvcBu3IfIl4b3zGMbB_j8M4_QwFBA4cz1gw_=w917-h1024-no\" alt=\"直條圖完成\" title=\"直條圖\"></p>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","excerpt":"<p>這次要來練習用 <code>D3</code> 搭配 <code>Vue</code> 做多組動態的 <code>SVG</code> 直條圖囉～<br>","more":"</p>\n<p>前面幾篇有講過的原理這裡就不再次解釋，我們直接從繪製直條開始說起。</p>\n<hr>\n<h2 id=\"繪製直條\"><a href=\"#繪製直條\" class=\"headerlink\" title=\"繪製直條\"></a>繪製直條</h2><ul>\n<li>HTML</li>\n</ul>\n<p>這邊直條圖外面包了兩次 <code>transition-group</code> 是因為第一次進來頁面的時候，並不會呈現動畫，所以為了 Fixed 這個 Bug 所以外面又包了一次 <code>transition-group</code>。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 直條 --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 為了初始有動畫，所以包了兩次 transition-group --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">transition-group</span> <span class=\"attr\">tag</span>=<span class=\"string\">\"g\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"growBar\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">transition-group</span> <span class=\"attr\">tag</span>=<span class=\"string\">\"g\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"growBar\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"bar\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(group, key) in bar\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;key&#125;$&#123;group.rect.height&#125;$&#123;group.rect.x&#125;`\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">rect</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">v-for</span>=<span class=\"string\">\"(r, k) in group.rect\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;k&#125;$&#123;r.height&#125;$&#123;r.x&#125;`\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:fill</span>=<span class=\"string\">\"group.color\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:x</span>=<span class=\"string\">\"r.x\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:y</span>=<span class=\"string\">\"r.y\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:width</span>=<span class=\"string\">\"r.width\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:height</span>=<span class=\"string\">\"r.height\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">v-on:mouseover</span>=<span class=\"string\">\"showTooltip(key, k, $event)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">v-on:mouseout</span>=<span class=\"string\">\"hiddenTooltip\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">rect</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">transition-group</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 動畫 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.growBar-enter-active</span> &#123; <span class=\"comment\">/* 進入動畫：進行中 */</span></span><br><span class=\"line\">  <span class=\"comment\">/* 動畫時間： 伸縮變形1秒, 透明度1秒 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: transform <span class=\"number\">0.7s</span>, opacity <span class=\"number\">1s</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.growBar-enter</span> &#123; <span class=\"comment\">/* 進入動畫：開始 */</span></span><br><span class=\"line\">  <span class=\"comment\">/* 因為直條的起始點 x, y 位於矩形的左上角，</span></span><br><span class=\"line\"><span class=\"comment\">  若用 js 的方式是要同時變動 y 座標和高度，</span></span><br><span class=\"line\"><span class=\"comment\">  但因為我們使用 css transition 的方式，</span></span><br><span class=\"line\"><span class=\"comment\">  所以只能微調縮放和位移的比例，做到近乎相似的效果。</span></span><br><span class=\"line\"><span class=\"comment\">  垂直縮放從0.55開始，垂直位移從-12%開始 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">scaleY</span>(0.55) <span class=\"built_in\">translateY</span>(-12%);</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>; <span class=\"comment\">/* 淡入從透明度0開始 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">......</span><br><span class=\"line\"><span class=\"comment\">/* 統計圖 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.chartContain</span> &#123;</span><br><span class=\"line\">  ....</span><br><span class=\"line\">  <span class=\"selector-class\">.chart</span> &#123;</span><br><span class=\"line\">    ....</span><br><span class=\"line\">    <span class=\"selector-class\">.chartWrap</span> &#123;</span><br><span class=\"line\">      ....</span><br><span class=\"line\">      <span class=\"comment\">/* 因為起始點預設是左上角，所以要改成縮放中心為中間底部開始。</span></span><br><span class=\"line\"><span class=\"comment\">         包了兩次 transition-group 所以群組.bar也要設定縮放中心。 */</span></span><br><span class=\"line\">      <span class=\"selector-class\">.bar</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">transform-origin</span>: <span class=\"number\">50%</span> <span class=\"number\">100%</span>;</span><br><span class=\"line\">        rect &#123;</span><br><span class=\"line\">          <span class=\"selector-tag\">transform-origin</span>: 50% 100%;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<p>直條寬度(barWidth)和個別 x 座標這兩個比較難懂的地方，在後面會用圖解的方式說明。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 顏色函數</span></span><br><span class=\"line\">color() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3.scaleOrdinal(d3.schemeCategory20c);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">barWidth() &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* --------------------</span></span><br><span class=\"line\"><span class=\"comment\">  1. 剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)</span></span><br><span class=\"line\"><span class=\"comment\">      this.chart.width / (this.valueLength + 1) * this.valueLength</span></span><br><span class=\"line\"><span class=\"comment\">  2. 扣掉長條圖中間的間隔</span></span><br><span class=\"line\"><span class=\"comment\">      - (this.chart.gap * this.data.length)</span></span><br><span class=\"line\"><span class=\"comment\">  3. 剩下的寬度分給所有長條</span></span><br><span class=\"line\"><span class=\"comment\">      / (this.valueLength * this.data.length)</span></span><br><span class=\"line\"><span class=\"comment\">  -------------------- */</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    (<span class=\"keyword\">this</span>.chart.width / (<span class=\"keyword\">this</span>.valueLength + <span class=\"number\">1</span>) * <span class=\"keyword\">this</span>.valueLength -</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.chart.gap * <span class=\"keyword\">this</span>.data.length) /</span><br><span class=\"line\">    (<span class=\"keyword\">this</span>.valueLength * <span class=\"keyword\">this</span>.data.length)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// 直條座標、顏色</span></span><br><span class=\"line\">bar() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> rectArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 產生直條的陣列</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.valueLength) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\">(<span class=\"params\">group, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> rectGroup = [];</span><br><span class=\"line\"></span><br><span class=\"line\">      group.value.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        rectGroup.push(&#123;</span><br><span class=\"line\">          <span class=\"comment\">/* --------------------</span></span><br><span class=\"line\"><span class=\"comment\">          1. 把群組直條往左推整體的一半</span></span><br><span class=\"line\"><span class=\"comment\">              - this.barWidth * this.data.length / 2</span></span><br><span class=\"line\"><span class=\"comment\">          2. 依個別順序向右平移</span></span><br><span class=\"line\"><span class=\"comment\">              + this.barWidth * index</span></span><br><span class=\"line\"><span class=\"comment\">          -------------------- */</span></span><br><span class=\"line\">          x:</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.xScale(i + <span class=\"number\">1</span>) -</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.barWidth * <span class=\"keyword\">this</span>.data.length / <span class=\"number\">2</span> +</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.barWidth * index, <span class=\"comment\">// 設定x座標</span></span><br><span class=\"line\">          y: <span class=\"keyword\">this</span>.yScale(e.number), <span class=\"comment\">// 設定y座標</span></span><br><span class=\"line\">          width: <span class=\"keyword\">this</span>.barWidth, <span class=\"comment\">// 設定寬度</span></span><br><span class=\"line\">          height: <span class=\"keyword\">this</span>.chart.height - <span class=\"keyword\">this</span>.yScale(e.number) <span class=\"comment\">// 設定高度</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">      rectArray.push(&#123;</span><br><span class=\"line\">        rect: rectGroup,</span><br><span class=\"line\">        color: <span class=\"keyword\">this</span>.color(index) <span class=\"comment\">// 設定顏色</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> rectArray;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"直條寬度-barWidth\"><a href=\"#直條寬度-barWidth\" class=\"headerlink\" title=\"直條寬度(barWidth)\"></a>直條寬度(barWidth)</h2><p><img src=\"https://lh3.googleusercontent.com/jZblvHrlEVkWivyJRdqbnChcpzjIGTO0W51dGDMQTSJqtL6Fz3OgGclg79-eXpB9suVivseGe0NCGUcl3kA1n14BIBuUeS0KDzDq8LTTXVMBNiYtjm-KiY8-BnvmkaSxeF-qCUZIKL6atH_5Kh8utztXHtG-hhbq49oXesaVbGiHoc1bpwpA_YT3hcox7eqPiTt-oOTWmC_Uu3VSN8tZ1NKi0k6xpFqlJTrLxLc4PZ3SyDxHSDtscDZPMwAip5Ee7Dz3FnvETQxusKCu_7mnsosIVmY48P55F00UepRxv3gX_wGJ03dH7faNCLFeXShHVH54-Aw4iY8nLEX_p8qjPuhVgII9FO9BCR3Zrc7Y4AKRh6xnTPfNzGana3cm_Hfc01Imz_Dg_4dDnwimmzMOaDsF9wiMIhDlVc9O44RRu8L1T665QvIyANpYCnm8ujL6GAzZ39j6hXh1u-WKglTUpUBlgpO5GeOTSiG9XgKrA3pVL80fIq9kvgD61TZPmhSXId4Aj-m7tPkVMGJeDp-K_ukaoZW15RN-MIkQsRIxSurqhoGWkQ20lsKdKh4FvyAMbbG_Y1u68sPbdYvFZ5ka41-a5f7VtAu_alWZFw3XSLIBgXzoXfkHQtedzByyafq57wGhMLBb8qA__hutfVu4Omcvf3Zfbu9Q=w604-h694-no\" alt=\"剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)\" title=\"剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/TTY0912pddpHrNUxQY04UZm2rUYh9fucfjoaoxX33yjbSRf__xOZq-rIgZFjvJbR8Q4cIKD9kLZGyR10lt8uBG0_gUzDKmWF1Vmzy5ijYWybjCAkeo27OkiYiXDSyPdFJM89WcdajieDv0KyqaFj7swZ8mVpQNYSX76kvDN565oR6iIejII7hbHC4Oi69k6x897AdXx_uPWHrWmbshttNWoWtKkEoxHZQO37AR9HouaTD1vDGyh7EvfdP0zKL1lQOiLNqbmk2-CTdw3JrKysn84gVAa3ulKKVtg269fmV-vK3ITRyvh0Bp5kpgv_HfnUMenVp_HYdh0ldGimVi9FhmXJqjIY4emmKOH55Up5oaMMW2Z91C_dJA8mbex3Cev6AZXjU8aWsXmpGQIalHzjAzBXIUese1T3W6zMYrJeXNuxX_26ZfF_hKIMtuKMsHDtKRRsHwmgi1ZnBohh8vBArUJWpL210_i2feIToAWpm0doTzCNEiYMx6Lp75ySeejMjsunMzBPF_gPNKEDQPwwHovKxzgJbfQ22vvov4DNl-DVkJgqSPK-7tGPAcbttInT2VjU6BmHkV4EHsSZPQHRCQynilcLdrfKMGKyVVCx2jpChOrLZlSebOwESJ1q6mKV7CK4-EMbjm3whgVhuN1KjMwyyNEYC9pm=w604-h694-no\" alt=\"扣掉長條圖中間的間隔，剩下的寬度分給所有長條\" title=\"扣掉長條圖中間的間隔，剩下的寬度分給所有長條\"></p>\n<ol>\n<li><p>剩下可放圖的地方 = 圖表寬度 - 左右的間距 (大約是x軸寬除上總刻數+1)</p>\n</li>\n<li><p>扣掉長條圖中間的間隔</p>\n</li>\n<li><p>剩下的寬度分給所有長條</p>\n</li>\n</ol>\n<hr>\n<h2 id=\"直條x座標\"><a href=\"#直條x座標\" class=\"headerlink\" title=\"直條x座標\"></a>直條x座標</h2><p><img src=\"https://lh3.googleusercontent.com/oPWMvbdY76bF-4K5gZKM6Lmees8dv6dDwCEz_hFvqcCK0vuGfcB2I_PafS41ajU3ehgU43swWfptKkqBFP1ap-WxQ8VeY0bWhypPglFygisUB8rtqBEJ6BhfPUgHw-dwQE23Z9QEMPH1geS5TsR4RrMHVmqQJBuKYhx0CPuvfOyuDoWoq2ynppBF7f0UMkaX6Qbko1nbw-T0RPHs9UgwxIUcvw4072hgGGVoXfwEFjXMFF3hHnepRt6Ap6aZh1pFPD6k9ZCOJKFvooaR0HiFE71nKfot2xwk3Q-aVEKjVAuwfDIu8EgPziuPDmZKkYnP1bFhXXvJIRw2pQCYFDnZSdL4eOwZ_JgOhRVc9aZwnrPkCN_CJDn0Ps4Uw6h5cvdlSITjjTyFPuQ_7oBrXAOnO0lVHzxqhb0SFrUbIEj_1AIdp5IkpoyuM3rKxiOlzBcS9I1DW9efIyDEUqF0KwBuMxwjoJaSyoxryGW0HWkFNaCCshb9PJZHWEvxI_63H-l7X1Uxn3Kv3StFS2VgzuvU0o4MfdYYEFH1STCK_6vZMv_xbCtXyWZM1Ag-ci2LqATgfQ9GyGD3Se1oxjmDrRBP8MOdfH_guJLmvCGEQYm7FK-YZZX1YsiGR_p1zM4X7KtS77Zd6hpXVJa31bzQISz7kUStKR01lCZG=w604-h694-no\" alt=\"扣掉長條圖中間的間隔，剩下的寬度分給所有長條\" title=\"扣掉長條圖中間的間隔，剩下的寬度分給所有長條\"></p>\n<ol>\n<li><p>把群組直條往左推整體的一半</p>\n</li>\n<li><p>依個別順序向右平移</p>\n</li>\n</ol>\n<p>全部畫好的樣子如下圖，可以去 <a href=\"https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/BarVChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a> 查看完整程式碼喔！也可以在<a href=\"https://annilla.github.io/d3-practice-vue-svg/dist/\">這裡</a>查看直條圖的 Demo，我們下回見～</p>\n<p><img src=\"https://lh3.googleusercontent.com/B6TzzgsZw8pI0JAbb7_DHD3on1AKCSLQPs3N0uMIfiJQRNY1hvZ803AcoXCcFrYEfxHzDxCOau_DUmhILVyNumh_ZRWDd3332BsI787fiD3oO8UCBOI7qzwUjk0B_42izUfJJAKseu6mzDgkBePYY1e2_RiMysSHBc_hQ_rjupXuZyYeBjRY7HOd_VuyWMbjaYMzgDVbTy5Szs1cOC4obFVrc-E_-NynRtkTRQXrfoPF_sS6259qxcDMs6nvXeoFoVsIhwo56uCAw2K07ciS-Md-4m7WwV-kx-YMJMFAilrZ_aJXUPRwYdTA_8u9AmCynhASNzOpSUmfeiDPvYFsjdWD9FeR7UmRjRaRP0KrROeQRmLPx0B4hbfuy467v83Zkvp7ghEwyymFOTyB83kvXWzjLPij4k5xziN5dPKX7cQnuAOvpnumew3Dx7wrXDST9wx6qPOrisLUoeQjjEVnwl2L012UT0ow7fh21HBjSCglX33mipaAD5QJZz_iYf6Yff4HlRXvPSr3a_kkRAw_BLxm0J-5RI8Q-T9js8vIXn3At2u6Nk7MwKhede7Mkcq3W4MjCu7ZEZdMuMdBMskdNl4takHf5FFgUjPhid1EpXkASa9RWVpYicmaeuf4QvcBu3IfIl4b3zGMbB_j8M4_QwFBA4cz1gw_=w917-h1024-no\" alt=\"直條圖完成\" title=\"直條圖\"></p>"},{"title":"D3 v4 with Vue - SVG Line Chart","thumbnailImage":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no","coverMeta":"out","date":"2018-02-02T16:00:00.000Z","updated":"2018-02-02T16:00:00.000Z","_content":"\n`D3` 是一個 `js library` ，讓開發者在向量繪圖時，能快速算出圖表物件在繪圖區域的路徑座標、座標軸、動態顏色等許多好用的 `function`。\n\n<!--more-->\n\n本系列文章採用 `vue` 搭配 `D3` 是因為使用 `data` 驅動畫面的方式，會比直接操作 `DOM` 的效能更好。 `D3` 內建的繪製功能是類似於 `jquery` 的方式直接操作 `DOM` ，當資料變多時可能會拖垮效能出現延遲的畫面，網路上許多教程初期是用此方式，想看的話 `google` 一下就有囉～\n\n此系列文章 `D3` 專注於使用他本身的計算函數和座標軸等優勢的功能，至於畫面更新等其他雜事就交給 `vue` 處理。當然，未來還有更多優化效能的方式，例如：SVG 換成 CANVAS 等，但都有其優缺點，等之後有空再來做比較。\n\n***\n## 準備 `SVG` 畫布\n\n* HTML\n\n```html\n<svg class=\"chart\" :viewBox=\"viewBox\" preserveAspectRatio=\"xMidYMin slice\">\n  <!-- 左上角起始點 -->\n  <g class=\"chartWrap\" :transform=\"startPoint\">\n  ...\n  </g>\n</svg>\n```\n\n* CSS\n\n```css\n.chart {\n  /* For IE Browser Auto Detact Width and Height (RWD)*/\n  width: 100%;\n  padding-bottom: 100%;\n  height: 1px;\n  overflow: visible;\n  ...\n}\n```\n\n* JS\n\n```js\nimport * as d3 from \"d3\";\n\nexport default {\n  data() {\n    return {\n      data: [], // From randomData()\n      chart: { // 畫布大小和預留的 padding\n        width: 500,\n        height: 500,\n        paddingTop: 30,\n        paddingRight: 30,\n        paddingBottom: 100,\n        paddingLeft: 60\n      },\n      hideTooltip: true // 控制 tooltip 顯示隱藏\n    };\n  },\n  computed: {\n    // 可視區域\n    viewBox() {\n      let viewW =\n        this.chart.width + this.chart.paddingRight + this.chart.paddingLeft;\n      let viewH =\n        this.chart.height + this.chart.paddingTop + this.chart.paddingBottom;\n\n      return `0 0 ${viewW} ${viewH}`;\n    },\n    // 畫圖起始點\n    startPoint() {\n      return `translate(${this.chart.paddingLeft}, ${this.chart.paddingTop})`;\n    },\n    ...\n  }\n}\n```\n\n***\n## 準備隨機資料\n\n* JS\n\n```js\n  methods: {\n    randomData() {\n      let min = 0; // 隨機產生數值的最小值\n      let max = 500; // 隨機產生數值的最大值\n      let random = [ // 資料結構\n        {\n          name: \"鼓山區\",\n          value: [\n            {\n              month: \"6月\",\n              number: \"233\"\n            },\n            {\n              month: \"7月\",\n              number: \"412\"\n            },\n            {\n              month: \"8月\",\n              number: \"533\"\n            },\n            {\n              month: \"9月\",\n              number: \"267\"\n            },\n            {\n              month: \"10月\",\n              number: \"321\"\n            }\n          ]\n        },\n        ...\n      ];\n\n\n      // 隨機產生資料\n      for (let i = 0; i < 3; i++) {\n        random[i].value.forEach((e) => {\n          e.number = Math.floor(Math.random() * (max - min + 1)) + min;\n        });\n      }\n\n\n      this.data = random;\n      \n      ...\n      \n    },\n    ...\n  }\n```\n\n***\n## 插入座標軸\n\n* HTML\n\n```html\n<!-- X軸座標 -->\n<g :transform=\"`translate(0, ${chart.height})`\" class=\"axis axisX\" fill=\"none\" font-size=\"10\" font-family=\"sans-serif\" text-anchor=\"middle\">\n</g>\n<!-- Y軸座標 -->\n<g class=\"axis axisY\" fill=\"none\" font-size=\"10\" font-family=\"sans-serif\" text-anchor=\"end\">\n</g>\n<!-- Y軸標籤 -->\n<text class=\"axisYText\" :x=\"axisYText[0]\" :y=\"axisYText[1]\" dy=\"1em\" transform=\"rotate(-90)\" text-anchor=\"middle\">件數</text>\n```\n\n* CSS\n\n```css\n.chart {\n  ...\n  .chartWrap {\n    .axis.axisY {\n      .tick {\n        line {\n          stroke: #efefef;\n          transform: translateX(1px);\n        }\n        &:nth-child(2) {\n          line {\n            stroke: black;\n          }\n        }\n      }\n    }\n    .line {\n      stroke-dasharray: 3000;\n    }\n  }\n}\n```\n\n* JS\n\n因程式碼過多，這邊只講用到的 D3 函數部分，文章最後會有完整程式碼連結。\n\n```js\n// X軸線性比例縮放\nxScale() {\n  return d3\n    .scaleLinear() // 線性縮放函式\n    .domain([0, this.data[0].value.length]) // 設定轉換後的定義域\n    .range([0, this.chart.width]); // 設定轉換前的範圍\n},\n// X軸設定\nxAxis() {\n  return d3\n    .axisBottom(this.xScale) // 下方座標軸函式\n    .ticks(5) // 設定座標軸標註點個數 （6~10月，共 5 個標註點）\n    .tickFormat((d, i) => { // 設定標註點呈現的文字陣列\n      return this.xLabel[i];\n    });\n},\n```\n\n```js\n// Y軸線性比例縮放\nyScale() {\n  let Ymin = 0;\n  let Ymax; // 找出所有Y值的最大\n  let newArray = [];\n\n  // 找出所有Y值的最大數\n  this.data.forEach(function(e, i) {\n    e.value.forEach(function(ev) {\n      newArray.push(ev.number);\n    });\n  });\n  Ymax = d3.max(newArray); // D3找最大值函數\n\n\n  return d3\n    .scaleLinear() // 線性縮放函式\n    .domain([Ymin, Ymax]) // 設定轉換後的定義域\n    .range([this.chart.height, 0]); // 設定轉換前的範圍\n},\n// Y軸設定\nyAxis() {\n  return d3\n    .axisLeft(this.yScale) // 左方座標軸函式\n    .tickSizeInner(-this.chart.height); // 設定内侧刻度大小\n},\n```\n\n> 内侧刻度 (tickSizeInner) 和外侧刻度 (tickSizeOuter) 不同，内侧刻度是一个个单独的line元素，而外侧刻度则实际上是坐标轴线path的一部分。\n\n在每次隨機資料後，動態插入座標軸。\n\n```js\n  methods: {\n    randomData() {\n      ...\n      //清除上一次的坐標軸\n      document.querySelector('.chart .axisX').innerHTML = '';\n      document.querySelector('.chart .axisY').innerHTML = '';\n\n      // 插入X軸座標\n      d3\n        .select(\".chart .axisX\")\n        .call(this.xAxis);\n      \n      // 插入Y軸座標\n      d3\n        .select(\".chart .axisY\")\n        .call(this.yAxis);\n    },\n    ...\n  }\n```\n\n***\n## 繪製折線\n\n* HTML\n\n注意： `transition-group` 標籤是拿來做折線 `CSS` 的動畫效果，這邊以效能考量皆採用 `CSS` 來做動畫，搭配 `vue` `transition` 動態加上 `class` ，並不建議用 `JS` 的方法去計算動畫。\n\n```html\n<!-- 折線 -->\n<transition-group tag=\"g\" name=\"growLine\">\n  <path class=\"line\" v-for=\"(path, key) in line\" :key=\"`${key}${path.d}`\" fill=\"none\" :stroke=\"path.color\" :d=\"path.d\"></path>\n</transition-group>\n```\n\n* CSS\n\n```css\n/* 動畫 */\n.growLine-enter-active { /* 進入動畫：進行中 */\n  transition: all 2s;  /* 動畫時間： 2秒 */\n  stroke-dashoffset: 0; /* 畫線效果 */\n}\n.growLine-enter { /* 進入動畫：開始 */\n  stroke-dashoffset: 3000; /* 畫線效果 */\n}\n/* 統計圖 */\n.chartContain {\n  ...\n  .chart {\n    ...\n    .chartWrap {\n      ...\n      .line {\n        stroke-dasharray: 3000; /* 畫線效果 */\n      }\n    }\n  }\n```\n\n* JS\n\n```js\n  computed: {\n    ...\n    // 動態顏色\n    color() {\n      // 使用 D3 內建 10種顏色輪迴的函式\n      return d3.scaleOrdinal(d3.schemeCategory10);\n    },\n    // 折線座標、顏色\n    line() {\n      let line = d3\n        .line() // 折線函式\n        .x((d, i) => {\n          // 利用尺度運算資料索引，傳回 x 的位置\n          return this.xScale(i + 1);\n        })\n        .y(d => {\n          // 利用尺度運算資料的值，傳回 y 的位置\n          return this.yScale(d);\n        });\n      let pathArray = [];\n\n      this.dataArray.forEach((e, i) => {\n        pathArray.push({d: line(e), color: this.color(i)});\n      });\n\n      return pathArray;\n    },\n  }\n```\n\n***\n## 繪製點\n\n* HTML\n\n注意： `showTooltip`, `hiddenTooltip` 是拿來做滑過物件顯示數據資料的 `tooltip` 功能，在下一段會提到，這邊先純粹解釋繪製折點的部分。\n\n```html\n<!-- 點 -->\n<g class=\"dot\" v-for=\"(group, key) in dot\" :key=\"key\">\n  <transition-group tag=\"g\" name=\"growDot\">\n    <circle v-for=\"(c, k) in group.circle\" :key=\"`${k}${c.cx}${c.cy}`\" :cx=\"c.cx\" :cy=\"c.cy\" r=\"5\" :fill=\"group.color\" stroke=\"white\" v-on:mouseover=\"showTooltip(key, k, $event)\" v-on:mouseout=\"hiddenTooltip\"></circle>\n  </transition-group>\n</g>\n```\n\n* CSS\n\n```css\n/* 動畫 */\n.growDot-enter-active { /* 進入動畫：進行中 */\n  transition: all 1s;  /* 動畫時間： 1秒 */\n}\n.growDot-enter { /* 進入動畫：開始 */\n  opacity: 0;  /* 淡入效果 */\n  transform: scale(0);  /* 從 0 開始縮放 */\n  transform-origin: 50%; /* 從中心點做縮放 */\n}\n```\n\n* JS\n\n```js\n  computed: {\n    // 折點座標、顏色\n    dot() {\n      let circleArray = [];\n\n      this.dataArray.forEach((group, i) => {\n        let circleGroup = [];\n\n        // 設置點座標\n        group.forEach((number, index) => {\n          circleGroup.push({\n            cx: this.xScale(index + 1),\n            cy: this.yScale(number),\n          });\n        });\n\n        // 同一群的點用相同顏色\n        circleArray.push({\n          circle: circleGroup,\n          color: this.color(i)\n        });\n      });\n\n      return circleArray;\n    },\n  }\n```\n\n***\n## 加上提示資料點的 `tooltip`\n\n* CSS\n\n```css\n...\n  .tooltip {\n    min-width: 100px;\n    background-color: rgba(0, 0, 0, 0.9);\n    color: white;\n    padding: 10px;\n    border-radius: 6px;\n    position: absolute;\n    text-align: left;\n    line-height: 1.5em;\n    z-index: 1;\n    &.hidden {\n      visibility: hidden;\n    }\n  }\n```\n\n* JS\n\n```js\n  methods: {\n    showTooltip(index1, index2, event) {\n      let mouseX = event.clientX + 20;\n      let mouseY = event.clientY;\n\n      // 設置位置\n      document.querySelector('.tooltip').setAttribute('style', `left: ${mouseX}px; top: ${mouseY}px;`);\n      // 插入名稱\n      document.querySelector('.tooltip .name').innerHTML = `${this.data[index1].name} / ${this.data[index1].value[index2].month}`;\n      document.querySelector('.tooltip .value').innerHTML = `${this.data[index1].value[index2].number} 件`;\n\n      // 顯示 tooltip\n      this.hideTooltip = false;\n    },\n    hiddenTooltip() {\n      this.hideTooltip = true;\n    }\n  }\n```\n\n全部畫好的樣子如下圖，可以去 [Github](https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/LineChart.vue) 查看完整程式碼喔！也可以在[這裡](https://annilla.github.io/d3-practice-vue-svg/dist/)查看折線圖的 Demo，我們下回見～\n\n![折線圖完成](https://lh3.googleusercontent.com/oLw6AdE59P1sxloMw1941hZ_gx1_48MXNjguaxuIo6RGWaMTnpE4ekH4VqJYekKQmItAf2NXaVp1SerJMIcsu_silW_OvrZ7Iy50P9bEbCRZbckPcWdQZSb1aHVgE30uvSiJz3lKZ5QKYG-0Su5dyAv0RvAIzNob14FMqUjHXnHjOxY28iwfkKyplDlJv2drk80y_Iy2T63mWsSYp3xB-KRO0Z3-jAzyBHQ0rlCkb3ItKdrmvvhB3ETe2YBMAuF2JBIeYo9fZ7h4cOZBhchxxoV2MJETLVxa0C5n26bhUEd537Z6JOG7f8NqAB7-EcL-0qcWmP6Q9SWhILW0_z4V4g5hOoPQHFfpwMLG27dhn3XqiEo_TdVcW6rcJsI07MrW2sYktDt8ldxDvoABq85h0qlXn2G_pnMGMMr-NtCAEZwqEYgmLZ3p042hnQbWS1owffJcM80GN2w4gFvGhx5niXf5_HzLV0tmIy6LJLR9uPt3Kf2ZddAfPEK6UOLiNVcqj6_X9EPA1tltI-4vtjMz5R7XevyLLFYEYHBoT2LA5PWm_unurJYrH3z3Hz04ZrrFOtLjLdav4tj1JdOHO05P6xteD5rMq4GIiK9B5jmVUlFgIV9Th4Ua2sHLKDPnyY8yS__t9JpB_iWGhIO5na0dgvsNex-Z5rC2=w670-h744-no \"折線圖\")\n\n***\n## 參考資料\n\n* [D3 中文文件 - tickSizeInner](https://github.com/xswei/d3js_doc/blob/master/API_Reference/d3-axis/README.md#axis_tickSizeInner)\n\n* [Vue Transition](https://vuejs.org/v2/guide/transitions.html#ad)","source":"_posts/D3/D3-v4-with-Vue-SVG-Line-Chart.md","raw":"---\ntitle: D3 v4 with Vue - SVG Line Chart\ncategories:\n  - D3\nthumbnailImage: https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no\ncoverMeta: out\ntags: [D3, Vue, SVG]\ndate: 2018/02/03\nupdated: 2018/02/03\n---\n\n`D3` 是一個 `js library` ，讓開發者在向量繪圖時，能快速算出圖表物件在繪圖區域的路徑座標、座標軸、動態顏色等許多好用的 `function`。\n\n<!--more-->\n\n本系列文章採用 `vue` 搭配 `D3` 是因為使用 `data` 驅動畫面的方式，會比直接操作 `DOM` 的效能更好。 `D3` 內建的繪製功能是類似於 `jquery` 的方式直接操作 `DOM` ，當資料變多時可能會拖垮效能出現延遲的畫面，網路上許多教程初期是用此方式，想看的話 `google` 一下就有囉～\n\n此系列文章 `D3` 專注於使用他本身的計算函數和座標軸等優勢的功能，至於畫面更新等其他雜事就交給 `vue` 處理。當然，未來還有更多優化效能的方式，例如：SVG 換成 CANVAS 等，但都有其優缺點，等之後有空再來做比較。\n\n***\n## 準備 `SVG` 畫布\n\n* HTML\n\n```html\n<svg class=\"chart\" :viewBox=\"viewBox\" preserveAspectRatio=\"xMidYMin slice\">\n  <!-- 左上角起始點 -->\n  <g class=\"chartWrap\" :transform=\"startPoint\">\n  ...\n  </g>\n</svg>\n```\n\n* CSS\n\n```css\n.chart {\n  /* For IE Browser Auto Detact Width and Height (RWD)*/\n  width: 100%;\n  padding-bottom: 100%;\n  height: 1px;\n  overflow: visible;\n  ...\n}\n```\n\n* JS\n\n```js\nimport * as d3 from \"d3\";\n\nexport default {\n  data() {\n    return {\n      data: [], // From randomData()\n      chart: { // 畫布大小和預留的 padding\n        width: 500,\n        height: 500,\n        paddingTop: 30,\n        paddingRight: 30,\n        paddingBottom: 100,\n        paddingLeft: 60\n      },\n      hideTooltip: true // 控制 tooltip 顯示隱藏\n    };\n  },\n  computed: {\n    // 可視區域\n    viewBox() {\n      let viewW =\n        this.chart.width + this.chart.paddingRight + this.chart.paddingLeft;\n      let viewH =\n        this.chart.height + this.chart.paddingTop + this.chart.paddingBottom;\n\n      return `0 0 ${viewW} ${viewH}`;\n    },\n    // 畫圖起始點\n    startPoint() {\n      return `translate(${this.chart.paddingLeft}, ${this.chart.paddingTop})`;\n    },\n    ...\n  }\n}\n```\n\n***\n## 準備隨機資料\n\n* JS\n\n```js\n  methods: {\n    randomData() {\n      let min = 0; // 隨機產生數值的最小值\n      let max = 500; // 隨機產生數值的最大值\n      let random = [ // 資料結構\n        {\n          name: \"鼓山區\",\n          value: [\n            {\n              month: \"6月\",\n              number: \"233\"\n            },\n            {\n              month: \"7月\",\n              number: \"412\"\n            },\n            {\n              month: \"8月\",\n              number: \"533\"\n            },\n            {\n              month: \"9月\",\n              number: \"267\"\n            },\n            {\n              month: \"10月\",\n              number: \"321\"\n            }\n          ]\n        },\n        ...\n      ];\n\n\n      // 隨機產生資料\n      for (let i = 0; i < 3; i++) {\n        random[i].value.forEach((e) => {\n          e.number = Math.floor(Math.random() * (max - min + 1)) + min;\n        });\n      }\n\n\n      this.data = random;\n      \n      ...\n      \n    },\n    ...\n  }\n```\n\n***\n## 插入座標軸\n\n* HTML\n\n```html\n<!-- X軸座標 -->\n<g :transform=\"`translate(0, ${chart.height})`\" class=\"axis axisX\" fill=\"none\" font-size=\"10\" font-family=\"sans-serif\" text-anchor=\"middle\">\n</g>\n<!-- Y軸座標 -->\n<g class=\"axis axisY\" fill=\"none\" font-size=\"10\" font-family=\"sans-serif\" text-anchor=\"end\">\n</g>\n<!-- Y軸標籤 -->\n<text class=\"axisYText\" :x=\"axisYText[0]\" :y=\"axisYText[1]\" dy=\"1em\" transform=\"rotate(-90)\" text-anchor=\"middle\">件數</text>\n```\n\n* CSS\n\n```css\n.chart {\n  ...\n  .chartWrap {\n    .axis.axisY {\n      .tick {\n        line {\n          stroke: #efefef;\n          transform: translateX(1px);\n        }\n        &:nth-child(2) {\n          line {\n            stroke: black;\n          }\n        }\n      }\n    }\n    .line {\n      stroke-dasharray: 3000;\n    }\n  }\n}\n```\n\n* JS\n\n因程式碼過多，這邊只講用到的 D3 函數部分，文章最後會有完整程式碼連結。\n\n```js\n// X軸線性比例縮放\nxScale() {\n  return d3\n    .scaleLinear() // 線性縮放函式\n    .domain([0, this.data[0].value.length]) // 設定轉換後的定義域\n    .range([0, this.chart.width]); // 設定轉換前的範圍\n},\n// X軸設定\nxAxis() {\n  return d3\n    .axisBottom(this.xScale) // 下方座標軸函式\n    .ticks(5) // 設定座標軸標註點個數 （6~10月，共 5 個標註點）\n    .tickFormat((d, i) => { // 設定標註點呈現的文字陣列\n      return this.xLabel[i];\n    });\n},\n```\n\n```js\n// Y軸線性比例縮放\nyScale() {\n  let Ymin = 0;\n  let Ymax; // 找出所有Y值的最大\n  let newArray = [];\n\n  // 找出所有Y值的最大數\n  this.data.forEach(function(e, i) {\n    e.value.forEach(function(ev) {\n      newArray.push(ev.number);\n    });\n  });\n  Ymax = d3.max(newArray); // D3找最大值函數\n\n\n  return d3\n    .scaleLinear() // 線性縮放函式\n    .domain([Ymin, Ymax]) // 設定轉換後的定義域\n    .range([this.chart.height, 0]); // 設定轉換前的範圍\n},\n// Y軸設定\nyAxis() {\n  return d3\n    .axisLeft(this.yScale) // 左方座標軸函式\n    .tickSizeInner(-this.chart.height); // 設定内侧刻度大小\n},\n```\n\n> 内侧刻度 (tickSizeInner) 和外侧刻度 (tickSizeOuter) 不同，内侧刻度是一个个单独的line元素，而外侧刻度则实际上是坐标轴线path的一部分。\n\n在每次隨機資料後，動態插入座標軸。\n\n```js\n  methods: {\n    randomData() {\n      ...\n      //清除上一次的坐標軸\n      document.querySelector('.chart .axisX').innerHTML = '';\n      document.querySelector('.chart .axisY').innerHTML = '';\n\n      // 插入X軸座標\n      d3\n        .select(\".chart .axisX\")\n        .call(this.xAxis);\n      \n      // 插入Y軸座標\n      d3\n        .select(\".chart .axisY\")\n        .call(this.yAxis);\n    },\n    ...\n  }\n```\n\n***\n## 繪製折線\n\n* HTML\n\n注意： `transition-group` 標籤是拿來做折線 `CSS` 的動畫效果，這邊以效能考量皆採用 `CSS` 來做動畫，搭配 `vue` `transition` 動態加上 `class` ，並不建議用 `JS` 的方法去計算動畫。\n\n```html\n<!-- 折線 -->\n<transition-group tag=\"g\" name=\"growLine\">\n  <path class=\"line\" v-for=\"(path, key) in line\" :key=\"`${key}${path.d}`\" fill=\"none\" :stroke=\"path.color\" :d=\"path.d\"></path>\n</transition-group>\n```\n\n* CSS\n\n```css\n/* 動畫 */\n.growLine-enter-active { /* 進入動畫：進行中 */\n  transition: all 2s;  /* 動畫時間： 2秒 */\n  stroke-dashoffset: 0; /* 畫線效果 */\n}\n.growLine-enter { /* 進入動畫：開始 */\n  stroke-dashoffset: 3000; /* 畫線效果 */\n}\n/* 統計圖 */\n.chartContain {\n  ...\n  .chart {\n    ...\n    .chartWrap {\n      ...\n      .line {\n        stroke-dasharray: 3000; /* 畫線效果 */\n      }\n    }\n  }\n```\n\n* JS\n\n```js\n  computed: {\n    ...\n    // 動態顏色\n    color() {\n      // 使用 D3 內建 10種顏色輪迴的函式\n      return d3.scaleOrdinal(d3.schemeCategory10);\n    },\n    // 折線座標、顏色\n    line() {\n      let line = d3\n        .line() // 折線函式\n        .x((d, i) => {\n          // 利用尺度運算資料索引，傳回 x 的位置\n          return this.xScale(i + 1);\n        })\n        .y(d => {\n          // 利用尺度運算資料的值，傳回 y 的位置\n          return this.yScale(d);\n        });\n      let pathArray = [];\n\n      this.dataArray.forEach((e, i) => {\n        pathArray.push({d: line(e), color: this.color(i)});\n      });\n\n      return pathArray;\n    },\n  }\n```\n\n***\n## 繪製點\n\n* HTML\n\n注意： `showTooltip`, `hiddenTooltip` 是拿來做滑過物件顯示數據資料的 `tooltip` 功能，在下一段會提到，這邊先純粹解釋繪製折點的部分。\n\n```html\n<!-- 點 -->\n<g class=\"dot\" v-for=\"(group, key) in dot\" :key=\"key\">\n  <transition-group tag=\"g\" name=\"growDot\">\n    <circle v-for=\"(c, k) in group.circle\" :key=\"`${k}${c.cx}${c.cy}`\" :cx=\"c.cx\" :cy=\"c.cy\" r=\"5\" :fill=\"group.color\" stroke=\"white\" v-on:mouseover=\"showTooltip(key, k, $event)\" v-on:mouseout=\"hiddenTooltip\"></circle>\n  </transition-group>\n</g>\n```\n\n* CSS\n\n```css\n/* 動畫 */\n.growDot-enter-active { /* 進入動畫：進行中 */\n  transition: all 1s;  /* 動畫時間： 1秒 */\n}\n.growDot-enter { /* 進入動畫：開始 */\n  opacity: 0;  /* 淡入效果 */\n  transform: scale(0);  /* 從 0 開始縮放 */\n  transform-origin: 50%; /* 從中心點做縮放 */\n}\n```\n\n* JS\n\n```js\n  computed: {\n    // 折點座標、顏色\n    dot() {\n      let circleArray = [];\n\n      this.dataArray.forEach((group, i) => {\n        let circleGroup = [];\n\n        // 設置點座標\n        group.forEach((number, index) => {\n          circleGroup.push({\n            cx: this.xScale(index + 1),\n            cy: this.yScale(number),\n          });\n        });\n\n        // 同一群的點用相同顏色\n        circleArray.push({\n          circle: circleGroup,\n          color: this.color(i)\n        });\n      });\n\n      return circleArray;\n    },\n  }\n```\n\n***\n## 加上提示資料點的 `tooltip`\n\n* CSS\n\n```css\n...\n  .tooltip {\n    min-width: 100px;\n    background-color: rgba(0, 0, 0, 0.9);\n    color: white;\n    padding: 10px;\n    border-radius: 6px;\n    position: absolute;\n    text-align: left;\n    line-height: 1.5em;\n    z-index: 1;\n    &.hidden {\n      visibility: hidden;\n    }\n  }\n```\n\n* JS\n\n```js\n  methods: {\n    showTooltip(index1, index2, event) {\n      let mouseX = event.clientX + 20;\n      let mouseY = event.clientY;\n\n      // 設置位置\n      document.querySelector('.tooltip').setAttribute('style', `left: ${mouseX}px; top: ${mouseY}px;`);\n      // 插入名稱\n      document.querySelector('.tooltip .name').innerHTML = `${this.data[index1].name} / ${this.data[index1].value[index2].month}`;\n      document.querySelector('.tooltip .value').innerHTML = `${this.data[index1].value[index2].number} 件`;\n\n      // 顯示 tooltip\n      this.hideTooltip = false;\n    },\n    hiddenTooltip() {\n      this.hideTooltip = true;\n    }\n  }\n```\n\n全部畫好的樣子如下圖，可以去 [Github](https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/LineChart.vue) 查看完整程式碼喔！也可以在[這裡](https://annilla.github.io/d3-practice-vue-svg/dist/)查看折線圖的 Demo，我們下回見～\n\n![折線圖完成](https://lh3.googleusercontent.com/oLw6AdE59P1sxloMw1941hZ_gx1_48MXNjguaxuIo6RGWaMTnpE4ekH4VqJYekKQmItAf2NXaVp1SerJMIcsu_silW_OvrZ7Iy50P9bEbCRZbckPcWdQZSb1aHVgE30uvSiJz3lKZ5QKYG-0Su5dyAv0RvAIzNob14FMqUjHXnHjOxY28iwfkKyplDlJv2drk80y_Iy2T63mWsSYp3xB-KRO0Z3-jAzyBHQ0rlCkb3ItKdrmvvhB3ETe2YBMAuF2JBIeYo9fZ7h4cOZBhchxxoV2MJETLVxa0C5n26bhUEd537Z6JOG7f8NqAB7-EcL-0qcWmP6Q9SWhILW0_z4V4g5hOoPQHFfpwMLG27dhn3XqiEo_TdVcW6rcJsI07MrW2sYktDt8ldxDvoABq85h0qlXn2G_pnMGMMr-NtCAEZwqEYgmLZ3p042hnQbWS1owffJcM80GN2w4gFvGhx5niXf5_HzLV0tmIy6LJLR9uPt3Kf2ZddAfPEK6UOLiNVcqj6_X9EPA1tltI-4vtjMz5R7XevyLLFYEYHBoT2LA5PWm_unurJYrH3z3Hz04ZrrFOtLjLdav4tj1JdOHO05P6xteD5rMq4GIiK9B5jmVUlFgIV9Th4Ua2sHLKDPnyY8yS__t9JpB_iWGhIO5na0dgvsNex-Z5rC2=w670-h744-no \"折線圖\")\n\n***\n## 參考資料\n\n* [D3 中文文件 - tickSizeInner](https://github.com/xswei/d3js_doc/blob/master/API_Reference/d3-axis/README.md#axis_tickSizeInner)\n\n* [Vue Transition](https://vuejs.org/v2/guide/transitions.html#ad)","slug":"D3/D3-v4-with-Vue-SVG-Line-Chart","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74i000rtudhb5xowbqn","content":"<p><code>D3</code> 是一個 <code>js library</code> ，讓開發者在向量繪圖時，能快速算出圖表物件在繪圖區域的路徑座標、座標軸、動態顏色等許多好用的 <code>function</code>。</p>\n<a id=\"more\"></a>\n<p>本系列文章採用 <code>vue</code> 搭配 <code>D3</code> 是因為使用 <code>data</code> 驅動畫面的方式，會比直接操作 <code>DOM</code> 的效能更好。 <code>D3</code> 內建的繪製功能是類似於 <code>jquery</code> 的方式直接操作 <code>DOM</code> ，當資料變多時可能會拖垮效能出現延遲的畫面，網路上許多教程初期是用此方式，想看的話 <code>google</code> 一下就有囉～</p>\n<p>此系列文章 <code>D3</code> 專注於使用他本身的計算函數和座標軸等優勢的功能，至於畫面更新等其他雜事就交給 <code>vue</code> 處理。當然，未來還有更多優化效能的方式，例如：SVG 換成 CANVAS 等，但都有其優缺點，等之後有空再來做比較。</p>\n<hr>\n<h2 id=\"準備-SVG-畫布\"><a href=\"#準備-SVG-畫布\" class=\"headerlink\" title=\"準備 SVG 畫布\"></a>準備 <code>SVG</code> 畫布</h2><ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">svg</span> <span class=\"attr\">class</span>=<span class=\"string\">\"chart\"</span> <span class=\"attr\">:viewBox</span>=<span class=\"string\">\"viewBox\"</span> <span class=\"attr\">preserveAspectRatio</span>=<span class=\"string\">\"xMidYMin slice\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 左上角起始點 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">class</span>=<span class=\"string\">\"chartWrap\"</span> <span class=\"attr\">:transform</span>=<span class=\"string\">\"startPoint\"</span>&gt;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.chart</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* For IE Browser Auto Detact Width and Height (RWD)*/</span></span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: visible;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> d3 <span class=\"keyword\">from</span> <span class=\"string\">\"d3\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      data: [], <span class=\"comment\">// From randomData()</span></span><br><span class=\"line\">      chart: &#123; <span class=\"comment\">// 畫布大小和預留的 padding</span></span><br><span class=\"line\">        width: <span class=\"number\">500</span>,</span><br><span class=\"line\">        height: <span class=\"number\">500</span>,</span><br><span class=\"line\">        paddingTop: <span class=\"number\">30</span>,</span><br><span class=\"line\">        paddingRight: <span class=\"number\">30</span>,</span><br><span class=\"line\">        paddingBottom: <span class=\"number\">100</span>,</span><br><span class=\"line\">        paddingLeft: <span class=\"number\">60</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      hideTooltip: <span class=\"literal\">true</span> <span class=\"comment\">// 控制 tooltip 顯示隱藏</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 可視區域</span></span><br><span class=\"line\">    viewBox() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> viewW =</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.chart.width + <span class=\"keyword\">this</span>.chart.paddingRight + <span class=\"keyword\">this</span>.chart.paddingLeft;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> viewH =</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.chart.height + <span class=\"keyword\">this</span>.chart.paddingTop + <span class=\"keyword\">this</span>.chart.paddingBottom;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">`0 0 <span class=\"subst\">$&#123;viewW&#125;</span> <span class=\"subst\">$&#123;viewH&#125;</span>`</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 畫圖起始點</span></span><br><span class=\"line\">    startPoint() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">`translate(<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.chart.paddingLeft&#125;</span>, <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.chart.paddingTop&#125;</span>)`</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"準備隨機資料\"><a href=\"#準備隨機資料\" class=\"headerlink\" title=\"準備隨機資料\"></a>準備隨機資料</h2><ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  randomData() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> min = <span class=\"number\">0</span>; <span class=\"comment\">// 隨機產生數值的最小值</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> max = <span class=\"number\">500</span>; <span class=\"comment\">// 隨機產生數值的最大值</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> random = [ <span class=\"comment\">// 資料結構</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">\"鼓山區\"</span>,</span><br><span class=\"line\">        value: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            month: <span class=\"string\">\"6月\"</span>,</span><br><span class=\"line\">            number: <span class=\"string\">\"233\"</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            month: <span class=\"string\">\"7月\"</span>,</span><br><span class=\"line\">            number: <span class=\"string\">\"412\"</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            month: <span class=\"string\">\"8月\"</span>,</span><br><span class=\"line\">            number: <span class=\"string\">\"533\"</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            month: <span class=\"string\">\"9月\"</span>,</span><br><span class=\"line\">            number: <span class=\"string\">\"267\"</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            month: <span class=\"string\">\"10月\"</span>,</span><br><span class=\"line\">            number: <span class=\"string\">\"321\"</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      ...</span><br><span class=\"line\">    ];</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 隨機產生資料</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">      random[i].value.forEach(<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        e.number = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * (max - min + <span class=\"number\">1</span>)) + min;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.data = random;</span><br><span class=\"line\">    </span><br><span class=\"line\">    ...</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"插入座標軸\"><a href=\"#插入座標軸\" class=\"headerlink\" title=\"插入座標軸\"></a>插入座標軸</h2><ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- X軸座標 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">:transform</span>=<span class=\"string\">\"`translate(0, $&#123;chart.height&#125;)`\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"axis axisX\"</span> <span class=\"attr\">fill</span>=<span class=\"string\">\"none\"</span> <span class=\"attr\">font-size</span>=<span class=\"string\">\"10\"</span> <span class=\"attr\">font-family</span>=<span class=\"string\">\"sans-serif\"</span> <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"middle\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Y軸座標 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">class</span>=<span class=\"string\">\"axis axisY\"</span> <span class=\"attr\">fill</span>=<span class=\"string\">\"none\"</span> <span class=\"attr\">font-size</span>=<span class=\"string\">\"10\"</span> <span class=\"attr\">font-family</span>=<span class=\"string\">\"sans-serif\"</span> <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"end\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Y軸標籤 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">text</span> <span class=\"attr\">class</span>=<span class=\"string\">\"axisYText\"</span> <span class=\"attr\">:x</span>=<span class=\"string\">\"axisYText[0]\"</span> <span class=\"attr\">:y</span>=<span class=\"string\">\"axisYText[1]\"</span> <span class=\"attr\">dy</span>=<span class=\"string\">\"1em\"</span> <span class=\"attr\">transform</span>=<span class=\"string\">\"rotate(-90)\"</span> <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"middle\"</span>&gt;</span>件數<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.chart</span> &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"selector-class\">.chartWrap</span> &#123;</span><br><span class=\"line\">    .axis.axisY &#123;</span><br><span class=\"line\">      <span class=\"selector-class\">.tick</span> &#123;</span><br><span class=\"line\">        line &#123;</span><br><span class=\"line\">          <span class=\"selector-tag\">stroke</span>: <span class=\"selector-id\">#efefef</span>;</span><br><span class=\"line\">          <span class=\"selector-tag\">transform</span>: <span class=\"selector-tag\">translateX</span>(1<span class=\"selector-tag\">px</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        &amp;<span class=\"selector-pseudo\">:nth-child(2)</span> &#123;</span><br><span class=\"line\">          line &#123;</span><br><span class=\"line\">            <span class=\"selector-tag\">stroke</span>: <span class=\"selector-tag\">black</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.line</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">stroke-dasharray</span>: <span class=\"number\">3000</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<p>因程式碼過多，這邊只講用到的 D3 函數部分，文章最後會有完整程式碼連結。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// X軸線性比例縮放</span></span><br><span class=\"line\">xScale() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .scaleLinear() <span class=\"comment\">// 線性縮放函式</span></span><br><span class=\"line\">    .domain([<span class=\"number\">0</span>, <span class=\"keyword\">this</span>.data[<span class=\"number\">0</span>].value.length]) <span class=\"comment\">// 設定轉換後的定義域</span></span><br><span class=\"line\">    .range([<span class=\"number\">0</span>, <span class=\"keyword\">this</span>.chart.width]); <span class=\"comment\">// 設定轉換前的範圍</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// X軸設定</span></span><br><span class=\"line\">xAxis() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .axisBottom(<span class=\"keyword\">this</span>.xScale) <span class=\"comment\">// 下方座標軸函式</span></span><br><span class=\"line\">    .ticks(<span class=\"number\">5</span>) <span class=\"comment\">// 設定座標軸標註點個數 （6~10月，共 5 個標註點）</span></span><br><span class=\"line\">    .tickFormat(<span class=\"function\">(<span class=\"params\">d, i</span>) =&gt;</span> &#123; <span class=\"comment\">// 設定標註點呈現的文字陣列</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.xLabel[i];</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Y軸線性比例縮放</span></span><br><span class=\"line\">yScale() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> Ymin = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> Ymax; <span class=\"comment\">// 找出所有Y值的最大</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> newArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 找出所有Y值的最大數</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e, i</span>) </span>&#123;</span><br><span class=\"line\">    e.value.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">ev</span>) </span>&#123;</span><br><span class=\"line\">      newArray.push(ev.number);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  Ymax = d3.max(newArray); <span class=\"comment\">// D3找最大值函數</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .scaleLinear() <span class=\"comment\">// 線性縮放函式</span></span><br><span class=\"line\">    .domain([Ymin, Ymax]) <span class=\"comment\">// 設定轉換後的定義域</span></span><br><span class=\"line\">    .range([<span class=\"keyword\">this</span>.chart.height, <span class=\"number\">0</span>]); <span class=\"comment\">// 設定轉換前的範圍</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// Y軸設定</span></span><br><span class=\"line\">yAxis() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .axisLeft(<span class=\"keyword\">this</span>.yScale) <span class=\"comment\">// 左方座標軸函式</span></span><br><span class=\"line\">    .tickSizeInner(-<span class=\"keyword\">this</span>.chart.height); <span class=\"comment\">// 設定内侧刻度大小</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>内侧刻度 (tickSizeInner) 和外侧刻度 (tickSizeOuter) 不同，内侧刻度是一个个单独的line元素，而外侧刻度则实际上是坐标轴线path的一部分。</p>\n</blockquote>\n<p>在每次隨機資料後，動態插入座標軸。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  randomData() &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"comment\">//清除上一次的坐標軸</span></span><br><span class=\"line\">    <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.chart .axisX'</span>).innerHTML = <span class=\"string\">''</span>;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.chart .axisY'</span>).innerHTML = <span class=\"string\">''</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 插入X軸座標</span></span><br><span class=\"line\">    d3</span><br><span class=\"line\">      .select(<span class=\"string\">\".chart .axisX\"</span>)</span><br><span class=\"line\">      .call(<span class=\"keyword\">this</span>.xAxis);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 插入Y軸座標</span></span><br><span class=\"line\">    d3</span><br><span class=\"line\">      .select(<span class=\"string\">\".chart .axisY\"</span>)</span><br><span class=\"line\">      .call(<span class=\"keyword\">this</span>.yAxis);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"繪製折線\"><a href=\"#繪製折線\" class=\"headerlink\" title=\"繪製折線\"></a>繪製折線</h2><ul>\n<li>HTML</li>\n</ul>\n<p>注意： <code>transition-group</code> 標籤是拿來做折線 <code>CSS</code> 的動畫效果，這邊以效能考量皆採用 <code>CSS</code> 來做動畫，搭配 <code>vue</code> <code>transition</code> 動態加上 <code>class</code> ，並不建議用 <code>JS</code> 的方法去計算動畫。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 折線 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">transition-group</span> <span class=\"attr\">tag</span>=<span class=\"string\">\"g\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"growLine\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">path</span> <span class=\"attr\">class</span>=<span class=\"string\">\"line\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(path, key) in line\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;key&#125;$&#123;path.d&#125;`\"</span> <span class=\"attr\">fill</span>=<span class=\"string\">\"none\"</span> <span class=\"attr\">:stroke</span>=<span class=\"string\">\"path.color\"</span> <span class=\"attr\">:d</span>=<span class=\"string\">\"path.d\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">path</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 動畫 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.growLine-enter-active</span> &#123; <span class=\"comment\">/* 進入動畫：進行中 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all <span class=\"number\">2s</span>;  <span class=\"comment\">/* 動畫時間： 2秒 */</span></span><br><span class=\"line\">  <span class=\"attribute\">stroke-dashoffset</span>: <span class=\"number\">0</span>; <span class=\"comment\">/* 畫線效果 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.growLine-enter</span> &#123; <span class=\"comment\">/* 進入動畫：開始 */</span></span><br><span class=\"line\">  <span class=\"attribute\">stroke-dashoffset</span>: <span class=\"number\">3000</span>; <span class=\"comment\">/* 畫線效果 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 統計圖 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.chartContain</span> &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"selector-class\">.chart</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"selector-class\">.chartWrap</span> &#123;</span><br><span class=\"line\">      ...</span><br><span class=\"line\">      <span class=\"selector-class\">.line</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">stroke-dasharray</span>: <span class=\"number\">3000</span>; <span class=\"comment\">/* 畫線效果 */</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">computed: &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"comment\">// 動態顏色</span></span><br><span class=\"line\">  color() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 使用 D3 內建 10種顏色輪迴的函式</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> d3.scaleOrdinal(d3.schemeCategory10);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// 折線座標、顏色</span></span><br><span class=\"line\">  line() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> line = d3</span><br><span class=\"line\">      .line() <span class=\"comment\">// 折線函式</span></span><br><span class=\"line\">      .x(<span class=\"function\">(<span class=\"params\">d, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 利用尺度運算資料索引，傳回 x 的位置</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.xScale(i + <span class=\"number\">1</span>);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .y(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 利用尺度運算資料的值，傳回 y 的位置</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.yScale(d);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> pathArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.dataArray.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      pathArray.push(&#123;<span class=\"attr\">d</span>: line(e), <span class=\"attr\">color</span>: <span class=\"keyword\">this</span>.color(i)&#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> pathArray;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"繪製點\"><a href=\"#繪製點\" class=\"headerlink\" title=\"繪製點\"></a>繪製點</h2><ul>\n<li>HTML</li>\n</ul>\n<p>注意： <code>showTooltip</code>, <code>hiddenTooltip</code> 是拿來做滑過物件顯示數據資料的 <code>tooltip</code> 功能，在下一段會提到，這邊先純粹解釋繪製折點的部分。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 點 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">class</span>=<span class=\"string\">\"dot\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(group, key) in dot\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"key\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">transition-group</span> <span class=\"attr\">tag</span>=<span class=\"string\">\"g\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"growDot\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">circle</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(c, k) in group.circle\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;k&#125;$&#123;c.cx&#125;$&#123;c.cy&#125;`\"</span> <span class=\"attr\">:cx</span>=<span class=\"string\">\"c.cx\"</span> <span class=\"attr\">:cy</span>=<span class=\"string\">\"c.cy\"</span> <span class=\"attr\">r</span>=<span class=\"string\">\"5\"</span> <span class=\"attr\">:fill</span>=<span class=\"string\">\"group.color\"</span> <span class=\"attr\">stroke</span>=<span class=\"string\">\"white\"</span> <span class=\"attr\">v-on:mouseover</span>=<span class=\"string\">\"showTooltip(key, k, $event)\"</span> <span class=\"attr\">v-on:mouseout</span>=<span class=\"string\">\"hiddenTooltip\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">circle</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">transition-group</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 動畫 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.growDot-enter-active</span> &#123; <span class=\"comment\">/* 進入動畫：進行中 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all <span class=\"number\">1s</span>;  <span class=\"comment\">/* 動畫時間： 1秒 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.growDot-enter</span> &#123; <span class=\"comment\">/* 進入動畫：開始 */</span></span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;  <span class=\"comment\">/* 淡入效果 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">scale</span>(0);  <span class=\"comment\">/* 從 0 開始縮放 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transform-origin</span>: <span class=\"number\">50%</span>; <span class=\"comment\">/* 從中心點做縮放 */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">computed: &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 折點座標、顏色</span></span><br><span class=\"line\">  dot() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> circleArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.dataArray.forEach(<span class=\"function\">(<span class=\"params\">group, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> circleGroup = [];</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 設置點座標</span></span><br><span class=\"line\">      group.forEach(<span class=\"function\">(<span class=\"params\">number, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        circleGroup.push(&#123;</span><br><span class=\"line\">          cx: <span class=\"keyword\">this</span>.xScale(index + <span class=\"number\">1</span>),</span><br><span class=\"line\">          cy: <span class=\"keyword\">this</span>.yScale(number),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 同一群的點用相同顏色</span></span><br><span class=\"line\">      circleArray.push(&#123;</span><br><span class=\"line\">        circle: circleGroup,</span><br><span class=\"line\">        color: <span class=\"keyword\">this</span>.color(i)</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> circleArray;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"加上提示資料點的-tooltip\"><a href=\"#加上提示資料點的-tooltip\" class=\"headerlink\" title=\"加上提示資料點的 tooltip\"></a>加上提示資料點的 <code>tooltip</code></h2><ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">  <span class=\"selector-class\">.tooltip</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">min-width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgba</span>(0, 0, 0, 0.9);</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: white;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">6px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">text-align</span>: left;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">1.5em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">z-index</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">    &amp;.hidden &#123;</span><br><span class=\"line\">      <span class=\"selector-tag\">visibility</span>: <span class=\"selector-tag\">hidden</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  showTooltip(index1, index2, event) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> mouseX = event.clientX + <span class=\"number\">20</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> mouseY = event.clientY;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 設置位置</span></span><br><span class=\"line\">    <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.tooltip'</span>).setAttribute(<span class=\"string\">'style'</span>, <span class=\"string\">`left: <span class=\"subst\">$&#123;mouseX&#125;</span>px; top: <span class=\"subst\">$&#123;mouseY&#125;</span>px;`</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 插入名稱</span></span><br><span class=\"line\">    <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.tooltip .name'</span>).innerHTML = <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.data[index1].name&#125;</span> / <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.data[index1].value[index2].month&#125;</span>`</span>;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.tooltip .value'</span>).innerHTML = <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.data[index1].value[index2].number&#125;</span> 件`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 顯示 tooltip</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hideTooltip = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  hiddenTooltip() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hideTooltip = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>全部畫好的樣子如下圖，可以去 <a href=\"https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/LineChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a> 查看完整程式碼喔！也可以在<a href=\"https://annilla.github.io/d3-practice-vue-svg/dist/\">這裡</a>查看折線圖的 Demo，我們下回見～</p>\n<p><img src=\"https://lh3.googleusercontent.com/oLw6AdE59P1sxloMw1941hZ_gx1_48MXNjguaxuIo6RGWaMTnpE4ekH4VqJYekKQmItAf2NXaVp1SerJMIcsu_silW_OvrZ7Iy50P9bEbCRZbckPcWdQZSb1aHVgE30uvSiJz3lKZ5QKYG-0Su5dyAv0RvAIzNob14FMqUjHXnHjOxY28iwfkKyplDlJv2drk80y_Iy2T63mWsSYp3xB-KRO0Z3-jAzyBHQ0rlCkb3ItKdrmvvhB3ETe2YBMAuF2JBIeYo9fZ7h4cOZBhchxxoV2MJETLVxa0C5n26bhUEd537Z6JOG7f8NqAB7-EcL-0qcWmP6Q9SWhILW0_z4V4g5hOoPQHFfpwMLG27dhn3XqiEo_TdVcW6rcJsI07MrW2sYktDt8ldxDvoABq85h0qlXn2G_pnMGMMr-NtCAEZwqEYgmLZ3p042hnQbWS1owffJcM80GN2w4gFvGhx5niXf5_HzLV0tmIy6LJLR9uPt3Kf2ZddAfPEK6UOLiNVcqj6_X9EPA1tltI-4vtjMz5R7XevyLLFYEYHBoT2LA5PWm_unurJYrH3z3Hz04ZrrFOtLjLdav4tj1JdOHO05P6xteD5rMq4GIiK9B5jmVUlFgIV9Th4Ua2sHLKDPnyY8yS__t9JpB_iWGhIO5na0dgvsNex-Z5rC2=w670-h744-no\" alt=\"折線圖完成\" title=\"折線圖\"></p>\n<hr>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><p><a href=\"https://github.com/xswei/d3js_doc/blob/master/API_Reference/d3-axis/README.md#axis_tickSizeInner\" target=\"_blank\" rel=\"noopener\">D3 中文文件 - tickSizeInner</a></p>\n</li>\n<li><p><a href=\"https://vuejs.org/v2/guide/transitions.html#ad\" target=\"_blank\" rel=\"noopener\">Vue Transition</a></p>\n</li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","excerpt":"<p><code>D3</code> 是一個 <code>js library</code> ，讓開發者在向量繪圖時，能快速算出圖表物件在繪圖區域的路徑座標、座標軸、動態顏色等許多好用的 <code>function</code>。</p>","more":"<p>本系列文章採用 <code>vue</code> 搭配 <code>D3</code> 是因為使用 <code>data</code> 驅動畫面的方式，會比直接操作 <code>DOM</code> 的效能更好。 <code>D3</code> 內建的繪製功能是類似於 <code>jquery</code> 的方式直接操作 <code>DOM</code> ，當資料變多時可能會拖垮效能出現延遲的畫面，網路上許多教程初期是用此方式，想看的話 <code>google</code> 一下就有囉～</p>\n<p>此系列文章 <code>D3</code> 專注於使用他本身的計算函數和座標軸等優勢的功能，至於畫面更新等其他雜事就交給 <code>vue</code> 處理。當然，未來還有更多優化效能的方式，例如：SVG 換成 CANVAS 等，但都有其優缺點，等之後有空再來做比較。</p>\n<hr>\n<h2 id=\"準備-SVG-畫布\"><a href=\"#準備-SVG-畫布\" class=\"headerlink\" title=\"準備 SVG 畫布\"></a>準備 <code>SVG</code> 畫布</h2><ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">svg</span> <span class=\"attr\">class</span>=<span class=\"string\">\"chart\"</span> <span class=\"attr\">:viewBox</span>=<span class=\"string\">\"viewBox\"</span> <span class=\"attr\">preserveAspectRatio</span>=<span class=\"string\">\"xMidYMin slice\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 左上角起始點 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">class</span>=<span class=\"string\">\"chartWrap\"</span> <span class=\"attr\">:transform</span>=<span class=\"string\">\"startPoint\"</span>&gt;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.chart</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* For IE Browser Auto Detact Width and Height (RWD)*/</span></span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: visible;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> d3 <span class=\"keyword\">from</span> <span class=\"string\">\"d3\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      data: [], <span class=\"comment\">// From randomData()</span></span><br><span class=\"line\">      chart: &#123; <span class=\"comment\">// 畫布大小和預留的 padding</span></span><br><span class=\"line\">        width: <span class=\"number\">500</span>,</span><br><span class=\"line\">        height: <span class=\"number\">500</span>,</span><br><span class=\"line\">        paddingTop: <span class=\"number\">30</span>,</span><br><span class=\"line\">        paddingRight: <span class=\"number\">30</span>,</span><br><span class=\"line\">        paddingBottom: <span class=\"number\">100</span>,</span><br><span class=\"line\">        paddingLeft: <span class=\"number\">60</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      hideTooltip: <span class=\"literal\">true</span> <span class=\"comment\">// 控制 tooltip 顯示隱藏</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 可視區域</span></span><br><span class=\"line\">    viewBox() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> viewW =</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.chart.width + <span class=\"keyword\">this</span>.chart.paddingRight + <span class=\"keyword\">this</span>.chart.paddingLeft;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> viewH =</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.chart.height + <span class=\"keyword\">this</span>.chart.paddingTop + <span class=\"keyword\">this</span>.chart.paddingBottom;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">`0 0 <span class=\"subst\">$&#123;viewW&#125;</span> <span class=\"subst\">$&#123;viewH&#125;</span>`</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 畫圖起始點</span></span><br><span class=\"line\">    startPoint() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">`translate(<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.chart.paddingLeft&#125;</span>, <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.chart.paddingTop&#125;</span>)`</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"準備隨機資料\"><a href=\"#準備隨機資料\" class=\"headerlink\" title=\"準備隨機資料\"></a>準備隨機資料</h2><ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  randomData() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> min = <span class=\"number\">0</span>; <span class=\"comment\">// 隨機產生數值的最小值</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> max = <span class=\"number\">500</span>; <span class=\"comment\">// 隨機產生數值的最大值</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> random = [ <span class=\"comment\">// 資料結構</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">\"鼓山區\"</span>,</span><br><span class=\"line\">        value: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            month: <span class=\"string\">\"6月\"</span>,</span><br><span class=\"line\">            number: <span class=\"string\">\"233\"</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            month: <span class=\"string\">\"7月\"</span>,</span><br><span class=\"line\">            number: <span class=\"string\">\"412\"</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            month: <span class=\"string\">\"8月\"</span>,</span><br><span class=\"line\">            number: <span class=\"string\">\"533\"</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            month: <span class=\"string\">\"9月\"</span>,</span><br><span class=\"line\">            number: <span class=\"string\">\"267\"</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            month: <span class=\"string\">\"10月\"</span>,</span><br><span class=\"line\">            number: <span class=\"string\">\"321\"</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      ...</span><br><span class=\"line\">    ];</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 隨機產生資料</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">      random[i].value.forEach(<span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        e.number = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * (max - min + <span class=\"number\">1</span>)) + min;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.data = random;</span><br><span class=\"line\">    </span><br><span class=\"line\">    ...</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"插入座標軸\"><a href=\"#插入座標軸\" class=\"headerlink\" title=\"插入座標軸\"></a>插入座標軸</h2><ul>\n<li>HTML</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- X軸座標 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">:transform</span>=<span class=\"string\">\"`translate(0, $&#123;chart.height&#125;)`\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"axis axisX\"</span> <span class=\"attr\">fill</span>=<span class=\"string\">\"none\"</span> <span class=\"attr\">font-size</span>=<span class=\"string\">\"10\"</span> <span class=\"attr\">font-family</span>=<span class=\"string\">\"sans-serif\"</span> <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"middle\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Y軸座標 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">class</span>=<span class=\"string\">\"axis axisY\"</span> <span class=\"attr\">fill</span>=<span class=\"string\">\"none\"</span> <span class=\"attr\">font-size</span>=<span class=\"string\">\"10\"</span> <span class=\"attr\">font-family</span>=<span class=\"string\">\"sans-serif\"</span> <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"end\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Y軸標籤 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">text</span> <span class=\"attr\">class</span>=<span class=\"string\">\"axisYText\"</span> <span class=\"attr\">:x</span>=<span class=\"string\">\"axisYText[0]\"</span> <span class=\"attr\">:y</span>=<span class=\"string\">\"axisYText[1]\"</span> <span class=\"attr\">dy</span>=<span class=\"string\">\"1em\"</span> <span class=\"attr\">transform</span>=<span class=\"string\">\"rotate(-90)\"</span> <span class=\"attr\">text-anchor</span>=<span class=\"string\">\"middle\"</span>&gt;</span>件數<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.chart</span> &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"selector-class\">.chartWrap</span> &#123;</span><br><span class=\"line\">    .axis.axisY &#123;</span><br><span class=\"line\">      <span class=\"selector-class\">.tick</span> &#123;</span><br><span class=\"line\">        line &#123;</span><br><span class=\"line\">          <span class=\"selector-tag\">stroke</span>: <span class=\"selector-id\">#efefef</span>;</span><br><span class=\"line\">          <span class=\"selector-tag\">transform</span>: <span class=\"selector-tag\">translateX</span>(1<span class=\"selector-tag\">px</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        &amp;<span class=\"selector-pseudo\">:nth-child(2)</span> &#123;</span><br><span class=\"line\">          line &#123;</span><br><span class=\"line\">            <span class=\"selector-tag\">stroke</span>: <span class=\"selector-tag\">black</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.line</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">stroke-dasharray</span>: <span class=\"number\">3000</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<p>因程式碼過多，這邊只講用到的 D3 函數部分，文章最後會有完整程式碼連結。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// X軸線性比例縮放</span></span><br><span class=\"line\">xScale() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .scaleLinear() <span class=\"comment\">// 線性縮放函式</span></span><br><span class=\"line\">    .domain([<span class=\"number\">0</span>, <span class=\"keyword\">this</span>.data[<span class=\"number\">0</span>].value.length]) <span class=\"comment\">// 設定轉換後的定義域</span></span><br><span class=\"line\">    .range([<span class=\"number\">0</span>, <span class=\"keyword\">this</span>.chart.width]); <span class=\"comment\">// 設定轉換前的範圍</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// X軸設定</span></span><br><span class=\"line\">xAxis() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .axisBottom(<span class=\"keyword\">this</span>.xScale) <span class=\"comment\">// 下方座標軸函式</span></span><br><span class=\"line\">    .ticks(<span class=\"number\">5</span>) <span class=\"comment\">// 設定座標軸標註點個數 （6~10月，共 5 個標註點）</span></span><br><span class=\"line\">    .tickFormat(<span class=\"function\">(<span class=\"params\">d, i</span>) =&gt;</span> &#123; <span class=\"comment\">// 設定標註點呈現的文字陣列</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.xLabel[i];</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Y軸線性比例縮放</span></span><br><span class=\"line\">yScale() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> Ymin = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> Ymax; <span class=\"comment\">// 找出所有Y值的最大</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> newArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 找出所有Y值的最大數</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.data.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e, i</span>) </span>&#123;</span><br><span class=\"line\">    e.value.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">ev</span>) </span>&#123;</span><br><span class=\"line\">      newArray.push(ev.number);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  Ymax = d3.max(newArray); <span class=\"comment\">// D3找最大值函數</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .scaleLinear() <span class=\"comment\">// 線性縮放函式</span></span><br><span class=\"line\">    .domain([Ymin, Ymax]) <span class=\"comment\">// 設定轉換後的定義域</span></span><br><span class=\"line\">    .range([<span class=\"keyword\">this</span>.chart.height, <span class=\"number\">0</span>]); <span class=\"comment\">// 設定轉換前的範圍</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// Y軸設定</span></span><br><span class=\"line\">yAxis() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d3</span><br><span class=\"line\">    .axisLeft(<span class=\"keyword\">this</span>.yScale) <span class=\"comment\">// 左方座標軸函式</span></span><br><span class=\"line\">    .tickSizeInner(-<span class=\"keyword\">this</span>.chart.height); <span class=\"comment\">// 設定内侧刻度大小</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>内侧刻度 (tickSizeInner) 和外侧刻度 (tickSizeOuter) 不同，内侧刻度是一个个单独的line元素，而外侧刻度则实际上是坐标轴线path的一部分。</p>\n</blockquote>\n<p>在每次隨機資料後，動態插入座標軸。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  randomData() &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"comment\">//清除上一次的坐標軸</span></span><br><span class=\"line\">    <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.chart .axisX'</span>).innerHTML = <span class=\"string\">''</span>;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.chart .axisY'</span>).innerHTML = <span class=\"string\">''</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 插入X軸座標</span></span><br><span class=\"line\">    d3</span><br><span class=\"line\">      .select(<span class=\"string\">\".chart .axisX\"</span>)</span><br><span class=\"line\">      .call(<span class=\"keyword\">this</span>.xAxis);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 插入Y軸座標</span></span><br><span class=\"line\">    d3</span><br><span class=\"line\">      .select(<span class=\"string\">\".chart .axisY\"</span>)</span><br><span class=\"line\">      .call(<span class=\"keyword\">this</span>.yAxis);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"繪製折線\"><a href=\"#繪製折線\" class=\"headerlink\" title=\"繪製折線\"></a>繪製折線</h2><ul>\n<li>HTML</li>\n</ul>\n<p>注意： <code>transition-group</code> 標籤是拿來做折線 <code>CSS</code> 的動畫效果，這邊以效能考量皆採用 <code>CSS</code> 來做動畫，搭配 <code>vue</code> <code>transition</code> 動態加上 <code>class</code> ，並不建議用 <code>JS</code> 的方法去計算動畫。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 折線 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">transition-group</span> <span class=\"attr\">tag</span>=<span class=\"string\">\"g\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"growLine\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">path</span> <span class=\"attr\">class</span>=<span class=\"string\">\"line\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(path, key) in line\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;key&#125;$&#123;path.d&#125;`\"</span> <span class=\"attr\">fill</span>=<span class=\"string\">\"none\"</span> <span class=\"attr\">:stroke</span>=<span class=\"string\">\"path.color\"</span> <span class=\"attr\">:d</span>=<span class=\"string\">\"path.d\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">path</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 動畫 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.growLine-enter-active</span> &#123; <span class=\"comment\">/* 進入動畫：進行中 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all <span class=\"number\">2s</span>;  <span class=\"comment\">/* 動畫時間： 2秒 */</span></span><br><span class=\"line\">  <span class=\"attribute\">stroke-dashoffset</span>: <span class=\"number\">0</span>; <span class=\"comment\">/* 畫線效果 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.growLine-enter</span> &#123; <span class=\"comment\">/* 進入動畫：開始 */</span></span><br><span class=\"line\">  <span class=\"attribute\">stroke-dashoffset</span>: <span class=\"number\">3000</span>; <span class=\"comment\">/* 畫線效果 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 統計圖 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.chartContain</span> &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"selector-class\">.chart</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"selector-class\">.chartWrap</span> &#123;</span><br><span class=\"line\">      ...</span><br><span class=\"line\">      <span class=\"selector-class\">.line</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">stroke-dasharray</span>: <span class=\"number\">3000</span>; <span class=\"comment\">/* 畫線效果 */</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">computed: &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"comment\">// 動態顏色</span></span><br><span class=\"line\">  color() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 使用 D3 內建 10種顏色輪迴的函式</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> d3.scaleOrdinal(d3.schemeCategory10);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// 折線座標、顏色</span></span><br><span class=\"line\">  line() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> line = d3</span><br><span class=\"line\">      .line() <span class=\"comment\">// 折線函式</span></span><br><span class=\"line\">      .x(<span class=\"function\">(<span class=\"params\">d, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 利用尺度運算資料索引，傳回 x 的位置</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.xScale(i + <span class=\"number\">1</span>);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .y(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 利用尺度運算資料的值，傳回 y 的位置</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.yScale(d);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> pathArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.dataArray.forEach(<span class=\"function\">(<span class=\"params\">e, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      pathArray.push(&#123;<span class=\"attr\">d</span>: line(e), <span class=\"attr\">color</span>: <span class=\"keyword\">this</span>.color(i)&#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> pathArray;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"繪製點\"><a href=\"#繪製點\" class=\"headerlink\" title=\"繪製點\"></a>繪製點</h2><ul>\n<li>HTML</li>\n</ul>\n<p>注意： <code>showTooltip</code>, <code>hiddenTooltip</code> 是拿來做滑過物件顯示數據資料的 <code>tooltip</code> 功能，在下一段會提到，這邊先純粹解釋繪製折點的部分。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 點 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">class</span>=<span class=\"string\">\"dot\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(group, key) in dot\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"key\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">transition-group</span> <span class=\"attr\">tag</span>=<span class=\"string\">\"g\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"growDot\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">circle</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(c, k) in group.circle\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"`$&#123;k&#125;$&#123;c.cx&#125;$&#123;c.cy&#125;`\"</span> <span class=\"attr\">:cx</span>=<span class=\"string\">\"c.cx\"</span> <span class=\"attr\">:cy</span>=<span class=\"string\">\"c.cy\"</span> <span class=\"attr\">r</span>=<span class=\"string\">\"5\"</span> <span class=\"attr\">:fill</span>=<span class=\"string\">\"group.color\"</span> <span class=\"attr\">stroke</span>=<span class=\"string\">\"white\"</span> <span class=\"attr\">v-on:mouseover</span>=<span class=\"string\">\"showTooltip(key, k, $event)\"</span> <span class=\"attr\">v-on:mouseout</span>=<span class=\"string\">\"hiddenTooltip\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">circle</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">transition-group</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 動畫 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.growDot-enter-active</span> &#123; <span class=\"comment\">/* 進入動畫：進行中 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all <span class=\"number\">1s</span>;  <span class=\"comment\">/* 動畫時間： 1秒 */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.growDot-enter</span> &#123; <span class=\"comment\">/* 進入動畫：開始 */</span></span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;  <span class=\"comment\">/* 淡入效果 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">scale</span>(0);  <span class=\"comment\">/* 從 0 開始縮放 */</span></span><br><span class=\"line\">  <span class=\"attribute\">transform-origin</span>: <span class=\"number\">50%</span>; <span class=\"comment\">/* 從中心點做縮放 */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">computed: &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 折點座標、顏色</span></span><br><span class=\"line\">  dot() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> circleArray = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.dataArray.forEach(<span class=\"function\">(<span class=\"params\">group, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> circleGroup = [];</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 設置點座標</span></span><br><span class=\"line\">      group.forEach(<span class=\"function\">(<span class=\"params\">number, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        circleGroup.push(&#123;</span><br><span class=\"line\">          cx: <span class=\"keyword\">this</span>.xScale(index + <span class=\"number\">1</span>),</span><br><span class=\"line\">          cy: <span class=\"keyword\">this</span>.yScale(number),</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 同一群的點用相同顏色</span></span><br><span class=\"line\">      circleArray.push(&#123;</span><br><span class=\"line\">        circle: circleGroup,</span><br><span class=\"line\">        color: <span class=\"keyword\">this</span>.color(i)</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> circleArray;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"加上提示資料點的-tooltip\"><a href=\"#加上提示資料點的-tooltip\" class=\"headerlink\" title=\"加上提示資料點的 tooltip\"></a>加上提示資料點的 <code>tooltip</code></h2><ul>\n<li>CSS</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">  <span class=\"selector-class\">.tooltip</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">min-width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgba</span>(0, 0, 0, 0.9);</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: white;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">6px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">text-align</span>: left;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">1.5em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">z-index</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">    &amp;.hidden &#123;</span><br><span class=\"line\">      <span class=\"selector-tag\">visibility</span>: <span class=\"selector-tag\">hidden</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>JS</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  showTooltip(index1, index2, event) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> mouseX = event.clientX + <span class=\"number\">20</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> mouseY = event.clientY;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 設置位置</span></span><br><span class=\"line\">    <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.tooltip'</span>).setAttribute(<span class=\"string\">'style'</span>, <span class=\"string\">`left: <span class=\"subst\">$&#123;mouseX&#125;</span>px; top: <span class=\"subst\">$&#123;mouseY&#125;</span>px;`</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 插入名稱</span></span><br><span class=\"line\">    <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.tooltip .name'</span>).innerHTML = <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.data[index1].name&#125;</span> / <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.data[index1].value[index2].month&#125;</span>`</span>;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.tooltip .value'</span>).innerHTML = <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.data[index1].value[index2].number&#125;</span> 件`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 顯示 tooltip</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hideTooltip = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  hiddenTooltip() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hideTooltip = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>全部畫好的樣子如下圖，可以去 <a href=\"https://github.com/Annilla/d3-practice-vue-svg/blob/master/src/components/LineChart.vue\" target=\"_blank\" rel=\"noopener\">Github</a> 查看完整程式碼喔！也可以在<a href=\"https://annilla.github.io/d3-practice-vue-svg/dist/\">這裡</a>查看折線圖的 Demo，我們下回見～</p>\n<p><img src=\"https://lh3.googleusercontent.com/oLw6AdE59P1sxloMw1941hZ_gx1_48MXNjguaxuIo6RGWaMTnpE4ekH4VqJYekKQmItAf2NXaVp1SerJMIcsu_silW_OvrZ7Iy50P9bEbCRZbckPcWdQZSb1aHVgE30uvSiJz3lKZ5QKYG-0Su5dyAv0RvAIzNob14FMqUjHXnHjOxY28iwfkKyplDlJv2drk80y_Iy2T63mWsSYp3xB-KRO0Z3-jAzyBHQ0rlCkb3ItKdrmvvhB3ETe2YBMAuF2JBIeYo9fZ7h4cOZBhchxxoV2MJETLVxa0C5n26bhUEd537Z6JOG7f8NqAB7-EcL-0qcWmP6Q9SWhILW0_z4V4g5hOoPQHFfpwMLG27dhn3XqiEo_TdVcW6rcJsI07MrW2sYktDt8ldxDvoABq85h0qlXn2G_pnMGMMr-NtCAEZwqEYgmLZ3p042hnQbWS1owffJcM80GN2w4gFvGhx5niXf5_HzLV0tmIy6LJLR9uPt3Kf2ZddAfPEK6UOLiNVcqj6_X9EPA1tltI-4vtjMz5R7XevyLLFYEYHBoT2LA5PWm_unurJYrH3z3Hz04ZrrFOtLjLdav4tj1JdOHO05P6xteD5rMq4GIiK9B5jmVUlFgIV9Th4Ua2sHLKDPnyY8yS__t9JpB_iWGhIO5na0dgvsNex-Z5rC2=w670-h744-no\" alt=\"折線圖完成\" title=\"折線圖\"></p>\n<hr>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><p><a href=\"https://github.com/xswei/d3js_doc/blob/master/API_Reference/d3-axis/README.md#axis_tickSizeInner\" target=\"_blank\" rel=\"noopener\">D3 中文文件 - tickSizeInner</a></p>\n</li>\n<li><p><a href=\"https://vuejs.org/v2/guide/transitions.html#ad\" target=\"_blank\" rel=\"noopener\">Vue Transition</a></p>\n</li>\n</ul>"},{"title":"D3 v4 with Vue - SVG VS CANVAS","thumbnailImage":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no","coverMeta":"out","date":"2018-06-16T16:00:00.000Z","updated":"2018-06-16T16:00:00.000Z","_content":"\n本篇主要是針對 `SVG` 和 `CANVAS` 兩種繪圖方式作比較，並整理各自的優勢。\n\n<!--more-->\n\n***\n## SVG & CANVAS 繪製原理\n\n### SVG\n\n> 用 D3 把算好的陣列，呈現在 SVG 的 DOM 上，讓 Vue 來做 rendor 的動作，最後使用 CSS transition 做動畫。\n\n![SVG Rendor DOM](https://lh3.googleusercontent.com/ZAzSTKoRMQE98bOg3uj9YplXa5AFTgiUR_HxMxa5mFBiEdFs6KNZwU3tgQxrj9R_xxCp2kpb-gLAhDfv1B3el8dULEnnW-YbpGNrZMeVFXiQZjb2xDDe8L2wmgBW36te5_hXcbN3aRdSi3W9TkVkVg7o7V_l6cbtOtm3N_D-kukmkfvQtvPItjI4K8i0jL1XMXbtlqjyDekrjwtrV8BGfJOB2UdWjmmQW79QadmcV3i9T0l7t7OAmZZk4LOwDz02PaZ4xZGglt40m4PVKeBb1181lnPhGp1qcTTLDzoaFyLsGwBfz2Dy_rSpehWT6Y3eUdIMFsUeqmyXCA4A5Q0iAfb8LuJ-36nP8p8DmKjicVfESglz7UY1mjZhV3n1F1VPOWOcVCQSzfEZMi0aYXLqdNMKiW_cjv4W17rPLBpSkUFWJKlXPFDxNOFi7U9u7pKcBIgVN6xaFx1amUnMaWA-boDEzjTeg-8QPl4Gsvp8-nQSkidiih4VEBVfXxnOToWRFYcNjPFswqq9MBdEnyg81b9IkBLGLtf3vqAbsc7tB17EGODRoprk4-kjzZrl2pygkb8DIRzIKhkE0d8gdPr7Yp0hntBjr7oUYVPq2hRqQEya7NE0NIWV6X2VEGOJQTc8BvZXs0wvYWaIUroEr8Ema9dAo1P_tsqs=w1024-h581-no \"SVG\")\n\n### CANVAS\n\n>  Canvas 則是用 \"命令\" 的方式作圖，JS 就如同一隻虛擬的筆，下指令一筆一畫把圖畫出來。所以，畫出來的東西沒有實體 DOM。動畫也是靠 JS 命令，每段時間清除畫布，不斷地做重新繪製。\n\n![JS Draw CANVAS](https://lh3.googleusercontent.com/4IZuljnySSEW7hG-zDIvL-Z8lNLYyLKrxOyiLdmAx_tRjgS_7M2_skX8MMzcm4YfhmMINLCzJDZsYrtojmRH8BySK7TdLOfdheBt9Rta_4S7EI1GTaVyR-_f83E1KHGNMFFzwezeDolTdEq1ULmEIKGxKTldAQ1wUsOjYqhz3Vhj7s27EoYOnIiAdBYiW46dAq4veUAV8wNsQ6zA5OvOJLAJh_PBZrDaV--jneUAsoOWBw2OhWZh7nKAvd0gcKedQ1FZJMj9Cbr51YQ1Hfg0QHhgLgucW1lTS8EwVmmIoycBjADwhaU7BOCH5LRbAu8EYAQJA4hQQ8UQLmmpCeAUAhIsd06ugBU6dFDuXZMCNSfb9sjQDPORauW_SoMK0gkMsS6I5fqJDBFTIXZNXJnLsZ-PedIYbAOIvxJY-jgRHUD4UpzlwM5rp2br8hEUBR7EIVDlRb2Ke56qqJHcYLd-tXOH1KT-7qdFm-rsMYRxpY_Fr_wbMlF5e7ZTMSFguMqwCCsqPLGgnjS1MmrPtNy6jy4JKzko9udGwYPykXmjV08ogFEC9gMpIBpJA3iVYK90V3Gce0XLFWAi_0t1G11llFAoGscFxL9VKVfLg7W-RzDCwapq7wcv7XakRhA-E0Q4yDWR8UNybMOkFb1EDI3WdD51iGa0fAEe=w1024-h615-no \"CANVAS\")\n\n***\n## CAN I USE?\n\n### SVG\n\n![CAN I USE SVG](https://lh3.googleusercontent.com/CDfwxp147t0DvInz8711mtyMUaMRmdTjjk8CoIHKylKWYmMdMBGNlUHPgKkT_ucfVuUrGlX6VHZMSC3ojSq187lSIw8XRln_tDXPMCFoEOr9hf4E4bBpwJKpZRPieJCCZf8GBoAYU4ri4-0HCE7wA0IcJ90RWrlZupjt06y49PaMEDUKjgIISHcaJUiKqRqgzwja1Ko8D-mdjYcGlF6RyUy9-juWjscLnAH9uCJHOtqI1kJGTJ0ZjZXVJReUJdObYGP151lLu8vewoSKOrwzBRYhkyv86aysGASJCYpcJGQpf7LNFZ8O09m6sdNCLf26um8zzs0FD-SIXrB47PgdCclmrUTH-LD3M0mtZauA32vrsuiSTjJZS0FPvs6mvVLX99xQZXVAiAr_6B6atSe5L23oGj5ORwleyh04vQncaVtBOciusq0evUPERCq0-v39ySLRYAeowROsu2MEBuFA_-AVJwyouNe99erpG7P7eHFq2em-JkAzOHAb7elRv0Ogmx9moM3sqHRbJ9pc4qg1cwaiMUtQ9aUZFxEsdJ2ZFBq1xAw4CNN788ZQ1a04749h65-syAzsaZsnF_RhirutLugQz2X3K43VwBOWDMcAbsuo6jcZQE6ym0pL8dbD5b9Ev1I5pgnpmfd1iGvyi6JYb6fS5VHFCnVk=w960-h720-no \"SVG\")\n\n### CANVAS\n\n![CAN I USE CANVAS](https://lh3.googleusercontent.com/zyGQFcsmzVd1aVm5n_qVI79C4BJAAzKjgHjN7T3hoQRt70JYI6Ja8vdw1uPHrPZv-SUOJSjJ_HpbcCLNtHLw6oj8N64XvpEfIvVvGrTeeIfuobhj1x8bRLUCeModLRttvBAksQ1QDIpF3p7Rh4TlCJ2D2hObN0Ij93AIqStJTMl4B2SDIIWnVioj5bHzhRTDWh6u7vjHiCMBG7rm2jcN8LxYtb1SOxlwbTwv9iazoWV3hxZKHkht_8jtm3WOHe1n3ogrfbVWkZHDGr9hG8DZf4brS8N6LeU5o6Hri7EJQ0ZZRV8pxiYcLit3B0NBwf2EyTrMjhYvTQSfwSYnc5hRMb0ZJr3-jzDPYviDiF01eDRHsFmGmNPYqmhDwCFa5KW5I1VpYHdntlPzVPXnMWuvYZME5W-pGmWeXmjeaqF1gEg1TU97YkYlD8QukKF5sPr4aqMHXH7lh442SPlE-u5S20xFHz7SKA8tY-EM-v8mBAmydly7QAW5Fu1sz4F84_U9jbDeQiG9ZTn3jsz3EVieCC1RrAQiS58nyf8P4ZiAP1dlnE3megojSwbTXN_I61Ezn2OFiihhDwO_PAJzYLWfcY38dIb5JKsL8-WhMGmwD4oFGPneJI0VFrfa7T0U1YoXBgZ38SNYDs-EOm3ZyRK-lfmbEaqqEWHy=w960-h720-no \"CANVAS\")\n\n***\n## 程式碼長度\n\n### SVG\n\n![SVG 程式碼長度](https://lh3.googleusercontent.com/5FlHfEuI0Zj2dAku5ef6m0wK7d05fL3MD-dXLnHXxl2lC9JmQdwBvZfvRlJj99aBbOqx3crHAZtRo7GR-fv4wSTrCkpS6y7vQ26wFGonRPx-T5svTRBytT-WIX0wNIgPwg7jISTHadrtgQuXiJF4hfG5OJSYSTOMIZlbemGKoDUPhUpuzqfXpOqMqBalapSbjK2Jwseww_tS6MSdiOVHT09-q8IpNnZ7abZVGtiVS6gQno0rleM9vrJpknaj1VZp3RthIhR4xj81ooqxqkef2zh41lm1hSUjMxf-q9KvNbeg2-YV0okHqaPYJ-1ItJWnaK5faqoSJAoXqXQCWNwG76WbPWFiA4OPXtPdY9NN0VCjRu6sM5xGOQBVmIJowC2IN9qmGktE69O_c5nCWZZdpLJQmT-1EmTMfOFJFaJsenANnJ24F6SqtczDOEGkau6NzJfTKXh92jv28L2QXLK4qp7dtiXucI3XOKev2wmBn1HjaTVhr_BhjgEo78BPMIEOh_8q-lmJ4IG_5tRxxOB_vAvGoDm8ZtXKfaOYf5_ThU-tPADED6-VCFaaDOqvYOt-tawByGrhI9Z9yHP7nX4ITS2Ix6u6YJuVQQtGM1pSf0nradpXkev-woG5BhsChl8nfwp8u4b-ug5Q9yuxp8ImElUBp3REZUrr=w960-h720-no \"SVG\")\n\n> SVG 399 行 (Whoa! Excellent ~)\n\n### CANVAS\n\n![CANVAS 程式碼長度](https://lh3.googleusercontent.com/btBkjLK8sxI6shanpLGKFPvW-nTtQ53-0C_--L3PjPHaOuzBzYMdMBqnLff8wLIf88w6UmnvHQqTR84t4HbTJQXwn9iZo0uNc-gOxPZIkdsa9t3N1tJl_P5n25VgjE1v1ODo9fzD7XWzRc8-iS3-JHMUCrE8-CvFgtxWl36MjXs2zkBd9MFHD_quAdxFZP7V2QvStqogunAWmBFGlNS9oEWP_fEJNak87zSTDMHpXd0JhO8aR_HHvlmiL0nVoyPvH9MiLc0a9lPXSnC5qGshEOIWvPodsZDFTYZm5qIPD-iuz6wWK9-jQ7OVNzhThmg6DhACMxSUq0huiwOUV1y7eBdMFN_U-Qp__H8SFFhBNG0Lv5QWRY-3poipGph0ug_jXlYeUFOiMdOMV28BM8CQ8LHjL8wQCzaF-IIvFHggmfnuGET9RY662S0Nt6pBUzP7Gnqsa6TzVm01x2GHqBIQMfXSckbwQ05-Yn7pIjI_ghFmecl8oyu3m7nMAlXUzFn6M_hZJEapy_9bS4eDjLqD_O70EqqWum1NTukqxDfs6WJ5lcpUA1JMwRNpDuR1FUnA538L7E2yZDEqUQ6i5jQMsmhvWec04eNIBWxmhmEOagBtq-HzHALg1a5hrhCLEcQbmzQcmb055LiQXEJR2x1vmAyHLhAzGD_s=w960-h720-no \"CANVAS\")\n\n> CANVAS 603 行 (Oh-no!! So Terrible ~)\n\n***\n## 執行效能\n\n### SVG\n![SVG 執行效能](https://lh3.googleusercontent.com/I9kGOm_f_okaPyeuNUQmRG5YQUtXwDBEyqhKVnlid_pZzXgT9k5c0mn5nqLFHC3DRblnLGR7GIKg-P_lpAtlXMeUnQMT0ehH_eytcbHA-0Lw6RGfizOvGpLSkqENJT6wiElTEOJzmbttEH-coE_TiIfMZ2ySwFkJJKbJHAl1yUrY3u4NvPjIe531rvGL0V5jt828afr6XI4c1no70wsKXlIIJIZA5zfTodlNsyZ82e1125mhD1J6WUcAJqHV_wO-do3Y-3cS2xIZlSKqvII8ufnS_curc4nvKpXq28w5PBG81BfVDiWiHzMHEaxMKJFBthdglowvIa3ZNgv_M0rnBnfmoTQtb0TDq-QPCb5P_Ox6PSeeipBcGQxuufBBKt7H_yOOEjvVvfpD7CIpLcIapVGmNhYSoQcnw9luB86QM5X-F72P3arl_x9YpISU3lkkFXceQMa67NuoTsKG_HffQ1ZVNMhLSubKF6vapLMZ0MlKfuoXm4GtwUCUGbNgRLIwD19Gcbl4CuK0_HjFgA0Z_vypGieC5Vl_qR1p-A6eX14l0CB1i5jCfs24PaIdJICV__0tJnKcJ1G5I6DwDgzfGC9sJiXLazgzpeuI-Yl6R9mmPJnGVME2k_jHCBpkPiiFsPPlhKPF5TKDZuTkz_1qRiqXND_3dIc0=w960-h720-no \"SVG\")\n\n> SVG 364 ms\n\n### CANVAS\n\n![CANVAS 執行效能](https://lh3.googleusercontent.com/H4jEF4F2vXB7rk767aivRFvdOcEF3CfR1xRc-urjzTV_xJBfxe3ARAa-Xv8PKcIa6ykm37iMIsTf__g_PKY8psG5r_cyNbPW1IhAs4kUZ4yF8tMzLymudPt-p4X4PVav3QWkANhWIl25_q1VwXm-NnoU9ncn4JEiHiREKoMAJiGDnPMV_qgFCrW_CLa78QYUA2jSOVFJ-e6v7A5fALJV_2uvmZNPO5f3Iuc0l1pbJP1zjp4IfdBKA8FadFek2ztoUiAfydWjruU0VT8mAZCJs9Z4PPPBfCxEcAHF8pB44IaYppDO47De1kUAhW2V_vAvKegvjZnUtuX2aSDpDIozyhYFd2an4bE4w00g-pjvTfTGDRtksOr7LYUJqsmCJzCQ1RUBx_2xve07c_Fvb5wjcXkQWu_HVZ3CrciipJ8BnGar6NIKnXnYws-qvcA8uh_8zVafoG57F1f-yMyNzrrJnbMx5cCTfiXFNOQ5--8fPsmcfWLoZ9ASXnv-kbACKwUGNGSsDpP3VvYUVN1pQ0lmq-dXtGcECDtLf6s7yYC5D77noLAXd9GSwH3V5OWdNgw2pIYTKLmlX76eIukbc5CcbgWr1UbUfOLKAZz97b-d122mkf6V9j6eDmCQVWRfZW0T1OeIKffA9yDn5UrZ_R_s6HBweS1SB4O0=w960-h720-no \"CANVAS\")\n\n> CANVAS 177 ms\n\n***\n## 整體分析\n\n![整體分析](https://lh3.googleusercontent.com/TQ1cY8cfzysPs5_lYNwNaJ0dLSSWl0AuWDw6FY6gR43sjv7rTt3E0HPyMj2nJxON75srHT-LziWsBeaOq6wASwN67opUfA5H1rTCziwLryhY7gYpZcgxpj-bjYxRuq4h4iLD2ggN36fOhg36HOMMMdrFkKrtpVGgWhEJdt6HkaKWBHcRuza_tss33mzktR9F1H5IDKbwwVomkz7OFsTErvI_lnWy1Jk7ylrjkbcEOa16WYV6B1YRHFo2h_hU7KCOZF3FU3LY16Mdo8chcVi6KcjfZcxoDj3NleQbpePAi9eGpqy-yCh8jrPAhi5_kQEBGlaJBmLDnC414DNzT9JKIPa-nLEsrDPHWiKG1Pqu24R03o6f0GLfNWy55Vg0ndzR-7OSGl2e347cN1bz0GG7yfl_dMZU23EygFK97e32VFJgktzF9zzuMlsK5s5qJS87knYJnNPIObrgbzET95l3ybsivoI7jIgwXy2TH74UpA6P3H1g5Yk-NPoBoFyGPaXwCvLK-_geMy1JdEIYtwwmJPxMl8AN-1qUSglW5A3keHkXd6kErk2b8nU5tFahYD9PzUf0RMs2DBCaaYcMc5aPLE6hZDuMETmThioOdqVQt7KF0brVzd-OhazWei-Pg2Z9fAjj5d9VDfArg7EIroxOxgX4_UWrRNnk=w960-h720-no \"SVG VS CANVAS\")\n\n> 整體來說，像工業 4.0 這種大數據的資料\b使用 CANVAS 來繪製會是最恰當的（速度才不會卡卡）\b\b\b。相反的，如果是簡單的數據圖，使用 SVG\b\b 會比較容易開發和維護。\n\n\b本篇就分析到此，下一篇會繼續解說 CANVAS 如何繪製其他種類（ex: 長條圖、圓餅圖...）的數據圖。\n","source":"_posts/D3/D3-v4-with-Vue-SVG-VS-CANVAS.md","raw":"---\ntitle: D3 v4 with Vue - SVG VS CANVAS\ncategories:\n  - D3\nthumbnailImage: https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/-eOwVjzN6KMfzEVll-unJCaKBes1MALCdB9jxG6e8lvWovjeLtdbf2NQoH0DKAM9SS12sUeOnOlQ5Q8hTMAexo9N5jIS4P2S16RDrrY9WQziVA8E-0cPxcpldO6YgU2MKg64Tn2pXchVxryU_w1QjaYaUk4P17cRXHc4XfQEp4LViItsu2Ze2Uy5llcYhUtubWfmMpAC0FN54OWYb1sY-jgQ_ps2V8GXKPmrjCXFFX_zXLEHVuyZznY4vXYyLXOVkydprDNQojOcUyok6nG-4DAgA35W3v9BazdoiW1iNU97FJwr9mBvuvUAmS-2U0lPBa34-B-Lx-5736rwQXfqOY6gQIBeusZHjFgQR_3ByxJz5KuLLOVsA0uauyYxS2jIBMFFP_d6xve19P0dNAVP5tC7Zj8S0g43Rbl9S9h8eXyjaxUVeYAG1mZibk6GEkqrawGDOXWTITTjkRS2Buhl6YNcuSxezcm_IR4NZCcsgXE3VtEeYhGpIaoaS-cMemaqEKi8F7SYtKZQvH_SM6SYakk6J0aqik0gNRTyxA0nvDlVp2ohNsMdRWFqhRJ5RfgOVfGIFkohL2DnhgHRntAGKHqqnas1uKk8tS040VoxZuYvVp24N0N9OfwnYmmMQYHh_COOdYkItMsHzhAX53dpqgyGbeyq5zL3=w1024-h551-no\ncoverMeta: out\ntags: [D3, Vue, SVG, CANVAS]\ndate: 2018/06/17\nupdated: 2018/06/17\n---\n\n本篇主要是針對 `SVG` 和 `CANVAS` 兩種繪圖方式作比較，並整理各自的優勢。\n\n<!--more-->\n\n***\n## SVG & CANVAS 繪製原理\n\n### SVG\n\n> 用 D3 把算好的陣列，呈現在 SVG 的 DOM 上，讓 Vue 來做 rendor 的動作，最後使用 CSS transition 做動畫。\n\n![SVG Rendor DOM](https://lh3.googleusercontent.com/ZAzSTKoRMQE98bOg3uj9YplXa5AFTgiUR_HxMxa5mFBiEdFs6KNZwU3tgQxrj9R_xxCp2kpb-gLAhDfv1B3el8dULEnnW-YbpGNrZMeVFXiQZjb2xDDe8L2wmgBW36te5_hXcbN3aRdSi3W9TkVkVg7o7V_l6cbtOtm3N_D-kukmkfvQtvPItjI4K8i0jL1XMXbtlqjyDekrjwtrV8BGfJOB2UdWjmmQW79QadmcV3i9T0l7t7OAmZZk4LOwDz02PaZ4xZGglt40m4PVKeBb1181lnPhGp1qcTTLDzoaFyLsGwBfz2Dy_rSpehWT6Y3eUdIMFsUeqmyXCA4A5Q0iAfb8LuJ-36nP8p8DmKjicVfESglz7UY1mjZhV3n1F1VPOWOcVCQSzfEZMi0aYXLqdNMKiW_cjv4W17rPLBpSkUFWJKlXPFDxNOFi7U9u7pKcBIgVN6xaFx1amUnMaWA-boDEzjTeg-8QPl4Gsvp8-nQSkidiih4VEBVfXxnOToWRFYcNjPFswqq9MBdEnyg81b9IkBLGLtf3vqAbsc7tB17EGODRoprk4-kjzZrl2pygkb8DIRzIKhkE0d8gdPr7Yp0hntBjr7oUYVPq2hRqQEya7NE0NIWV6X2VEGOJQTc8BvZXs0wvYWaIUroEr8Ema9dAo1P_tsqs=w1024-h581-no \"SVG\")\n\n### CANVAS\n\n>  Canvas 則是用 \"命令\" 的方式作圖，JS 就如同一隻虛擬的筆，下指令一筆一畫把圖畫出來。所以，畫出來的東西沒有實體 DOM。動畫也是靠 JS 命令，每段時間清除畫布，不斷地做重新繪製。\n\n![JS Draw CANVAS](https://lh3.googleusercontent.com/4IZuljnySSEW7hG-zDIvL-Z8lNLYyLKrxOyiLdmAx_tRjgS_7M2_skX8MMzcm4YfhmMINLCzJDZsYrtojmRH8BySK7TdLOfdheBt9Rta_4S7EI1GTaVyR-_f83E1KHGNMFFzwezeDolTdEq1ULmEIKGxKTldAQ1wUsOjYqhz3Vhj7s27EoYOnIiAdBYiW46dAq4veUAV8wNsQ6zA5OvOJLAJh_PBZrDaV--jneUAsoOWBw2OhWZh7nKAvd0gcKedQ1FZJMj9Cbr51YQ1Hfg0QHhgLgucW1lTS8EwVmmIoycBjADwhaU7BOCH5LRbAu8EYAQJA4hQQ8UQLmmpCeAUAhIsd06ugBU6dFDuXZMCNSfb9sjQDPORauW_SoMK0gkMsS6I5fqJDBFTIXZNXJnLsZ-PedIYbAOIvxJY-jgRHUD4UpzlwM5rp2br8hEUBR7EIVDlRb2Ke56qqJHcYLd-tXOH1KT-7qdFm-rsMYRxpY_Fr_wbMlF5e7ZTMSFguMqwCCsqPLGgnjS1MmrPtNy6jy4JKzko9udGwYPykXmjV08ogFEC9gMpIBpJA3iVYK90V3Gce0XLFWAi_0t1G11llFAoGscFxL9VKVfLg7W-RzDCwapq7wcv7XakRhA-E0Q4yDWR8UNybMOkFb1EDI3WdD51iGa0fAEe=w1024-h615-no \"CANVAS\")\n\n***\n## CAN I USE?\n\n### SVG\n\n![CAN I USE SVG](https://lh3.googleusercontent.com/CDfwxp147t0DvInz8711mtyMUaMRmdTjjk8CoIHKylKWYmMdMBGNlUHPgKkT_ucfVuUrGlX6VHZMSC3ojSq187lSIw8XRln_tDXPMCFoEOr9hf4E4bBpwJKpZRPieJCCZf8GBoAYU4ri4-0HCE7wA0IcJ90RWrlZupjt06y49PaMEDUKjgIISHcaJUiKqRqgzwja1Ko8D-mdjYcGlF6RyUy9-juWjscLnAH9uCJHOtqI1kJGTJ0ZjZXVJReUJdObYGP151lLu8vewoSKOrwzBRYhkyv86aysGASJCYpcJGQpf7LNFZ8O09m6sdNCLf26um8zzs0FD-SIXrB47PgdCclmrUTH-LD3M0mtZauA32vrsuiSTjJZS0FPvs6mvVLX99xQZXVAiAr_6B6atSe5L23oGj5ORwleyh04vQncaVtBOciusq0evUPERCq0-v39ySLRYAeowROsu2MEBuFA_-AVJwyouNe99erpG7P7eHFq2em-JkAzOHAb7elRv0Ogmx9moM3sqHRbJ9pc4qg1cwaiMUtQ9aUZFxEsdJ2ZFBq1xAw4CNN788ZQ1a04749h65-syAzsaZsnF_RhirutLugQz2X3K43VwBOWDMcAbsuo6jcZQE6ym0pL8dbD5b9Ev1I5pgnpmfd1iGvyi6JYb6fS5VHFCnVk=w960-h720-no \"SVG\")\n\n### CANVAS\n\n![CAN I USE CANVAS](https://lh3.googleusercontent.com/zyGQFcsmzVd1aVm5n_qVI79C4BJAAzKjgHjN7T3hoQRt70JYI6Ja8vdw1uPHrPZv-SUOJSjJ_HpbcCLNtHLw6oj8N64XvpEfIvVvGrTeeIfuobhj1x8bRLUCeModLRttvBAksQ1QDIpF3p7Rh4TlCJ2D2hObN0Ij93AIqStJTMl4B2SDIIWnVioj5bHzhRTDWh6u7vjHiCMBG7rm2jcN8LxYtb1SOxlwbTwv9iazoWV3hxZKHkht_8jtm3WOHe1n3ogrfbVWkZHDGr9hG8DZf4brS8N6LeU5o6Hri7EJQ0ZZRV8pxiYcLit3B0NBwf2EyTrMjhYvTQSfwSYnc5hRMb0ZJr3-jzDPYviDiF01eDRHsFmGmNPYqmhDwCFa5KW5I1VpYHdntlPzVPXnMWuvYZME5W-pGmWeXmjeaqF1gEg1TU97YkYlD8QukKF5sPr4aqMHXH7lh442SPlE-u5S20xFHz7SKA8tY-EM-v8mBAmydly7QAW5Fu1sz4F84_U9jbDeQiG9ZTn3jsz3EVieCC1RrAQiS58nyf8P4ZiAP1dlnE3megojSwbTXN_I61Ezn2OFiihhDwO_PAJzYLWfcY38dIb5JKsL8-WhMGmwD4oFGPneJI0VFrfa7T0U1YoXBgZ38SNYDs-EOm3ZyRK-lfmbEaqqEWHy=w960-h720-no \"CANVAS\")\n\n***\n## 程式碼長度\n\n### SVG\n\n![SVG 程式碼長度](https://lh3.googleusercontent.com/5FlHfEuI0Zj2dAku5ef6m0wK7d05fL3MD-dXLnHXxl2lC9JmQdwBvZfvRlJj99aBbOqx3crHAZtRo7GR-fv4wSTrCkpS6y7vQ26wFGonRPx-T5svTRBytT-WIX0wNIgPwg7jISTHadrtgQuXiJF4hfG5OJSYSTOMIZlbemGKoDUPhUpuzqfXpOqMqBalapSbjK2Jwseww_tS6MSdiOVHT09-q8IpNnZ7abZVGtiVS6gQno0rleM9vrJpknaj1VZp3RthIhR4xj81ooqxqkef2zh41lm1hSUjMxf-q9KvNbeg2-YV0okHqaPYJ-1ItJWnaK5faqoSJAoXqXQCWNwG76WbPWFiA4OPXtPdY9NN0VCjRu6sM5xGOQBVmIJowC2IN9qmGktE69O_c5nCWZZdpLJQmT-1EmTMfOFJFaJsenANnJ24F6SqtczDOEGkau6NzJfTKXh92jv28L2QXLK4qp7dtiXucI3XOKev2wmBn1HjaTVhr_BhjgEo78BPMIEOh_8q-lmJ4IG_5tRxxOB_vAvGoDm8ZtXKfaOYf5_ThU-tPADED6-VCFaaDOqvYOt-tawByGrhI9Z9yHP7nX4ITS2Ix6u6YJuVQQtGM1pSf0nradpXkev-woG5BhsChl8nfwp8u4b-ug5Q9yuxp8ImElUBp3REZUrr=w960-h720-no \"SVG\")\n\n> SVG 399 行 (Whoa! Excellent ~)\n\n### CANVAS\n\n![CANVAS 程式碼長度](https://lh3.googleusercontent.com/btBkjLK8sxI6shanpLGKFPvW-nTtQ53-0C_--L3PjPHaOuzBzYMdMBqnLff8wLIf88w6UmnvHQqTR84t4HbTJQXwn9iZo0uNc-gOxPZIkdsa9t3N1tJl_P5n25VgjE1v1ODo9fzD7XWzRc8-iS3-JHMUCrE8-CvFgtxWl36MjXs2zkBd9MFHD_quAdxFZP7V2QvStqogunAWmBFGlNS9oEWP_fEJNak87zSTDMHpXd0JhO8aR_HHvlmiL0nVoyPvH9MiLc0a9lPXSnC5qGshEOIWvPodsZDFTYZm5qIPD-iuz6wWK9-jQ7OVNzhThmg6DhACMxSUq0huiwOUV1y7eBdMFN_U-Qp__H8SFFhBNG0Lv5QWRY-3poipGph0ug_jXlYeUFOiMdOMV28BM8CQ8LHjL8wQCzaF-IIvFHggmfnuGET9RY662S0Nt6pBUzP7Gnqsa6TzVm01x2GHqBIQMfXSckbwQ05-Yn7pIjI_ghFmecl8oyu3m7nMAlXUzFn6M_hZJEapy_9bS4eDjLqD_O70EqqWum1NTukqxDfs6WJ5lcpUA1JMwRNpDuR1FUnA538L7E2yZDEqUQ6i5jQMsmhvWec04eNIBWxmhmEOagBtq-HzHALg1a5hrhCLEcQbmzQcmb055LiQXEJR2x1vmAyHLhAzGD_s=w960-h720-no \"CANVAS\")\n\n> CANVAS 603 行 (Oh-no!! So Terrible ~)\n\n***\n## 執行效能\n\n### SVG\n![SVG 執行效能](https://lh3.googleusercontent.com/I9kGOm_f_okaPyeuNUQmRG5YQUtXwDBEyqhKVnlid_pZzXgT9k5c0mn5nqLFHC3DRblnLGR7GIKg-P_lpAtlXMeUnQMT0ehH_eytcbHA-0Lw6RGfizOvGpLSkqENJT6wiElTEOJzmbttEH-coE_TiIfMZ2ySwFkJJKbJHAl1yUrY3u4NvPjIe531rvGL0V5jt828afr6XI4c1no70wsKXlIIJIZA5zfTodlNsyZ82e1125mhD1J6WUcAJqHV_wO-do3Y-3cS2xIZlSKqvII8ufnS_curc4nvKpXq28w5PBG81BfVDiWiHzMHEaxMKJFBthdglowvIa3ZNgv_M0rnBnfmoTQtb0TDq-QPCb5P_Ox6PSeeipBcGQxuufBBKt7H_yOOEjvVvfpD7CIpLcIapVGmNhYSoQcnw9luB86QM5X-F72P3arl_x9YpISU3lkkFXceQMa67NuoTsKG_HffQ1ZVNMhLSubKF6vapLMZ0MlKfuoXm4GtwUCUGbNgRLIwD19Gcbl4CuK0_HjFgA0Z_vypGieC5Vl_qR1p-A6eX14l0CB1i5jCfs24PaIdJICV__0tJnKcJ1G5I6DwDgzfGC9sJiXLazgzpeuI-Yl6R9mmPJnGVME2k_jHCBpkPiiFsPPlhKPF5TKDZuTkz_1qRiqXND_3dIc0=w960-h720-no \"SVG\")\n\n> SVG 364 ms\n\n### CANVAS\n\n![CANVAS 執行效能](https://lh3.googleusercontent.com/H4jEF4F2vXB7rk767aivRFvdOcEF3CfR1xRc-urjzTV_xJBfxe3ARAa-Xv8PKcIa6ykm37iMIsTf__g_PKY8psG5r_cyNbPW1IhAs4kUZ4yF8tMzLymudPt-p4X4PVav3QWkANhWIl25_q1VwXm-NnoU9ncn4JEiHiREKoMAJiGDnPMV_qgFCrW_CLa78QYUA2jSOVFJ-e6v7A5fALJV_2uvmZNPO5f3Iuc0l1pbJP1zjp4IfdBKA8FadFek2ztoUiAfydWjruU0VT8mAZCJs9Z4PPPBfCxEcAHF8pB44IaYppDO47De1kUAhW2V_vAvKegvjZnUtuX2aSDpDIozyhYFd2an4bE4w00g-pjvTfTGDRtksOr7LYUJqsmCJzCQ1RUBx_2xve07c_Fvb5wjcXkQWu_HVZ3CrciipJ8BnGar6NIKnXnYws-qvcA8uh_8zVafoG57F1f-yMyNzrrJnbMx5cCTfiXFNOQ5--8fPsmcfWLoZ9ASXnv-kbACKwUGNGSsDpP3VvYUVN1pQ0lmq-dXtGcECDtLf6s7yYC5D77noLAXd9GSwH3V5OWdNgw2pIYTKLmlX76eIukbc5CcbgWr1UbUfOLKAZz97b-d122mkf6V9j6eDmCQVWRfZW0T1OeIKffA9yDn5UrZ_R_s6HBweS1SB4O0=w960-h720-no \"CANVAS\")\n\n> CANVAS 177 ms\n\n***\n## 整體分析\n\n![整體分析](https://lh3.googleusercontent.com/TQ1cY8cfzysPs5_lYNwNaJ0dLSSWl0AuWDw6FY6gR43sjv7rTt3E0HPyMj2nJxON75srHT-LziWsBeaOq6wASwN67opUfA5H1rTCziwLryhY7gYpZcgxpj-bjYxRuq4h4iLD2ggN36fOhg36HOMMMdrFkKrtpVGgWhEJdt6HkaKWBHcRuza_tss33mzktR9F1H5IDKbwwVomkz7OFsTErvI_lnWy1Jk7ylrjkbcEOa16WYV6B1YRHFo2h_hU7KCOZF3FU3LY16Mdo8chcVi6KcjfZcxoDj3NleQbpePAi9eGpqy-yCh8jrPAhi5_kQEBGlaJBmLDnC414DNzT9JKIPa-nLEsrDPHWiKG1Pqu24R03o6f0GLfNWy55Vg0ndzR-7OSGl2e347cN1bz0GG7yfl_dMZU23EygFK97e32VFJgktzF9zzuMlsK5s5qJS87knYJnNPIObrgbzET95l3ybsivoI7jIgwXy2TH74UpA6P3H1g5Yk-NPoBoFyGPaXwCvLK-_geMy1JdEIYtwwmJPxMl8AN-1qUSglW5A3keHkXd6kErk2b8nU5tFahYD9PzUf0RMs2DBCaaYcMc5aPLE6hZDuMETmThioOdqVQt7KF0brVzd-OhazWei-Pg2Z9fAjj5d9VDfArg7EIroxOxgX4_UWrRNnk=w960-h720-no \"SVG VS CANVAS\")\n\n> 整體來說，像工業 4.0 這種大數據的資料\b使用 CANVAS 來繪製會是最恰當的（速度才不會卡卡）\b\b\b。相反的，如果是簡單的數據圖，使用 SVG\b\b 會比較容易開發和維護。\n\n\b本篇就分析到此，下一篇會繼續解說 CANVAS 如何繪製其他種類（ex: 長條圖、圓餅圖...）的數據圖。\n","slug":"D3/D3-v4-with-Vue-SVG-VS-CANVAS","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74j000ttudh5nlb9kcu","content":"<p>本篇主要是針對 <code>SVG</code> 和 <code>CANVAS</code> 兩種繪圖方式作比較，並整理各自的優勢。</p>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"SVG-amp-CANVAS-繪製原理\"><a href=\"#SVG-amp-CANVAS-繪製原理\" class=\"headerlink\" title=\"SVG &amp; CANVAS 繪製原理\"></a>SVG &amp; CANVAS 繪製原理</h2><h3 id=\"SVG\"><a href=\"#SVG\" class=\"headerlink\" title=\"SVG\"></a>SVG</h3><blockquote>\n<p>用 D3 把算好的陣列，呈現在 SVG 的 DOM 上，讓 Vue 來做 rendor 的動作，最後使用 CSS transition 做動畫。</p>\n</blockquote>\n<p><img src=\"https://lh3.googleusercontent.com/ZAzSTKoRMQE98bOg3uj9YplXa5AFTgiUR_HxMxa5mFBiEdFs6KNZwU3tgQxrj9R_xxCp2kpb-gLAhDfv1B3el8dULEnnW-YbpGNrZMeVFXiQZjb2xDDe8L2wmgBW36te5_hXcbN3aRdSi3W9TkVkVg7o7V_l6cbtOtm3N_D-kukmkfvQtvPItjI4K8i0jL1XMXbtlqjyDekrjwtrV8BGfJOB2UdWjmmQW79QadmcV3i9T0l7t7OAmZZk4LOwDz02PaZ4xZGglt40m4PVKeBb1181lnPhGp1qcTTLDzoaFyLsGwBfz2Dy_rSpehWT6Y3eUdIMFsUeqmyXCA4A5Q0iAfb8LuJ-36nP8p8DmKjicVfESglz7UY1mjZhV3n1F1VPOWOcVCQSzfEZMi0aYXLqdNMKiW_cjv4W17rPLBpSkUFWJKlXPFDxNOFi7U9u7pKcBIgVN6xaFx1amUnMaWA-boDEzjTeg-8QPl4Gsvp8-nQSkidiih4VEBVfXxnOToWRFYcNjPFswqq9MBdEnyg81b9IkBLGLtf3vqAbsc7tB17EGODRoprk4-kjzZrl2pygkb8DIRzIKhkE0d8gdPr7Yp0hntBjr7oUYVPq2hRqQEya7NE0NIWV6X2VEGOJQTc8BvZXs0wvYWaIUroEr8Ema9dAo1P_tsqs=w1024-h581-no\" alt=\"SVG Rendor DOM\" title=\"SVG\"></p>\n<h3 id=\"CANVAS\"><a href=\"#CANVAS\" class=\"headerlink\" title=\"CANVAS\"></a>CANVAS</h3><blockquote>\n<p> Canvas 則是用 “命令” 的方式作圖，JS 就如同一隻虛擬的筆，下指令一筆一畫把圖畫出來。所以，畫出來的東西沒有實體 DOM。動畫也是靠 JS 命令，每段時間清除畫布，不斷地做重新繪製。</p>\n</blockquote>\n<p><img src=\"https://lh3.googleusercontent.com/4IZuljnySSEW7hG-zDIvL-Z8lNLYyLKrxOyiLdmAx_tRjgS_7M2_skX8MMzcm4YfhmMINLCzJDZsYrtojmRH8BySK7TdLOfdheBt9Rta_4S7EI1GTaVyR-_f83E1KHGNMFFzwezeDolTdEq1ULmEIKGxKTldAQ1wUsOjYqhz3Vhj7s27EoYOnIiAdBYiW46dAq4veUAV8wNsQ6zA5OvOJLAJh_PBZrDaV--jneUAsoOWBw2OhWZh7nKAvd0gcKedQ1FZJMj9Cbr51YQ1Hfg0QHhgLgucW1lTS8EwVmmIoycBjADwhaU7BOCH5LRbAu8EYAQJA4hQQ8UQLmmpCeAUAhIsd06ugBU6dFDuXZMCNSfb9sjQDPORauW_SoMK0gkMsS6I5fqJDBFTIXZNXJnLsZ-PedIYbAOIvxJY-jgRHUD4UpzlwM5rp2br8hEUBR7EIVDlRb2Ke56qqJHcYLd-tXOH1KT-7qdFm-rsMYRxpY_Fr_wbMlF5e7ZTMSFguMqwCCsqPLGgnjS1MmrPtNy6jy4JKzko9udGwYPykXmjV08ogFEC9gMpIBpJA3iVYK90V3Gce0XLFWAi_0t1G11llFAoGscFxL9VKVfLg7W-RzDCwapq7wcv7XakRhA-E0Q4yDWR8UNybMOkFb1EDI3WdD51iGa0fAEe=w1024-h615-no\" alt=\"JS Draw CANVAS\" title=\"CANVAS\"></p>\n<hr>\n<h2 id=\"CAN-I-USE\"><a href=\"#CAN-I-USE\" class=\"headerlink\" title=\"CAN I USE?\"></a>CAN I USE?</h2><h3 id=\"SVG-1\"><a href=\"#SVG-1\" class=\"headerlink\" title=\"SVG\"></a>SVG</h3><p><img src=\"https://lh3.googleusercontent.com/CDfwxp147t0DvInz8711mtyMUaMRmdTjjk8CoIHKylKWYmMdMBGNlUHPgKkT_ucfVuUrGlX6VHZMSC3ojSq187lSIw8XRln_tDXPMCFoEOr9hf4E4bBpwJKpZRPieJCCZf8GBoAYU4ri4-0HCE7wA0IcJ90RWrlZupjt06y49PaMEDUKjgIISHcaJUiKqRqgzwja1Ko8D-mdjYcGlF6RyUy9-juWjscLnAH9uCJHOtqI1kJGTJ0ZjZXVJReUJdObYGP151lLu8vewoSKOrwzBRYhkyv86aysGASJCYpcJGQpf7LNFZ8O09m6sdNCLf26um8zzs0FD-SIXrB47PgdCclmrUTH-LD3M0mtZauA32vrsuiSTjJZS0FPvs6mvVLX99xQZXVAiAr_6B6atSe5L23oGj5ORwleyh04vQncaVtBOciusq0evUPERCq0-v39ySLRYAeowROsu2MEBuFA_-AVJwyouNe99erpG7P7eHFq2em-JkAzOHAb7elRv0Ogmx9moM3sqHRbJ9pc4qg1cwaiMUtQ9aUZFxEsdJ2ZFBq1xAw4CNN788ZQ1a04749h65-syAzsaZsnF_RhirutLugQz2X3K43VwBOWDMcAbsuo6jcZQE6ym0pL8dbD5b9Ev1I5pgnpmfd1iGvyi6JYb6fS5VHFCnVk=w960-h720-no\" alt=\"CAN I USE SVG\" title=\"SVG\"></p>\n<h3 id=\"CANVAS-1\"><a href=\"#CANVAS-1\" class=\"headerlink\" title=\"CANVAS\"></a>CANVAS</h3><p><img src=\"https://lh3.googleusercontent.com/zyGQFcsmzVd1aVm5n_qVI79C4BJAAzKjgHjN7T3hoQRt70JYI6Ja8vdw1uPHrPZv-SUOJSjJ_HpbcCLNtHLw6oj8N64XvpEfIvVvGrTeeIfuobhj1x8bRLUCeModLRttvBAksQ1QDIpF3p7Rh4TlCJ2D2hObN0Ij93AIqStJTMl4B2SDIIWnVioj5bHzhRTDWh6u7vjHiCMBG7rm2jcN8LxYtb1SOxlwbTwv9iazoWV3hxZKHkht_8jtm3WOHe1n3ogrfbVWkZHDGr9hG8DZf4brS8N6LeU5o6Hri7EJQ0ZZRV8pxiYcLit3B0NBwf2EyTrMjhYvTQSfwSYnc5hRMb0ZJr3-jzDPYviDiF01eDRHsFmGmNPYqmhDwCFa5KW5I1VpYHdntlPzVPXnMWuvYZME5W-pGmWeXmjeaqF1gEg1TU97YkYlD8QukKF5sPr4aqMHXH7lh442SPlE-u5S20xFHz7SKA8tY-EM-v8mBAmydly7QAW5Fu1sz4F84_U9jbDeQiG9ZTn3jsz3EVieCC1RrAQiS58nyf8P4ZiAP1dlnE3megojSwbTXN_I61Ezn2OFiihhDwO_PAJzYLWfcY38dIb5JKsL8-WhMGmwD4oFGPneJI0VFrfa7T0U1YoXBgZ38SNYDs-EOm3ZyRK-lfmbEaqqEWHy=w960-h720-no\" alt=\"CAN I USE CANVAS\" title=\"CANVAS\"></p>\n<hr>\n<h2 id=\"程式碼長度\"><a href=\"#程式碼長度\" class=\"headerlink\" title=\"程式碼長度\"></a>程式碼長度</h2><h3 id=\"SVG-2\"><a href=\"#SVG-2\" class=\"headerlink\" title=\"SVG\"></a>SVG</h3><p><img src=\"https://lh3.googleusercontent.com/5FlHfEuI0Zj2dAku5ef6m0wK7d05fL3MD-dXLnHXxl2lC9JmQdwBvZfvRlJj99aBbOqx3crHAZtRo7GR-fv4wSTrCkpS6y7vQ26wFGonRPx-T5svTRBytT-WIX0wNIgPwg7jISTHadrtgQuXiJF4hfG5OJSYSTOMIZlbemGKoDUPhUpuzqfXpOqMqBalapSbjK2Jwseww_tS6MSdiOVHT09-q8IpNnZ7abZVGtiVS6gQno0rleM9vrJpknaj1VZp3RthIhR4xj81ooqxqkef2zh41lm1hSUjMxf-q9KvNbeg2-YV0okHqaPYJ-1ItJWnaK5faqoSJAoXqXQCWNwG76WbPWFiA4OPXtPdY9NN0VCjRu6sM5xGOQBVmIJowC2IN9qmGktE69O_c5nCWZZdpLJQmT-1EmTMfOFJFaJsenANnJ24F6SqtczDOEGkau6NzJfTKXh92jv28L2QXLK4qp7dtiXucI3XOKev2wmBn1HjaTVhr_BhjgEo78BPMIEOh_8q-lmJ4IG_5tRxxOB_vAvGoDm8ZtXKfaOYf5_ThU-tPADED6-VCFaaDOqvYOt-tawByGrhI9Z9yHP7nX4ITS2Ix6u6YJuVQQtGM1pSf0nradpXkev-woG5BhsChl8nfwp8u4b-ug5Q9yuxp8ImElUBp3REZUrr=w960-h720-no\" alt=\"SVG 程式碼長度\" title=\"SVG\"></p>\n<blockquote>\n<p>SVG 399 行 (Whoa! Excellent ~)</p>\n</blockquote>\n<h3 id=\"CANVAS-2\"><a href=\"#CANVAS-2\" class=\"headerlink\" title=\"CANVAS\"></a>CANVAS</h3><p><img src=\"https://lh3.googleusercontent.com/btBkjLK8sxI6shanpLGKFPvW-nTtQ53-0C_--L3PjPHaOuzBzYMdMBqnLff8wLIf88w6UmnvHQqTR84t4HbTJQXwn9iZo0uNc-gOxPZIkdsa9t3N1tJl_P5n25VgjE1v1ODo9fzD7XWzRc8-iS3-JHMUCrE8-CvFgtxWl36MjXs2zkBd9MFHD_quAdxFZP7V2QvStqogunAWmBFGlNS9oEWP_fEJNak87zSTDMHpXd0JhO8aR_HHvlmiL0nVoyPvH9MiLc0a9lPXSnC5qGshEOIWvPodsZDFTYZm5qIPD-iuz6wWK9-jQ7OVNzhThmg6DhACMxSUq0huiwOUV1y7eBdMFN_U-Qp__H8SFFhBNG0Lv5QWRY-3poipGph0ug_jXlYeUFOiMdOMV28BM8CQ8LHjL8wQCzaF-IIvFHggmfnuGET9RY662S0Nt6pBUzP7Gnqsa6TzVm01x2GHqBIQMfXSckbwQ05-Yn7pIjI_ghFmecl8oyu3m7nMAlXUzFn6M_hZJEapy_9bS4eDjLqD_O70EqqWum1NTukqxDfs6WJ5lcpUA1JMwRNpDuR1FUnA538L7E2yZDEqUQ6i5jQMsmhvWec04eNIBWxmhmEOagBtq-HzHALg1a5hrhCLEcQbmzQcmb055LiQXEJR2x1vmAyHLhAzGD_s=w960-h720-no\" alt=\"CANVAS 程式碼長度\" title=\"CANVAS\"></p>\n<blockquote>\n<p>CANVAS 603 行 (Oh-no!! So Terrible ~)</p>\n</blockquote>\n<hr>\n<h2 id=\"執行效能\"><a href=\"#執行效能\" class=\"headerlink\" title=\"執行效能\"></a>執行效能</h2><h3 id=\"SVG-3\"><a href=\"#SVG-3\" class=\"headerlink\" title=\"SVG\"></a>SVG</h3><p><img src=\"https://lh3.googleusercontent.com/I9kGOm_f_okaPyeuNUQmRG5YQUtXwDBEyqhKVnlid_pZzXgT9k5c0mn5nqLFHC3DRblnLGR7GIKg-P_lpAtlXMeUnQMT0ehH_eytcbHA-0Lw6RGfizOvGpLSkqENJT6wiElTEOJzmbttEH-coE_TiIfMZ2ySwFkJJKbJHAl1yUrY3u4NvPjIe531rvGL0V5jt828afr6XI4c1no70wsKXlIIJIZA5zfTodlNsyZ82e1125mhD1J6WUcAJqHV_wO-do3Y-3cS2xIZlSKqvII8ufnS_curc4nvKpXq28w5PBG81BfVDiWiHzMHEaxMKJFBthdglowvIa3ZNgv_M0rnBnfmoTQtb0TDq-QPCb5P_Ox6PSeeipBcGQxuufBBKt7H_yOOEjvVvfpD7CIpLcIapVGmNhYSoQcnw9luB86QM5X-F72P3arl_x9YpISU3lkkFXceQMa67NuoTsKG_HffQ1ZVNMhLSubKF6vapLMZ0MlKfuoXm4GtwUCUGbNgRLIwD19Gcbl4CuK0_HjFgA0Z_vypGieC5Vl_qR1p-A6eX14l0CB1i5jCfs24PaIdJICV__0tJnKcJ1G5I6DwDgzfGC9sJiXLazgzpeuI-Yl6R9mmPJnGVME2k_jHCBpkPiiFsPPlhKPF5TKDZuTkz_1qRiqXND_3dIc0=w960-h720-no\" alt=\"SVG 執行效能\" title=\"SVG\"></p>\n<blockquote>\n<p>SVG 364 ms</p>\n</blockquote>\n<h3 id=\"CANVAS-3\"><a href=\"#CANVAS-3\" class=\"headerlink\" title=\"CANVAS\"></a>CANVAS</h3><p><img src=\"https://lh3.googleusercontent.com/H4jEF4F2vXB7rk767aivRFvdOcEF3CfR1xRc-urjzTV_xJBfxe3ARAa-Xv8PKcIa6ykm37iMIsTf__g_PKY8psG5r_cyNbPW1IhAs4kUZ4yF8tMzLymudPt-p4X4PVav3QWkANhWIl25_q1VwXm-NnoU9ncn4JEiHiREKoMAJiGDnPMV_qgFCrW_CLa78QYUA2jSOVFJ-e6v7A5fALJV_2uvmZNPO5f3Iuc0l1pbJP1zjp4IfdBKA8FadFek2ztoUiAfydWjruU0VT8mAZCJs9Z4PPPBfCxEcAHF8pB44IaYppDO47De1kUAhW2V_vAvKegvjZnUtuX2aSDpDIozyhYFd2an4bE4w00g-pjvTfTGDRtksOr7LYUJqsmCJzCQ1RUBx_2xve07c_Fvb5wjcXkQWu_HVZ3CrciipJ8BnGar6NIKnXnYws-qvcA8uh_8zVafoG57F1f-yMyNzrrJnbMx5cCTfiXFNOQ5--8fPsmcfWLoZ9ASXnv-kbACKwUGNGSsDpP3VvYUVN1pQ0lmq-dXtGcECDtLf6s7yYC5D77noLAXd9GSwH3V5OWdNgw2pIYTKLmlX76eIukbc5CcbgWr1UbUfOLKAZz97b-d122mkf6V9j6eDmCQVWRfZW0T1OeIKffA9yDn5UrZ_R_s6HBweS1SB4O0=w960-h720-no\" alt=\"CANVAS 執行效能\" title=\"CANVAS\"></p>\n<blockquote>\n<p>CANVAS 177 ms</p>\n</blockquote>\n<hr>\n<h2 id=\"整體分析\"><a href=\"#整體分析\" class=\"headerlink\" title=\"整體分析\"></a>整體分析</h2><p><img src=\"https://lh3.googleusercontent.com/TQ1cY8cfzysPs5_lYNwNaJ0dLSSWl0AuWDw6FY6gR43sjv7rTt3E0HPyMj2nJxON75srHT-LziWsBeaOq6wASwN67opUfA5H1rTCziwLryhY7gYpZcgxpj-bjYxRuq4h4iLD2ggN36fOhg36HOMMMdrFkKrtpVGgWhEJdt6HkaKWBHcRuza_tss33mzktR9F1H5IDKbwwVomkz7OFsTErvI_lnWy1Jk7ylrjkbcEOa16WYV6B1YRHFo2h_hU7KCOZF3FU3LY16Mdo8chcVi6KcjfZcxoDj3NleQbpePAi9eGpqy-yCh8jrPAhi5_kQEBGlaJBmLDnC414DNzT9JKIPa-nLEsrDPHWiKG1Pqu24R03o6f0GLfNWy55Vg0ndzR-7OSGl2e347cN1bz0GG7yfl_dMZU23EygFK97e32VFJgktzF9zzuMlsK5s5qJS87knYJnNPIObrgbzET95l3ybsivoI7jIgwXy2TH74UpA6P3H1g5Yk-NPoBoFyGPaXwCvLK-_geMy1JdEIYtwwmJPxMl8AN-1qUSglW5A3keHkXd6kErk2b8nU5tFahYD9PzUf0RMs2DBCaaYcMc5aPLE6hZDuMETmThioOdqVQt7KF0brVzd-OhazWei-Pg2Z9fAjj5d9VDfArg7EIroxOxgX4_UWrRNnk=w960-h720-no\" alt=\"整體分析\" title=\"SVG VS CANVAS\"></p>\n<blockquote>\n<p>整體來說，像工業 4.0 這種大數據的資料\b使用 CANVAS 來繪製會是最恰當的（速度才不會卡卡）\b\b\b。相反的，如果是簡單的數據圖，使用 SVG\b\b 會比較容易開發和維護。</p>\n</blockquote>\n<p>\b本篇就分析到此，下一篇會繼續解說 CANVAS 如何繪製其他種類（ex: 長條圖、圓餅圖…）的數據圖。</p>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/0ql8YPK9TWE2Iw2k5riCgtn6op1D95u8PM6OpYAiq1dZsrJ580p9Cmprzs4lMk8WAHeO81FEcsbR76fEphaIz67O6YylI2bxFQu3BHhcm3k0IP6whT76GyTmsR7HANYz1KeJVTTG2X4-KxV7zh_FsAhdZ8j-gz2BcWsaYonzgm2-bzEDNEvkCTiH9klL6RGWE9YhK_BfjR402BCev0Uq5nwNwEhHjqBeIpv-ePFTAux2RXkdXZ9iz67SKQ0h_q-w7vB9oPzPrg8FZUwK-WbM0uoKQI5IZP0BUXf9eyE8_fFa3YPO9u4V1Dhcf6YsMfCIvO6OpYvh5PeWKpDWm2q80MmUKrAp0G2nthLFwcC5JZlfWWiM-mPbZ04Oklp61oOOLA6bdBJCvMtmwCiycopM3bXsmCA06hK4hDyjRiT_foULVswowzSRc7KsL-p5ayX6Gg2mmdX45Ile4Tw7NjLk8-bVBHhC6gb6DnbDFitOQ6RVKSwXn6WK98i11j3PykdwonGTkc4_9Q9v-dOWSVSpdE1Ouy0wjCDFn0tYH7OPF1tRnht7JgbdrWw0p-AJ9O_jHy6K-BQN4I6n9HchsrRvZE9rITTXd8lv6hj5KG_2JQ0vWIpNqGrif6OH4pik7olcv3v45Z210q2ufPkmoPQIHTEeKQvRbEUN=w600-h200-no","excerpt":"<p>本篇主要是針對 <code>SVG</code> 和 <code>CANVAS</code> 兩種繪圖方式作比較，並整理各自的優勢。</p>","more":"<hr>\n<h2 id=\"SVG-amp-CANVAS-繪製原理\"><a href=\"#SVG-amp-CANVAS-繪製原理\" class=\"headerlink\" title=\"SVG &amp; CANVAS 繪製原理\"></a>SVG &amp; CANVAS 繪製原理</h2><h3 id=\"SVG\"><a href=\"#SVG\" class=\"headerlink\" title=\"SVG\"></a>SVG</h3><blockquote>\n<p>用 D3 把算好的陣列，呈現在 SVG 的 DOM 上，讓 Vue 來做 rendor 的動作，最後使用 CSS transition 做動畫。</p>\n</blockquote>\n<p><img src=\"https://lh3.googleusercontent.com/ZAzSTKoRMQE98bOg3uj9YplXa5AFTgiUR_HxMxa5mFBiEdFs6KNZwU3tgQxrj9R_xxCp2kpb-gLAhDfv1B3el8dULEnnW-YbpGNrZMeVFXiQZjb2xDDe8L2wmgBW36te5_hXcbN3aRdSi3W9TkVkVg7o7V_l6cbtOtm3N_D-kukmkfvQtvPItjI4K8i0jL1XMXbtlqjyDekrjwtrV8BGfJOB2UdWjmmQW79QadmcV3i9T0l7t7OAmZZk4LOwDz02PaZ4xZGglt40m4PVKeBb1181lnPhGp1qcTTLDzoaFyLsGwBfz2Dy_rSpehWT6Y3eUdIMFsUeqmyXCA4A5Q0iAfb8LuJ-36nP8p8DmKjicVfESglz7UY1mjZhV3n1F1VPOWOcVCQSzfEZMi0aYXLqdNMKiW_cjv4W17rPLBpSkUFWJKlXPFDxNOFi7U9u7pKcBIgVN6xaFx1amUnMaWA-boDEzjTeg-8QPl4Gsvp8-nQSkidiih4VEBVfXxnOToWRFYcNjPFswqq9MBdEnyg81b9IkBLGLtf3vqAbsc7tB17EGODRoprk4-kjzZrl2pygkb8DIRzIKhkE0d8gdPr7Yp0hntBjr7oUYVPq2hRqQEya7NE0NIWV6X2VEGOJQTc8BvZXs0wvYWaIUroEr8Ema9dAo1P_tsqs=w1024-h581-no\" alt=\"SVG Rendor DOM\" title=\"SVG\"></p>\n<h3 id=\"CANVAS\"><a href=\"#CANVAS\" class=\"headerlink\" title=\"CANVAS\"></a>CANVAS</h3><blockquote>\n<p> Canvas 則是用 “命令” 的方式作圖，JS 就如同一隻虛擬的筆，下指令一筆一畫把圖畫出來。所以，畫出來的東西沒有實體 DOM。動畫也是靠 JS 命令，每段時間清除畫布，不斷地做重新繪製。</p>\n</blockquote>\n<p><img src=\"https://lh3.googleusercontent.com/4IZuljnySSEW7hG-zDIvL-Z8lNLYyLKrxOyiLdmAx_tRjgS_7M2_skX8MMzcm4YfhmMINLCzJDZsYrtojmRH8BySK7TdLOfdheBt9Rta_4S7EI1GTaVyR-_f83E1KHGNMFFzwezeDolTdEq1ULmEIKGxKTldAQ1wUsOjYqhz3Vhj7s27EoYOnIiAdBYiW46dAq4veUAV8wNsQ6zA5OvOJLAJh_PBZrDaV--jneUAsoOWBw2OhWZh7nKAvd0gcKedQ1FZJMj9Cbr51YQ1Hfg0QHhgLgucW1lTS8EwVmmIoycBjADwhaU7BOCH5LRbAu8EYAQJA4hQQ8UQLmmpCeAUAhIsd06ugBU6dFDuXZMCNSfb9sjQDPORauW_SoMK0gkMsS6I5fqJDBFTIXZNXJnLsZ-PedIYbAOIvxJY-jgRHUD4UpzlwM5rp2br8hEUBR7EIVDlRb2Ke56qqJHcYLd-tXOH1KT-7qdFm-rsMYRxpY_Fr_wbMlF5e7ZTMSFguMqwCCsqPLGgnjS1MmrPtNy6jy4JKzko9udGwYPykXmjV08ogFEC9gMpIBpJA3iVYK90V3Gce0XLFWAi_0t1G11llFAoGscFxL9VKVfLg7W-RzDCwapq7wcv7XakRhA-E0Q4yDWR8UNybMOkFb1EDI3WdD51iGa0fAEe=w1024-h615-no\" alt=\"JS Draw CANVAS\" title=\"CANVAS\"></p>\n<hr>\n<h2 id=\"CAN-I-USE\"><a href=\"#CAN-I-USE\" class=\"headerlink\" title=\"CAN I USE?\"></a>CAN I USE?</h2><h3 id=\"SVG-1\"><a href=\"#SVG-1\" class=\"headerlink\" title=\"SVG\"></a>SVG</h3><p><img src=\"https://lh3.googleusercontent.com/CDfwxp147t0DvInz8711mtyMUaMRmdTjjk8CoIHKylKWYmMdMBGNlUHPgKkT_ucfVuUrGlX6VHZMSC3ojSq187lSIw8XRln_tDXPMCFoEOr9hf4E4bBpwJKpZRPieJCCZf8GBoAYU4ri4-0HCE7wA0IcJ90RWrlZupjt06y49PaMEDUKjgIISHcaJUiKqRqgzwja1Ko8D-mdjYcGlF6RyUy9-juWjscLnAH9uCJHOtqI1kJGTJ0ZjZXVJReUJdObYGP151lLu8vewoSKOrwzBRYhkyv86aysGASJCYpcJGQpf7LNFZ8O09m6sdNCLf26um8zzs0FD-SIXrB47PgdCclmrUTH-LD3M0mtZauA32vrsuiSTjJZS0FPvs6mvVLX99xQZXVAiAr_6B6atSe5L23oGj5ORwleyh04vQncaVtBOciusq0evUPERCq0-v39ySLRYAeowROsu2MEBuFA_-AVJwyouNe99erpG7P7eHFq2em-JkAzOHAb7elRv0Ogmx9moM3sqHRbJ9pc4qg1cwaiMUtQ9aUZFxEsdJ2ZFBq1xAw4CNN788ZQ1a04749h65-syAzsaZsnF_RhirutLugQz2X3K43VwBOWDMcAbsuo6jcZQE6ym0pL8dbD5b9Ev1I5pgnpmfd1iGvyi6JYb6fS5VHFCnVk=w960-h720-no\" alt=\"CAN I USE SVG\" title=\"SVG\"></p>\n<h3 id=\"CANVAS-1\"><a href=\"#CANVAS-1\" class=\"headerlink\" title=\"CANVAS\"></a>CANVAS</h3><p><img src=\"https://lh3.googleusercontent.com/zyGQFcsmzVd1aVm5n_qVI79C4BJAAzKjgHjN7T3hoQRt70JYI6Ja8vdw1uPHrPZv-SUOJSjJ_HpbcCLNtHLw6oj8N64XvpEfIvVvGrTeeIfuobhj1x8bRLUCeModLRttvBAksQ1QDIpF3p7Rh4TlCJ2D2hObN0Ij93AIqStJTMl4B2SDIIWnVioj5bHzhRTDWh6u7vjHiCMBG7rm2jcN8LxYtb1SOxlwbTwv9iazoWV3hxZKHkht_8jtm3WOHe1n3ogrfbVWkZHDGr9hG8DZf4brS8N6LeU5o6Hri7EJQ0ZZRV8pxiYcLit3B0NBwf2EyTrMjhYvTQSfwSYnc5hRMb0ZJr3-jzDPYviDiF01eDRHsFmGmNPYqmhDwCFa5KW5I1VpYHdntlPzVPXnMWuvYZME5W-pGmWeXmjeaqF1gEg1TU97YkYlD8QukKF5sPr4aqMHXH7lh442SPlE-u5S20xFHz7SKA8tY-EM-v8mBAmydly7QAW5Fu1sz4F84_U9jbDeQiG9ZTn3jsz3EVieCC1RrAQiS58nyf8P4ZiAP1dlnE3megojSwbTXN_I61Ezn2OFiihhDwO_PAJzYLWfcY38dIb5JKsL8-WhMGmwD4oFGPneJI0VFrfa7T0U1YoXBgZ38SNYDs-EOm3ZyRK-lfmbEaqqEWHy=w960-h720-no\" alt=\"CAN I USE CANVAS\" title=\"CANVAS\"></p>\n<hr>\n<h2 id=\"程式碼長度\"><a href=\"#程式碼長度\" class=\"headerlink\" title=\"程式碼長度\"></a>程式碼長度</h2><h3 id=\"SVG-2\"><a href=\"#SVG-2\" class=\"headerlink\" title=\"SVG\"></a>SVG</h3><p><img src=\"https://lh3.googleusercontent.com/5FlHfEuI0Zj2dAku5ef6m0wK7d05fL3MD-dXLnHXxl2lC9JmQdwBvZfvRlJj99aBbOqx3crHAZtRo7GR-fv4wSTrCkpS6y7vQ26wFGonRPx-T5svTRBytT-WIX0wNIgPwg7jISTHadrtgQuXiJF4hfG5OJSYSTOMIZlbemGKoDUPhUpuzqfXpOqMqBalapSbjK2Jwseww_tS6MSdiOVHT09-q8IpNnZ7abZVGtiVS6gQno0rleM9vrJpknaj1VZp3RthIhR4xj81ooqxqkef2zh41lm1hSUjMxf-q9KvNbeg2-YV0okHqaPYJ-1ItJWnaK5faqoSJAoXqXQCWNwG76WbPWFiA4OPXtPdY9NN0VCjRu6sM5xGOQBVmIJowC2IN9qmGktE69O_c5nCWZZdpLJQmT-1EmTMfOFJFaJsenANnJ24F6SqtczDOEGkau6NzJfTKXh92jv28L2QXLK4qp7dtiXucI3XOKev2wmBn1HjaTVhr_BhjgEo78BPMIEOh_8q-lmJ4IG_5tRxxOB_vAvGoDm8ZtXKfaOYf5_ThU-tPADED6-VCFaaDOqvYOt-tawByGrhI9Z9yHP7nX4ITS2Ix6u6YJuVQQtGM1pSf0nradpXkev-woG5BhsChl8nfwp8u4b-ug5Q9yuxp8ImElUBp3REZUrr=w960-h720-no\" alt=\"SVG 程式碼長度\" title=\"SVG\"></p>\n<blockquote>\n<p>SVG 399 行 (Whoa! Excellent ~)</p>\n</blockquote>\n<h3 id=\"CANVAS-2\"><a href=\"#CANVAS-2\" class=\"headerlink\" title=\"CANVAS\"></a>CANVAS</h3><p><img src=\"https://lh3.googleusercontent.com/btBkjLK8sxI6shanpLGKFPvW-nTtQ53-0C_--L3PjPHaOuzBzYMdMBqnLff8wLIf88w6UmnvHQqTR84t4HbTJQXwn9iZo0uNc-gOxPZIkdsa9t3N1tJl_P5n25VgjE1v1ODo9fzD7XWzRc8-iS3-JHMUCrE8-CvFgtxWl36MjXs2zkBd9MFHD_quAdxFZP7V2QvStqogunAWmBFGlNS9oEWP_fEJNak87zSTDMHpXd0JhO8aR_HHvlmiL0nVoyPvH9MiLc0a9lPXSnC5qGshEOIWvPodsZDFTYZm5qIPD-iuz6wWK9-jQ7OVNzhThmg6DhACMxSUq0huiwOUV1y7eBdMFN_U-Qp__H8SFFhBNG0Lv5QWRY-3poipGph0ug_jXlYeUFOiMdOMV28BM8CQ8LHjL8wQCzaF-IIvFHggmfnuGET9RY662S0Nt6pBUzP7Gnqsa6TzVm01x2GHqBIQMfXSckbwQ05-Yn7pIjI_ghFmecl8oyu3m7nMAlXUzFn6M_hZJEapy_9bS4eDjLqD_O70EqqWum1NTukqxDfs6WJ5lcpUA1JMwRNpDuR1FUnA538L7E2yZDEqUQ6i5jQMsmhvWec04eNIBWxmhmEOagBtq-HzHALg1a5hrhCLEcQbmzQcmb055LiQXEJR2x1vmAyHLhAzGD_s=w960-h720-no\" alt=\"CANVAS 程式碼長度\" title=\"CANVAS\"></p>\n<blockquote>\n<p>CANVAS 603 行 (Oh-no!! So Terrible ~)</p>\n</blockquote>\n<hr>\n<h2 id=\"執行效能\"><a href=\"#執行效能\" class=\"headerlink\" title=\"執行效能\"></a>執行效能</h2><h3 id=\"SVG-3\"><a href=\"#SVG-3\" class=\"headerlink\" title=\"SVG\"></a>SVG</h3><p><img src=\"https://lh3.googleusercontent.com/I9kGOm_f_okaPyeuNUQmRG5YQUtXwDBEyqhKVnlid_pZzXgT9k5c0mn5nqLFHC3DRblnLGR7GIKg-P_lpAtlXMeUnQMT0ehH_eytcbHA-0Lw6RGfizOvGpLSkqENJT6wiElTEOJzmbttEH-coE_TiIfMZ2ySwFkJJKbJHAl1yUrY3u4NvPjIe531rvGL0V5jt828afr6XI4c1no70wsKXlIIJIZA5zfTodlNsyZ82e1125mhD1J6WUcAJqHV_wO-do3Y-3cS2xIZlSKqvII8ufnS_curc4nvKpXq28w5PBG81BfVDiWiHzMHEaxMKJFBthdglowvIa3ZNgv_M0rnBnfmoTQtb0TDq-QPCb5P_Ox6PSeeipBcGQxuufBBKt7H_yOOEjvVvfpD7CIpLcIapVGmNhYSoQcnw9luB86QM5X-F72P3arl_x9YpISU3lkkFXceQMa67NuoTsKG_HffQ1ZVNMhLSubKF6vapLMZ0MlKfuoXm4GtwUCUGbNgRLIwD19Gcbl4CuK0_HjFgA0Z_vypGieC5Vl_qR1p-A6eX14l0CB1i5jCfs24PaIdJICV__0tJnKcJ1G5I6DwDgzfGC9sJiXLazgzpeuI-Yl6R9mmPJnGVME2k_jHCBpkPiiFsPPlhKPF5TKDZuTkz_1qRiqXND_3dIc0=w960-h720-no\" alt=\"SVG 執行效能\" title=\"SVG\"></p>\n<blockquote>\n<p>SVG 364 ms</p>\n</blockquote>\n<h3 id=\"CANVAS-3\"><a href=\"#CANVAS-3\" class=\"headerlink\" title=\"CANVAS\"></a>CANVAS</h3><p><img src=\"https://lh3.googleusercontent.com/H4jEF4F2vXB7rk767aivRFvdOcEF3CfR1xRc-urjzTV_xJBfxe3ARAa-Xv8PKcIa6ykm37iMIsTf__g_PKY8psG5r_cyNbPW1IhAs4kUZ4yF8tMzLymudPt-p4X4PVav3QWkANhWIl25_q1VwXm-NnoU9ncn4JEiHiREKoMAJiGDnPMV_qgFCrW_CLa78QYUA2jSOVFJ-e6v7A5fALJV_2uvmZNPO5f3Iuc0l1pbJP1zjp4IfdBKA8FadFek2ztoUiAfydWjruU0VT8mAZCJs9Z4PPPBfCxEcAHF8pB44IaYppDO47De1kUAhW2V_vAvKegvjZnUtuX2aSDpDIozyhYFd2an4bE4w00g-pjvTfTGDRtksOr7LYUJqsmCJzCQ1RUBx_2xve07c_Fvb5wjcXkQWu_HVZ3CrciipJ8BnGar6NIKnXnYws-qvcA8uh_8zVafoG57F1f-yMyNzrrJnbMx5cCTfiXFNOQ5--8fPsmcfWLoZ9ASXnv-kbACKwUGNGSsDpP3VvYUVN1pQ0lmq-dXtGcECDtLf6s7yYC5D77noLAXd9GSwH3V5OWdNgw2pIYTKLmlX76eIukbc5CcbgWr1UbUfOLKAZz97b-d122mkf6V9j6eDmCQVWRfZW0T1OeIKffA9yDn5UrZ_R_s6HBweS1SB4O0=w960-h720-no\" alt=\"CANVAS 執行效能\" title=\"CANVAS\"></p>\n<blockquote>\n<p>CANVAS 177 ms</p>\n</blockquote>\n<hr>\n<h2 id=\"整體分析\"><a href=\"#整體分析\" class=\"headerlink\" title=\"整體分析\"></a>整體分析</h2><p><img src=\"https://lh3.googleusercontent.com/TQ1cY8cfzysPs5_lYNwNaJ0dLSSWl0AuWDw6FY6gR43sjv7rTt3E0HPyMj2nJxON75srHT-LziWsBeaOq6wASwN67opUfA5H1rTCziwLryhY7gYpZcgxpj-bjYxRuq4h4iLD2ggN36fOhg36HOMMMdrFkKrtpVGgWhEJdt6HkaKWBHcRuza_tss33mzktR9F1H5IDKbwwVomkz7OFsTErvI_lnWy1Jk7ylrjkbcEOa16WYV6B1YRHFo2h_hU7KCOZF3FU3LY16Mdo8chcVi6KcjfZcxoDj3NleQbpePAi9eGpqy-yCh8jrPAhi5_kQEBGlaJBmLDnC414DNzT9JKIPa-nLEsrDPHWiKG1Pqu24R03o6f0GLfNWy55Vg0ndzR-7OSGl2e347cN1bz0GG7yfl_dMZU23EygFK97e32VFJgktzF9zzuMlsK5s5qJS87knYJnNPIObrgbzET95l3ybsivoI7jIgwXy2TH74UpA6P3H1g5Yk-NPoBoFyGPaXwCvLK-_geMy1JdEIYtwwmJPxMl8AN-1qUSglW5A3keHkXd6kErk2b8nU5tFahYD9PzUf0RMs2DBCaaYcMc5aPLE6hZDuMETmThioOdqVQt7KF0brVzd-OhazWei-Pg2Z9fAjj5d9VDfArg7EIroxOxgX4_UWrRNnk=w960-h720-no\" alt=\"整體分析\" title=\"SVG VS CANVAS\"></p>\n<blockquote>\n<p>整體來說，像工業 4.0 這種大數據的資料\b使用 CANVAS 來繪製會是最恰當的（速度才不會卡卡）\b\b\b。相反的，如果是簡單的數據圖，使用 SVG\b\b 會比較容易開發和維護。</p>\n</blockquote>\n<p>\b本篇就分析到此，下一篇會繼續解說 CANVAS 如何繪製其他種類（ex: 長條圖、圓餅圖…）的數據圖。</p>"},{"title":".NET Core 2.0 Debug with VScode","thumbnailImage":"http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png","thumbnailImagePosition":"left","coverImage":"http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png","coverMeta":"out","date":"2017-12-24T16:00:00.000Z","updated":"2017-12-24T16:00:00.000Z","_content":"\n這次要教大家如何使用 `VScode` debug `.Net Core` 的專案喔～\n<!--more-->\n\n## 安裝套件 `C#`\n\n前往擴充套件頁籤安裝 `C#` plugin。\n\n![安裝擴充套件](https://lh3.googleusercontent.com/WoyeazFGIwdMoBiISJaBDnAHV4aKF4SkSH_oySq-Qj9wrlGGhdBWegq17YOCQ3Cidk_8Ti0myrj3GuOkt_xzbucZmOvqIlocY6Xx9zlUCicvOLty7wXLDLjn_HaLm2VEVy-6pO9aRvil_LTLl2AGqGY8ZJzPaxg8CqifgRztmr6XIr5XCGLa6IJuBeRomWhfQkEGE1ln-3Q6xo9GrHn6aREQD4mOjfXMezWz7b4SbUPGzNfL7JyLWSJGO3PM_UC-QE4aRdZX-iHSw26x4JBjWfixr_LLnze82bPWnyZzN7IeL0QAUk966Y0qskJ-tun7xO9xn4AVjjB6fiTyCBAqkY4T1ubUpKChSey2VydPDJ8ywR0n2_vmtMTy45kE3Re07tGrcakl0Jynwzqj-qHDM2OkD3yYfB5rJKwAeHf74CM0nF-53r2SAoznYHjdbgx7mhufwv1-UpSqnBjHz1kl0i4tjVwoOnXpYAaVGcmkDmvSJgIqeKs2h9DHcTaCyFoEPaOVFaRmfhzA1fPG1bdYvaQbNS2tjAdTA1A0GEeBSbYZhutKQtnZt1MDchm5FLIPE6tOMmbBYAKoa6iFszZwb0JgHe_9RIad0mom412TgqEDo5KiChdc1Ol_lO_AtxhuRx2_YAsGQJMgLxHiFjklfYk_QxlfyfUV=w1024-h640-no \"VScode\")\n\n安裝完成重新啟動後，`VScode` 會自動安裝符合目前作業系統的 `OmniSharp`。\n\n![重啟後 OmniSharp 自動安裝](https://lh3.googleusercontent.com/RI4MQD-Lt5ciaUzQyRIdE0DsHoaVS-E0J3j-iXlezl6ib5c1LXFF6n2vGT2ZIdAbSsaVtdjQCvZ5BVhoDhL6JqaHnn7bJ92Jlhe7FIigiX1lhz95heSOQ7wQJ2jvctRIMUzYx1qJ9me5CAZDRBDb7MZzaAP6Jh1cp4n4BJThfnvdaoaBJeeWV_Bo7KtUhTXxgp5JbrvITua-LYR_qgiWlyEyTEftCU8NPMJwXTzm4jiDvxZFEhOo06mI3t93t5a0ubjsh6tBUBcdxi6GM__E_9x4RO29ms4WB6dwcFgE1tG_uvuHt7hv7zWeuyxA7b-gOT0Rge847HMGiMaunr6WJ3jOcDzc_fQw5NYwc1wuVEHjyI2BLDfuJ8Uctnvm-8ygoDnXdyoT3UWrvoxxyZdV38PFQm9nvSGOBJ-kMlM_nnnPYGOWC6KAH4Qk7rBk_e9w3-ybeKIItJXnmUxe14fGhlPWonfUa8OaMiHmY1J_pujCcl_6f6VpRPViXjcnKwcTdLFArr7EabWrA8Q2zd7xifIU9zQL540qvRQnmaxiaU98LmISI_DTUqQPNxyepGtLx_dn_HqJGdypTLeAj5MlquIVia3vHSNTUqTmCJzw6gw5hLJmbnlnVAtQ8ehZN-E2iTzKjJYMv4JPn2IGII_ppRIPRj1LxdDE=w1024-h640-no \"VScode\")\n\n## 加入偵錯設定\n\n打開 `Program.cs` ，`VScode` 會提示使用者進行資產建置及偵錯您的應用程式。選取 `Yes`。\n\n![提示使用者進行資產建置及偵錯您的應用程式](https://docs.microsoft.com/zh-tw/dotnet/core/tutorials/media/with-visual-studio-code/missing-assets.png \"VScode\")\n\n選取 `Yes` 之後，系統會自動產生 `.vscode` 的資料夾，放置工作任務設定檔。\n\n![系統會自動產生 .vscode 的資料夾](https://lh3.googleusercontent.com/QKxHuk0-14c5yFlk0j01dWnrdTtygpjp5vjUh7lI22U-DHTm_hjfzjm1Wep3OkCcyY3j6I5saAtacWAw2oYDH37ndXbzs2z-hR6FROq_LP2N-KgU0S7ZmpUa-cj3RNwBN9AYnApjxZUOCKfSqRjdX5Yhpz9tv2grCIFqugRF7rWGY9ZQAXbgkTpo6k9QrFb0GFN07UH2UwG5jxDbTBpE7CN0z2LAOn_4SUEgRIYOeG1b7paoyZj4h0cyxm8aWt8V0XLC-cZcbcU7LDAhQI-oBa-Ti3hE1Wkbr1v1a1W4H6yVYNYTf3Zgsuvs-O7Dzf57AV5dzQz2HY9PfiSpC0RlrT-eYY51ZBHWibmme2rK_VX2fm1kDWxVhI9uz3CoHCeh7GvMfZRsHn1FyH6pKBB3gk86LT9mVAqTFv3XUZGyJbY8a9ONbkU49x1p_xWcNoX-9ZZ53hMmIIuOzU5I-cgV7vb4hYTkMMRydRxxzAJjbofdFjRQKSaM85Dfxulvls0Sqx_yhmitwjYoEySOuYbr-UIvIePmF-By0uK4RMU8WvVGdRMHnOBrdkTNY7vH5d9gZGZuVmywjmrkGXpOc7jBmmG-rwU72Y5SDEN9WUMtGiWR5yIU4LBUA8MkO-S-o5ZWRNNWxq70KFvwrmQ_PfBRPNpJ48hZ-tPJ=w1024-h359-no \"VScode\")\n\n## 測試偵錯\n\n1. 確定環境選項是 `.Net Core Launch (Web)`。\n2. 開啟 `HomeController.cs` 下中斷點。\n3. 快捷鍵 `F5` 或點 `綠色箭號按鈕` 啟動偵錯。\n\n![測試偵錯](https://lh3.googleusercontent.com/3Lsi1A49C7GBVkjve6ddsy4306z6SRmaTDDFDiw663yeWMpkjyymxMroq4j1OvLmDjgViAdBYZpcKl6_cxFgL41ATW4gUwrvQW9iqA3EWSpYClATSOD4BScyynCPp-dJeOnNVkXwtIN8oCu8JlXDNRsS9FeWHFTu1s8wB3Mes7dHsaZNE54kFHRtzMpNp2ByzXByxl2H9nvVGzvO6DhYTBHrRgpGUW5xskcbVxq6MwmaqLRBrjM7PUXVu-QJVYxs6AC59YM1gr7hoCR0PbK-jt1x3FFSphImhlscS4qYMM_46CYEPOY9Wz91oD5AJSdiSfjaXAK3AUFhgyyLn6jRRtey-Qa7sQvwfU7mwZ-18Pv-9LoFB_3RZ-2izOQ8t7LBPOnrD3XjdmQxyaB2rTDDCQUURBNOI_TD6gge-h0X2umE1eXCv6QI4yVsiy2Fyy_vjnrvRZsd8GlgG8zH85DTjG1XgWGPMjzmteUmgrqlBvmiu9xT-d8IPOSNIQD8v7C3bKTTyPfg6Kg6E-KY-b4j-6Zk6HGG5Zkn-2HfJ9iP1NV3jnKXzSvCB17sAoFeq53sqYOH56ym_fp9FCgnd2UPla23mgp7s0OKhi1G0XpQS8k5gaZcM8HqGO4opel214CwuxMs9RRr2X5irEVGZHsDSCiGAG9dUif6=w1024-h640-no \"VScode\")\n\n當偵錯程式到達中斷點時，它會停止執行程式。可以看到即時的變數狀態。\n\n![偵錯程式到達中斷點](https://lh3.googleusercontent.com/PHfyaHbm9eQO9FbCwSAle7gnDIc8lQBV_xy8DcsHJhjXVxrlOIpy545RRPLhqrxFCVk8b-NJRHPsk_m6Q_ZD4ay2pmc9f-euzOb0MP4-LjsZZAQLub3ZIEhegPXdk080UlGsBCsWGsQqKSAwWiKUObRgciqhK_OwMaWntRj3N6KqStHynWbE3scX4ulzPXDvc8RTltvVy0oNa_PwA4Cl8fPNrwBP5-enzAekmvHxgUC4TaiDKzbx-umezU0thwPRb1eW2c-e2-2gRfP5FwLdyMU9csTKp5pPNH8HEY9NWetKXG5Ts5PPsBCBE0sCTNrFkOfAdbLuX_VfN0_P5cq5lp74HvnLiNZR2I6huZAEsrKyQ9cEZEHauchsR-ltukUMdj9pJ5fyKVGXvqfx--QRSBH_3yUCzr9GWXvmaHH58dUiFXscDecY8dVEzezD2eRxeSxfwcha8Kjk6uNuP1JQgajFutVNAC4K7kTUKamY7hz7otxMh6DaLcbkrkyS4skYoiwP13VrniujSM7NxDwo50FDlsw-mc77o99BcSSeysEzkGUx7Q-nlDC0UA6N5u8QyQBXna-F4tVJvxpolM9ZW6_6e5T1kAH1Tfp_mB5kOayoi3CYIRC8IdWkpGhjEiG2WSSSh6-EKUItY8KupELRogG0-gg8qp6v=w1024-h640-no \"VScode\")\n\n選取頂端的綠色箭頭以繼續偵錯，或者選取頂端的紅色正方形以停止偵錯。\n\n如此一來，`.Net Core` 專案就能完全使用 `VScode` 來開發和偵錯囉，不用怕電腦卡卡，也能夠快速唰唰的專心寫程式囉～\n\n今天的範例在 [github](https://github.com/Annilla/dotnet-core-vue-cli/tree/v1.1.0)，下回見～\n\n## 參考資料\n\n* [C# 與 Visual Studio Code 使用者入門 - 偵錯](https://docs.microsoft.com/zh-tw/dotnet/core/tutorials/with-visual-studio-code#debug)\n","source":"_posts/DotnetCore/NET-Core-2-0-Debug-with-VScode.md","raw":"---\ntitle: .NET Core 2.0 Debug with VScode\ncategories:\n  - .NET Core\nthumbnailImage: http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png\nthumbnailImagePosition: left\ncoverImage: http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png\ncoverMeta: out\ntags: [.NET Core, dotnet, Vue, Webpack, SPA, MVC, VScode]\ndate: 2017/12/25\nupdated: 2017/12/25\n---\n\n這次要教大家如何使用 `VScode` debug `.Net Core` 的專案喔～\n<!--more-->\n\n## 安裝套件 `C#`\n\n前往擴充套件頁籤安裝 `C#` plugin。\n\n![安裝擴充套件](https://lh3.googleusercontent.com/WoyeazFGIwdMoBiISJaBDnAHV4aKF4SkSH_oySq-Qj9wrlGGhdBWegq17YOCQ3Cidk_8Ti0myrj3GuOkt_xzbucZmOvqIlocY6Xx9zlUCicvOLty7wXLDLjn_HaLm2VEVy-6pO9aRvil_LTLl2AGqGY8ZJzPaxg8CqifgRztmr6XIr5XCGLa6IJuBeRomWhfQkEGE1ln-3Q6xo9GrHn6aREQD4mOjfXMezWz7b4SbUPGzNfL7JyLWSJGO3PM_UC-QE4aRdZX-iHSw26x4JBjWfixr_LLnze82bPWnyZzN7IeL0QAUk966Y0qskJ-tun7xO9xn4AVjjB6fiTyCBAqkY4T1ubUpKChSey2VydPDJ8ywR0n2_vmtMTy45kE3Re07tGrcakl0Jynwzqj-qHDM2OkD3yYfB5rJKwAeHf74CM0nF-53r2SAoznYHjdbgx7mhufwv1-UpSqnBjHz1kl0i4tjVwoOnXpYAaVGcmkDmvSJgIqeKs2h9DHcTaCyFoEPaOVFaRmfhzA1fPG1bdYvaQbNS2tjAdTA1A0GEeBSbYZhutKQtnZt1MDchm5FLIPE6tOMmbBYAKoa6iFszZwb0JgHe_9RIad0mom412TgqEDo5KiChdc1Ol_lO_AtxhuRx2_YAsGQJMgLxHiFjklfYk_QxlfyfUV=w1024-h640-no \"VScode\")\n\n安裝完成重新啟動後，`VScode` 會自動安裝符合目前作業系統的 `OmniSharp`。\n\n![重啟後 OmniSharp 自動安裝](https://lh3.googleusercontent.com/RI4MQD-Lt5ciaUzQyRIdE0DsHoaVS-E0J3j-iXlezl6ib5c1LXFF6n2vGT2ZIdAbSsaVtdjQCvZ5BVhoDhL6JqaHnn7bJ92Jlhe7FIigiX1lhz95heSOQ7wQJ2jvctRIMUzYx1qJ9me5CAZDRBDb7MZzaAP6Jh1cp4n4BJThfnvdaoaBJeeWV_Bo7KtUhTXxgp5JbrvITua-LYR_qgiWlyEyTEftCU8NPMJwXTzm4jiDvxZFEhOo06mI3t93t5a0ubjsh6tBUBcdxi6GM__E_9x4RO29ms4WB6dwcFgE1tG_uvuHt7hv7zWeuyxA7b-gOT0Rge847HMGiMaunr6WJ3jOcDzc_fQw5NYwc1wuVEHjyI2BLDfuJ8Uctnvm-8ygoDnXdyoT3UWrvoxxyZdV38PFQm9nvSGOBJ-kMlM_nnnPYGOWC6KAH4Qk7rBk_e9w3-ybeKIItJXnmUxe14fGhlPWonfUa8OaMiHmY1J_pujCcl_6f6VpRPViXjcnKwcTdLFArr7EabWrA8Q2zd7xifIU9zQL540qvRQnmaxiaU98LmISI_DTUqQPNxyepGtLx_dn_HqJGdypTLeAj5MlquIVia3vHSNTUqTmCJzw6gw5hLJmbnlnVAtQ8ehZN-E2iTzKjJYMv4JPn2IGII_ppRIPRj1LxdDE=w1024-h640-no \"VScode\")\n\n## 加入偵錯設定\n\n打開 `Program.cs` ，`VScode` 會提示使用者進行資產建置及偵錯您的應用程式。選取 `Yes`。\n\n![提示使用者進行資產建置及偵錯您的應用程式](https://docs.microsoft.com/zh-tw/dotnet/core/tutorials/media/with-visual-studio-code/missing-assets.png \"VScode\")\n\n選取 `Yes` 之後，系統會自動產生 `.vscode` 的資料夾，放置工作任務設定檔。\n\n![系統會自動產生 .vscode 的資料夾](https://lh3.googleusercontent.com/QKxHuk0-14c5yFlk0j01dWnrdTtygpjp5vjUh7lI22U-DHTm_hjfzjm1Wep3OkCcyY3j6I5saAtacWAw2oYDH37ndXbzs2z-hR6FROq_LP2N-KgU0S7ZmpUa-cj3RNwBN9AYnApjxZUOCKfSqRjdX5Yhpz9tv2grCIFqugRF7rWGY9ZQAXbgkTpo6k9QrFb0GFN07UH2UwG5jxDbTBpE7CN0z2LAOn_4SUEgRIYOeG1b7paoyZj4h0cyxm8aWt8V0XLC-cZcbcU7LDAhQI-oBa-Ti3hE1Wkbr1v1a1W4H6yVYNYTf3Zgsuvs-O7Dzf57AV5dzQz2HY9PfiSpC0RlrT-eYY51ZBHWibmme2rK_VX2fm1kDWxVhI9uz3CoHCeh7GvMfZRsHn1FyH6pKBB3gk86LT9mVAqTFv3XUZGyJbY8a9ONbkU49x1p_xWcNoX-9ZZ53hMmIIuOzU5I-cgV7vb4hYTkMMRydRxxzAJjbofdFjRQKSaM85Dfxulvls0Sqx_yhmitwjYoEySOuYbr-UIvIePmF-By0uK4RMU8WvVGdRMHnOBrdkTNY7vH5d9gZGZuVmywjmrkGXpOc7jBmmG-rwU72Y5SDEN9WUMtGiWR5yIU4LBUA8MkO-S-o5ZWRNNWxq70KFvwrmQ_PfBRPNpJ48hZ-tPJ=w1024-h359-no \"VScode\")\n\n## 測試偵錯\n\n1. 確定環境選項是 `.Net Core Launch (Web)`。\n2. 開啟 `HomeController.cs` 下中斷點。\n3. 快捷鍵 `F5` 或點 `綠色箭號按鈕` 啟動偵錯。\n\n![測試偵錯](https://lh3.googleusercontent.com/3Lsi1A49C7GBVkjve6ddsy4306z6SRmaTDDFDiw663yeWMpkjyymxMroq4j1OvLmDjgViAdBYZpcKl6_cxFgL41ATW4gUwrvQW9iqA3EWSpYClATSOD4BScyynCPp-dJeOnNVkXwtIN8oCu8JlXDNRsS9FeWHFTu1s8wB3Mes7dHsaZNE54kFHRtzMpNp2ByzXByxl2H9nvVGzvO6DhYTBHrRgpGUW5xskcbVxq6MwmaqLRBrjM7PUXVu-QJVYxs6AC59YM1gr7hoCR0PbK-jt1x3FFSphImhlscS4qYMM_46CYEPOY9Wz91oD5AJSdiSfjaXAK3AUFhgyyLn6jRRtey-Qa7sQvwfU7mwZ-18Pv-9LoFB_3RZ-2izOQ8t7LBPOnrD3XjdmQxyaB2rTDDCQUURBNOI_TD6gge-h0X2umE1eXCv6QI4yVsiy2Fyy_vjnrvRZsd8GlgG8zH85DTjG1XgWGPMjzmteUmgrqlBvmiu9xT-d8IPOSNIQD8v7C3bKTTyPfg6Kg6E-KY-b4j-6Zk6HGG5Zkn-2HfJ9iP1NV3jnKXzSvCB17sAoFeq53sqYOH56ym_fp9FCgnd2UPla23mgp7s0OKhi1G0XpQS8k5gaZcM8HqGO4opel214CwuxMs9RRr2X5irEVGZHsDSCiGAG9dUif6=w1024-h640-no \"VScode\")\n\n當偵錯程式到達中斷點時，它會停止執行程式。可以看到即時的變數狀態。\n\n![偵錯程式到達中斷點](https://lh3.googleusercontent.com/PHfyaHbm9eQO9FbCwSAle7gnDIc8lQBV_xy8DcsHJhjXVxrlOIpy545RRPLhqrxFCVk8b-NJRHPsk_m6Q_ZD4ay2pmc9f-euzOb0MP4-LjsZZAQLub3ZIEhegPXdk080UlGsBCsWGsQqKSAwWiKUObRgciqhK_OwMaWntRj3N6KqStHynWbE3scX4ulzPXDvc8RTltvVy0oNa_PwA4Cl8fPNrwBP5-enzAekmvHxgUC4TaiDKzbx-umezU0thwPRb1eW2c-e2-2gRfP5FwLdyMU9csTKp5pPNH8HEY9NWetKXG5Ts5PPsBCBE0sCTNrFkOfAdbLuX_VfN0_P5cq5lp74HvnLiNZR2I6huZAEsrKyQ9cEZEHauchsR-ltukUMdj9pJ5fyKVGXvqfx--QRSBH_3yUCzr9GWXvmaHH58dUiFXscDecY8dVEzezD2eRxeSxfwcha8Kjk6uNuP1JQgajFutVNAC4K7kTUKamY7hz7otxMh6DaLcbkrkyS4skYoiwP13VrniujSM7NxDwo50FDlsw-mc77o99BcSSeysEzkGUx7Q-nlDC0UA6N5u8QyQBXna-F4tVJvxpolM9ZW6_6e5T1kAH1Tfp_mB5kOayoi3CYIRC8IdWkpGhjEiG2WSSSh6-EKUItY8KupELRogG0-gg8qp6v=w1024-h640-no \"VScode\")\n\n選取頂端的綠色箭頭以繼續偵錯，或者選取頂端的紅色正方形以停止偵錯。\n\n如此一來，`.Net Core` 專案就能完全使用 `VScode` 來開發和偵錯囉，不用怕電腦卡卡，也能夠快速唰唰的專心寫程式囉～\n\n今天的範例在 [github](https://github.com/Annilla/dotnet-core-vue-cli/tree/v1.1.0)，下回見～\n\n## 參考資料\n\n* [C# 與 Visual Studio Code 使用者入門 - 偵錯](https://docs.microsoft.com/zh-tw/dotnet/core/tutorials/with-visual-studio-code#debug)\n","slug":"DotnetCore/NET-Core-2-0-Debug-with-VScode","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74l000wtudh98gaxpj9","content":"<p>這次要教大家如何使用 <code>VScode</code> debug <code>.Net Core</code> 的專案喔～<br><a id=\"more\"></a></p>\n<h2 id=\"安裝套件-C\"><a href=\"#安裝套件-C\" class=\"headerlink\" title=\"安裝套件 C#\"></a>安裝套件 <code>C#</code></h2><p>前往擴充套件頁籤安裝 <code>C#</code> plugin。</p>\n<p><img src=\"https://lh3.googleusercontent.com/WoyeazFGIwdMoBiISJaBDnAHV4aKF4SkSH_oySq-Qj9wrlGGhdBWegq17YOCQ3Cidk_8Ti0myrj3GuOkt_xzbucZmOvqIlocY6Xx9zlUCicvOLty7wXLDLjn_HaLm2VEVy-6pO9aRvil_LTLl2AGqGY8ZJzPaxg8CqifgRztmr6XIr5XCGLa6IJuBeRomWhfQkEGE1ln-3Q6xo9GrHn6aREQD4mOjfXMezWz7b4SbUPGzNfL7JyLWSJGO3PM_UC-QE4aRdZX-iHSw26x4JBjWfixr_LLnze82bPWnyZzN7IeL0QAUk966Y0qskJ-tun7xO9xn4AVjjB6fiTyCBAqkY4T1ubUpKChSey2VydPDJ8ywR0n2_vmtMTy45kE3Re07tGrcakl0Jynwzqj-qHDM2OkD3yYfB5rJKwAeHf74CM0nF-53r2SAoznYHjdbgx7mhufwv1-UpSqnBjHz1kl0i4tjVwoOnXpYAaVGcmkDmvSJgIqeKs2h9DHcTaCyFoEPaOVFaRmfhzA1fPG1bdYvaQbNS2tjAdTA1A0GEeBSbYZhutKQtnZt1MDchm5FLIPE6tOMmbBYAKoa6iFszZwb0JgHe_9RIad0mom412TgqEDo5KiChdc1Ol_lO_AtxhuRx2_YAsGQJMgLxHiFjklfYk_QxlfyfUV=w1024-h640-no\" alt=\"安裝擴充套件\" title=\"VScode\"></p>\n<p>安裝完成重新啟動後，<code>VScode</code> 會自動安裝符合目前作業系統的 <code>OmniSharp</code>。</p>\n<p><img src=\"https://lh3.googleusercontent.com/RI4MQD-Lt5ciaUzQyRIdE0DsHoaVS-E0J3j-iXlezl6ib5c1LXFF6n2vGT2ZIdAbSsaVtdjQCvZ5BVhoDhL6JqaHnn7bJ92Jlhe7FIigiX1lhz95heSOQ7wQJ2jvctRIMUzYx1qJ9me5CAZDRBDb7MZzaAP6Jh1cp4n4BJThfnvdaoaBJeeWV_Bo7KtUhTXxgp5JbrvITua-LYR_qgiWlyEyTEftCU8NPMJwXTzm4jiDvxZFEhOo06mI3t93t5a0ubjsh6tBUBcdxi6GM__E_9x4RO29ms4WB6dwcFgE1tG_uvuHt7hv7zWeuyxA7b-gOT0Rge847HMGiMaunr6WJ3jOcDzc_fQw5NYwc1wuVEHjyI2BLDfuJ8Uctnvm-8ygoDnXdyoT3UWrvoxxyZdV38PFQm9nvSGOBJ-kMlM_nnnPYGOWC6KAH4Qk7rBk_e9w3-ybeKIItJXnmUxe14fGhlPWonfUa8OaMiHmY1J_pujCcl_6f6VpRPViXjcnKwcTdLFArr7EabWrA8Q2zd7xifIU9zQL540qvRQnmaxiaU98LmISI_DTUqQPNxyepGtLx_dn_HqJGdypTLeAj5MlquIVia3vHSNTUqTmCJzw6gw5hLJmbnlnVAtQ8ehZN-E2iTzKjJYMv4JPn2IGII_ppRIPRj1LxdDE=w1024-h640-no\" alt=\"重啟後 OmniSharp 自動安裝\" title=\"VScode\"></p>\n<h2 id=\"加入偵錯設定\"><a href=\"#加入偵錯設定\" class=\"headerlink\" title=\"加入偵錯設定\"></a>加入偵錯設定</h2><p>打開 <code>Program.cs</code> ，<code>VScode</code> 會提示使用者進行資產建置及偵錯您的應用程式。選取 <code>Yes</code>。</p>\n<p><img src=\"https://docs.microsoft.com/zh-tw/dotnet/core/tutorials/media/with-visual-studio-code/missing-assets.png\" alt=\"提示使用者進行資產建置及偵錯您的應用程式\" title=\"VScode\"></p>\n<p>選取 <code>Yes</code> 之後，系統會自動產生 <code>.vscode</code> 的資料夾，放置工作任務設定檔。</p>\n<p><img src=\"https://lh3.googleusercontent.com/QKxHuk0-14c5yFlk0j01dWnrdTtygpjp5vjUh7lI22U-DHTm_hjfzjm1Wep3OkCcyY3j6I5saAtacWAw2oYDH37ndXbzs2z-hR6FROq_LP2N-KgU0S7ZmpUa-cj3RNwBN9AYnApjxZUOCKfSqRjdX5Yhpz9tv2grCIFqugRF7rWGY9ZQAXbgkTpo6k9QrFb0GFN07UH2UwG5jxDbTBpE7CN0z2LAOn_4SUEgRIYOeG1b7paoyZj4h0cyxm8aWt8V0XLC-cZcbcU7LDAhQI-oBa-Ti3hE1Wkbr1v1a1W4H6yVYNYTf3Zgsuvs-O7Dzf57AV5dzQz2HY9PfiSpC0RlrT-eYY51ZBHWibmme2rK_VX2fm1kDWxVhI9uz3CoHCeh7GvMfZRsHn1FyH6pKBB3gk86LT9mVAqTFv3XUZGyJbY8a9ONbkU49x1p_xWcNoX-9ZZ53hMmIIuOzU5I-cgV7vb4hYTkMMRydRxxzAJjbofdFjRQKSaM85Dfxulvls0Sqx_yhmitwjYoEySOuYbr-UIvIePmF-By0uK4RMU8WvVGdRMHnOBrdkTNY7vH5d9gZGZuVmywjmrkGXpOc7jBmmG-rwU72Y5SDEN9WUMtGiWR5yIU4LBUA8MkO-S-o5ZWRNNWxq70KFvwrmQ_PfBRPNpJ48hZ-tPJ=w1024-h359-no\" alt=\"系統會自動產生 .vscode 的資料夾\" title=\"VScode\"></p>\n<h2 id=\"測試偵錯\"><a href=\"#測試偵錯\" class=\"headerlink\" title=\"測試偵錯\"></a>測試偵錯</h2><ol>\n<li>確定環境選項是 <code>.Net Core Launch (Web)</code>。</li>\n<li>開啟 <code>HomeController.cs</code> 下中斷點。</li>\n<li>快捷鍵 <code>F5</code> 或點 <code>綠色箭號按鈕</code> 啟動偵錯。</li>\n</ol>\n<p><img src=\"https://lh3.googleusercontent.com/3Lsi1A49C7GBVkjve6ddsy4306z6SRmaTDDFDiw663yeWMpkjyymxMroq4j1OvLmDjgViAdBYZpcKl6_cxFgL41ATW4gUwrvQW9iqA3EWSpYClATSOD4BScyynCPp-dJeOnNVkXwtIN8oCu8JlXDNRsS9FeWHFTu1s8wB3Mes7dHsaZNE54kFHRtzMpNp2ByzXByxl2H9nvVGzvO6DhYTBHrRgpGUW5xskcbVxq6MwmaqLRBrjM7PUXVu-QJVYxs6AC59YM1gr7hoCR0PbK-jt1x3FFSphImhlscS4qYMM_46CYEPOY9Wz91oD5AJSdiSfjaXAK3AUFhgyyLn6jRRtey-Qa7sQvwfU7mwZ-18Pv-9LoFB_3RZ-2izOQ8t7LBPOnrD3XjdmQxyaB2rTDDCQUURBNOI_TD6gge-h0X2umE1eXCv6QI4yVsiy2Fyy_vjnrvRZsd8GlgG8zH85DTjG1XgWGPMjzmteUmgrqlBvmiu9xT-d8IPOSNIQD8v7C3bKTTyPfg6Kg6E-KY-b4j-6Zk6HGG5Zkn-2HfJ9iP1NV3jnKXzSvCB17sAoFeq53sqYOH56ym_fp9FCgnd2UPla23mgp7s0OKhi1G0XpQS8k5gaZcM8HqGO4opel214CwuxMs9RRr2X5irEVGZHsDSCiGAG9dUif6=w1024-h640-no\" alt=\"測試偵錯\" title=\"VScode\"></p>\n<p>當偵錯程式到達中斷點時，它會停止執行程式。可以看到即時的變數狀態。</p>\n<p><img src=\"https://lh3.googleusercontent.com/PHfyaHbm9eQO9FbCwSAle7gnDIc8lQBV_xy8DcsHJhjXVxrlOIpy545RRPLhqrxFCVk8b-NJRHPsk_m6Q_ZD4ay2pmc9f-euzOb0MP4-LjsZZAQLub3ZIEhegPXdk080UlGsBCsWGsQqKSAwWiKUObRgciqhK_OwMaWntRj3N6KqStHynWbE3scX4ulzPXDvc8RTltvVy0oNa_PwA4Cl8fPNrwBP5-enzAekmvHxgUC4TaiDKzbx-umezU0thwPRb1eW2c-e2-2gRfP5FwLdyMU9csTKp5pPNH8HEY9NWetKXG5Ts5PPsBCBE0sCTNrFkOfAdbLuX_VfN0_P5cq5lp74HvnLiNZR2I6huZAEsrKyQ9cEZEHauchsR-ltukUMdj9pJ5fyKVGXvqfx--QRSBH_3yUCzr9GWXvmaHH58dUiFXscDecY8dVEzezD2eRxeSxfwcha8Kjk6uNuP1JQgajFutVNAC4K7kTUKamY7hz7otxMh6DaLcbkrkyS4skYoiwP13VrniujSM7NxDwo50FDlsw-mc77o99BcSSeysEzkGUx7Q-nlDC0UA6N5u8QyQBXna-F4tVJvxpolM9ZW6_6e5T1kAH1Tfp_mB5kOayoi3CYIRC8IdWkpGhjEiG2WSSSh6-EKUItY8KupELRogG0-gg8qp6v=w1024-h640-no\" alt=\"偵錯程式到達中斷點\" title=\"VScode\"></p>\n<p>選取頂端的綠色箭頭以繼續偵錯，或者選取頂端的紅色正方形以停止偵錯。</p>\n<p>如此一來，<code>.Net Core</code> 專案就能完全使用 <code>VScode</code> 來開發和偵錯囉，不用怕電腦卡卡，也能夠快速唰唰的專心寫程式囉～</p>\n<p>今天的範例在 <a href=\"https://github.com/Annilla/dotnet-core-vue-cli/tree/v1.1.0\" target=\"_blank\" rel=\"noopener\">github</a>，下回見～</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://docs.microsoft.com/zh-tw/dotnet/core/tutorials/with-visual-studio-code#debug\" target=\"_blank\" rel=\"noopener\">C# 與 Visual Studio Code 使用者入門 - 偵錯</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png","excerpt":"<p>這次要教大家如何使用 <code>VScode</code> debug <code>.Net Core</code> 的專案喔～<br>","more":"</p>\n<h2 id=\"安裝套件-C\"><a href=\"#安裝套件-C\" class=\"headerlink\" title=\"安裝套件 C#\"></a>安裝套件 <code>C#</code></h2><p>前往擴充套件頁籤安裝 <code>C#</code> plugin。</p>\n<p><img src=\"https://lh3.googleusercontent.com/WoyeazFGIwdMoBiISJaBDnAHV4aKF4SkSH_oySq-Qj9wrlGGhdBWegq17YOCQ3Cidk_8Ti0myrj3GuOkt_xzbucZmOvqIlocY6Xx9zlUCicvOLty7wXLDLjn_HaLm2VEVy-6pO9aRvil_LTLl2AGqGY8ZJzPaxg8CqifgRztmr6XIr5XCGLa6IJuBeRomWhfQkEGE1ln-3Q6xo9GrHn6aREQD4mOjfXMezWz7b4SbUPGzNfL7JyLWSJGO3PM_UC-QE4aRdZX-iHSw26x4JBjWfixr_LLnze82bPWnyZzN7IeL0QAUk966Y0qskJ-tun7xO9xn4AVjjB6fiTyCBAqkY4T1ubUpKChSey2VydPDJ8ywR0n2_vmtMTy45kE3Re07tGrcakl0Jynwzqj-qHDM2OkD3yYfB5rJKwAeHf74CM0nF-53r2SAoznYHjdbgx7mhufwv1-UpSqnBjHz1kl0i4tjVwoOnXpYAaVGcmkDmvSJgIqeKs2h9DHcTaCyFoEPaOVFaRmfhzA1fPG1bdYvaQbNS2tjAdTA1A0GEeBSbYZhutKQtnZt1MDchm5FLIPE6tOMmbBYAKoa6iFszZwb0JgHe_9RIad0mom412TgqEDo5KiChdc1Ol_lO_AtxhuRx2_YAsGQJMgLxHiFjklfYk_QxlfyfUV=w1024-h640-no\" alt=\"安裝擴充套件\" title=\"VScode\"></p>\n<p>安裝完成重新啟動後，<code>VScode</code> 會自動安裝符合目前作業系統的 <code>OmniSharp</code>。</p>\n<p><img src=\"https://lh3.googleusercontent.com/RI4MQD-Lt5ciaUzQyRIdE0DsHoaVS-E0J3j-iXlezl6ib5c1LXFF6n2vGT2ZIdAbSsaVtdjQCvZ5BVhoDhL6JqaHnn7bJ92Jlhe7FIigiX1lhz95heSOQ7wQJ2jvctRIMUzYx1qJ9me5CAZDRBDb7MZzaAP6Jh1cp4n4BJThfnvdaoaBJeeWV_Bo7KtUhTXxgp5JbrvITua-LYR_qgiWlyEyTEftCU8NPMJwXTzm4jiDvxZFEhOo06mI3t93t5a0ubjsh6tBUBcdxi6GM__E_9x4RO29ms4WB6dwcFgE1tG_uvuHt7hv7zWeuyxA7b-gOT0Rge847HMGiMaunr6WJ3jOcDzc_fQw5NYwc1wuVEHjyI2BLDfuJ8Uctnvm-8ygoDnXdyoT3UWrvoxxyZdV38PFQm9nvSGOBJ-kMlM_nnnPYGOWC6KAH4Qk7rBk_e9w3-ybeKIItJXnmUxe14fGhlPWonfUa8OaMiHmY1J_pujCcl_6f6VpRPViXjcnKwcTdLFArr7EabWrA8Q2zd7xifIU9zQL540qvRQnmaxiaU98LmISI_DTUqQPNxyepGtLx_dn_HqJGdypTLeAj5MlquIVia3vHSNTUqTmCJzw6gw5hLJmbnlnVAtQ8ehZN-E2iTzKjJYMv4JPn2IGII_ppRIPRj1LxdDE=w1024-h640-no\" alt=\"重啟後 OmniSharp 自動安裝\" title=\"VScode\"></p>\n<h2 id=\"加入偵錯設定\"><a href=\"#加入偵錯設定\" class=\"headerlink\" title=\"加入偵錯設定\"></a>加入偵錯設定</h2><p>打開 <code>Program.cs</code> ，<code>VScode</code> 會提示使用者進行資產建置及偵錯您的應用程式。選取 <code>Yes</code>。</p>\n<p><img src=\"https://docs.microsoft.com/zh-tw/dotnet/core/tutorials/media/with-visual-studio-code/missing-assets.png\" alt=\"提示使用者進行資產建置及偵錯您的應用程式\" title=\"VScode\"></p>\n<p>選取 <code>Yes</code> 之後，系統會自動產生 <code>.vscode</code> 的資料夾，放置工作任務設定檔。</p>\n<p><img src=\"https://lh3.googleusercontent.com/QKxHuk0-14c5yFlk0j01dWnrdTtygpjp5vjUh7lI22U-DHTm_hjfzjm1Wep3OkCcyY3j6I5saAtacWAw2oYDH37ndXbzs2z-hR6FROq_LP2N-KgU0S7ZmpUa-cj3RNwBN9AYnApjxZUOCKfSqRjdX5Yhpz9tv2grCIFqugRF7rWGY9ZQAXbgkTpo6k9QrFb0GFN07UH2UwG5jxDbTBpE7CN0z2LAOn_4SUEgRIYOeG1b7paoyZj4h0cyxm8aWt8V0XLC-cZcbcU7LDAhQI-oBa-Ti3hE1Wkbr1v1a1W4H6yVYNYTf3Zgsuvs-O7Dzf57AV5dzQz2HY9PfiSpC0RlrT-eYY51ZBHWibmme2rK_VX2fm1kDWxVhI9uz3CoHCeh7GvMfZRsHn1FyH6pKBB3gk86LT9mVAqTFv3XUZGyJbY8a9ONbkU49x1p_xWcNoX-9ZZ53hMmIIuOzU5I-cgV7vb4hYTkMMRydRxxzAJjbofdFjRQKSaM85Dfxulvls0Sqx_yhmitwjYoEySOuYbr-UIvIePmF-By0uK4RMU8WvVGdRMHnOBrdkTNY7vH5d9gZGZuVmywjmrkGXpOc7jBmmG-rwU72Y5SDEN9WUMtGiWR5yIU4LBUA8MkO-S-o5ZWRNNWxq70KFvwrmQ_PfBRPNpJ48hZ-tPJ=w1024-h359-no\" alt=\"系統會自動產生 .vscode 的資料夾\" title=\"VScode\"></p>\n<h2 id=\"測試偵錯\"><a href=\"#測試偵錯\" class=\"headerlink\" title=\"測試偵錯\"></a>測試偵錯</h2><ol>\n<li>確定環境選項是 <code>.Net Core Launch (Web)</code>。</li>\n<li>開啟 <code>HomeController.cs</code> 下中斷點。</li>\n<li>快捷鍵 <code>F5</code> 或點 <code>綠色箭號按鈕</code> 啟動偵錯。</li>\n</ol>\n<p><img src=\"https://lh3.googleusercontent.com/3Lsi1A49C7GBVkjve6ddsy4306z6SRmaTDDFDiw663yeWMpkjyymxMroq4j1OvLmDjgViAdBYZpcKl6_cxFgL41ATW4gUwrvQW9iqA3EWSpYClATSOD4BScyynCPp-dJeOnNVkXwtIN8oCu8JlXDNRsS9FeWHFTu1s8wB3Mes7dHsaZNE54kFHRtzMpNp2ByzXByxl2H9nvVGzvO6DhYTBHrRgpGUW5xskcbVxq6MwmaqLRBrjM7PUXVu-QJVYxs6AC59YM1gr7hoCR0PbK-jt1x3FFSphImhlscS4qYMM_46CYEPOY9Wz91oD5AJSdiSfjaXAK3AUFhgyyLn6jRRtey-Qa7sQvwfU7mwZ-18Pv-9LoFB_3RZ-2izOQ8t7LBPOnrD3XjdmQxyaB2rTDDCQUURBNOI_TD6gge-h0X2umE1eXCv6QI4yVsiy2Fyy_vjnrvRZsd8GlgG8zH85DTjG1XgWGPMjzmteUmgrqlBvmiu9xT-d8IPOSNIQD8v7C3bKTTyPfg6Kg6E-KY-b4j-6Zk6HGG5Zkn-2HfJ9iP1NV3jnKXzSvCB17sAoFeq53sqYOH56ym_fp9FCgnd2UPla23mgp7s0OKhi1G0XpQS8k5gaZcM8HqGO4opel214CwuxMs9RRr2X5irEVGZHsDSCiGAG9dUif6=w1024-h640-no\" alt=\"測試偵錯\" title=\"VScode\"></p>\n<p>當偵錯程式到達中斷點時，它會停止執行程式。可以看到即時的變數狀態。</p>\n<p><img src=\"https://lh3.googleusercontent.com/PHfyaHbm9eQO9FbCwSAle7gnDIc8lQBV_xy8DcsHJhjXVxrlOIpy545RRPLhqrxFCVk8b-NJRHPsk_m6Q_ZD4ay2pmc9f-euzOb0MP4-LjsZZAQLub3ZIEhegPXdk080UlGsBCsWGsQqKSAwWiKUObRgciqhK_OwMaWntRj3N6KqStHynWbE3scX4ulzPXDvc8RTltvVy0oNa_PwA4Cl8fPNrwBP5-enzAekmvHxgUC4TaiDKzbx-umezU0thwPRb1eW2c-e2-2gRfP5FwLdyMU9csTKp5pPNH8HEY9NWetKXG5Ts5PPsBCBE0sCTNrFkOfAdbLuX_VfN0_P5cq5lp74HvnLiNZR2I6huZAEsrKyQ9cEZEHauchsR-ltukUMdj9pJ5fyKVGXvqfx--QRSBH_3yUCzr9GWXvmaHH58dUiFXscDecY8dVEzezD2eRxeSxfwcha8Kjk6uNuP1JQgajFutVNAC4K7kTUKamY7hz7otxMh6DaLcbkrkyS4skYoiwP13VrniujSM7NxDwo50FDlsw-mc77o99BcSSeysEzkGUx7Q-nlDC0UA6N5u8QyQBXna-F4tVJvxpolM9ZW6_6e5T1kAH1Tfp_mB5kOayoi3CYIRC8IdWkpGhjEiG2WSSSh6-EKUItY8KupELRogG0-gg8qp6v=w1024-h640-no\" alt=\"偵錯程式到達中斷點\" title=\"VScode\"></p>\n<p>選取頂端的綠色箭頭以繼續偵錯，或者選取頂端的紅色正方形以停止偵錯。</p>\n<p>如此一來，<code>.Net Core</code> 專案就能完全使用 <code>VScode</code> 來開發和偵錯囉，不用怕電腦卡卡，也能夠快速唰唰的專心寫程式囉～</p>\n<p>今天的範例在 <a href=\"https://github.com/Annilla/dotnet-core-vue-cli/tree/v1.1.0\" target=\"_blank\" rel=\"noopener\">github</a>，下回見～</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://docs.microsoft.com/zh-tw/dotnet/core/tutorials/with-visual-studio-code#debug\" target=\"_blank\" rel=\"noopener\">C# 與 Visual Studio Code 使用者入門 - 偵錯</a></li>\n</ul>"},{"title":".NET Core Upgrade 2.2 with Webpack4 & Vue","thumbnailImage":"http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png","thumbnailImagePosition":"left","coverImage":"http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png","coverMeta":"out","date":"2018-12-31T16:00:00.000Z","updated":"2018-12-31T16:00:00.000Z","_content":"\n紀錄 .NET Core 升級到 2.2 和 Webpack 升到 4 要注意的地方～\n\n<!--more-->\n\n---\n## .NET Core 2.2 設定\n\n### csproj 專案檔\n\n`TargetFramework` 版本要改成 2.2, `PackageReference` 改成單一個 `Microsoft.AspNetCore.App`，就可以囉～\n\n``` XML\n<Project Sdk=\"Microsoft.NET.Sdk.Web\">\n  <PropertyGroup>\n    <TargetFramework>netcoreapp2.2</TargetFramework>\n  </PropertyGroup>\n  <ItemGroup>\n    <PackageReference Include=\"Microsoft.AspNetCore.App\" />\n  </ItemGroup>\n</Project>\n```\n\n### Program.cs\n\n修改 `Program.cs` 中 `class` 內的程式，參考如下程式片段。\n\n``` C#\nnamespace dotnet_core_vue_cli\n{\n  public class Program\n  {\n      public static void Main(string[] args)\n      {\n        CreateWebHostBuilder(args).Build().Run();\n      }\n\n      public static IWebHostBuilder CreateWebHostBuilder(string[] args) =>\n        WebHost.CreateDefaultBuilder(args)\n          .UseStartup<Startup>();\n  }\n}\n```\n\n---\n## VScode / VS2017 launch 設定\n\n為了在 webpack 上可以依據環境變數判斷不同的 bundle 內容，所以分別在 VScode / VS2017 的 launch 檔案設定環境變數。\n\n### .vscode/launch.json (for VScode)\n\n`.vscode/launch.json` 在環境變數加上 `\"NODE_ENV=development\": \"\"` 。這邊有個小技巧，就是 `=development` 是放在前面，而不是在後面的雙引號，這部分應該是一個小 Bug，但目前先用這個方式解決。\n\n``` json\n...\n  \"env\": {\n    \"ASPNETCORE_ENVIRONMENT\": \"Development\",\n    \"NODE_ENV=development\": \"\"\n  },\n...\n```\n\n### Properties/launchSettings.json (for VS2017)\n\n`Properties/launchSettings.json` 則直接加上環境變數即可。\n\n``` json\n...\n  \"environmentVariables\": {\n    \"ASPNETCORE_ENVIRONMENT\": \"Development\",\n    \"NODE_ENV\": \"development\"\n  }\n...\n```\n\n---\n## Webpack4 設定\n\n### package.json\n\n更新所有 package 並執行 npm install，參考如下設定。\n\n``` json\n{\n  \"name\": \"dotnet-core-vue-cli\",\n  ...\n  \"scripts\": {\n    \"hmr\": \"cross-env ASPNETCORE_ENVIRONMENT=Development NODE_ENV=development dotnet run\",\n    \"build\": \"webpack --config webpack.pro.js\"\n  },\n  \"dependencies\": {\n    \"vue\": \"^2.5.21\"\n  },\n  ...\n  \"devDependencies\": {\n    \"@babel/core\": \"^7.2.2\",\n    \"@babel/preset-env\": \"^7.2.0\",\n    \"aspnet-webpack\": \"^3.0.0\",\n    \"babel-loader\": \"^8.0.4\",\n    \"cross-env\": \"^5.2.0\",\n    \"css-loader\": \"^2.1.0\",\n    \"cssnano\": \"^4.1.8\",\n    \"file-loader\": \"^3.0.1\",\n    \"mini-css-extract-plugin\": \"^0.5.0\",\n    \"node-sass\": \"^4.11.0\",\n    \"postcss-loader\": \"^3.0.0\",\n    \"postcss-preset-env\": \"^6.5.0\",\n    \"sass-loader\": \"^7.1.0\",\n    \"uglifyjs-webpack-plugin\": \"^2.1.1\",\n    \"vue-loader\": \"^15.4.2\",\n    \"vue-style-loader\": \"^4.1.2\",\n    \"vue-template-compiler\": \"^2.5.21\",\n    \"webpack\": \"^4.28.2\",\n    \"webpack-cli\": \"^3.1.2\",\n    \"webpack-dev-middleware\": \"^3.4.0\",\n    \"webpack-hot-middleware\": \"^2.24.3\",\n    \"webpack-merge\": \"^4.1.5\"\n  }\n}\n```\n\n### .babelrc\n\n因為升到 `babel` 7 之後套件會整個改成 `@` 開頭的，所以舊的同名 package 就可以刪掉了。所以 `babelrc` 設定檔也要改成如下片段。\n\n```\n{\n  \"presets\": [\n    [\n      \"@babel/preset-env\",\n      {\n        \"modules\": false\n      }\n    ]\n  ]\n}\n```\n\n### postcss.config.js\n\n升級 `Vue-loader` 相容 `Webpack` 4 後就不會有自動 `autoprefixer` 的功能，需要自行引入 `postCSS` 來做這件事情。所以 `postcss.config.js` 設定檔要新增如下片段。\n\n``` js\nmodule.exports = {\n  plugins: {\n    'postcss-preset-env': {},\n    'cssnano': {},\n  }\n}\n```\n\n### webpack.base|config|pro.js\n\n> 這邊升級後沒有用最新 `vue-cli` 3 的原因是因為 `aspnet-webpack` HMR 預設吃的 `webpack` 設定是最外層的 `webpack.config.js`，但最新 `Vue-cli` 3 已經把 `webpack.config.js` 藏起來了，改成 `vue.config.js` 做後續加工處理，且我們不使用 `node server` ，而是用 `dotnet server` 做 `HMR`，所以其實已經不需要 `vue-cli` 3 了。\n\n因為我們需要分成 `develop` 和 `production` 的 `webpack` 設定，所以就可以把 `webpack` 的結構拆成一個共用的基底 `webpack.base.js`，然後 `develop` 就透過 `webpack-merge` 將 `base` 結合 `webpack.config.js`，而 `production` 則是將 `base` 結合 `webpack.pro.js`。\n\n以下擷取部分比較重要的地方跟大家分享。\n\n* webpack.base.js\n\n``` js\nconst path = require('path')\nconst MiniCssExtractPlugin = require(\"mini-css-extract-plugin\")\nconst VueLoaderPlugin = require('vue-loader/lib/plugin')\nconst devMode = process.env.NODE_ENV === 'development'\n\nmodule.exports = {\n  ...\n  module: {\n    rules: [\n      { // vue-loader 已經沒有預設 autoprefixer，所以 CSS 的部分要加上 postCSS\n        test: /\\.vue$/,\n        use: 'vue-loader'\n      },\n      {\n        test: /\\.js$/,\n        use: 'babel-loader',\n        exclude: /node_modules/\n      },\n      { // MiniCssExtractPlugin 目前在 HMR 模式沒辦法打包成獨立的 CSS 檔案，所以在開發模式的時候，必須使用 vue-style-loader 替代，變成 meta 內的 style。\n        test: /\\.scss?$/,\n        use: [\n          devMode ? 'vue-style-loader' : MiniCssExtractPlugin.loader,\n          {\n            loader: 'css-loader',\n            options: {\n              importLoaders: 2\n            }\n          },\n          'postcss-loader', // for autoprefix\n          'sass-loader'\n        ]\n      },\n      {\n        test: /\\.(png|jpg|gif|svg)$/,\n        loader: 'file-loader',\n        options: {\n          publicPath: 'imgs/',\n          outputPath: 'imgs/',\n          name: '[name].[ext]?[hash]'\n        }\n      }\n    ]\n  },\n  plugins: [\n    // Webpack4 需使用 MiniCssExtractPlugin 打包 CSS 成獨立的 CSS\n    new MiniCssExtractPlugin({\n      filename: \"css/main.css\"\n    }),\n    // Webpack4 需使用 VueLoaderPlugin 才能正確讀取 .vue\n    new VueLoaderPlugin()\n  ]\n}\n```\n\n* webpack.config.js\n\n```js\nconst merge = require('webpack-merge')\nconst base = require('./webpack.base')\n\n// 使用 webpack-merge 將 base 和 config 結合\nmodule.exports = merge(base, {\n  /* mode 替換掉以前的 process.env\n    new webpack.DefinePlugin({\n      'process.env': {\n        NODE_ENV: '\"development\"'\n      }\n    }),\n  */\n  mode: 'development',\n  devServer: {\n    historyApiFallback: true,\n    noInfo: false,\n  },\n  devtool: '#eval-source-map',\n})\n```\n\n* webpack.pro.js\n\n``` js\nconst merge = require('webpack-merge')\nconst base = require('./webpack.base')\nconst UglifyJsPlugin = require('uglifyjs-webpack-plugin')\n\n// 使用 webpack-merge 將 base 和 pro 結合\nmodule.exports = merge(base, {\n  /* mode 替換掉以前的 process.env\n    new webpack.DefinePlugin({\n      'process.env': {\n        NODE_ENV: '\"production\"'\n      }\n    }),\n  */\n  mode: 'production',\n  devtool: '#source-map',\n  // 新的 Webpack 4 把優化的部份都移到 optimization 設定\n  // 所以 UglifyJsPlugin 替代掉之前的 webpack.optimize.UglifyJsPlugin\n  optimization: {\n    minimizer: [new UglifyJsPlugin()]\n  }\n})\n```\n\n今天的範例在 [github](https://github.com/Annilla/dotnet-core-vue-cli/tree/v2.2.0)，下回見～","source":"_posts/DotnetCore/NET-Core-Upgrade-2-2-with-Webpack4-Vue.md","raw":"---\ntitle: .NET Core Upgrade 2.2 with Webpack4 & Vue\ncategories:\n  - .NET Core\nthumbnailImage: http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png\nthumbnailImagePosition: left\ncoverImage: http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png\ncoverMeta: out\ntags: [.NET Core, dotnet, Vue, Webpack, SPA, MVC, VScode]\ndate: 2019/01/01\nupdated: 2019/01/01\n---\n\n紀錄 .NET Core 升級到 2.2 和 Webpack 升到 4 要注意的地方～\n\n<!--more-->\n\n---\n## .NET Core 2.2 設定\n\n### csproj 專案檔\n\n`TargetFramework` 版本要改成 2.2, `PackageReference` 改成單一個 `Microsoft.AspNetCore.App`，就可以囉～\n\n``` XML\n<Project Sdk=\"Microsoft.NET.Sdk.Web\">\n  <PropertyGroup>\n    <TargetFramework>netcoreapp2.2</TargetFramework>\n  </PropertyGroup>\n  <ItemGroup>\n    <PackageReference Include=\"Microsoft.AspNetCore.App\" />\n  </ItemGroup>\n</Project>\n```\n\n### Program.cs\n\n修改 `Program.cs` 中 `class` 內的程式，參考如下程式片段。\n\n``` C#\nnamespace dotnet_core_vue_cli\n{\n  public class Program\n  {\n      public static void Main(string[] args)\n      {\n        CreateWebHostBuilder(args).Build().Run();\n      }\n\n      public static IWebHostBuilder CreateWebHostBuilder(string[] args) =>\n        WebHost.CreateDefaultBuilder(args)\n          .UseStartup<Startup>();\n  }\n}\n```\n\n---\n## VScode / VS2017 launch 設定\n\n為了在 webpack 上可以依據環境變數判斷不同的 bundle 內容，所以分別在 VScode / VS2017 的 launch 檔案設定環境變數。\n\n### .vscode/launch.json (for VScode)\n\n`.vscode/launch.json` 在環境變數加上 `\"NODE_ENV=development\": \"\"` 。這邊有個小技巧，就是 `=development` 是放在前面，而不是在後面的雙引號，這部分應該是一個小 Bug，但目前先用這個方式解決。\n\n``` json\n...\n  \"env\": {\n    \"ASPNETCORE_ENVIRONMENT\": \"Development\",\n    \"NODE_ENV=development\": \"\"\n  },\n...\n```\n\n### Properties/launchSettings.json (for VS2017)\n\n`Properties/launchSettings.json` 則直接加上環境變數即可。\n\n``` json\n...\n  \"environmentVariables\": {\n    \"ASPNETCORE_ENVIRONMENT\": \"Development\",\n    \"NODE_ENV\": \"development\"\n  }\n...\n```\n\n---\n## Webpack4 設定\n\n### package.json\n\n更新所有 package 並執行 npm install，參考如下設定。\n\n``` json\n{\n  \"name\": \"dotnet-core-vue-cli\",\n  ...\n  \"scripts\": {\n    \"hmr\": \"cross-env ASPNETCORE_ENVIRONMENT=Development NODE_ENV=development dotnet run\",\n    \"build\": \"webpack --config webpack.pro.js\"\n  },\n  \"dependencies\": {\n    \"vue\": \"^2.5.21\"\n  },\n  ...\n  \"devDependencies\": {\n    \"@babel/core\": \"^7.2.2\",\n    \"@babel/preset-env\": \"^7.2.0\",\n    \"aspnet-webpack\": \"^3.0.0\",\n    \"babel-loader\": \"^8.0.4\",\n    \"cross-env\": \"^5.2.0\",\n    \"css-loader\": \"^2.1.0\",\n    \"cssnano\": \"^4.1.8\",\n    \"file-loader\": \"^3.0.1\",\n    \"mini-css-extract-plugin\": \"^0.5.0\",\n    \"node-sass\": \"^4.11.0\",\n    \"postcss-loader\": \"^3.0.0\",\n    \"postcss-preset-env\": \"^6.5.0\",\n    \"sass-loader\": \"^7.1.0\",\n    \"uglifyjs-webpack-plugin\": \"^2.1.1\",\n    \"vue-loader\": \"^15.4.2\",\n    \"vue-style-loader\": \"^4.1.2\",\n    \"vue-template-compiler\": \"^2.5.21\",\n    \"webpack\": \"^4.28.2\",\n    \"webpack-cli\": \"^3.1.2\",\n    \"webpack-dev-middleware\": \"^3.4.0\",\n    \"webpack-hot-middleware\": \"^2.24.3\",\n    \"webpack-merge\": \"^4.1.5\"\n  }\n}\n```\n\n### .babelrc\n\n因為升到 `babel` 7 之後套件會整個改成 `@` 開頭的，所以舊的同名 package 就可以刪掉了。所以 `babelrc` 設定檔也要改成如下片段。\n\n```\n{\n  \"presets\": [\n    [\n      \"@babel/preset-env\",\n      {\n        \"modules\": false\n      }\n    ]\n  ]\n}\n```\n\n### postcss.config.js\n\n升級 `Vue-loader` 相容 `Webpack` 4 後就不會有自動 `autoprefixer` 的功能，需要自行引入 `postCSS` 來做這件事情。所以 `postcss.config.js` 設定檔要新增如下片段。\n\n``` js\nmodule.exports = {\n  plugins: {\n    'postcss-preset-env': {},\n    'cssnano': {},\n  }\n}\n```\n\n### webpack.base|config|pro.js\n\n> 這邊升級後沒有用最新 `vue-cli` 3 的原因是因為 `aspnet-webpack` HMR 預設吃的 `webpack` 設定是最外層的 `webpack.config.js`，但最新 `Vue-cli` 3 已經把 `webpack.config.js` 藏起來了，改成 `vue.config.js` 做後續加工處理，且我們不使用 `node server` ，而是用 `dotnet server` 做 `HMR`，所以其實已經不需要 `vue-cli` 3 了。\n\n因為我們需要分成 `develop` 和 `production` 的 `webpack` 設定，所以就可以把 `webpack` 的結構拆成一個共用的基底 `webpack.base.js`，然後 `develop` 就透過 `webpack-merge` 將 `base` 結合 `webpack.config.js`，而 `production` 則是將 `base` 結合 `webpack.pro.js`。\n\n以下擷取部分比較重要的地方跟大家分享。\n\n* webpack.base.js\n\n``` js\nconst path = require('path')\nconst MiniCssExtractPlugin = require(\"mini-css-extract-plugin\")\nconst VueLoaderPlugin = require('vue-loader/lib/plugin')\nconst devMode = process.env.NODE_ENV === 'development'\n\nmodule.exports = {\n  ...\n  module: {\n    rules: [\n      { // vue-loader 已經沒有預設 autoprefixer，所以 CSS 的部分要加上 postCSS\n        test: /\\.vue$/,\n        use: 'vue-loader'\n      },\n      {\n        test: /\\.js$/,\n        use: 'babel-loader',\n        exclude: /node_modules/\n      },\n      { // MiniCssExtractPlugin 目前在 HMR 模式沒辦法打包成獨立的 CSS 檔案，所以在開發模式的時候，必須使用 vue-style-loader 替代，變成 meta 內的 style。\n        test: /\\.scss?$/,\n        use: [\n          devMode ? 'vue-style-loader' : MiniCssExtractPlugin.loader,\n          {\n            loader: 'css-loader',\n            options: {\n              importLoaders: 2\n            }\n          },\n          'postcss-loader', // for autoprefix\n          'sass-loader'\n        ]\n      },\n      {\n        test: /\\.(png|jpg|gif|svg)$/,\n        loader: 'file-loader',\n        options: {\n          publicPath: 'imgs/',\n          outputPath: 'imgs/',\n          name: '[name].[ext]?[hash]'\n        }\n      }\n    ]\n  },\n  plugins: [\n    // Webpack4 需使用 MiniCssExtractPlugin 打包 CSS 成獨立的 CSS\n    new MiniCssExtractPlugin({\n      filename: \"css/main.css\"\n    }),\n    // Webpack4 需使用 VueLoaderPlugin 才能正確讀取 .vue\n    new VueLoaderPlugin()\n  ]\n}\n```\n\n* webpack.config.js\n\n```js\nconst merge = require('webpack-merge')\nconst base = require('./webpack.base')\n\n// 使用 webpack-merge 將 base 和 config 結合\nmodule.exports = merge(base, {\n  /* mode 替換掉以前的 process.env\n    new webpack.DefinePlugin({\n      'process.env': {\n        NODE_ENV: '\"development\"'\n      }\n    }),\n  */\n  mode: 'development',\n  devServer: {\n    historyApiFallback: true,\n    noInfo: false,\n  },\n  devtool: '#eval-source-map',\n})\n```\n\n* webpack.pro.js\n\n``` js\nconst merge = require('webpack-merge')\nconst base = require('./webpack.base')\nconst UglifyJsPlugin = require('uglifyjs-webpack-plugin')\n\n// 使用 webpack-merge 將 base 和 pro 結合\nmodule.exports = merge(base, {\n  /* mode 替換掉以前的 process.env\n    new webpack.DefinePlugin({\n      'process.env': {\n        NODE_ENV: '\"production\"'\n      }\n    }),\n  */\n  mode: 'production',\n  devtool: '#source-map',\n  // 新的 Webpack 4 把優化的部份都移到 optimization 設定\n  // 所以 UglifyJsPlugin 替代掉之前的 webpack.optimize.UglifyJsPlugin\n  optimization: {\n    minimizer: [new UglifyJsPlugin()]\n  }\n})\n```\n\n今天的範例在 [github](https://github.com/Annilla/dotnet-core-vue-cli/tree/v2.2.0)，下回見～","slug":"DotnetCore/NET-Core-Upgrade-2-2-with-Webpack4-Vue","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74m000ztudhsbagvd60","content":"<p>紀錄 .NET Core 升級到 2.2 和 Webpack 升到 4 要注意的地方～</p>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"NET-Core-2-2-設定\"><a href=\"#NET-Core-2-2-設定\" class=\"headerlink\" title=\".NET Core 2.2 設定\"></a>.NET Core 2.2 設定</h2><h3 id=\"csproj-專案檔\"><a href=\"#csproj-專案檔\" class=\"headerlink\" title=\"csproj 專案檔\"></a>csproj 專案檔</h3><p><code>TargetFramework</code> 版本要改成 2.2, <code>PackageReference</code> 改成單一個 <code>Microsoft.AspNetCore.App</code>，就可以囉～</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Project</span> <span class=\"attr\">Sdk</span>=<span class=\"string\">\"Microsoft.NET.Sdk.Web\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">PropertyGroup</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TargetFramework</span>&gt;</span>netcoreapp2.2<span class=\"tag\">&lt;/<span class=\"name\">TargetFramework</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">PropertyGroup</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ItemGroup</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">PackageReference</span> <span class=\"attr\">Include</span>=<span class=\"string\">\"Microsoft.AspNetCore.App\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ItemGroup</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Program-cs\"><a href=\"#Program-cs\" class=\"headerlink\" title=\"Program.cs\"></a>Program.cs</h3><p>修改 <code>Program.cs</code> 中 <code>class</code> 內的程式，參考如下程式片段。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">namespace dotnet_core_vue_cli</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  public class Program</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">      public static void Main(string[] args)</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        CreateWebHostBuilder(args).Build().Run();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      public static IWebHostBuilder CreateWebHostBuilder(string[] args) =&gt;</span><br><span class=\"line\">        WebHost.CreateDefaultBuilder(args)</span><br><span class=\"line\">          .UseStartup&lt;Startup&gt;();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"VScode-VS2017-launch-設定\"><a href=\"#VScode-VS2017-launch-設定\" class=\"headerlink\" title=\"VScode / VS2017 launch 設定\"></a>VScode / VS2017 launch 設定</h2><p>為了在 webpack 上可以依據環境變數判斷不同的 bundle 內容，所以分別在 VScode / VS2017 的 launch 檔案設定環境變數。</p>\n<h3 id=\"vscode-launch-json-for-VScode\"><a href=\"#vscode-launch-json-for-VScode\" class=\"headerlink\" title=\".vscode/launch.json (for VScode)\"></a>.vscode/launch.json (for VScode)</h3><p><code>.vscode/launch.json</code> 在環境變數加上 <code>&quot;NODE_ENV=development&quot;: &quot;&quot;</code> 。這邊有個小技巧，就是 <code>=development</code> 是放在前面，而不是在後面的雙引號，這部分應該是一個小 Bug，但目前先用這個方式解決。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">  \"env\": &#123;</span><br><span class=\"line\">    \"ASPNETCORE_ENVIRONMENT\": \"Development\",</span><br><span class=\"line\">    \"NODE_ENV=development\": \"\"</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h3 id=\"Properties-launchSettings-json-for-VS2017\"><a href=\"#Properties-launchSettings-json-for-VS2017\" class=\"headerlink\" title=\"Properties/launchSettings.json (for VS2017)\"></a>Properties/launchSettings.json (for VS2017)</h3><p><code>Properties/launchSettings.json</code> 則直接加上環境變數即可。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">  \"environmentVariables\": &#123;</span><br><span class=\"line\">    \"ASPNETCORE_ENVIRONMENT\": \"Development\",</span><br><span class=\"line\">    \"NODE_ENV\": \"development\"</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Webpack4-設定\"><a href=\"#Webpack4-設定\" class=\"headerlink\" title=\"Webpack4 設定\"></a>Webpack4 設定</h2><h3 id=\"package-json\"><a href=\"#package-json\" class=\"headerlink\" title=\"package.json\"></a>package.json</h3><p>更新所有 package 並執行 npm install，參考如下設定。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"dotnet-core-vue-cli\"</span>,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  \"scripts\": &#123;</span><br><span class=\"line\">    \"hmr\": \"cross-env ASPNETCORE_ENVIRONMENT=Development NODE_ENV=development dotnet run\",</span><br><span class=\"line\">    \"build\": \"webpack --config webpack.pro.js\"</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  \"dependencies\": &#123;</span><br><span class=\"line\">    \"vue\": \"^2.5.21\"</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  \"devDependencies\": &#123;</span><br><span class=\"line\">    \"@babel/core\": \"^7.2.2\",</span><br><span class=\"line\">    \"@babel/preset-env\": \"^7.2.0\",</span><br><span class=\"line\">    \"aspnet-webpack\": \"^3.0.0\",</span><br><span class=\"line\">    \"babel-loader\": \"^8.0.4\",</span><br><span class=\"line\">    \"cross-env\": \"^5.2.0\",</span><br><span class=\"line\">    \"css-loader\": \"^2.1.0\",</span><br><span class=\"line\">    \"cssnano\": \"^4.1.8\",</span><br><span class=\"line\">    \"file-loader\": \"^3.0.1\",</span><br><span class=\"line\">    \"mini-css-extract-plugin\": \"^0.5.0\",</span><br><span class=\"line\">    \"node-sass\": \"^4.11.0\",</span><br><span class=\"line\">    \"postcss-loader\": \"^3.0.0\",</span><br><span class=\"line\">    \"postcss-preset-env\": \"^6.5.0\",</span><br><span class=\"line\">    \"sass-loader\": \"^7.1.0\",</span><br><span class=\"line\">    \"uglifyjs-webpack-plugin\": \"^2.1.1\",</span><br><span class=\"line\">    \"vue-loader\": \"^15.4.2\",</span><br><span class=\"line\">    \"vue-style-loader\": \"^4.1.2\",</span><br><span class=\"line\">    \"vue-template-compiler\": \"^2.5.21\",</span><br><span class=\"line\">    \"webpack\": \"^4.28.2\",</span><br><span class=\"line\">    \"webpack-cli\": \"^3.1.2\",</span><br><span class=\"line\">    \"webpack-dev-middleware\": \"^3.4.0\",</span><br><span class=\"line\">    \"webpack-hot-middleware\": \"^2.24.3\",</span><br><span class=\"line\">    \"webpack-merge\": \"^4.1.5\"</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"babelrc\"><a href=\"#babelrc\" class=\"headerlink\" title=\".babelrc\"></a>.babelrc</h3><p>因為升到 <code>babel</code> 7 之後套件會整個改成 <code>@</code> 開頭的，所以舊的同名 package 就可以刪掉了。所以 <code>babelrc</code> 設定檔也要改成如下片段。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;presets&quot;: [</span><br><span class=\"line\">    [</span><br><span class=\"line\">      &quot;@babel/preset-env&quot;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        &quot;modules&quot;: false</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"postcss-config-js\"><a href=\"#postcss-config-js\" class=\"headerlink\" title=\"postcss.config.js\"></a>postcss.config.js</h3><p>升級 <code>Vue-loader</code> 相容 <code>Webpack</code> 4 後就不會有自動 <code>autoprefixer</code> 的功能，需要自行引入 <code>postCSS</code> 來做這件事情。所以 <code>postcss.config.js</code> 設定檔要新增如下片段。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  plugins: &#123;</span><br><span class=\"line\">    <span class=\"string\">'postcss-preset-env'</span>: &#123;&#125;,</span><br><span class=\"line\">    <span class=\"string\">'cssnano'</span>: &#123;&#125;,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"webpack-base-config-pro-js\"><a href=\"#webpack-base-config-pro-js\" class=\"headerlink\" title=\"webpack.base|config|pro.js\"></a>webpack.base|config|pro.js</h3><blockquote>\n<p>這邊升級後沒有用最新 <code>vue-cli</code> 3 的原因是因為 <code>aspnet-webpack</code> HMR 預設吃的 <code>webpack</code> 設定是最外層的 <code>webpack.config.js</code>，但最新 <code>Vue-cli</code> 3 已經把 <code>webpack.config.js</code> 藏起來了，改成 <code>vue.config.js</code> 做後續加工處理，且我們不使用 <code>node server</code> ，而是用 <code>dotnet server</code> 做 <code>HMR</code>，所以其實已經不需要 <code>vue-cli</code> 3 了。</p>\n</blockquote>\n<p>因為我們需要分成 <code>develop</code> 和 <code>production</code> 的 <code>webpack</code> 設定，所以就可以把 <code>webpack</code> 的結構拆成一個共用的基底 <code>webpack.base.js</code>，然後 <code>develop</code> 就透過 <code>webpack-merge</code> 將 <code>base</code> 結合 <code>webpack.config.js</code>，而 <code>production</code> 則是將 <code>base</code> 結合 <code>webpack.pro.js</code>。</p>\n<p>以下擷取部分比較重要的地方跟大家分享。</p>\n<ul>\n<li>webpack.base.js</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">\"mini-css-extract-plugin\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> VueLoaderPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-loader/lib/plugin'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> devMode = process.env.NODE_ENV === <span class=\"string\">'development'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123; <span class=\"comment\">// vue-loader 已經沒有預設 autoprefixer，所以 CSS 的部分要加上 postCSS</span></span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.vue$/</span>,</span><br><span class=\"line\">        use: <span class=\"string\">'vue-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123; <span class=\"comment\">// MiniCssExtractPlugin 目前在 HMR 模式沒辦法打包成獨立的 CSS 檔案，所以在開發模式的時候，必須使用 vue-style-loader 替代，變成 meta 內的 style。</span></span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.scss?$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          devMode ? <span class=\"string\">'vue-style-loader'</span> : MiniCssExtractPlugin.loader,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              importLoaders: <span class=\"number\">2</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          <span class=\"string\">'postcss-loader'</span>, <span class=\"comment\">// for autoprefix</span></span><br><span class=\"line\">          <span class=\"string\">'sass-loader'</span></span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif|svg)$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'file-loader'</span>,</span><br><span class=\"line\">        options: &#123;</span><br><span class=\"line\">          publicPath: <span class=\"string\">'imgs/'</span>,</span><br><span class=\"line\">          outputPath: <span class=\"string\">'imgs/'</span>,</span><br><span class=\"line\">          name: <span class=\"string\">'[name].[ext]?[hash]'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// Webpack4 需使用 MiniCssExtractPlugin 打包 CSS 成獨立的 CSS</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">\"css/main.css\"</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"comment\">// Webpack4 需使用 VueLoaderPlugin 才能正確讀取 .vue</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> VueLoaderPlugin()</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>webpack.config.js</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> base = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用 webpack-merge 將 base 和 config 結合</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = merge(base, &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* mode 替換掉以前的 process.env</span></span><br><span class=\"line\"><span class=\"comment\">    new webpack.DefinePlugin(&#123;</span></span><br><span class=\"line\"><span class=\"comment\">      'process.env': &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        NODE_ENV: '\"development\"'</span></span><br><span class=\"line\"><span class=\"comment\">      &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;),</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  mode: <span class=\"string\">'development'</span>,</span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    historyApiFallback: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    noInfo: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  devtool: <span class=\"string\">'#eval-source-map'</span>,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>webpack.pro.js</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> base = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> UglifyJsPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'uglifyjs-webpack-plugin'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用 webpack-merge 將 base 和 pro 結合</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = merge(base, &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* mode 替換掉以前的 process.env</span></span><br><span class=\"line\"><span class=\"comment\">    new webpack.DefinePlugin(&#123;</span></span><br><span class=\"line\"><span class=\"comment\">      'process.env': &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        NODE_ENV: '\"production\"'</span></span><br><span class=\"line\"><span class=\"comment\">      &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;),</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  mode: <span class=\"string\">'production'</span>,</span><br><span class=\"line\">  devtool: <span class=\"string\">'#source-map'</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 新的 Webpack 4 把優化的部份都移到 optimization 設定</span></span><br><span class=\"line\">  <span class=\"comment\">// 所以 UglifyJsPlugin 替代掉之前的 webpack.optimize.UglifyJsPlugin</span></span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    minimizer: [<span class=\"keyword\">new</span> UglifyJsPlugin()]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>今天的範例在 <a href=\"https://github.com/Annilla/dotnet-core-vue-cli/tree/v2.2.0\" target=\"_blank\" rel=\"noopener\">github</a>，下回見～</p>\n","site":{"data":{}},"thumbnailImageUrl":"http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png","excerpt":"<p>紀錄 .NET Core 升級到 2.2 和 Webpack 升到 4 要注意的地方～</p>","more":"<hr>\n<h2 id=\"NET-Core-2-2-設定\"><a href=\"#NET-Core-2-2-設定\" class=\"headerlink\" title=\".NET Core 2.2 設定\"></a>.NET Core 2.2 設定</h2><h3 id=\"csproj-專案檔\"><a href=\"#csproj-專案檔\" class=\"headerlink\" title=\"csproj 專案檔\"></a>csproj 專案檔</h3><p><code>TargetFramework</code> 版本要改成 2.2, <code>PackageReference</code> 改成單一個 <code>Microsoft.AspNetCore.App</code>，就可以囉～</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Project</span> <span class=\"attr\">Sdk</span>=<span class=\"string\">\"Microsoft.NET.Sdk.Web\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">PropertyGroup</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TargetFramework</span>&gt;</span>netcoreapp2.2<span class=\"tag\">&lt;/<span class=\"name\">TargetFramework</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">PropertyGroup</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ItemGroup</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">PackageReference</span> <span class=\"attr\">Include</span>=<span class=\"string\">\"Microsoft.AspNetCore.App\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ItemGroup</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Program-cs\"><a href=\"#Program-cs\" class=\"headerlink\" title=\"Program.cs\"></a>Program.cs</h3><p>修改 <code>Program.cs</code> 中 <code>class</code> 內的程式，參考如下程式片段。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">namespace dotnet_core_vue_cli</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  public class Program</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">      public static void Main(string[] args)</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        CreateWebHostBuilder(args).Build().Run();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      public static IWebHostBuilder CreateWebHostBuilder(string[] args) =&gt;</span><br><span class=\"line\">        WebHost.CreateDefaultBuilder(args)</span><br><span class=\"line\">          .UseStartup&lt;Startup&gt;();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"VScode-VS2017-launch-設定\"><a href=\"#VScode-VS2017-launch-設定\" class=\"headerlink\" title=\"VScode / VS2017 launch 設定\"></a>VScode / VS2017 launch 設定</h2><p>為了在 webpack 上可以依據環境變數判斷不同的 bundle 內容，所以分別在 VScode / VS2017 的 launch 檔案設定環境變數。</p>\n<h3 id=\"vscode-launch-json-for-VScode\"><a href=\"#vscode-launch-json-for-VScode\" class=\"headerlink\" title=\".vscode/launch.json (for VScode)\"></a>.vscode/launch.json (for VScode)</h3><p><code>.vscode/launch.json</code> 在環境變數加上 <code>&quot;NODE_ENV=development&quot;: &quot;&quot;</code> 。這邊有個小技巧，就是 <code>=development</code> 是放在前面，而不是在後面的雙引號，這部分應該是一個小 Bug，但目前先用這個方式解決。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">  \"env\": &#123;</span><br><span class=\"line\">    \"ASPNETCORE_ENVIRONMENT\": \"Development\",</span><br><span class=\"line\">    \"NODE_ENV=development\": \"\"</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h3 id=\"Properties-launchSettings-json-for-VS2017\"><a href=\"#Properties-launchSettings-json-for-VS2017\" class=\"headerlink\" title=\"Properties/launchSettings.json (for VS2017)\"></a>Properties/launchSettings.json (for VS2017)</h3><p><code>Properties/launchSettings.json</code> 則直接加上環境變數即可。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">  \"environmentVariables\": &#123;</span><br><span class=\"line\">    \"ASPNETCORE_ENVIRONMENT\": \"Development\",</span><br><span class=\"line\">    \"NODE_ENV\": \"development\"</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Webpack4-設定\"><a href=\"#Webpack4-設定\" class=\"headerlink\" title=\"Webpack4 設定\"></a>Webpack4 設定</h2><h3 id=\"package-json\"><a href=\"#package-json\" class=\"headerlink\" title=\"package.json\"></a>package.json</h3><p>更新所有 package 並執行 npm install，參考如下設定。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"dotnet-core-vue-cli\"</span>,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  \"scripts\": &#123;</span><br><span class=\"line\">    \"hmr\": \"cross-env ASPNETCORE_ENVIRONMENT=Development NODE_ENV=development dotnet run\",</span><br><span class=\"line\">    \"build\": \"webpack --config webpack.pro.js\"</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  \"dependencies\": &#123;</span><br><span class=\"line\">    \"vue\": \"^2.5.21\"</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  \"devDependencies\": &#123;</span><br><span class=\"line\">    \"@babel/core\": \"^7.2.2\",</span><br><span class=\"line\">    \"@babel/preset-env\": \"^7.2.0\",</span><br><span class=\"line\">    \"aspnet-webpack\": \"^3.0.0\",</span><br><span class=\"line\">    \"babel-loader\": \"^8.0.4\",</span><br><span class=\"line\">    \"cross-env\": \"^5.2.0\",</span><br><span class=\"line\">    \"css-loader\": \"^2.1.0\",</span><br><span class=\"line\">    \"cssnano\": \"^4.1.8\",</span><br><span class=\"line\">    \"file-loader\": \"^3.0.1\",</span><br><span class=\"line\">    \"mini-css-extract-plugin\": \"^0.5.0\",</span><br><span class=\"line\">    \"node-sass\": \"^4.11.0\",</span><br><span class=\"line\">    \"postcss-loader\": \"^3.0.0\",</span><br><span class=\"line\">    \"postcss-preset-env\": \"^6.5.0\",</span><br><span class=\"line\">    \"sass-loader\": \"^7.1.0\",</span><br><span class=\"line\">    \"uglifyjs-webpack-plugin\": \"^2.1.1\",</span><br><span class=\"line\">    \"vue-loader\": \"^15.4.2\",</span><br><span class=\"line\">    \"vue-style-loader\": \"^4.1.2\",</span><br><span class=\"line\">    \"vue-template-compiler\": \"^2.5.21\",</span><br><span class=\"line\">    \"webpack\": \"^4.28.2\",</span><br><span class=\"line\">    \"webpack-cli\": \"^3.1.2\",</span><br><span class=\"line\">    \"webpack-dev-middleware\": \"^3.4.0\",</span><br><span class=\"line\">    \"webpack-hot-middleware\": \"^2.24.3\",</span><br><span class=\"line\">    \"webpack-merge\": \"^4.1.5\"</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"babelrc\"><a href=\"#babelrc\" class=\"headerlink\" title=\".babelrc\"></a>.babelrc</h3><p>因為升到 <code>babel</code> 7 之後套件會整個改成 <code>@</code> 開頭的，所以舊的同名 package 就可以刪掉了。所以 <code>babelrc</code> 設定檔也要改成如下片段。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;presets&quot;: [</span><br><span class=\"line\">    [</span><br><span class=\"line\">      &quot;@babel/preset-env&quot;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        &quot;modules&quot;: false</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"postcss-config-js\"><a href=\"#postcss-config-js\" class=\"headerlink\" title=\"postcss.config.js\"></a>postcss.config.js</h3><p>升級 <code>Vue-loader</code> 相容 <code>Webpack</code> 4 後就不會有自動 <code>autoprefixer</code> 的功能，需要自行引入 <code>postCSS</code> 來做這件事情。所以 <code>postcss.config.js</code> 設定檔要新增如下片段。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  plugins: &#123;</span><br><span class=\"line\">    <span class=\"string\">'postcss-preset-env'</span>: &#123;&#125;,</span><br><span class=\"line\">    <span class=\"string\">'cssnano'</span>: &#123;&#125;,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"webpack-base-config-pro-js\"><a href=\"#webpack-base-config-pro-js\" class=\"headerlink\" title=\"webpack.base|config|pro.js\"></a>webpack.base|config|pro.js</h3><blockquote>\n<p>這邊升級後沒有用最新 <code>vue-cli</code> 3 的原因是因為 <code>aspnet-webpack</code> HMR 預設吃的 <code>webpack</code> 設定是最外層的 <code>webpack.config.js</code>，但最新 <code>Vue-cli</code> 3 已經把 <code>webpack.config.js</code> 藏起來了，改成 <code>vue.config.js</code> 做後續加工處理，且我們不使用 <code>node server</code> ，而是用 <code>dotnet server</code> 做 <code>HMR</code>，所以其實已經不需要 <code>vue-cli</code> 3 了。</p>\n</blockquote>\n<p>因為我們需要分成 <code>develop</code> 和 <code>production</code> 的 <code>webpack</code> 設定，所以就可以把 <code>webpack</code> 的結構拆成一個共用的基底 <code>webpack.base.js</code>，然後 <code>develop</code> 就透過 <code>webpack-merge</code> 將 <code>base</code> 結合 <code>webpack.config.js</code>，而 <code>production</code> 則是將 <code>base</code> 結合 <code>webpack.pro.js</code>。</p>\n<p>以下擷取部分比較重要的地方跟大家分享。</p>\n<ul>\n<li>webpack.base.js</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">\"mini-css-extract-plugin\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> VueLoaderPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-loader/lib/plugin'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> devMode = process.env.NODE_ENV === <span class=\"string\">'development'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123; <span class=\"comment\">// vue-loader 已經沒有預設 autoprefixer，所以 CSS 的部分要加上 postCSS</span></span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.vue$/</span>,</span><br><span class=\"line\">        use: <span class=\"string\">'vue-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123; <span class=\"comment\">// MiniCssExtractPlugin 目前在 HMR 模式沒辦法打包成獨立的 CSS 檔案，所以在開發模式的時候，必須使用 vue-style-loader 替代，變成 meta 內的 style。</span></span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.scss?$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          devMode ? <span class=\"string\">'vue-style-loader'</span> : MiniCssExtractPlugin.loader,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              importLoaders: <span class=\"number\">2</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          <span class=\"string\">'postcss-loader'</span>, <span class=\"comment\">// for autoprefix</span></span><br><span class=\"line\">          <span class=\"string\">'sass-loader'</span></span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif|svg)$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'file-loader'</span>,</span><br><span class=\"line\">        options: &#123;</span><br><span class=\"line\">          publicPath: <span class=\"string\">'imgs/'</span>,</span><br><span class=\"line\">          outputPath: <span class=\"string\">'imgs/'</span>,</span><br><span class=\"line\">          name: <span class=\"string\">'[name].[ext]?[hash]'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// Webpack4 需使用 MiniCssExtractPlugin 打包 CSS 成獨立的 CSS</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">\"css/main.css\"</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"comment\">// Webpack4 需使用 VueLoaderPlugin 才能正確讀取 .vue</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> VueLoaderPlugin()</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>webpack.config.js</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> base = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用 webpack-merge 將 base 和 config 結合</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = merge(base, &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* mode 替換掉以前的 process.env</span></span><br><span class=\"line\"><span class=\"comment\">    new webpack.DefinePlugin(&#123;</span></span><br><span class=\"line\"><span class=\"comment\">      'process.env': &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        NODE_ENV: '\"development\"'</span></span><br><span class=\"line\"><span class=\"comment\">      &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;),</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  mode: <span class=\"string\">'development'</span>,</span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    historyApiFallback: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    noInfo: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  devtool: <span class=\"string\">'#eval-source-map'</span>,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>webpack.pro.js</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> base = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> UglifyJsPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'uglifyjs-webpack-plugin'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用 webpack-merge 將 base 和 pro 結合</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = merge(base, &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* mode 替換掉以前的 process.env</span></span><br><span class=\"line\"><span class=\"comment\">    new webpack.DefinePlugin(&#123;</span></span><br><span class=\"line\"><span class=\"comment\">      'process.env': &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        NODE_ENV: '\"production\"'</span></span><br><span class=\"line\"><span class=\"comment\">      &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;),</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  mode: <span class=\"string\">'production'</span>,</span><br><span class=\"line\">  devtool: <span class=\"string\">'#source-map'</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 新的 Webpack 4 把優化的部份都移到 optimization 設定</span></span><br><span class=\"line\">  <span class=\"comment\">// 所以 UglifyJsPlugin 替代掉之前的 webpack.optimize.UglifyJsPlugin</span></span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    minimizer: [<span class=\"keyword\">new</span> UglifyJsPlugin()]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>今天的範例在 <a href=\"https://github.com/Annilla/dotnet-core-vue-cli/tree/v2.2.0\" target=\"_blank\" rel=\"noopener\">github</a>，下回見～</p>"},{"title":".NET Core 3.0 SPA with Vue-Cli 3 - Start New Project","thumbnailImage":"http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png","thumbnailImagePosition":"left","coverImage":"http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png","coverMeta":"out","date":"2019-10-09T16:00:00.000Z","updated":"2019-10-09T16:00:00.000Z","_content":"\n之前有寫過一篇 [.NET core 2 + Vue-cli 2 的起手式](../../../../../2017/12/02/DotnetCore/NET-Core-2-0-SPA-with-Vue-Cli/)，到了2019，兩者也紛紛出版本3。這次，我們將說明如何用 .NET Core 3 + Vue-cli 3 起一個新專案，附贈最新 [Vuetify 2](https://vuetifyjs.com/en/) 的 Material Design 框架。\n\n<!--more-->\n\n## 安裝 `vue-cli` 模板\n\n> 注意： vue-cli 需要 Node.js 版本 > v8.9\n\n<br />\n\n* 安裝全域 `vue-cli`\n\n```npm\nnpm install -g @vue/cli\n```\n\n* 起始一個 vue 專案 `my-app`\n\n```npm\nvue create my-app\n```\n\n按照 `vue-cli` 的指示選擇預設 (`default`) 即可。\n\n安裝完後，可以把專案從 `my-app` 資料夾中移出來，如下圖。\n\n![專案目錄](https://lh3.googleusercontent.com/mg4HgncLJ66AZ4wnPznFb1X55drWjTCgDy-22BLolsQRlBTYghwQg8kDxWkCaneH4eoyns8JS9Xi42b74lk4ATinxc19-ka7voTtH8ySKcfZZ4j9nRsj_X0FQvBCzIIsk9ZHBv159X0piGmlaJKvLm2q6V-Rpmzbpl6pvd9M1zNtO5Cu01hFRED2G0Zoh9y5ELB6u_vU1uqoCFfNM-eDDjFMQrqTZ0vd3PxmjciMwdQ8hjMxMGoo9pVci3V3z-K0NlFqfuX5O7Skg1Qhk0OgCa7DYqfmL-QrdZ-PcJOK0sMBCY2LfW3cOjFK9AkQTCTYnbn4xMLLAX8dR1jRgFXBGIsDJl_FiE-HCNrT71O1wrA1yd751rABO2w8ghElsJgteqvSBBoukRrgYwX4z8Efuu1BReVfX3hfdPAsfJKSHsZZuM-C5G3GzT58GHQpXpVHyAQME344dX0zqaZmDrWb0PKcD77G0lsYmZcpXAuczuhWADSAPMUGCuswMgan3q35GRrpN9SJwekmzHXs1J818eOptpn0jTO3x--I6bhsvB9OpmchFI8ZoFtE21LDPa1Jfrss_-HZ4ZpzdNslDdNeOL33kHLu00zXne8AwMCCmD1KKp4aLwniW3-n7tVuQFTKLYRb3sNfKOgbdYwNHK4urpo1IaBLazDwcjnhESmz-fJEzyZ2mH-121t3_VfSDcwsmSOKlZKs6pXbA_uK_YFIIBHF5IozC1vv6QUQ40WIe9aiUnLTqg=w618-h934-no \"專案目錄\")\n\n* 執行套件安裝\n\n```\nnpm install\n```\n\n* 安裝 Vuetify 框架\n\n> 如果不想要安裝樣式框架可以直接跳過這個步驟\n\n```\nvue add vuetify\n```\n\n* 測試 vue 專案是否安裝成功\n\n```\nnpm run serve\n```\n\n用瀏覽器看 `http://localhost:8080` 如果有成功出現如下面畫面就是安裝成功 `vue` + `vuetify` 的專案囉～\n\n![http://localhost:8080](https://lh3.googleusercontent.com/WTI7SZCavIJAmLRqZNbCMMRHxPwSm6yD_EkBf-DHV8Rn_96Sa39daK1aYjxFd34c_XAjiC8yDZVwspgn2arZdo-_ptFvduN4CQ0cNnJC5_xohUq10ggkuzHrdn7m9KezmU-8E4FZMBD3PzRMeWPYlwJCj-JjSfkNpQZGLRn37RyoGNvpJECdgnBsEEQx5AZHx-E4ZJDOTujyDBGEkqvp8lI3oW--jDOoCIMaFUuLu-vHxKvWtFprE_mBzwI7KIkkeC9D0rWhUsX93hJT4x46Elmj1TOYSDRMiNogHG0P5cZ5JSUIUsdM_T9XKQ-U0oTDeD3iHipDBmBfJH5KgmpXGh3e8cBlyHqpkqu5DVXe468cWfNT9nRqCB3IQOPtPcJg5tB0bKe68fQTjaIwwiqEngW1aB-8gXZgt5OCDeAyOZJB0rvXvr9uoL69sUrHCamSGT0ppGLenX7yFeP-uNVPXgi899gQj9siNlqWbQWnjjdrhsTAvrx5-3rFS43GIssEkwwB_MiQT411oAdd_g9ds_BgCDSohxD2NOWZAWJ3NmvrSupIsvckps0p7jLJ-4Mqb82J5KvJ0GdIT8wIjqF8hZmhFeAWxFgmwE10axr7eClFsN4CjIqhnFdO_v86vyYDx2S60EVqUPW8t1PorW0jbXJG3TGjEeWlHYLEme8d7mQaIT1001f174oEY9twCvgAd5YxmLFCZyaGrqvleFOveUc221DTKkgYdC9k9oAjr2qAyV4J7A=w2206-h1378-no \"首頁\")\n\n\n## 起始 `.NET Core 3.0 MVC` 專案\n\n* 安裝 [.NET Command Line Interface](https://github.com/dotnet/cli)\n\n* 新增一個 Core MVC 專案\n\n```dotnet\ndotnet new mvc\n```\n\n把產生的檔案都移到最外層 (跟 Vue 同一層)，如下圖。\n\n![專案目錄](https://lh3.googleusercontent.com/W203GfdGjLI_7ZhUUZjmE4LYVKs6AFGNMcVohuF2E5_eQqKQrXc_ZV58HCPvQPjwBuxBPZEplhsJ_-WrPJ_nH_5OgjijEFAcZsStz2-ckatWBngIvgpo4p1pWPt_o613hObxX2CS9jz7g9zuRqIyQH5CAwrF8pnQAvls9fHvsnL3Zzuy6mqCNjzy9H6C1KJTmA7mdNbSJhtUr6JqNjFuw1hWgEAyVGiDCJNcNnGFK0zi3f74byGEMh_K7ymwRv6iJUhXN74GwTRMpV7r_jZIOrs7AOv10UhezxHhKFvkCe_ZZ0YbhohieE4LmwiAzL-urryjpLE95apTMTf6xRIRB8Gv-0lX4UNjC4MN9CI7jwdGklQ2djXDnmfys7rbsk0p6a5gr3dPsD-98pwTC3I--LmngPdBjOR6QED59piLeKbeQ4N3QG0L19JW6hcF0liPvdEwToC3psjUiC-jYimsUK6jvxU2xlyMqAIAtjm9fLCmnFp5kfMH_qbihmO9dQGnpmsYx_rCQqTXrfmODYvTL1LwiMBRe-Hp_twIBHB1S6K5XtCCk19SLYHD7VEKKK6sfAcawo5V4Ohe_yJ8Phxkod0rhXv4KSvlYdD3iJbCLCFhMhWgyAIGhZTcST0lDzUhxz5L8TKZRa5hbHA8kjw7hNlnjhYm5b92HFetGcwPbTi-3t57nL9C0H2drgjwqOBh8m8Zwh5l0QDdBrdToOQg-PKII9XK0eMh5oriRCvgjjaP_H14vg=w614-h1208-no \"專案目錄\")\n\n* 刪除不必要的檔案\n\n因為我們是 `SPA` 不需要用到 MVC 其他頁面的功能，所以將多餘的頁面和樣式去除。參考如下的資料夾結構。\n\n![刪除多餘頁面和樣式後的檔案](https://lh3.googleusercontent.com/_6YDysh2v7AoOk4y82teBx4qsEXdrEvO5y6LKda2Vt87eLX1RCRfXOIaFhHK5Iy7OsBCkzdRehhB7-VsvrRSUWZsPO9tONVNw-c1pwcsrsA6wOAMn-D22zI0gQa2DrEDmBYttUore2G0kNtZkGaLwt2LQMuK3Zs-8cOEyHUPy1nnWD66GVUNozqty6tNTGmyIK20sN8kZpCLEikfEYunKI3gVlT0G5UfEmVAJ25VlKUbkziTEPwTDtwxvBmz6qlPbcEKXNSOLAe-zAeYR6b4-yTPFifwmiNrwdHEebD3kkZrYdfCPO9KFw4FOFQpNHkrGP-LxbeXCnatvDzMA0k9A81iHtVD0t8_9vkfb0lBvm40S0sFTvXXI_kUW-ncr639iMkXZ66v55ZXWOMAUL3trWESyUZ6FPMtiCzUVZRNlR0kfKV_CmgLivBugJxl696Vh6MPbUWcAwr3dxBnU9Iwvd5wHad4lpGbDEF2GTSzL8ZV1Hh8HnwLiGbqqGfJzFs9O8sgsa4dDJAnQpwCuCTrJJbk5KmMNPLR5tbiSyY9MGz1nbkCYtrtSNNPro_OsqiG3uMNXm-tCbtUkTjGG953ULeTY45NQqPwVqugKu3T0t4DMKjEJvoky0IBUOd7hdoTMgyRb9bMMJMedWyAuoFLZwM5Ar4qOZ3Um-nmQ2HA-lp4GDG1wO9rbxk4Sh2Ng8WR_rzH9Hnwy1DR8qFrXWv4E58WrzfK79A01VcCgBkAyR74bl9vUg=w620-h1248-no \"資料夾結構\")\n\n* `HomeController.cs` 刪除多餘的 Controller，只保留 `Index` 和 `Error`\n\n```C#\nusing System;\nusing System.Collections.Generic;\nusing System.Diagnostics;\nusing System.Linq;\nusing System.Threading.Tasks;\nusing Microsoft.AspNetCore.Mvc;\nusing Microsoft.Extensions.Logging;\nusing dotnet_core_with_vue_cli3.Models;\n\nnamespace dotnet_core_with_vue_cli3.Controllers\n{\n    public class HomeController : Controller\n    {\n        private readonly ILogger<HomeController> _logger;\n\n        public HomeController(ILogger<HomeController> logger)\n        {\n            _logger = logger;\n        }\n\n        public IActionResult Index()\n        {\n            return View();\n        }\n\n        [ResponseCache(Duration = 0, Location = ResponseCacheLocation.None, NoStore = true)]\n        public IActionResult Error()\n        {\n            return View(new ErrorViewModel { RequestId = Activity.Current?.Id ?? HttpContext.TraceIdentifier });\n        }\n    }\n}\n```\n\n* `Index.cshtml` 多餘的 HTML 刪除\n\n```html\n<div id=\"app\"></div>\n```\n\n* `_Layout.cshtml` 修改內容如下\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <link rel=\"icon\" href=\"~/favicon.ico\">\n    <title>dotnet_core_with_vue_cli3</title>\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900\">\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/@@mdi/font@latest/css/materialdesignicons.min.css\">\n</head>\n<body>\n    <noscript>\n      <strong>We're sorry but my-app doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>\n    </noscript>\n\n    @RenderBody()\n\n    <script src=\"~/js/app.js\" asp-append-version=\"true\"></script>\n\n    @RenderSection(\"Scripts\", required: false)\n</body>\n</html>\n```\n\n> 誒～你有沒有覺得明明我們把 `wwwroot` 裡面的靜態資源都殺光光，卻在 `_Layout.cshtml` 上面放 `app.js`？因為這邊是留給 Vue-cli 去產生靜態資源，所以我們接下來就要說明如何設定讓 `.NET Core` 和 `Vue` 做連動。\n\n## 設定 `HMR` 和 `vue router` 的 fallback\n\n接著才是重頭戲～如魔法般的 `HMR` 功能登場!!!\n\n如果還不太知道什麼是 `HMR` 的，就 google 一下囉～\n\n* 安裝 `aspnet-webpack`, `webpack-hot-middleware`, `webpack-dev-middleware`\n\n```\nnpm i -D aspnet-webpack webpack-hot-middleware webpack-dev-middleware\n```\n\n* 新增 `Microsoft.AspNetCore.SpaServices.Extensions`\n\n```\ndotnet add package Microsoft.AspNetCore.SpaServices.Extensions --version 3.0.0\n```\n\n* 修改 `Startup.cs`\n\n```C#\n...\nusing Microsoft.AspNetCore.SpaServices.Webpack;\n\n......\n        // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\n        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)\n        {\n            if (env.IsDevelopment())\n            {\n                app.UseDeveloperExceptionPage();\n                app.UseWebpackDevMiddleware(new WebpackDevMiddlewareOptions\n                {\n                    HotModuleReplacement = true,\n                    ConfigFile = @\"./node_modules/@vue/cli-service/webpack.config.js\"\n                });\n            }\n            else\n            {\n                ...\n            }\n            ...\n\n            app.UseEndpoints(endpoints =>\n            {\n                endpoints.MapControllerRoute(\n                    name: \"default\",\n                    pattern: \"{controller=Home}/{action=Index}/{id?}\");\n                endpoints.MapFallbackToController(\"Index\", \"Home\");\n            });\n        }\n......\n```\n\n* 新增 `vue.config.js` 在最外層\n\n> 這邊就是設定 `Vue-cli` 將產生的靜態檔案放在 `wwwroot` 讓 `.Net Core` 去吃。\n\n```js\nmodule.exports = {\n  outputDir: 'wwwroot',\n  publicPath: \"/\",\n  chainWebpack: config => {\n    // https://github.com/vuejs/vue-cli/issues/3603#issuecomment-483913563\n    // remove vue-cli-service's progress output\n    config.plugins.delete('progress')\n    // https://intellitect.com/quickly-configure-asp-net-core-api-to-work-with-vue-cli-3/\n    // aspnet uses the other hmr so remove this one\n    config.plugins.delete('hmr');\n  }\n}\n```\n\n* 若要使用 vscode 跑專案：修改 `Properties/launchSettings.json`\n\n修改 `Properties/launchSettings.json`\n\n```json\n{\n  \"iisSettings\": {\n    ...\n  },\n  \"profiles\": {\n    \"IIS Express\": {\n      \"commandName\": \"IISExpress\",\n      \"launchBrowser\": true,\n      \"environmentVariables\": {\n        \"ASPNETCORE_ENVIRONMENT\": \"Development\",\n        \"NODE_ENV\": \"development\"\n      }\n    },\n    \"dotnet_core_with_vue_cli3\": {\n      \"commandName\": \"Project\",\n      \"launchBrowser\": true,\n      \"applicationUrl\": \"http://localhost:5000\",\n      \"environmentVariables\": {\n        \"ASPNETCORE_ENVIRONMENT\": \"Development\",\n        \"NODE_ENV\": \"development\"\n      }\n    }\n  }\n}\n```\n\n* 若要使用 npm 跑專案：`package.json` 指令加上 HMR\n\n安裝 cross-env\n\n```\nnpm install -D cross-env\n```\n\n`package.json`\n\n```json\n{\n  ......\n  \"scripts\": {\n    \"hmr\": \"cross-env ASPNETCORE_ENVIRONMENT=Development NODE_ENV=development dotnet run\",\n    ...\n  },\n  ......\n}\n```\n\n執行如下 npm 指令或使用之前寫的另一篇文章方式 [vscode task](../../../../../2017/12/25/DotnetCore/NET-Core-2-0-Debug-with-VScode/) 來啟動專案。\n\n```npm\nnpm run hmr\n```\n\n\n成功的話就會從 `Chrome` 開發者工具看到 `HMR` 連結成功囉～\n\n![http://localhost:5000](https://lh3.googleusercontent.com/iwyqGKY3x0PNLHZvmRMQxAG53ta1MNkplE5rDHIwfr884IxIPhOlHaZwUzMdPS4B5MvWrK-BzP1afJMnZkHfuwAGJ8szM1VJmqo3BkZZs9GN92uP-zTk3oS7spcGo8DinPhbi9M7TZJkku95nzIxh1UIebtussfopG1byaWLQOna9wt9_CK8tiSyugr1A6x0bPG20SsAO6--hwmNa4SiODAyeTeADmMs1dtrI8d-6gDvtULip1yljjzKfnDm2iECcreinLfD3mUyUkAaW25-jzyXpa3dQ5EokLdx9JNVVLWM1kKmeadHGdcPNXEKJIaWK8TMFuxjRL6YiiwPeRpEMXSHGZI7Czbaqxh1GJmdBCejLIbWaOy-NKuqKJ37_Xf5FVFTnXlEyBZs3yAfr2pNtBgbk9SsZJvB1ljszKOE-CwhXmJJinfBpJ-kGd2Lh2gsQwo2JC6_frvi3uv3gl9LVhBQC6iZdawwvwTveTr_E4X7Z5-P-EenyBMKUV6IRoFUE_b_dfPZlPYMBCD8UBSau-F3Y1HZNAIihor6R1o4c2RSKF01GWXq62HBdnlQgX-94mNkj4noSm9dHaErDzTOm0WUwJVw_SxfdFB3_2aP6ddi5ce2mxHiiau5ajes_rvFBuMlLAmwIOhiXR1KwdBdS5hqjTB4rdGTGEA3IYqlyLXtLdFNzM8iuMhZvlFra90dpXFlLvYBGCitsQ8VTQFc4ukw1Di0HvdY4cZFsLulfcTv9FhEAA=w1780-h1112-no \"首頁\")\n\n今天的範例在 [github](https://github.com/Annilla/dotnet-core-with-vue-cli3/tree/v1.0)，下回見～\n\n## 參考資料\n\n* [Microsoft.AspNetCore.SpaServices.Extensions](https://www.nuget.org/packages/Microsoft.AspNetCore.SpaServices.Extensions/3.0.0)\n* [Quickly Configure ASP.NET Core API to work with Vue CLI 3!](https://intellitect.com/quickly-configure-asp-net-core-api-to-work-with-vue-cli-3/)\n* [從 ASP.NET Core 2.2 遷移至3](https://docs.microsoft.com/zh-tw/aspnet/core/migration/22-to-30?view=aspnetcore-3.0&tabs=visual-studio-code)","source":"_posts/DotnetCore/NET-Core-3-SPA-with-Vue-Cli-3.md","raw":"---\ntitle: .NET Core 3.0 SPA with Vue-Cli 3 - Start New Project\ncategories:\n  - .NET Core\nthumbnailImage: http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png\nthumbnailImagePosition: left\ncoverImage: http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png\ncoverMeta: out\ntags: [.NET Core, dotnet, Vue, Webpack, SPA, MVC, VScode]\ndate: 2019/10/10\nupdated: 2019/10/10\n---\n\n之前有寫過一篇 [.NET core 2 + Vue-cli 2 的起手式](../../../../../2017/12/02/DotnetCore/NET-Core-2-0-SPA-with-Vue-Cli/)，到了2019，兩者也紛紛出版本3。這次，我們將說明如何用 .NET Core 3 + Vue-cli 3 起一個新專案，附贈最新 [Vuetify 2](https://vuetifyjs.com/en/) 的 Material Design 框架。\n\n<!--more-->\n\n## 安裝 `vue-cli` 模板\n\n> 注意： vue-cli 需要 Node.js 版本 > v8.9\n\n<br />\n\n* 安裝全域 `vue-cli`\n\n```npm\nnpm install -g @vue/cli\n```\n\n* 起始一個 vue 專案 `my-app`\n\n```npm\nvue create my-app\n```\n\n按照 `vue-cli` 的指示選擇預設 (`default`) 即可。\n\n安裝完後，可以把專案從 `my-app` 資料夾中移出來，如下圖。\n\n![專案目錄](https://lh3.googleusercontent.com/mg4HgncLJ66AZ4wnPznFb1X55drWjTCgDy-22BLolsQRlBTYghwQg8kDxWkCaneH4eoyns8JS9Xi42b74lk4ATinxc19-ka7voTtH8ySKcfZZ4j9nRsj_X0FQvBCzIIsk9ZHBv159X0piGmlaJKvLm2q6V-Rpmzbpl6pvd9M1zNtO5Cu01hFRED2G0Zoh9y5ELB6u_vU1uqoCFfNM-eDDjFMQrqTZ0vd3PxmjciMwdQ8hjMxMGoo9pVci3V3z-K0NlFqfuX5O7Skg1Qhk0OgCa7DYqfmL-QrdZ-PcJOK0sMBCY2LfW3cOjFK9AkQTCTYnbn4xMLLAX8dR1jRgFXBGIsDJl_FiE-HCNrT71O1wrA1yd751rABO2w8ghElsJgteqvSBBoukRrgYwX4z8Efuu1BReVfX3hfdPAsfJKSHsZZuM-C5G3GzT58GHQpXpVHyAQME344dX0zqaZmDrWb0PKcD77G0lsYmZcpXAuczuhWADSAPMUGCuswMgan3q35GRrpN9SJwekmzHXs1J818eOptpn0jTO3x--I6bhsvB9OpmchFI8ZoFtE21LDPa1Jfrss_-HZ4ZpzdNslDdNeOL33kHLu00zXne8AwMCCmD1KKp4aLwniW3-n7tVuQFTKLYRb3sNfKOgbdYwNHK4urpo1IaBLazDwcjnhESmz-fJEzyZ2mH-121t3_VfSDcwsmSOKlZKs6pXbA_uK_YFIIBHF5IozC1vv6QUQ40WIe9aiUnLTqg=w618-h934-no \"專案目錄\")\n\n* 執行套件安裝\n\n```\nnpm install\n```\n\n* 安裝 Vuetify 框架\n\n> 如果不想要安裝樣式框架可以直接跳過這個步驟\n\n```\nvue add vuetify\n```\n\n* 測試 vue 專案是否安裝成功\n\n```\nnpm run serve\n```\n\n用瀏覽器看 `http://localhost:8080` 如果有成功出現如下面畫面就是安裝成功 `vue` + `vuetify` 的專案囉～\n\n![http://localhost:8080](https://lh3.googleusercontent.com/WTI7SZCavIJAmLRqZNbCMMRHxPwSm6yD_EkBf-DHV8Rn_96Sa39daK1aYjxFd34c_XAjiC8yDZVwspgn2arZdo-_ptFvduN4CQ0cNnJC5_xohUq10ggkuzHrdn7m9KezmU-8E4FZMBD3PzRMeWPYlwJCj-JjSfkNpQZGLRn37RyoGNvpJECdgnBsEEQx5AZHx-E4ZJDOTujyDBGEkqvp8lI3oW--jDOoCIMaFUuLu-vHxKvWtFprE_mBzwI7KIkkeC9D0rWhUsX93hJT4x46Elmj1TOYSDRMiNogHG0P5cZ5JSUIUsdM_T9XKQ-U0oTDeD3iHipDBmBfJH5KgmpXGh3e8cBlyHqpkqu5DVXe468cWfNT9nRqCB3IQOPtPcJg5tB0bKe68fQTjaIwwiqEngW1aB-8gXZgt5OCDeAyOZJB0rvXvr9uoL69sUrHCamSGT0ppGLenX7yFeP-uNVPXgi899gQj9siNlqWbQWnjjdrhsTAvrx5-3rFS43GIssEkwwB_MiQT411oAdd_g9ds_BgCDSohxD2NOWZAWJ3NmvrSupIsvckps0p7jLJ-4Mqb82J5KvJ0GdIT8wIjqF8hZmhFeAWxFgmwE10axr7eClFsN4CjIqhnFdO_v86vyYDx2S60EVqUPW8t1PorW0jbXJG3TGjEeWlHYLEme8d7mQaIT1001f174oEY9twCvgAd5YxmLFCZyaGrqvleFOveUc221DTKkgYdC9k9oAjr2qAyV4J7A=w2206-h1378-no \"首頁\")\n\n\n## 起始 `.NET Core 3.0 MVC` 專案\n\n* 安裝 [.NET Command Line Interface](https://github.com/dotnet/cli)\n\n* 新增一個 Core MVC 專案\n\n```dotnet\ndotnet new mvc\n```\n\n把產生的檔案都移到最外層 (跟 Vue 同一層)，如下圖。\n\n![專案目錄](https://lh3.googleusercontent.com/W203GfdGjLI_7ZhUUZjmE4LYVKs6AFGNMcVohuF2E5_eQqKQrXc_ZV58HCPvQPjwBuxBPZEplhsJ_-WrPJ_nH_5OgjijEFAcZsStz2-ckatWBngIvgpo4p1pWPt_o613hObxX2CS9jz7g9zuRqIyQH5CAwrF8pnQAvls9fHvsnL3Zzuy6mqCNjzy9H6C1KJTmA7mdNbSJhtUr6JqNjFuw1hWgEAyVGiDCJNcNnGFK0zi3f74byGEMh_K7ymwRv6iJUhXN74GwTRMpV7r_jZIOrs7AOv10UhezxHhKFvkCe_ZZ0YbhohieE4LmwiAzL-urryjpLE95apTMTf6xRIRB8Gv-0lX4UNjC4MN9CI7jwdGklQ2djXDnmfys7rbsk0p6a5gr3dPsD-98pwTC3I--LmngPdBjOR6QED59piLeKbeQ4N3QG0L19JW6hcF0liPvdEwToC3psjUiC-jYimsUK6jvxU2xlyMqAIAtjm9fLCmnFp5kfMH_qbihmO9dQGnpmsYx_rCQqTXrfmODYvTL1LwiMBRe-Hp_twIBHB1S6K5XtCCk19SLYHD7VEKKK6sfAcawo5V4Ohe_yJ8Phxkod0rhXv4KSvlYdD3iJbCLCFhMhWgyAIGhZTcST0lDzUhxz5L8TKZRa5hbHA8kjw7hNlnjhYm5b92HFetGcwPbTi-3t57nL9C0H2drgjwqOBh8m8Zwh5l0QDdBrdToOQg-PKII9XK0eMh5oriRCvgjjaP_H14vg=w614-h1208-no \"專案目錄\")\n\n* 刪除不必要的檔案\n\n因為我們是 `SPA` 不需要用到 MVC 其他頁面的功能，所以將多餘的頁面和樣式去除。參考如下的資料夾結構。\n\n![刪除多餘頁面和樣式後的檔案](https://lh3.googleusercontent.com/_6YDysh2v7AoOk4y82teBx4qsEXdrEvO5y6LKda2Vt87eLX1RCRfXOIaFhHK5Iy7OsBCkzdRehhB7-VsvrRSUWZsPO9tONVNw-c1pwcsrsA6wOAMn-D22zI0gQa2DrEDmBYttUore2G0kNtZkGaLwt2LQMuK3Zs-8cOEyHUPy1nnWD66GVUNozqty6tNTGmyIK20sN8kZpCLEikfEYunKI3gVlT0G5UfEmVAJ25VlKUbkziTEPwTDtwxvBmz6qlPbcEKXNSOLAe-zAeYR6b4-yTPFifwmiNrwdHEebD3kkZrYdfCPO9KFw4FOFQpNHkrGP-LxbeXCnatvDzMA0k9A81iHtVD0t8_9vkfb0lBvm40S0sFTvXXI_kUW-ncr639iMkXZ66v55ZXWOMAUL3trWESyUZ6FPMtiCzUVZRNlR0kfKV_CmgLivBugJxl696Vh6MPbUWcAwr3dxBnU9Iwvd5wHad4lpGbDEF2GTSzL8ZV1Hh8HnwLiGbqqGfJzFs9O8sgsa4dDJAnQpwCuCTrJJbk5KmMNPLR5tbiSyY9MGz1nbkCYtrtSNNPro_OsqiG3uMNXm-tCbtUkTjGG953ULeTY45NQqPwVqugKu3T0t4DMKjEJvoky0IBUOd7hdoTMgyRb9bMMJMedWyAuoFLZwM5Ar4qOZ3Um-nmQ2HA-lp4GDG1wO9rbxk4Sh2Ng8WR_rzH9Hnwy1DR8qFrXWv4E58WrzfK79A01VcCgBkAyR74bl9vUg=w620-h1248-no \"資料夾結構\")\n\n* `HomeController.cs` 刪除多餘的 Controller，只保留 `Index` 和 `Error`\n\n```C#\nusing System;\nusing System.Collections.Generic;\nusing System.Diagnostics;\nusing System.Linq;\nusing System.Threading.Tasks;\nusing Microsoft.AspNetCore.Mvc;\nusing Microsoft.Extensions.Logging;\nusing dotnet_core_with_vue_cli3.Models;\n\nnamespace dotnet_core_with_vue_cli3.Controllers\n{\n    public class HomeController : Controller\n    {\n        private readonly ILogger<HomeController> _logger;\n\n        public HomeController(ILogger<HomeController> logger)\n        {\n            _logger = logger;\n        }\n\n        public IActionResult Index()\n        {\n            return View();\n        }\n\n        [ResponseCache(Duration = 0, Location = ResponseCacheLocation.None, NoStore = true)]\n        public IActionResult Error()\n        {\n            return View(new ErrorViewModel { RequestId = Activity.Current?.Id ?? HttpContext.TraceIdentifier });\n        }\n    }\n}\n```\n\n* `Index.cshtml` 多餘的 HTML 刪除\n\n```html\n<div id=\"app\"></div>\n```\n\n* `_Layout.cshtml` 修改內容如下\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <link rel=\"icon\" href=\"~/favicon.ico\">\n    <title>dotnet_core_with_vue_cli3</title>\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900\">\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/@@mdi/font@latest/css/materialdesignicons.min.css\">\n</head>\n<body>\n    <noscript>\n      <strong>We're sorry but my-app doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>\n    </noscript>\n\n    @RenderBody()\n\n    <script src=\"~/js/app.js\" asp-append-version=\"true\"></script>\n\n    @RenderSection(\"Scripts\", required: false)\n</body>\n</html>\n```\n\n> 誒～你有沒有覺得明明我們把 `wwwroot` 裡面的靜態資源都殺光光，卻在 `_Layout.cshtml` 上面放 `app.js`？因為這邊是留給 Vue-cli 去產生靜態資源，所以我們接下來就要說明如何設定讓 `.NET Core` 和 `Vue` 做連動。\n\n## 設定 `HMR` 和 `vue router` 的 fallback\n\n接著才是重頭戲～如魔法般的 `HMR` 功能登場!!!\n\n如果還不太知道什麼是 `HMR` 的，就 google 一下囉～\n\n* 安裝 `aspnet-webpack`, `webpack-hot-middleware`, `webpack-dev-middleware`\n\n```\nnpm i -D aspnet-webpack webpack-hot-middleware webpack-dev-middleware\n```\n\n* 新增 `Microsoft.AspNetCore.SpaServices.Extensions`\n\n```\ndotnet add package Microsoft.AspNetCore.SpaServices.Extensions --version 3.0.0\n```\n\n* 修改 `Startup.cs`\n\n```C#\n...\nusing Microsoft.AspNetCore.SpaServices.Webpack;\n\n......\n        // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\n        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)\n        {\n            if (env.IsDevelopment())\n            {\n                app.UseDeveloperExceptionPage();\n                app.UseWebpackDevMiddleware(new WebpackDevMiddlewareOptions\n                {\n                    HotModuleReplacement = true,\n                    ConfigFile = @\"./node_modules/@vue/cli-service/webpack.config.js\"\n                });\n            }\n            else\n            {\n                ...\n            }\n            ...\n\n            app.UseEndpoints(endpoints =>\n            {\n                endpoints.MapControllerRoute(\n                    name: \"default\",\n                    pattern: \"{controller=Home}/{action=Index}/{id?}\");\n                endpoints.MapFallbackToController(\"Index\", \"Home\");\n            });\n        }\n......\n```\n\n* 新增 `vue.config.js` 在最外層\n\n> 這邊就是設定 `Vue-cli` 將產生的靜態檔案放在 `wwwroot` 讓 `.Net Core` 去吃。\n\n```js\nmodule.exports = {\n  outputDir: 'wwwroot',\n  publicPath: \"/\",\n  chainWebpack: config => {\n    // https://github.com/vuejs/vue-cli/issues/3603#issuecomment-483913563\n    // remove vue-cli-service's progress output\n    config.plugins.delete('progress')\n    // https://intellitect.com/quickly-configure-asp-net-core-api-to-work-with-vue-cli-3/\n    // aspnet uses the other hmr so remove this one\n    config.plugins.delete('hmr');\n  }\n}\n```\n\n* 若要使用 vscode 跑專案：修改 `Properties/launchSettings.json`\n\n修改 `Properties/launchSettings.json`\n\n```json\n{\n  \"iisSettings\": {\n    ...\n  },\n  \"profiles\": {\n    \"IIS Express\": {\n      \"commandName\": \"IISExpress\",\n      \"launchBrowser\": true,\n      \"environmentVariables\": {\n        \"ASPNETCORE_ENVIRONMENT\": \"Development\",\n        \"NODE_ENV\": \"development\"\n      }\n    },\n    \"dotnet_core_with_vue_cli3\": {\n      \"commandName\": \"Project\",\n      \"launchBrowser\": true,\n      \"applicationUrl\": \"http://localhost:5000\",\n      \"environmentVariables\": {\n        \"ASPNETCORE_ENVIRONMENT\": \"Development\",\n        \"NODE_ENV\": \"development\"\n      }\n    }\n  }\n}\n```\n\n* 若要使用 npm 跑專案：`package.json` 指令加上 HMR\n\n安裝 cross-env\n\n```\nnpm install -D cross-env\n```\n\n`package.json`\n\n```json\n{\n  ......\n  \"scripts\": {\n    \"hmr\": \"cross-env ASPNETCORE_ENVIRONMENT=Development NODE_ENV=development dotnet run\",\n    ...\n  },\n  ......\n}\n```\n\n執行如下 npm 指令或使用之前寫的另一篇文章方式 [vscode task](../../../../../2017/12/25/DotnetCore/NET-Core-2-0-Debug-with-VScode/) 來啟動專案。\n\n```npm\nnpm run hmr\n```\n\n\n成功的話就會從 `Chrome` 開發者工具看到 `HMR` 連結成功囉～\n\n![http://localhost:5000](https://lh3.googleusercontent.com/iwyqGKY3x0PNLHZvmRMQxAG53ta1MNkplE5rDHIwfr884IxIPhOlHaZwUzMdPS4B5MvWrK-BzP1afJMnZkHfuwAGJ8szM1VJmqo3BkZZs9GN92uP-zTk3oS7spcGo8DinPhbi9M7TZJkku95nzIxh1UIebtussfopG1byaWLQOna9wt9_CK8tiSyugr1A6x0bPG20SsAO6--hwmNa4SiODAyeTeADmMs1dtrI8d-6gDvtULip1yljjzKfnDm2iECcreinLfD3mUyUkAaW25-jzyXpa3dQ5EokLdx9JNVVLWM1kKmeadHGdcPNXEKJIaWK8TMFuxjRL6YiiwPeRpEMXSHGZI7Czbaqxh1GJmdBCejLIbWaOy-NKuqKJ37_Xf5FVFTnXlEyBZs3yAfr2pNtBgbk9SsZJvB1ljszKOE-CwhXmJJinfBpJ-kGd2Lh2gsQwo2JC6_frvi3uv3gl9LVhBQC6iZdawwvwTveTr_E4X7Z5-P-EenyBMKUV6IRoFUE_b_dfPZlPYMBCD8UBSau-F3Y1HZNAIihor6R1o4c2RSKF01GWXq62HBdnlQgX-94mNkj4noSm9dHaErDzTOm0WUwJVw_SxfdFB3_2aP6ddi5ce2mxHiiau5ajes_rvFBuMlLAmwIOhiXR1KwdBdS5hqjTB4rdGTGEA3IYqlyLXtLdFNzM8iuMhZvlFra90dpXFlLvYBGCitsQ8VTQFc4ukw1Di0HvdY4cZFsLulfcTv9FhEAA=w1780-h1112-no \"首頁\")\n\n今天的範例在 [github](https://github.com/Annilla/dotnet-core-with-vue-cli3/tree/v1.0)，下回見～\n\n## 參考資料\n\n* [Microsoft.AspNetCore.SpaServices.Extensions](https://www.nuget.org/packages/Microsoft.AspNetCore.SpaServices.Extensions/3.0.0)\n* [Quickly Configure ASP.NET Core API to work with Vue CLI 3!](https://intellitect.com/quickly-configure-asp-net-core-api-to-work-with-vue-cli-3/)\n* [從 ASP.NET Core 2.2 遷移至3](https://docs.microsoft.com/zh-tw/aspnet/core/migration/22-to-30?view=aspnetcore-3.0&tabs=visual-studio-code)","slug":"DotnetCore/NET-Core-3-SPA-with-Vue-Cli-3","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74o0014tudhwl2mzxe1","content":"<p>之前有寫過一篇 <a href=\"../../../../../2017/12/02/DotnetCore/NET-Core-2-0-SPA-with-Vue-Cli/\">.NET core 2 + Vue-cli 2 的起手式</a>，到了2019，兩者也紛紛出版本3。這次，我們將說明如何用 .NET Core 3 + Vue-cli 3 起一個新專案，附贈最新 <a href=\"https://vuetifyjs.com/en/\" target=\"_blank\" rel=\"noopener\">Vuetify 2</a> 的 Material Design 框架。</p>\n<a id=\"more\"></a>\n<h2 id=\"安裝-vue-cli-模板\"><a href=\"#安裝-vue-cli-模板\" class=\"headerlink\" title=\"安裝 vue-cli 模板\"></a>安裝 <code>vue-cli</code> 模板</h2><blockquote>\n<p>注意： vue-cli 需要 Node.js 版本 &gt; v8.9</p>\n</blockquote>\n<p><br></p>\n<ul>\n<li>安裝全域 <code>vue-cli</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g @vue/cli</span><br></pre></td></tr></table></figure>\n<ul>\n<li>起始一個 vue 專案 <code>my-app</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue create my-app</span><br></pre></td></tr></table></figure>\n<p>按照 <code>vue-cli</code> 的指示選擇預設 (<code>default</code>) 即可。</p>\n<p>安裝完後，可以把專案從 <code>my-app</code> 資料夾中移出來，如下圖。</p>\n<p><img src=\"https://lh3.googleusercontent.com/mg4HgncLJ66AZ4wnPznFb1X55drWjTCgDy-22BLolsQRlBTYghwQg8kDxWkCaneH4eoyns8JS9Xi42b74lk4ATinxc19-ka7voTtH8ySKcfZZ4j9nRsj_X0FQvBCzIIsk9ZHBv159X0piGmlaJKvLm2q6V-Rpmzbpl6pvd9M1zNtO5Cu01hFRED2G0Zoh9y5ELB6u_vU1uqoCFfNM-eDDjFMQrqTZ0vd3PxmjciMwdQ8hjMxMGoo9pVci3V3z-K0NlFqfuX5O7Skg1Qhk0OgCa7DYqfmL-QrdZ-PcJOK0sMBCY2LfW3cOjFK9AkQTCTYnbn4xMLLAX8dR1jRgFXBGIsDJl_FiE-HCNrT71O1wrA1yd751rABO2w8ghElsJgteqvSBBoukRrgYwX4z8Efuu1BReVfX3hfdPAsfJKSHsZZuM-C5G3GzT58GHQpXpVHyAQME344dX0zqaZmDrWb0PKcD77G0lsYmZcpXAuczuhWADSAPMUGCuswMgan3q35GRrpN9SJwekmzHXs1J818eOptpn0jTO3x--I6bhsvB9OpmchFI8ZoFtE21LDPa1Jfrss_-HZ4ZpzdNslDdNeOL33kHLu00zXne8AwMCCmD1KKp4aLwniW3-n7tVuQFTKLYRb3sNfKOgbdYwNHK4urpo1IaBLazDwcjnhESmz-fJEzyZ2mH-121t3_VfSDcwsmSOKlZKs6pXbA_uK_YFIIBHF5IozC1vv6QUQ40WIe9aiUnLTqg=w618-h934-no\" alt=\"專案目錄\" title=\"專案目錄\"></p>\n<ul>\n<li>執行套件安裝</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n<ul>\n<li>安裝 Vuetify 框架</li>\n</ul>\n<blockquote>\n<p>如果不想要安裝樣式框架可以直接跳過這個步驟</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue add vuetify</span><br></pre></td></tr></table></figure>\n<ul>\n<li>測試 vue 專案是否安裝成功</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run serve</span><br></pre></td></tr></table></figure>\n<p>用瀏覽器看 <code>http://localhost:8080</code> 如果有成功出現如下面畫面就是安裝成功 <code>vue</code> + <code>vuetify</code> 的專案囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/WTI7SZCavIJAmLRqZNbCMMRHxPwSm6yD_EkBf-DHV8Rn_96Sa39daK1aYjxFd34c_XAjiC8yDZVwspgn2arZdo-_ptFvduN4CQ0cNnJC5_xohUq10ggkuzHrdn7m9KezmU-8E4FZMBD3PzRMeWPYlwJCj-JjSfkNpQZGLRn37RyoGNvpJECdgnBsEEQx5AZHx-E4ZJDOTujyDBGEkqvp8lI3oW--jDOoCIMaFUuLu-vHxKvWtFprE_mBzwI7KIkkeC9D0rWhUsX93hJT4x46Elmj1TOYSDRMiNogHG0P5cZ5JSUIUsdM_T9XKQ-U0oTDeD3iHipDBmBfJH5KgmpXGh3e8cBlyHqpkqu5DVXe468cWfNT9nRqCB3IQOPtPcJg5tB0bKe68fQTjaIwwiqEngW1aB-8gXZgt5OCDeAyOZJB0rvXvr9uoL69sUrHCamSGT0ppGLenX7yFeP-uNVPXgi899gQj9siNlqWbQWnjjdrhsTAvrx5-3rFS43GIssEkwwB_MiQT411oAdd_g9ds_BgCDSohxD2NOWZAWJ3NmvrSupIsvckps0p7jLJ-4Mqb82J5KvJ0GdIT8wIjqF8hZmhFeAWxFgmwE10axr7eClFsN4CjIqhnFdO_v86vyYDx2S60EVqUPW8t1PorW0jbXJG3TGjEeWlHYLEme8d7mQaIT1001f174oEY9twCvgAd5YxmLFCZyaGrqvleFOveUc221DTKkgYdC9k9oAjr2qAyV4J7A=w2206-h1378-no\" alt=\"http://localhost:8080\" title=\"首頁\"></p>\n<h2 id=\"起始-NET-Core-3-0-MVC-專案\"><a href=\"#起始-NET-Core-3-0-MVC-專案\" class=\"headerlink\" title=\"起始 .NET Core 3.0 MVC 專案\"></a>起始 <code>.NET Core 3.0 MVC</code> 專案</h2><ul>\n<li><p>安裝 <a href=\"https://github.com/dotnet/cli\" target=\"_blank\" rel=\"noopener\">.NET Command Line Interface</a></p>\n</li>\n<li><p>新增一個 Core MVC 專案</p>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet new mvc</span><br></pre></td></tr></table></figure>\n<p>把產生的檔案都移到最外層 (跟 Vue 同一層)，如下圖。</p>\n<p><img src=\"https://lh3.googleusercontent.com/W203GfdGjLI_7ZhUUZjmE4LYVKs6AFGNMcVohuF2E5_eQqKQrXc_ZV58HCPvQPjwBuxBPZEplhsJ_-WrPJ_nH_5OgjijEFAcZsStz2-ckatWBngIvgpo4p1pWPt_o613hObxX2CS9jz7g9zuRqIyQH5CAwrF8pnQAvls9fHvsnL3Zzuy6mqCNjzy9H6C1KJTmA7mdNbSJhtUr6JqNjFuw1hWgEAyVGiDCJNcNnGFK0zi3f74byGEMh_K7ymwRv6iJUhXN74GwTRMpV7r_jZIOrs7AOv10UhezxHhKFvkCe_ZZ0YbhohieE4LmwiAzL-urryjpLE95apTMTf6xRIRB8Gv-0lX4UNjC4MN9CI7jwdGklQ2djXDnmfys7rbsk0p6a5gr3dPsD-98pwTC3I--LmngPdBjOR6QED59piLeKbeQ4N3QG0L19JW6hcF0liPvdEwToC3psjUiC-jYimsUK6jvxU2xlyMqAIAtjm9fLCmnFp5kfMH_qbihmO9dQGnpmsYx_rCQqTXrfmODYvTL1LwiMBRe-Hp_twIBHB1S6K5XtCCk19SLYHD7VEKKK6sfAcawo5V4Ohe_yJ8Phxkod0rhXv4KSvlYdD3iJbCLCFhMhWgyAIGhZTcST0lDzUhxz5L8TKZRa5hbHA8kjw7hNlnjhYm5b92HFetGcwPbTi-3t57nL9C0H2drgjwqOBh8m8Zwh5l0QDdBrdToOQg-PKII9XK0eMh5oriRCvgjjaP_H14vg=w614-h1208-no\" alt=\"專案目錄\" title=\"專案目錄\"></p>\n<ul>\n<li>刪除不必要的檔案</li>\n</ul>\n<p>因為我們是 <code>SPA</code> 不需要用到 MVC 其他頁面的功能，所以將多餘的頁面和樣式去除。參考如下的資料夾結構。</p>\n<p><img src=\"https://lh3.googleusercontent.com/_6YDysh2v7AoOk4y82teBx4qsEXdrEvO5y6LKda2Vt87eLX1RCRfXOIaFhHK5Iy7OsBCkzdRehhB7-VsvrRSUWZsPO9tONVNw-c1pwcsrsA6wOAMn-D22zI0gQa2DrEDmBYttUore2G0kNtZkGaLwt2LQMuK3Zs-8cOEyHUPy1nnWD66GVUNozqty6tNTGmyIK20sN8kZpCLEikfEYunKI3gVlT0G5UfEmVAJ25VlKUbkziTEPwTDtwxvBmz6qlPbcEKXNSOLAe-zAeYR6b4-yTPFifwmiNrwdHEebD3kkZrYdfCPO9KFw4FOFQpNHkrGP-LxbeXCnatvDzMA0k9A81iHtVD0t8_9vkfb0lBvm40S0sFTvXXI_kUW-ncr639iMkXZ66v55ZXWOMAUL3trWESyUZ6FPMtiCzUVZRNlR0kfKV_CmgLivBugJxl696Vh6MPbUWcAwr3dxBnU9Iwvd5wHad4lpGbDEF2GTSzL8ZV1Hh8HnwLiGbqqGfJzFs9O8sgsa4dDJAnQpwCuCTrJJbk5KmMNPLR5tbiSyY9MGz1nbkCYtrtSNNPro_OsqiG3uMNXm-tCbtUkTjGG953ULeTY45NQqPwVqugKu3T0t4DMKjEJvoky0IBUOd7hdoTMgyRb9bMMJMedWyAuoFLZwM5Ar4qOZ3Um-nmQ2HA-lp4GDG1wO9rbxk4Sh2Ng8WR_rzH9Hnwy1DR8qFrXWv4E58WrzfK79A01VcCgBkAyR74bl9vUg=w620-h1248-no\" alt=\"刪除多餘頁面和樣式後的檔案\" title=\"資料夾結構\"></p>\n<ul>\n<li><code>HomeController.cs</code> 刪除多餘的 Controller，只保留 <code>Index</code> 和 <code>Error</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">using System;</span><br><span class=\"line\">using System.Collections.Generic;</span><br><span class=\"line\">using System.Diagnostics;</span><br><span class=\"line\">using System.Linq;</span><br><span class=\"line\">using System.Threading.Tasks;</span><br><span class=\"line\">using Microsoft.AspNetCore.Mvc;</span><br><span class=\"line\">using Microsoft.Extensions.Logging;</span><br><span class=\"line\">using dotnet_core_with_vue_cli3.Models;</span><br><span class=\"line\"></span><br><span class=\"line\">namespace dotnet_core_with_vue_cli3.Controllers</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    public class HomeController : Controller</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        private readonly ILogger&lt;HomeController&gt; _logger;</span><br><span class=\"line\"></span><br><span class=\"line\">        public HomeController(ILogger&lt;HomeController&gt; logger)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            _logger = logger;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        public IActionResult Index()</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            return View();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        [ResponseCache(Duration = 0, Location = ResponseCacheLocation.None, NoStore = true)]</span><br><span class=\"line\">        public IActionResult Error()</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            return View(new ErrorViewModel &#123; RequestId = Activity.Current?.Id ?? HttpContext.TraceIdentifier &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>Index.cshtml</code> 多餘的 HTML 刪除</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>_Layout.cshtml</code> 修改內容如下</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"icon\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"~/favicon.ico\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>dotnet_core_with_vue_cli3<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://cdn.jsdelivr.net/npm/@@mdi/font@latest/css/materialdesignicons.min.css\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">noscript</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>We're sorry but my-app doesn't work properly without JavaScript enabled. Please enable it to continue.<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">noscript</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @RenderBody()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"~/js/app.js\"</span> <span class=\"attr\">asp-append-version</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @RenderSection(\"Scripts\", required: false)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>誒～你有沒有覺得明明我們把 <code>wwwroot</code> 裡面的靜態資源都殺光光，卻在 <code>_Layout.cshtml</code> 上面放 <code>app.js</code>？因為這邊是留給 Vue-cli 去產生靜態資源，所以我們接下來就要說明如何設定讓 <code>.NET Core</code> 和 <code>Vue</code> 做連動。</p>\n</blockquote>\n<h2 id=\"設定-HMR-和-vue-router-的-fallback\"><a href=\"#設定-HMR-和-vue-router-的-fallback\" class=\"headerlink\" title=\"設定 HMR 和 vue router 的 fallback\"></a>設定 <code>HMR</code> 和 <code>vue router</code> 的 fallback</h2><p>接著才是重頭戲～如魔法般的 <code>HMR</code> 功能登場!!!</p>\n<p>如果還不太知道什麼是 <code>HMR</code> 的，就 google 一下囉～</p>\n<ul>\n<li>安裝 <code>aspnet-webpack</code>, <code>webpack-hot-middleware</code>, <code>webpack-dev-middleware</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D aspnet-webpack webpack-hot-middleware webpack-dev-middleware</span><br></pre></td></tr></table></figure>\n<ul>\n<li>新增 <code>Microsoft.AspNetCore.SpaServices.Extensions</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet add package Microsoft.AspNetCore.SpaServices.Extensions --version 3.0.0</span><br></pre></td></tr></table></figure>\n<ul>\n<li>修改 <code>Startup.cs</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">using Microsoft.AspNetCore.SpaServices.Webpack;</span><br><span class=\"line\"></span><br><span class=\"line\">......</span><br><span class=\"line\">        // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span><br><span class=\"line\">        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            if (env.IsDevelopment())</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                app.UseDeveloperExceptionPage();</span><br><span class=\"line\">                app.UseWebpackDevMiddleware(new WebpackDevMiddlewareOptions</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    HotModuleReplacement = true,</span><br><span class=\"line\">                    ConfigFile = @&quot;./node_modules/@vue/cli-service/webpack.config.js&quot;</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            else</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                ...</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ...</span><br><span class=\"line\"></span><br><span class=\"line\">            app.UseEndpoints(endpoints =&gt;</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                endpoints.MapControllerRoute(</span><br><span class=\"line\">                    name: &quot;default&quot;,</span><br><span class=\"line\">                    pattern: &quot;&#123;controller=Home&#125;/&#123;action=Index&#125;/&#123;id?&#125;&quot;);</span><br><span class=\"line\">                endpoints.MapFallbackToController(&quot;Index&quot;, &quot;Home&quot;);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">......</span><br></pre></td></tr></table></figure>\n<ul>\n<li>新增 <code>vue.config.js</code> 在最外層</li>\n</ul>\n<blockquote>\n<p>這邊就是設定 <code>Vue-cli</code> 將產生的靜態檔案放在 <code>wwwroot</code> 讓 <code>.Net Core</code> 去吃。</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  outputDir: <span class=\"string\">'wwwroot'</span>,</span><br><span class=\"line\">  publicPath: <span class=\"string\">\"/\"</span>,</span><br><span class=\"line\">  chainWebpack: <span class=\"function\"><span class=\"params\">config</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// https://github.com/vuejs/vue-cli/issues/3603#issuecomment-483913563</span></span><br><span class=\"line\">    <span class=\"comment\">// remove vue-cli-service's progress output</span></span><br><span class=\"line\">    config.plugins.delete(<span class=\"string\">'progress'</span>)</span><br><span class=\"line\">    <span class=\"comment\">// https://intellitect.com/quickly-configure-asp-net-core-api-to-work-with-vue-cli-3/</span></span><br><span class=\"line\">    <span class=\"comment\">// aspnet uses the other hmr so remove this one</span></span><br><span class=\"line\">    config.plugins.delete(<span class=\"string\">'hmr'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>若要使用 vscode 跑專案：修改 <code>Properties/launchSettings.json</code></li>\n</ul>\n<p>修改 <code>Properties/launchSettings.json</code></p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"iisSettings\"</span>: &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  \"profiles\": &#123;</span><br><span class=\"line\">    \"IIS Express\": &#123;</span><br><span class=\"line\">      \"commandName\": \"IISExpress\",</span><br><span class=\"line\">      \"launchBrowser\": true,</span><br><span class=\"line\">      \"environmentVariables\": &#123;</span><br><span class=\"line\">        \"ASPNETCORE_ENVIRONMENT\": \"Development\",</span><br><span class=\"line\">        \"NODE_ENV\": \"development\"</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    \"dotnet_core_with_vue_cli3\": &#123;</span><br><span class=\"line\">      \"commandName\": \"Project\",</span><br><span class=\"line\">      \"launchBrowser\": true,</span><br><span class=\"line\">      \"applicationUrl\": \"http://localhost:5000\",</span><br><span class=\"line\">      \"environmentVariables\": &#123;</span><br><span class=\"line\">        \"ASPNETCORE_ENVIRONMENT\": \"Development\",</span><br><span class=\"line\">        \"NODE_ENV\": \"development\"</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>若要使用 npm 跑專案：<code>package.json</code> 指令加上 HMR</li>\n</ul>\n<p>安裝 cross-env</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -D cross-env</span><br></pre></td></tr></table></figure>\n<p><code>package.json</code></p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  \"scripts\": &#123;</span><br><span class=\"line\">    \"hmr\": \"cross-env ASPNETCORE_ENVIRONMENT=Development NODE_ENV=development dotnet run\",</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>執行如下 npm 指令或使用之前寫的另一篇文章方式 <a href=\"../../../../../2017/12/25/DotnetCore/NET-Core-2-0-Debug-with-VScode/\">vscode task</a> 來啟動專案。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run hmr</span><br></pre></td></tr></table></figure>\n<p>成功的話就會從 <code>Chrome</code> 開發者工具看到 <code>HMR</code> 連結成功囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/iwyqGKY3x0PNLHZvmRMQxAG53ta1MNkplE5rDHIwfr884IxIPhOlHaZwUzMdPS4B5MvWrK-BzP1afJMnZkHfuwAGJ8szM1VJmqo3BkZZs9GN92uP-zTk3oS7spcGo8DinPhbi9M7TZJkku95nzIxh1UIebtussfopG1byaWLQOna9wt9_CK8tiSyugr1A6x0bPG20SsAO6--hwmNa4SiODAyeTeADmMs1dtrI8d-6gDvtULip1yljjzKfnDm2iECcreinLfD3mUyUkAaW25-jzyXpa3dQ5EokLdx9JNVVLWM1kKmeadHGdcPNXEKJIaWK8TMFuxjRL6YiiwPeRpEMXSHGZI7Czbaqxh1GJmdBCejLIbWaOy-NKuqKJ37_Xf5FVFTnXlEyBZs3yAfr2pNtBgbk9SsZJvB1ljszKOE-CwhXmJJinfBpJ-kGd2Lh2gsQwo2JC6_frvi3uv3gl9LVhBQC6iZdawwvwTveTr_E4X7Z5-P-EenyBMKUV6IRoFUE_b_dfPZlPYMBCD8UBSau-F3Y1HZNAIihor6R1o4c2RSKF01GWXq62HBdnlQgX-94mNkj4noSm9dHaErDzTOm0WUwJVw_SxfdFB3_2aP6ddi5ce2mxHiiau5ajes_rvFBuMlLAmwIOhiXR1KwdBdS5hqjTB4rdGTGEA3IYqlyLXtLdFNzM8iuMhZvlFra90dpXFlLvYBGCitsQ8VTQFc4ukw1Di0HvdY4cZFsLulfcTv9FhEAA=w1780-h1112-no\" alt=\"http://localhost:5000\" title=\"首頁\"></p>\n<p>今天的範例在 <a href=\"https://github.com/Annilla/dotnet-core-with-vue-cli3/tree/v1.0\" target=\"_blank\" rel=\"noopener\">github</a>，下回見～</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://www.nuget.org/packages/Microsoft.AspNetCore.SpaServices.Extensions/3.0.0\" target=\"_blank\" rel=\"noopener\">Microsoft.AspNetCore.SpaServices.Extensions</a></li>\n<li><a href=\"https://intellitect.com/quickly-configure-asp-net-core-api-to-work-with-vue-cli-3/\" target=\"_blank\" rel=\"noopener\">Quickly Configure ASP.NET Core API to work with Vue CLI 3!</a></li>\n<li><a href=\"https://docs.microsoft.com/zh-tw/aspnet/core/migration/22-to-30?view=aspnetcore-3.0&amp;tabs=visual-studio-code\" target=\"_blank\" rel=\"noopener\">從 ASP.NET Core 2.2 遷移至3</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png","excerpt":"<p>之前有寫過一篇 <a href=\"../../../../../2017/12/02/DotnetCore/NET-Core-2-0-SPA-with-Vue-Cli/\">.NET core 2 + Vue-cli 2 的起手式</a>，到了2019，兩者也紛紛出版本3。這次，我們將說明如何用 .NET Core 3 + Vue-cli 3 起一個新專案，附贈最新 <a href=\"https://vuetifyjs.com/en/\" target=\"_blank\" rel=\"noopener\">Vuetify 2</a> 的 Material Design 框架。</p>","more":"<h2 id=\"安裝-vue-cli-模板\"><a href=\"#安裝-vue-cli-模板\" class=\"headerlink\" title=\"安裝 vue-cli 模板\"></a>安裝 <code>vue-cli</code> 模板</h2><blockquote>\n<p>注意： vue-cli 需要 Node.js 版本 &gt; v8.9</p>\n</blockquote>\n<p><br></p>\n<ul>\n<li>安裝全域 <code>vue-cli</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g @vue/cli</span><br></pre></td></tr></table></figure>\n<ul>\n<li>起始一個 vue 專案 <code>my-app</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue create my-app</span><br></pre></td></tr></table></figure>\n<p>按照 <code>vue-cli</code> 的指示選擇預設 (<code>default</code>) 即可。</p>\n<p>安裝完後，可以把專案從 <code>my-app</code> 資料夾中移出來，如下圖。</p>\n<p><img src=\"https://lh3.googleusercontent.com/mg4HgncLJ66AZ4wnPznFb1X55drWjTCgDy-22BLolsQRlBTYghwQg8kDxWkCaneH4eoyns8JS9Xi42b74lk4ATinxc19-ka7voTtH8ySKcfZZ4j9nRsj_X0FQvBCzIIsk9ZHBv159X0piGmlaJKvLm2q6V-Rpmzbpl6pvd9M1zNtO5Cu01hFRED2G0Zoh9y5ELB6u_vU1uqoCFfNM-eDDjFMQrqTZ0vd3PxmjciMwdQ8hjMxMGoo9pVci3V3z-K0NlFqfuX5O7Skg1Qhk0OgCa7DYqfmL-QrdZ-PcJOK0sMBCY2LfW3cOjFK9AkQTCTYnbn4xMLLAX8dR1jRgFXBGIsDJl_FiE-HCNrT71O1wrA1yd751rABO2w8ghElsJgteqvSBBoukRrgYwX4z8Efuu1BReVfX3hfdPAsfJKSHsZZuM-C5G3GzT58GHQpXpVHyAQME344dX0zqaZmDrWb0PKcD77G0lsYmZcpXAuczuhWADSAPMUGCuswMgan3q35GRrpN9SJwekmzHXs1J818eOptpn0jTO3x--I6bhsvB9OpmchFI8ZoFtE21LDPa1Jfrss_-HZ4ZpzdNslDdNeOL33kHLu00zXne8AwMCCmD1KKp4aLwniW3-n7tVuQFTKLYRb3sNfKOgbdYwNHK4urpo1IaBLazDwcjnhESmz-fJEzyZ2mH-121t3_VfSDcwsmSOKlZKs6pXbA_uK_YFIIBHF5IozC1vv6QUQ40WIe9aiUnLTqg=w618-h934-no\" alt=\"專案目錄\" title=\"專案目錄\"></p>\n<ul>\n<li>執行套件安裝</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n<ul>\n<li>安裝 Vuetify 框架</li>\n</ul>\n<blockquote>\n<p>如果不想要安裝樣式框架可以直接跳過這個步驟</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue add vuetify</span><br></pre></td></tr></table></figure>\n<ul>\n<li>測試 vue 專案是否安裝成功</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run serve</span><br></pre></td></tr></table></figure>\n<p>用瀏覽器看 <code>http://localhost:8080</code> 如果有成功出現如下面畫面就是安裝成功 <code>vue</code> + <code>vuetify</code> 的專案囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/WTI7SZCavIJAmLRqZNbCMMRHxPwSm6yD_EkBf-DHV8Rn_96Sa39daK1aYjxFd34c_XAjiC8yDZVwspgn2arZdo-_ptFvduN4CQ0cNnJC5_xohUq10ggkuzHrdn7m9KezmU-8E4FZMBD3PzRMeWPYlwJCj-JjSfkNpQZGLRn37RyoGNvpJECdgnBsEEQx5AZHx-E4ZJDOTujyDBGEkqvp8lI3oW--jDOoCIMaFUuLu-vHxKvWtFprE_mBzwI7KIkkeC9D0rWhUsX93hJT4x46Elmj1TOYSDRMiNogHG0P5cZ5JSUIUsdM_T9XKQ-U0oTDeD3iHipDBmBfJH5KgmpXGh3e8cBlyHqpkqu5DVXe468cWfNT9nRqCB3IQOPtPcJg5tB0bKe68fQTjaIwwiqEngW1aB-8gXZgt5OCDeAyOZJB0rvXvr9uoL69sUrHCamSGT0ppGLenX7yFeP-uNVPXgi899gQj9siNlqWbQWnjjdrhsTAvrx5-3rFS43GIssEkwwB_MiQT411oAdd_g9ds_BgCDSohxD2NOWZAWJ3NmvrSupIsvckps0p7jLJ-4Mqb82J5KvJ0GdIT8wIjqF8hZmhFeAWxFgmwE10axr7eClFsN4CjIqhnFdO_v86vyYDx2S60EVqUPW8t1PorW0jbXJG3TGjEeWlHYLEme8d7mQaIT1001f174oEY9twCvgAd5YxmLFCZyaGrqvleFOveUc221DTKkgYdC9k9oAjr2qAyV4J7A=w2206-h1378-no\" alt=\"http://localhost:8080\" title=\"首頁\"></p>\n<h2 id=\"起始-NET-Core-3-0-MVC-專案\"><a href=\"#起始-NET-Core-3-0-MVC-專案\" class=\"headerlink\" title=\"起始 .NET Core 3.0 MVC 專案\"></a>起始 <code>.NET Core 3.0 MVC</code> 專案</h2><ul>\n<li><p>安裝 <a href=\"https://github.com/dotnet/cli\" target=\"_blank\" rel=\"noopener\">.NET Command Line Interface</a></p>\n</li>\n<li><p>新增一個 Core MVC 專案</p>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet new mvc</span><br></pre></td></tr></table></figure>\n<p>把產生的檔案都移到最外層 (跟 Vue 同一層)，如下圖。</p>\n<p><img src=\"https://lh3.googleusercontent.com/W203GfdGjLI_7ZhUUZjmE4LYVKs6AFGNMcVohuF2E5_eQqKQrXc_ZV58HCPvQPjwBuxBPZEplhsJ_-WrPJ_nH_5OgjijEFAcZsStz2-ckatWBngIvgpo4p1pWPt_o613hObxX2CS9jz7g9zuRqIyQH5CAwrF8pnQAvls9fHvsnL3Zzuy6mqCNjzy9H6C1KJTmA7mdNbSJhtUr6JqNjFuw1hWgEAyVGiDCJNcNnGFK0zi3f74byGEMh_K7ymwRv6iJUhXN74GwTRMpV7r_jZIOrs7AOv10UhezxHhKFvkCe_ZZ0YbhohieE4LmwiAzL-urryjpLE95apTMTf6xRIRB8Gv-0lX4UNjC4MN9CI7jwdGklQ2djXDnmfys7rbsk0p6a5gr3dPsD-98pwTC3I--LmngPdBjOR6QED59piLeKbeQ4N3QG0L19JW6hcF0liPvdEwToC3psjUiC-jYimsUK6jvxU2xlyMqAIAtjm9fLCmnFp5kfMH_qbihmO9dQGnpmsYx_rCQqTXrfmODYvTL1LwiMBRe-Hp_twIBHB1S6K5XtCCk19SLYHD7VEKKK6sfAcawo5V4Ohe_yJ8Phxkod0rhXv4KSvlYdD3iJbCLCFhMhWgyAIGhZTcST0lDzUhxz5L8TKZRa5hbHA8kjw7hNlnjhYm5b92HFetGcwPbTi-3t57nL9C0H2drgjwqOBh8m8Zwh5l0QDdBrdToOQg-PKII9XK0eMh5oriRCvgjjaP_H14vg=w614-h1208-no\" alt=\"專案目錄\" title=\"專案目錄\"></p>\n<ul>\n<li>刪除不必要的檔案</li>\n</ul>\n<p>因為我們是 <code>SPA</code> 不需要用到 MVC 其他頁面的功能，所以將多餘的頁面和樣式去除。參考如下的資料夾結構。</p>\n<p><img src=\"https://lh3.googleusercontent.com/_6YDysh2v7AoOk4y82teBx4qsEXdrEvO5y6LKda2Vt87eLX1RCRfXOIaFhHK5Iy7OsBCkzdRehhB7-VsvrRSUWZsPO9tONVNw-c1pwcsrsA6wOAMn-D22zI0gQa2DrEDmBYttUore2G0kNtZkGaLwt2LQMuK3Zs-8cOEyHUPy1nnWD66GVUNozqty6tNTGmyIK20sN8kZpCLEikfEYunKI3gVlT0G5UfEmVAJ25VlKUbkziTEPwTDtwxvBmz6qlPbcEKXNSOLAe-zAeYR6b4-yTPFifwmiNrwdHEebD3kkZrYdfCPO9KFw4FOFQpNHkrGP-LxbeXCnatvDzMA0k9A81iHtVD0t8_9vkfb0lBvm40S0sFTvXXI_kUW-ncr639iMkXZ66v55ZXWOMAUL3trWESyUZ6FPMtiCzUVZRNlR0kfKV_CmgLivBugJxl696Vh6MPbUWcAwr3dxBnU9Iwvd5wHad4lpGbDEF2GTSzL8ZV1Hh8HnwLiGbqqGfJzFs9O8sgsa4dDJAnQpwCuCTrJJbk5KmMNPLR5tbiSyY9MGz1nbkCYtrtSNNPro_OsqiG3uMNXm-tCbtUkTjGG953ULeTY45NQqPwVqugKu3T0t4DMKjEJvoky0IBUOd7hdoTMgyRb9bMMJMedWyAuoFLZwM5Ar4qOZ3Um-nmQ2HA-lp4GDG1wO9rbxk4Sh2Ng8WR_rzH9Hnwy1DR8qFrXWv4E58WrzfK79A01VcCgBkAyR74bl9vUg=w620-h1248-no\" alt=\"刪除多餘頁面和樣式後的檔案\" title=\"資料夾結構\"></p>\n<ul>\n<li><code>HomeController.cs</code> 刪除多餘的 Controller，只保留 <code>Index</code> 和 <code>Error</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">using System;</span><br><span class=\"line\">using System.Collections.Generic;</span><br><span class=\"line\">using System.Diagnostics;</span><br><span class=\"line\">using System.Linq;</span><br><span class=\"line\">using System.Threading.Tasks;</span><br><span class=\"line\">using Microsoft.AspNetCore.Mvc;</span><br><span class=\"line\">using Microsoft.Extensions.Logging;</span><br><span class=\"line\">using dotnet_core_with_vue_cli3.Models;</span><br><span class=\"line\"></span><br><span class=\"line\">namespace dotnet_core_with_vue_cli3.Controllers</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    public class HomeController : Controller</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        private readonly ILogger&lt;HomeController&gt; _logger;</span><br><span class=\"line\"></span><br><span class=\"line\">        public HomeController(ILogger&lt;HomeController&gt; logger)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            _logger = logger;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        public IActionResult Index()</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            return View();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        [ResponseCache(Duration = 0, Location = ResponseCacheLocation.None, NoStore = true)]</span><br><span class=\"line\">        public IActionResult Error()</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            return View(new ErrorViewModel &#123; RequestId = Activity.Current?.Id ?? HttpContext.TraceIdentifier &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>Index.cshtml</code> 多餘的 HTML 刪除</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>_Layout.cshtml</code> 修改內容如下</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"icon\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"~/favicon.ico\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>dotnet_core_with_vue_cli3<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://cdn.jsdelivr.net/npm/@@mdi/font@latest/css/materialdesignicons.min.css\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">noscript</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>We're sorry but my-app doesn't work properly without JavaScript enabled. Please enable it to continue.<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">noscript</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @RenderBody()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"~/js/app.js\"</span> <span class=\"attr\">asp-append-version</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @RenderSection(\"Scripts\", required: false)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>誒～你有沒有覺得明明我們把 <code>wwwroot</code> 裡面的靜態資源都殺光光，卻在 <code>_Layout.cshtml</code> 上面放 <code>app.js</code>？因為這邊是留給 Vue-cli 去產生靜態資源，所以我們接下來就要說明如何設定讓 <code>.NET Core</code> 和 <code>Vue</code> 做連動。</p>\n</blockquote>\n<h2 id=\"設定-HMR-和-vue-router-的-fallback\"><a href=\"#設定-HMR-和-vue-router-的-fallback\" class=\"headerlink\" title=\"設定 HMR 和 vue router 的 fallback\"></a>設定 <code>HMR</code> 和 <code>vue router</code> 的 fallback</h2><p>接著才是重頭戲～如魔法般的 <code>HMR</code> 功能登場!!!</p>\n<p>如果還不太知道什麼是 <code>HMR</code> 的，就 google 一下囉～</p>\n<ul>\n<li>安裝 <code>aspnet-webpack</code>, <code>webpack-hot-middleware</code>, <code>webpack-dev-middleware</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D aspnet-webpack webpack-hot-middleware webpack-dev-middleware</span><br></pre></td></tr></table></figure>\n<ul>\n<li>新增 <code>Microsoft.AspNetCore.SpaServices.Extensions</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet add package Microsoft.AspNetCore.SpaServices.Extensions --version 3.0.0</span><br></pre></td></tr></table></figure>\n<ul>\n<li>修改 <code>Startup.cs</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">using Microsoft.AspNetCore.SpaServices.Webpack;</span><br><span class=\"line\"></span><br><span class=\"line\">......</span><br><span class=\"line\">        // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span><br><span class=\"line\">        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            if (env.IsDevelopment())</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                app.UseDeveloperExceptionPage();</span><br><span class=\"line\">                app.UseWebpackDevMiddleware(new WebpackDevMiddlewareOptions</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    HotModuleReplacement = true,</span><br><span class=\"line\">                    ConfigFile = @&quot;./node_modules/@vue/cli-service/webpack.config.js&quot;</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            else</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                ...</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ...</span><br><span class=\"line\"></span><br><span class=\"line\">            app.UseEndpoints(endpoints =&gt;</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                endpoints.MapControllerRoute(</span><br><span class=\"line\">                    name: &quot;default&quot;,</span><br><span class=\"line\">                    pattern: &quot;&#123;controller=Home&#125;/&#123;action=Index&#125;/&#123;id?&#125;&quot;);</span><br><span class=\"line\">                endpoints.MapFallbackToController(&quot;Index&quot;, &quot;Home&quot;);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">......</span><br></pre></td></tr></table></figure>\n<ul>\n<li>新增 <code>vue.config.js</code> 在最外層</li>\n</ul>\n<blockquote>\n<p>這邊就是設定 <code>Vue-cli</code> 將產生的靜態檔案放在 <code>wwwroot</code> 讓 <code>.Net Core</code> 去吃。</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  outputDir: <span class=\"string\">'wwwroot'</span>,</span><br><span class=\"line\">  publicPath: <span class=\"string\">\"/\"</span>,</span><br><span class=\"line\">  chainWebpack: <span class=\"function\"><span class=\"params\">config</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// https://github.com/vuejs/vue-cli/issues/3603#issuecomment-483913563</span></span><br><span class=\"line\">    <span class=\"comment\">// remove vue-cli-service's progress output</span></span><br><span class=\"line\">    config.plugins.delete(<span class=\"string\">'progress'</span>)</span><br><span class=\"line\">    <span class=\"comment\">// https://intellitect.com/quickly-configure-asp-net-core-api-to-work-with-vue-cli-3/</span></span><br><span class=\"line\">    <span class=\"comment\">// aspnet uses the other hmr so remove this one</span></span><br><span class=\"line\">    config.plugins.delete(<span class=\"string\">'hmr'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>若要使用 vscode 跑專案：修改 <code>Properties/launchSettings.json</code></li>\n</ul>\n<p>修改 <code>Properties/launchSettings.json</code></p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"iisSettings\"</span>: &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  \"profiles\": &#123;</span><br><span class=\"line\">    \"IIS Express\": &#123;</span><br><span class=\"line\">      \"commandName\": \"IISExpress\",</span><br><span class=\"line\">      \"launchBrowser\": true,</span><br><span class=\"line\">      \"environmentVariables\": &#123;</span><br><span class=\"line\">        \"ASPNETCORE_ENVIRONMENT\": \"Development\",</span><br><span class=\"line\">        \"NODE_ENV\": \"development\"</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    \"dotnet_core_with_vue_cli3\": &#123;</span><br><span class=\"line\">      \"commandName\": \"Project\",</span><br><span class=\"line\">      \"launchBrowser\": true,</span><br><span class=\"line\">      \"applicationUrl\": \"http://localhost:5000\",</span><br><span class=\"line\">      \"environmentVariables\": &#123;</span><br><span class=\"line\">        \"ASPNETCORE_ENVIRONMENT\": \"Development\",</span><br><span class=\"line\">        \"NODE_ENV\": \"development\"</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>若要使用 npm 跑專案：<code>package.json</code> 指令加上 HMR</li>\n</ul>\n<p>安裝 cross-env</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -D cross-env</span><br></pre></td></tr></table></figure>\n<p><code>package.json</code></p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  \"scripts\": &#123;</span><br><span class=\"line\">    \"hmr\": \"cross-env ASPNETCORE_ENVIRONMENT=Development NODE_ENV=development dotnet run\",</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>執行如下 npm 指令或使用之前寫的另一篇文章方式 <a href=\"../../../../../2017/12/25/DotnetCore/NET-Core-2-0-Debug-with-VScode/\">vscode task</a> 來啟動專案。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run hmr</span><br></pre></td></tr></table></figure>\n<p>成功的話就會從 <code>Chrome</code> 開發者工具看到 <code>HMR</code> 連結成功囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/iwyqGKY3x0PNLHZvmRMQxAG53ta1MNkplE5rDHIwfr884IxIPhOlHaZwUzMdPS4B5MvWrK-BzP1afJMnZkHfuwAGJ8szM1VJmqo3BkZZs9GN92uP-zTk3oS7spcGo8DinPhbi9M7TZJkku95nzIxh1UIebtussfopG1byaWLQOna9wt9_CK8tiSyugr1A6x0bPG20SsAO6--hwmNa4SiODAyeTeADmMs1dtrI8d-6gDvtULip1yljjzKfnDm2iECcreinLfD3mUyUkAaW25-jzyXpa3dQ5EokLdx9JNVVLWM1kKmeadHGdcPNXEKJIaWK8TMFuxjRL6YiiwPeRpEMXSHGZI7Czbaqxh1GJmdBCejLIbWaOy-NKuqKJ37_Xf5FVFTnXlEyBZs3yAfr2pNtBgbk9SsZJvB1ljszKOE-CwhXmJJinfBpJ-kGd2Lh2gsQwo2JC6_frvi3uv3gl9LVhBQC6iZdawwvwTveTr_E4X7Z5-P-EenyBMKUV6IRoFUE_b_dfPZlPYMBCD8UBSau-F3Y1HZNAIihor6R1o4c2RSKF01GWXq62HBdnlQgX-94mNkj4noSm9dHaErDzTOm0WUwJVw_SxfdFB3_2aP6ddi5ce2mxHiiau5ajes_rvFBuMlLAmwIOhiXR1KwdBdS5hqjTB4rdGTGEA3IYqlyLXtLdFNzM8iuMhZvlFra90dpXFlLvYBGCitsQ8VTQFc4ukw1Di0HvdY4cZFsLulfcTv9FhEAA=w1780-h1112-no\" alt=\"http://localhost:5000\" title=\"首頁\"></p>\n<p>今天的範例在 <a href=\"https://github.com/Annilla/dotnet-core-with-vue-cli3/tree/v1.0\" target=\"_blank\" rel=\"noopener\">github</a>，下回見～</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://www.nuget.org/packages/Microsoft.AspNetCore.SpaServices.Extensions/3.0.0\" target=\"_blank\" rel=\"noopener\">Microsoft.AspNetCore.SpaServices.Extensions</a></li>\n<li><a href=\"https://intellitect.com/quickly-configure-asp-net-core-api-to-work-with-vue-cli-3/\" target=\"_blank\" rel=\"noopener\">Quickly Configure ASP.NET Core API to work with Vue CLI 3!</a></li>\n<li><a href=\"https://docs.microsoft.com/zh-tw/aspnet/core/migration/22-to-30?view=aspnetcore-3.0&amp;tabs=visual-studio-code\" target=\"_blank\" rel=\"noopener\">從 ASP.NET Core 2.2 遷移至3</a></li>\n</ul>"},{"title":".NET Core 2.0 SPA with Vue-Cli - Start New Project","thumbnailImage":"http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png","thumbnailImagePosition":"left","coverImage":"http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png","coverMeta":"out","date":"2017-12-01T16:00:00.000Z","updated":"2017-12-01T16:00:00.000Z","_content":"\n`.Net Core` 可以不用開啟慢吞吞的 `IDE`，即可快速建立專案。本篇全程使用 `VScode`，手把手教你如何用 `.NET Core 2.0 MVC` + `vue-cli` 起始一個 `SPA` 專案。當然， `HMR` (Hot Module Replacement) 神器也會一併附上啦。\n<!--more-->\n\n> 首先，這裡先澄清一點，就是 `.NET Core` 的 `template` 內建有 `ASP.NET Core with Vue.js`。因為是套裝，裡面還包含 `Bootstrap`, `Typescript` 等等，畢竟不是每個專案都會用到這些，所以本篇專注在如何結合 `.NET Core` 和 `Vue` ，那些依專案選用的項目就不會在這裡提到。\n\n## 起始 `.NET Core 2.0 MVC` 專案\n\n1. 安裝 [.NET Command Line Interface](https://github.com/dotnet/cli)\n\n2. 新增一個 Core MVC 專案\n\n```dotnet\ndotnet new 'ASP.NET Core Web App (Model-View-Controller)'\n```\n\n3. 刪除不必要的檔案\n\n因為我們是 `SPA` 不需要用到 MVC 其他頁面的功能，所以將多餘的頁面和樣式去除。參考如下的資料夾結構。\n\n![刪除多餘頁面和樣式後的檔案](https://lh3.googleusercontent.com/SS8p9bPMBScLwOK1WgnN62PV1W2Tzw2B7KHNgVD9hs2BNQdweBgEZ2ryH8b_X24hUSPNbY52hcdlEeblEfWOjKdXFbZW_ZnZ44yftNz9fbfcuhy8BF8BrlMmmF_PBFJhB7AcOXA4o36r24UcqHbMZQcoAnkCxflijNMA7bZhNhWPXTgqXl4N_ePy8CghldoBBFzDgxtrRgPFS5Xm4cjxl69szT3g1yCmQs0goeNWTFOR12nIsnkbUQN1Cru5V6d6Emfbv9zJE8vsMzde_uFU0VyV0OgGd994-sQs-jORDQ1qijU1O3O3Ycb1Ns8ZM6In9ibZmukZ4GBtNV6SW6dj83Ley2Xo4J_4L-jt__9kRBsVvANhIEonZ-R68GcPqE0KhstaAbvu30u4qtWJJBmuRmfbcEA_1w4qdEkDJ4WJlA4PIbqketu_tLSswyN0U5MDSi0DF0PGHjQA8mXsuYhktGhoJzwEZ8HLa0ENNsIkqgKR4enL2EZWJJVcH-Zc5nqus7A-VYiNfIBv90xzV_DXyN9JVtyEuvpY0H85v65J-uRgTnkJv3JE1Oy2c3nwNcbDWVt67WYwmgr_jNheePATkguwF8zRzmp6Y5vbIGcv4O02vqVBobVZmdtycobJ9E_OT_fFwkUxzA9YCJvuwf7zJFibPpyONXOd=w492-h1024-no \"資料夾結構\")\n\n* `HomeController.cs` 刪除多餘的 Controller，只保留 `Index` 和 `Error`\n\n```C#\nusing System;\nusing System.Collections.Generic;\nusing System.Diagnostics;\nusing System.Linq;\nusing System.Threading.Tasks;\nusing Microsoft.AspNetCore.Mvc;\nusing dotnet_core_vue_cli.Models;\n\nnamespace dotnet_core_vue_cli.Controllers\n{\n  public class HomeController : Controller\n  {\n    public IActionResult Index()\n    {\n      return View();\n    }\n\n    public IActionResult Error()\n    {\n      return View(new ErrorViewModel { RequestId = Activity.Current?.Id ?? HttpContext.TraceIdentifier });\n    }\n  }\n}\n```\n\n* `Index.cshtml` 多餘的 HTML 刪除\n\n```html\n@{\n    ViewData[\"Title\"] = \"Home Page\";\n}\n<h1>TEST</h1>\n```\n\n* `_Layout.cshtml` 修改內容如下\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>@ViewData[\"Title\"] - dotnet_core_vue_cli</title>\n\n    <environment include=\"Development\">\n        <!-- 這邊放 Development 的 CSS -->\n        <!-- <link rel=\"stylesheet\" href=\"~/css/xxx.css\" asp-append-version=\"true\"/> -->\n    </environment>\n    <environment exclude=\"Development\">\n        <!-- 這邊放 Production 的 CSS -->\n    </environment>\n</head>\n<body>\n    @RenderBody()\n\n    <environment include=\"Development\">\n        <!-- 這邊放 Development 的 JS -->\n        <!-- <script src=\"~/js/xxx.js\" asp-append-version=\"true\"></script> -->\n    </environment>\n    <environment exclude=\"Development\">\n        <!-- 這邊放 Production 的 JS -->\n    </environment>\n\n    @RenderSection(\"Scripts\", required: false)\n</body>\n</html>\n```\n\n\b現在來測試跑看看專案有沒有成功～\n\n執行\n\n```dotnet\ndotnet run\n```\n\n用瀏覽器看 `http://localhost:5000` 就會跑出剛剛在 `Index.cshtml` 改寫的 TEST 字樣囉～\n\n![http://localhost:5000](https://lh3.googleusercontent.com/jx-O61iOA94K7jY7sjjT1cnBGOG5cuJGlUIqGe96uJOEjZr4gbqFXfb3aD_NWUjP-fsO0pQT8FyHi_WfqN8OvYAijsFrPKfz1eZewo5RDj10Cey0BaWbcPx-fINI8QOSESlq_s-7_NLbC6P5K4n75NztGHc3k1PQybqcZTr7ECKIdjnHvZ7tUgtp0YBOblYyEyUX88rTpLHw40Lhh7LPuSIuQZAXIvUE0q6o0_u7AdfR5wBEfBPMf7TdRVb62uHJzsATQQ9BsAupE4uGj0azfDSiMgassf92umZymj9oLTO7hqZpYT526HkbUSxp8fPkahFvk64wSrClyNFrUltLA0oVXa_YCe1sZ-rS1S5cHxRNNgLDQeUHm8pMWwylXEFTGkszYXe5FVgdxJ-ShYNCOTfj1GU2aAKADKocU_Q2h4jcrX0YyRM8sOiiyI84nEG4ojOS5cAY54IXdT5d_RuAtgZNwh3qnk8MUefgImbnQZQIJnZb45xagVaHqaY3E8L4g7uVBIISo76khvDEW0mgAaCJCmUY-opy5RyFeDFEXJNPbyMfcSgfnMlpzkA_xCJhyhpIqtepveU_QIQqFepAXThCbOGbFX8JP30-seCSQMwFYpFzuTtD6QTwVfHRCDSv9r71dEM-I-EN7MUylDXaRX7MpNKj4UH3=w1024-h670-no \"首頁\")\n\n## 安裝 `vue-cli` 模板\n\n1. 安裝全域 `vue-cli`\n\n```npm\nnpm install -g vue-cli\n```\n\n2. 起始一個簡易的 `vue` + `webpack` 專案\n\n```npm\nvue init webpack-simple\n```\n\n按照 `vue-cli` 的指示回覆操作如下圖。\n\n![vue-cli](https://lh3.googleusercontent.com/7ZcKoLrotMFeNr2e41u_n_BRCQaMGoBjMQdX5_c1QH0kZycDBNJxLMz0JbnP4SU7Gb70QFSzVcNFWT4EO2qW5ThZCO1lDUhIW_2-4wPR2t02qbBHdlqYaOwAjuJhPioCY_rAFy6y9u9kPZ5rt8hEqfvHYYc76puVmwrv7r-KV9rT6RN5tdQfJzMhwnCCwMZEfysY_g-zWr49MtT2uf3q5jEKpmR3xbQ2P4QajWQ1g5lEjA-hiOQnbJXkfKl9z6tqzBxyNBQTZISlV0C7DIf4pzFTRk0IFLPW9CfnNtDNDIdT3VyTvONjMoxH6tql-qYwb59Qmg4ExG53WKIrw4YlUfVgR0jtNKnpkxQULSzRPG9xeuOdN0KLyDQ8v_Dvy4JsZLrKSPZVhWHmMyge_Kg_BHITk7Rkfu3g4wNWtZXo2keGXtTlX0_0hXdrAfQtX2lWB92lzc7TknYtrT3WwnEs5-2xKyHUh195Re2x-GdrkzbhsctuIFlw4fHHZIIq8NniKT84GZpTRXVPww9n3AqKcy9dOEdkDy_JvmEhOiLuAM3f5HRUp-8qWpo6bue5ItlRI51PgU4LuuralE9R8SgbnynfBHmkI4a_bdFXWTIUj4BJgEEvExRFhjqwpsbDlQT6MK8xd7-D1H7K6fYamrAaVdP8QYzXQwCu=w1024-h579-no \"vue-cli\")\n\n執行\n\n```npm\nnpm install\n```\n\n測試 `Node` 有沒有安裝成功 `Vue` 專案\n\n```npm\nnpm run dev\n```\n\n用瀏覽器看 `http://localhost:8080` 如果有成功出現如下面畫面就是安裝成功 `vue` 的專案囉～\n\n![http://localhost:8080](https://lh3.googleusercontent.com/WTK7IxK_nr3qmzCqevVgFhFZQXnkW0t4QPpng4VkfYOWOQSvFL7eHZbDEvfPqDwEjAazw49geCW3opNOVcz45uRoDcIKjPFmnoL8lL8v5Jppc2MrkEF5OvuDb912EfiapEkmNpw-DxzLcb_S3NKzsjnGs3wiuhUaMep1iSiz2Ctt6Nie9pYoV4ucqhvwJ_J4G9IOZ809FBWn7rcr7yit7K-vGQ3__3mJEv4npj123wb6RhkNcXvAswKA4VeCuaRehdCn13U94F5R0WRFFOJam5VNM_klgKWATfZsPcXMgGbQ2-M9KXmXmbZsQRBok5-qDxi9MNtKS5iEBSwgEVZipKafLl-5eqUxe5jiNSyLrHae7KeYsueMDrodFSQdnCjpPaCBjs6rUIrpsncyZGs3G56E3uMYNAfEpIYD9bzpm77m7_SBNcq8WkxbRYhDgpLsiCjiNFLl9FOXMi7ALPM5pWP5QoTi07vUJJFFU6V-pvwRoFUaOjVWb7B9o3j7RXm9hvRWo35lQ1dIQv-q0Wv-KYgrLySLS_WJtVmkdjs6T8iPAxUl0wTuMx1d99q7tgH_W3gFjuFqNL5mpd9b0T8QMMzDimpsEVCjUmzeza_HddnzVLW08caAEISY8IDdSq6CmO0q_msw-qEgUzRMhry4Bs6fzPmxFIVd=w1024-h670-no \"首頁\")\n\n> 誒～你有沒有注意到奇怪的地方啊?!我們跑 `vue` 的時候是用 `node server` 執行，但是真正專案要在 `.NET server` 執行。所以怎麼把這兩者結合呢？主要原理就是：在 `Development` 時把 `node server` 當作是前端產生靜態資源 (`JS`, `Css`, `images`...) 的工具; `Production` 的部分就把產出過後的靜態資源給 `.NET server` 使用。廢話不多說，我們就來趕緊試試看吧。\n\n## 結合 `.NET Core` 和 `Vue`\n\n1. 修改 `webpack.config.js`，將靜態檔案產生在 `wwwroot` 資料夾中\n\n```js\n......\nmodule.exports = {\n  entry: {\n    main: './src/main.js'\n  },\n  output: {\n    path: path.resolve(__dirname, './wwwroot'),\n    publicPath: '/wwwroot/',\n    filename: 'js/build.js'\n  },\n  module: {\n    rules: [\n      ......\n      {\n        test: /\\.(png|jpg|gif|svg)$/,\n        loader: 'file-loader',\n        options: {\n          publicPath: '/',\n          outputPath: 'imgs/',\n          name: '[name].[ext]?[hash]'\n        }\n      }\n    ]\n  },\n  ......\n}\n......\n```\n\n2. 修改 `cshtml` 加入對應的 `js` 和 `html`\n\n* `_Layout.cshtml` 修改內容如下\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>@ViewData[\"Title\"] - dotnet_core_vue_cli</title>\n\n    <environment include=\"Development\">\n        <!-- 這邊放 Development 的 CSS -->\n        <!-- <link rel=\"stylesheet\" href=\"~/css/xxx.css\" asp-append-version=\"true\"/> -->\n    </environment>\n    <environment exclude=\"Development\">\n        <!-- 這邊放 Production 的 CSS -->\n    </environment>\n</head>\n<body>\n    @RenderBody()\n\n    <environment include=\"Development\">\n        <!-- 這邊放 Development 的 JS -->\n        <script src=\"~/js/build.js\" asp-append-version=\"true\"></script>\n    </environment>\n    <environment exclude=\"Development\">\n        <!-- 這邊放 Production 的 JS -->\n        <script src=\"~/js/build.js\" asp-append-version=\"true\"></script>\n    </environment>\n\n    @RenderSection(\"Scripts\", required: false)\n</body>\n</html>\n```\n\n* 接著修改 `Index.cshtml`\n\n```html\n@{\n    ViewData[\"Title\"] = \"Home Page\";\n}\n<div id=\"app\"></div>\n```\n\n測試跑跑看 `.NET server` 有沒有成功？\n\n先產生靜態檔案\n\n```npm\nnpm run build\n```\n\n再啟動伺服器\n\n```dotnet\ndotnet run\n```\n\n成功就會出現之前一樣的畫面囉～\n\n![http://localhost:5000](https://lh3.googleusercontent.com/WTK7IxK_nr3qmzCqevVgFhFZQXnkW0t4QPpng4VkfYOWOQSvFL7eHZbDEvfPqDwEjAazw49geCW3opNOVcz45uRoDcIKjPFmnoL8lL8v5Jppc2MrkEF5OvuDb912EfiapEkmNpw-DxzLcb_S3NKzsjnGs3wiuhUaMep1iSiz2Ctt6Nie9pYoV4ucqhvwJ_J4G9IOZ809FBWn7rcr7yit7K-vGQ3__3mJEv4npj123wb6RhkNcXvAswKA4VeCuaRehdCn13U94F5R0WRFFOJam5VNM_klgKWATfZsPcXMgGbQ2-M9KXmXmbZsQRBok5-qDxi9MNtKS5iEBSwgEVZipKafLl-5eqUxe5jiNSyLrHae7KeYsueMDrodFSQdnCjpPaCBjs6rUIrpsncyZGs3G56E3uMYNAfEpIYD9bzpm77m7_SBNcq8WkxbRYhDgpLsiCjiNFLl9FOXMi7ALPM5pWP5QoTi07vUJJFFU6V-pvwRoFUaOjVWb7B9o3j7RXm9hvRWo35lQ1dIQv-q0Wv-KYgrLySLS_WJtVmkdjs6T8iPAxUl0wTuMx1d99q7tgH_W3gFjuFqNL5mpd9b0T8QMMzDimpsEVCjUmzeza_HddnzVLW08caAEISY8IDdSq6CmO0q_msw-qEgUzRMhry4Bs6fzPmxFIVd=w1024-h670-no \"首頁\")\n\n## 設定 `HMR` 和 `vue router` 的 fallback\n\n接著才是重頭戲～如魔法般的 `HMR` 功能登場!!!\n\n如果還不太知道什麼是 `HMR` 的，就 google 一下囉～\n\n1. 安裝 `aspnet-webpack`, `webpack-hot-middleware`\n\n```npm\nnpm i -D aspnet-webpack\n```\n\n```npm\nnpm i -D webpack-hot-middleware\n```\n\n2. 新增 `ASP.NET Core SPA Services`\n\n```npm\ndotnet add package Microsoft.AspNetCore.SpaServices --version 2.0.1 \n```\n\n3. 修改 `Startup.cs`\n\n```C#\nusing Microsoft.AspNetCore.SpaServices.Webpack;\n\n......\n  // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\n  public void Configure(IApplicationBuilder app, IHostingEnvironment env)\n  {\n    // [HMR] http://www.c-sharpcorner.com/article/using-hot-module-replacement-feature-of-webpack-in-asp-net-core/\n    if (env.IsDevelopment())\n    {\n      app.UseDeveloperExceptionPage();\n      app.UseWebpackDevMiddleware(new WebpackDevMiddlewareOptions\n      {\n        HotModuleReplacement = true\n      });\n    }\n    ......\n    app.UseMvc(routes =>\n    {\n      routes.MapRoute(\n        name: \"default\",\n        template: \"{controller=Home}/{action=Index}/{id?}\");\n\n      // Use Vue Router must add fallback route\n      // Help to navigate directly\n      // https://stu.ratcliffe.io/2017/07/20/vuejs-serverside-rendering-with-aspnet-core\n      routes.MapSpaFallbackRoute(\"spa-fallback\", new { controller = \"Home\", action = \"Index\" });\n    });\n  }\n......\n```\n\n4. `package.json` 指令加上 HMR\n\n```json\n{\n  ......\n  \"scripts\": {\n    \"hmr\": \"cross-env ASPNETCORE_ENVIRONMENT=Development NODE_ENV=development dotnet run\",\n    \"dev\": \"cross-env NODE_ENV=development webpack-dev-server --open --hot\",\n    \"build\": \"cross-env NODE_ENV=production webpack --progress --hide-modules\"\n  },\n  ......\n}\n```\n\n執行\n\n```npm\nnpm run hmr\n```\n\n成功的話就會從 `Chrome` 開發者工具看到 `HMR` 連結成功囉～\n\n![http://localhost:5000](https://lh3.googleusercontent.com/teS4z4xS0BE6CsIMEuUgrFU5cEQE_naAsDJb_O-6aYc-WeCvmduiHEyRQJPaBzbMQmOImdXcfv1E9VmDRitocPemHDsPCuk-njpIeDdPItuP4kdMfI_cqaJNnrSO9k8NpJC_0NwQj5L8NgHSIH7amFlGYZwNk9JsyxhgMkOCc67_dbYE48P8gTTr0qbqutjyrm14fdsNJjyUJsAPn8xji47-Asj55hOQv8ilN3-3pNNeXAMybVAdNRoCKZk8MnMJea_qTuoiEMzltk_LHP07K6jbamM7--uqYimHhmW2ZtZ89z9GrW5mc9zR4G9X2oosIEByxrB7tlrHPyDm_JDPQ30cVBaqaed0XwYLwYyemd9IDDQb3e5UvfAbih1KB9UK6poAkEuwAaEXvFlkZRC5_rN16EVSzUoHFH5sTQ2_7xVo4YAP0U_gpP4K1gQdVUVM2yFvOBWpf8V0bJQWIv5QV9vxihQ5nZp5Mk58dK8XhAQPMxCQKDc6VdVBQ-5B5VT1_s_OATXA6masol_u--aruB29iWQPemdwa-iGpYdkWmGkAVVXTcyPqqUZ_uZDkoVo5EPhQ-fYZtlrupwtNXy84xiVmbSQSDUr7kFb4ns7e7RQ2oZChZO7bC72UuvqyMTKWH91j1htEDPQJzjHNFJKaKYmd0xg-9R6=w1024-h670-no \"首頁\")\n\n今天的範例在 [github](https://github.com/Annilla/dotnet-core-vue-cli/tree/v1.0.0)，下回見～\n\n## 參考資料\n\n* [Modern Web Development using ASP.NET Core template, Vue.js and Webpack](http://www.dotnetcurry.com/aspnet/1383/modern-web-dev-aspnet-core-webpack-vuejs)\n* [Using Hot Module Replacement Feature Of Webpack In ASP.NET Core](http://www.c-sharpcorner.com/article/using-hot-module-replacement-feature-of-webpack-in-asp-net-core/)\n* [Microsoft.AspNetCore.SpaServices](https://www.nuget.org/packages/Microsoft.AspNetCore.SpaServices/)","source":"_posts/DotnetCore/NET-Core-2-0-SPA-with-Vue-Cli.md","raw":"---\ntitle: .NET Core 2.0 SPA with Vue-Cli - Start New Project\ncategories:\n  - .NET Core\nthumbnailImage: http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png\nthumbnailImagePosition: left\ncoverImage: http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png\ncoverMeta: out\ntags: [.NET Core, dotnet, Vue, Webpack, SPA, MVC, VScode]\ndate: 2017/12/02\nupdated: 2017/12/02\n---\n\n`.Net Core` 可以不用開啟慢吞吞的 `IDE`，即可快速建立專案。本篇全程使用 `VScode`，手把手教你如何用 `.NET Core 2.0 MVC` + `vue-cli` 起始一個 `SPA` 專案。當然， `HMR` (Hot Module Replacement) 神器也會一併附上啦。\n<!--more-->\n\n> 首先，這裡先澄清一點，就是 `.NET Core` 的 `template` 內建有 `ASP.NET Core with Vue.js`。因為是套裝，裡面還包含 `Bootstrap`, `Typescript` 等等，畢竟不是每個專案都會用到這些，所以本篇專注在如何結合 `.NET Core` 和 `Vue` ，那些依專案選用的項目就不會在這裡提到。\n\n## 起始 `.NET Core 2.0 MVC` 專案\n\n1. 安裝 [.NET Command Line Interface](https://github.com/dotnet/cli)\n\n2. 新增一個 Core MVC 專案\n\n```dotnet\ndotnet new 'ASP.NET Core Web App (Model-View-Controller)'\n```\n\n3. 刪除不必要的檔案\n\n因為我們是 `SPA` 不需要用到 MVC 其他頁面的功能，所以將多餘的頁面和樣式去除。參考如下的資料夾結構。\n\n![刪除多餘頁面和樣式後的檔案](https://lh3.googleusercontent.com/SS8p9bPMBScLwOK1WgnN62PV1W2Tzw2B7KHNgVD9hs2BNQdweBgEZ2ryH8b_X24hUSPNbY52hcdlEeblEfWOjKdXFbZW_ZnZ44yftNz9fbfcuhy8BF8BrlMmmF_PBFJhB7AcOXA4o36r24UcqHbMZQcoAnkCxflijNMA7bZhNhWPXTgqXl4N_ePy8CghldoBBFzDgxtrRgPFS5Xm4cjxl69szT3g1yCmQs0goeNWTFOR12nIsnkbUQN1Cru5V6d6Emfbv9zJE8vsMzde_uFU0VyV0OgGd994-sQs-jORDQ1qijU1O3O3Ycb1Ns8ZM6In9ibZmukZ4GBtNV6SW6dj83Ley2Xo4J_4L-jt__9kRBsVvANhIEonZ-R68GcPqE0KhstaAbvu30u4qtWJJBmuRmfbcEA_1w4qdEkDJ4WJlA4PIbqketu_tLSswyN0U5MDSi0DF0PGHjQA8mXsuYhktGhoJzwEZ8HLa0ENNsIkqgKR4enL2EZWJJVcH-Zc5nqus7A-VYiNfIBv90xzV_DXyN9JVtyEuvpY0H85v65J-uRgTnkJv3JE1Oy2c3nwNcbDWVt67WYwmgr_jNheePATkguwF8zRzmp6Y5vbIGcv4O02vqVBobVZmdtycobJ9E_OT_fFwkUxzA9YCJvuwf7zJFibPpyONXOd=w492-h1024-no \"資料夾結構\")\n\n* `HomeController.cs` 刪除多餘的 Controller，只保留 `Index` 和 `Error`\n\n```C#\nusing System;\nusing System.Collections.Generic;\nusing System.Diagnostics;\nusing System.Linq;\nusing System.Threading.Tasks;\nusing Microsoft.AspNetCore.Mvc;\nusing dotnet_core_vue_cli.Models;\n\nnamespace dotnet_core_vue_cli.Controllers\n{\n  public class HomeController : Controller\n  {\n    public IActionResult Index()\n    {\n      return View();\n    }\n\n    public IActionResult Error()\n    {\n      return View(new ErrorViewModel { RequestId = Activity.Current?.Id ?? HttpContext.TraceIdentifier });\n    }\n  }\n}\n```\n\n* `Index.cshtml` 多餘的 HTML 刪除\n\n```html\n@{\n    ViewData[\"Title\"] = \"Home Page\";\n}\n<h1>TEST</h1>\n```\n\n* `_Layout.cshtml` 修改內容如下\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>@ViewData[\"Title\"] - dotnet_core_vue_cli</title>\n\n    <environment include=\"Development\">\n        <!-- 這邊放 Development 的 CSS -->\n        <!-- <link rel=\"stylesheet\" href=\"~/css/xxx.css\" asp-append-version=\"true\"/> -->\n    </environment>\n    <environment exclude=\"Development\">\n        <!-- 這邊放 Production 的 CSS -->\n    </environment>\n</head>\n<body>\n    @RenderBody()\n\n    <environment include=\"Development\">\n        <!-- 這邊放 Development 的 JS -->\n        <!-- <script src=\"~/js/xxx.js\" asp-append-version=\"true\"></script> -->\n    </environment>\n    <environment exclude=\"Development\">\n        <!-- 這邊放 Production 的 JS -->\n    </environment>\n\n    @RenderSection(\"Scripts\", required: false)\n</body>\n</html>\n```\n\n\b現在來測試跑看看專案有沒有成功～\n\n執行\n\n```dotnet\ndotnet run\n```\n\n用瀏覽器看 `http://localhost:5000` 就會跑出剛剛在 `Index.cshtml` 改寫的 TEST 字樣囉～\n\n![http://localhost:5000](https://lh3.googleusercontent.com/jx-O61iOA94K7jY7sjjT1cnBGOG5cuJGlUIqGe96uJOEjZr4gbqFXfb3aD_NWUjP-fsO0pQT8FyHi_WfqN8OvYAijsFrPKfz1eZewo5RDj10Cey0BaWbcPx-fINI8QOSESlq_s-7_NLbC6P5K4n75NztGHc3k1PQybqcZTr7ECKIdjnHvZ7tUgtp0YBOblYyEyUX88rTpLHw40Lhh7LPuSIuQZAXIvUE0q6o0_u7AdfR5wBEfBPMf7TdRVb62uHJzsATQQ9BsAupE4uGj0azfDSiMgassf92umZymj9oLTO7hqZpYT526HkbUSxp8fPkahFvk64wSrClyNFrUltLA0oVXa_YCe1sZ-rS1S5cHxRNNgLDQeUHm8pMWwylXEFTGkszYXe5FVgdxJ-ShYNCOTfj1GU2aAKADKocU_Q2h4jcrX0YyRM8sOiiyI84nEG4ojOS5cAY54IXdT5d_RuAtgZNwh3qnk8MUefgImbnQZQIJnZb45xagVaHqaY3E8L4g7uVBIISo76khvDEW0mgAaCJCmUY-opy5RyFeDFEXJNPbyMfcSgfnMlpzkA_xCJhyhpIqtepveU_QIQqFepAXThCbOGbFX8JP30-seCSQMwFYpFzuTtD6QTwVfHRCDSv9r71dEM-I-EN7MUylDXaRX7MpNKj4UH3=w1024-h670-no \"首頁\")\n\n## 安裝 `vue-cli` 模板\n\n1. 安裝全域 `vue-cli`\n\n```npm\nnpm install -g vue-cli\n```\n\n2. 起始一個簡易的 `vue` + `webpack` 專案\n\n```npm\nvue init webpack-simple\n```\n\n按照 `vue-cli` 的指示回覆操作如下圖。\n\n![vue-cli](https://lh3.googleusercontent.com/7ZcKoLrotMFeNr2e41u_n_BRCQaMGoBjMQdX5_c1QH0kZycDBNJxLMz0JbnP4SU7Gb70QFSzVcNFWT4EO2qW5ThZCO1lDUhIW_2-4wPR2t02qbBHdlqYaOwAjuJhPioCY_rAFy6y9u9kPZ5rt8hEqfvHYYc76puVmwrv7r-KV9rT6RN5tdQfJzMhwnCCwMZEfysY_g-zWr49MtT2uf3q5jEKpmR3xbQ2P4QajWQ1g5lEjA-hiOQnbJXkfKl9z6tqzBxyNBQTZISlV0C7DIf4pzFTRk0IFLPW9CfnNtDNDIdT3VyTvONjMoxH6tql-qYwb59Qmg4ExG53WKIrw4YlUfVgR0jtNKnpkxQULSzRPG9xeuOdN0KLyDQ8v_Dvy4JsZLrKSPZVhWHmMyge_Kg_BHITk7Rkfu3g4wNWtZXo2keGXtTlX0_0hXdrAfQtX2lWB92lzc7TknYtrT3WwnEs5-2xKyHUh195Re2x-GdrkzbhsctuIFlw4fHHZIIq8NniKT84GZpTRXVPww9n3AqKcy9dOEdkDy_JvmEhOiLuAM3f5HRUp-8qWpo6bue5ItlRI51PgU4LuuralE9R8SgbnynfBHmkI4a_bdFXWTIUj4BJgEEvExRFhjqwpsbDlQT6MK8xd7-D1H7K6fYamrAaVdP8QYzXQwCu=w1024-h579-no \"vue-cli\")\n\n執行\n\n```npm\nnpm install\n```\n\n測試 `Node` 有沒有安裝成功 `Vue` 專案\n\n```npm\nnpm run dev\n```\n\n用瀏覽器看 `http://localhost:8080` 如果有成功出現如下面畫面就是安裝成功 `vue` 的專案囉～\n\n![http://localhost:8080](https://lh3.googleusercontent.com/WTK7IxK_nr3qmzCqevVgFhFZQXnkW0t4QPpng4VkfYOWOQSvFL7eHZbDEvfPqDwEjAazw49geCW3opNOVcz45uRoDcIKjPFmnoL8lL8v5Jppc2MrkEF5OvuDb912EfiapEkmNpw-DxzLcb_S3NKzsjnGs3wiuhUaMep1iSiz2Ctt6Nie9pYoV4ucqhvwJ_J4G9IOZ809FBWn7rcr7yit7K-vGQ3__3mJEv4npj123wb6RhkNcXvAswKA4VeCuaRehdCn13U94F5R0WRFFOJam5VNM_klgKWATfZsPcXMgGbQ2-M9KXmXmbZsQRBok5-qDxi9MNtKS5iEBSwgEVZipKafLl-5eqUxe5jiNSyLrHae7KeYsueMDrodFSQdnCjpPaCBjs6rUIrpsncyZGs3G56E3uMYNAfEpIYD9bzpm77m7_SBNcq8WkxbRYhDgpLsiCjiNFLl9FOXMi7ALPM5pWP5QoTi07vUJJFFU6V-pvwRoFUaOjVWb7B9o3j7RXm9hvRWo35lQ1dIQv-q0Wv-KYgrLySLS_WJtVmkdjs6T8iPAxUl0wTuMx1d99q7tgH_W3gFjuFqNL5mpd9b0T8QMMzDimpsEVCjUmzeza_HddnzVLW08caAEISY8IDdSq6CmO0q_msw-qEgUzRMhry4Bs6fzPmxFIVd=w1024-h670-no \"首頁\")\n\n> 誒～你有沒有注意到奇怪的地方啊?!我們跑 `vue` 的時候是用 `node server` 執行，但是真正專案要在 `.NET server` 執行。所以怎麼把這兩者結合呢？主要原理就是：在 `Development` 時把 `node server` 當作是前端產生靜態資源 (`JS`, `Css`, `images`...) 的工具; `Production` 的部分就把產出過後的靜態資源給 `.NET server` 使用。廢話不多說，我們就來趕緊試試看吧。\n\n## 結合 `.NET Core` 和 `Vue`\n\n1. 修改 `webpack.config.js`，將靜態檔案產生在 `wwwroot` 資料夾中\n\n```js\n......\nmodule.exports = {\n  entry: {\n    main: './src/main.js'\n  },\n  output: {\n    path: path.resolve(__dirname, './wwwroot'),\n    publicPath: '/wwwroot/',\n    filename: 'js/build.js'\n  },\n  module: {\n    rules: [\n      ......\n      {\n        test: /\\.(png|jpg|gif|svg)$/,\n        loader: 'file-loader',\n        options: {\n          publicPath: '/',\n          outputPath: 'imgs/',\n          name: '[name].[ext]?[hash]'\n        }\n      }\n    ]\n  },\n  ......\n}\n......\n```\n\n2. 修改 `cshtml` 加入對應的 `js` 和 `html`\n\n* `_Layout.cshtml` 修改內容如下\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>@ViewData[\"Title\"] - dotnet_core_vue_cli</title>\n\n    <environment include=\"Development\">\n        <!-- 這邊放 Development 的 CSS -->\n        <!-- <link rel=\"stylesheet\" href=\"~/css/xxx.css\" asp-append-version=\"true\"/> -->\n    </environment>\n    <environment exclude=\"Development\">\n        <!-- 這邊放 Production 的 CSS -->\n    </environment>\n</head>\n<body>\n    @RenderBody()\n\n    <environment include=\"Development\">\n        <!-- 這邊放 Development 的 JS -->\n        <script src=\"~/js/build.js\" asp-append-version=\"true\"></script>\n    </environment>\n    <environment exclude=\"Development\">\n        <!-- 這邊放 Production 的 JS -->\n        <script src=\"~/js/build.js\" asp-append-version=\"true\"></script>\n    </environment>\n\n    @RenderSection(\"Scripts\", required: false)\n</body>\n</html>\n```\n\n* 接著修改 `Index.cshtml`\n\n```html\n@{\n    ViewData[\"Title\"] = \"Home Page\";\n}\n<div id=\"app\"></div>\n```\n\n測試跑跑看 `.NET server` 有沒有成功？\n\n先產生靜態檔案\n\n```npm\nnpm run build\n```\n\n再啟動伺服器\n\n```dotnet\ndotnet run\n```\n\n成功就會出現之前一樣的畫面囉～\n\n![http://localhost:5000](https://lh3.googleusercontent.com/WTK7IxK_nr3qmzCqevVgFhFZQXnkW0t4QPpng4VkfYOWOQSvFL7eHZbDEvfPqDwEjAazw49geCW3opNOVcz45uRoDcIKjPFmnoL8lL8v5Jppc2MrkEF5OvuDb912EfiapEkmNpw-DxzLcb_S3NKzsjnGs3wiuhUaMep1iSiz2Ctt6Nie9pYoV4ucqhvwJ_J4G9IOZ809FBWn7rcr7yit7K-vGQ3__3mJEv4npj123wb6RhkNcXvAswKA4VeCuaRehdCn13U94F5R0WRFFOJam5VNM_klgKWATfZsPcXMgGbQ2-M9KXmXmbZsQRBok5-qDxi9MNtKS5iEBSwgEVZipKafLl-5eqUxe5jiNSyLrHae7KeYsueMDrodFSQdnCjpPaCBjs6rUIrpsncyZGs3G56E3uMYNAfEpIYD9bzpm77m7_SBNcq8WkxbRYhDgpLsiCjiNFLl9FOXMi7ALPM5pWP5QoTi07vUJJFFU6V-pvwRoFUaOjVWb7B9o3j7RXm9hvRWo35lQ1dIQv-q0Wv-KYgrLySLS_WJtVmkdjs6T8iPAxUl0wTuMx1d99q7tgH_W3gFjuFqNL5mpd9b0T8QMMzDimpsEVCjUmzeza_HddnzVLW08caAEISY8IDdSq6CmO0q_msw-qEgUzRMhry4Bs6fzPmxFIVd=w1024-h670-no \"首頁\")\n\n## 設定 `HMR` 和 `vue router` 的 fallback\n\n接著才是重頭戲～如魔法般的 `HMR` 功能登場!!!\n\n如果還不太知道什麼是 `HMR` 的，就 google 一下囉～\n\n1. 安裝 `aspnet-webpack`, `webpack-hot-middleware`\n\n```npm\nnpm i -D aspnet-webpack\n```\n\n```npm\nnpm i -D webpack-hot-middleware\n```\n\n2. 新增 `ASP.NET Core SPA Services`\n\n```npm\ndotnet add package Microsoft.AspNetCore.SpaServices --version 2.0.1 \n```\n\n3. 修改 `Startup.cs`\n\n```C#\nusing Microsoft.AspNetCore.SpaServices.Webpack;\n\n......\n  // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\n  public void Configure(IApplicationBuilder app, IHostingEnvironment env)\n  {\n    // [HMR] http://www.c-sharpcorner.com/article/using-hot-module-replacement-feature-of-webpack-in-asp-net-core/\n    if (env.IsDevelopment())\n    {\n      app.UseDeveloperExceptionPage();\n      app.UseWebpackDevMiddleware(new WebpackDevMiddlewareOptions\n      {\n        HotModuleReplacement = true\n      });\n    }\n    ......\n    app.UseMvc(routes =>\n    {\n      routes.MapRoute(\n        name: \"default\",\n        template: \"{controller=Home}/{action=Index}/{id?}\");\n\n      // Use Vue Router must add fallback route\n      // Help to navigate directly\n      // https://stu.ratcliffe.io/2017/07/20/vuejs-serverside-rendering-with-aspnet-core\n      routes.MapSpaFallbackRoute(\"spa-fallback\", new { controller = \"Home\", action = \"Index\" });\n    });\n  }\n......\n```\n\n4. `package.json` 指令加上 HMR\n\n```json\n{\n  ......\n  \"scripts\": {\n    \"hmr\": \"cross-env ASPNETCORE_ENVIRONMENT=Development NODE_ENV=development dotnet run\",\n    \"dev\": \"cross-env NODE_ENV=development webpack-dev-server --open --hot\",\n    \"build\": \"cross-env NODE_ENV=production webpack --progress --hide-modules\"\n  },\n  ......\n}\n```\n\n執行\n\n```npm\nnpm run hmr\n```\n\n成功的話就會從 `Chrome` 開發者工具看到 `HMR` 連結成功囉～\n\n![http://localhost:5000](https://lh3.googleusercontent.com/teS4z4xS0BE6CsIMEuUgrFU5cEQE_naAsDJb_O-6aYc-WeCvmduiHEyRQJPaBzbMQmOImdXcfv1E9VmDRitocPemHDsPCuk-njpIeDdPItuP4kdMfI_cqaJNnrSO9k8NpJC_0NwQj5L8NgHSIH7amFlGYZwNk9JsyxhgMkOCc67_dbYE48P8gTTr0qbqutjyrm14fdsNJjyUJsAPn8xji47-Asj55hOQv8ilN3-3pNNeXAMybVAdNRoCKZk8MnMJea_qTuoiEMzltk_LHP07K6jbamM7--uqYimHhmW2ZtZ89z9GrW5mc9zR4G9X2oosIEByxrB7tlrHPyDm_JDPQ30cVBaqaed0XwYLwYyemd9IDDQb3e5UvfAbih1KB9UK6poAkEuwAaEXvFlkZRC5_rN16EVSzUoHFH5sTQ2_7xVo4YAP0U_gpP4K1gQdVUVM2yFvOBWpf8V0bJQWIv5QV9vxihQ5nZp5Mk58dK8XhAQPMxCQKDc6VdVBQ-5B5VT1_s_OATXA6masol_u--aruB29iWQPemdwa-iGpYdkWmGkAVVXTcyPqqUZ_uZDkoVo5EPhQ-fYZtlrupwtNXy84xiVmbSQSDUr7kFb4ns7e7RQ2oZChZO7bC72UuvqyMTKWH91j1htEDPQJzjHNFJKaKYmd0xg-9R6=w1024-h670-no \"首頁\")\n\n今天的範例在 [github](https://github.com/Annilla/dotnet-core-vue-cli/tree/v1.0.0)，下回見～\n\n## 參考資料\n\n* [Modern Web Development using ASP.NET Core template, Vue.js and Webpack](http://www.dotnetcurry.com/aspnet/1383/modern-web-dev-aspnet-core-webpack-vuejs)\n* [Using Hot Module Replacement Feature Of Webpack In ASP.NET Core](http://www.c-sharpcorner.com/article/using-hot-module-replacement-feature-of-webpack-in-asp-net-core/)\n* [Microsoft.AspNetCore.SpaServices](https://www.nuget.org/packages/Microsoft.AspNetCore.SpaServices/)","slug":"DotnetCore/NET-Core-2-0-SPA-with-Vue-Cli","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74p0017tudh84zpa2dv","content":"<p><code>.Net Core</code> 可以不用開啟慢吞吞的 <code>IDE</code>，即可快速建立專案。本篇全程使用 <code>VScode</code>，手把手教你如何用 <code>.NET Core 2.0 MVC</code> + <code>vue-cli</code> 起始一個 <code>SPA</code> 專案。當然， <code>HMR</code> (Hot Module Replacement) 神器也會一併附上啦。<br><a id=\"more\"></a></p>\n<blockquote>\n<p>首先，這裡先澄清一點，就是 <code>.NET Core</code> 的 <code>template</code> 內建有 <code>ASP.NET Core with Vue.js</code>。因為是套裝，裡面還包含 <code>Bootstrap</code>, <code>Typescript</code> 等等，畢竟不是每個專案都會用到這些，所以本篇專注在如何結合 <code>.NET Core</code> 和 <code>Vue</code> ，那些依專案選用的項目就不會在這裡提到。</p>\n</blockquote>\n<h2 id=\"起始-NET-Core-2-0-MVC-專案\"><a href=\"#起始-NET-Core-2-0-MVC-專案\" class=\"headerlink\" title=\"起始 .NET Core 2.0 MVC 專案\"></a>起始 <code>.NET Core 2.0 MVC</code> 專案</h2><ol>\n<li><p>安裝 <a href=\"https://github.com/dotnet/cli\" target=\"_blank\" rel=\"noopener\">.NET Command Line Interface</a></p>\n</li>\n<li><p>新增一個 Core MVC 專案</p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet new &apos;ASP.NET Core Web App (Model-View-Controller)&apos;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>刪除不必要的檔案</li>\n</ol>\n<p>因為我們是 <code>SPA</code> 不需要用到 MVC 其他頁面的功能，所以將多餘的頁面和樣式去除。參考如下的資料夾結構。</p>\n<p><img src=\"https://lh3.googleusercontent.com/SS8p9bPMBScLwOK1WgnN62PV1W2Tzw2B7KHNgVD9hs2BNQdweBgEZ2ryH8b_X24hUSPNbY52hcdlEeblEfWOjKdXFbZW_ZnZ44yftNz9fbfcuhy8BF8BrlMmmF_PBFJhB7AcOXA4o36r24UcqHbMZQcoAnkCxflijNMA7bZhNhWPXTgqXl4N_ePy8CghldoBBFzDgxtrRgPFS5Xm4cjxl69szT3g1yCmQs0goeNWTFOR12nIsnkbUQN1Cru5V6d6Emfbv9zJE8vsMzde_uFU0VyV0OgGd994-sQs-jORDQ1qijU1O3O3Ycb1Ns8ZM6In9ibZmukZ4GBtNV6SW6dj83Ley2Xo4J_4L-jt__9kRBsVvANhIEonZ-R68GcPqE0KhstaAbvu30u4qtWJJBmuRmfbcEA_1w4qdEkDJ4WJlA4PIbqketu_tLSswyN0U5MDSi0DF0PGHjQA8mXsuYhktGhoJzwEZ8HLa0ENNsIkqgKR4enL2EZWJJVcH-Zc5nqus7A-VYiNfIBv90xzV_DXyN9JVtyEuvpY0H85v65J-uRgTnkJv3JE1Oy2c3nwNcbDWVt67WYwmgr_jNheePATkguwF8zRzmp6Y5vbIGcv4O02vqVBobVZmdtycobJ9E_OT_fFwkUxzA9YCJvuwf7zJFibPpyONXOd=w492-h1024-no\" alt=\"刪除多餘頁面和樣式後的檔案\" title=\"資料夾結構\"></p>\n<ul>\n<li><code>HomeController.cs</code> 刪除多餘的 Controller，只保留 <code>Index</code> 和 <code>Error</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">using System;</span><br><span class=\"line\">using System.Collections.Generic;</span><br><span class=\"line\">using System.Diagnostics;</span><br><span class=\"line\">using System.Linq;</span><br><span class=\"line\">using System.Threading.Tasks;</span><br><span class=\"line\">using Microsoft.AspNetCore.Mvc;</span><br><span class=\"line\">using dotnet_core_vue_cli.Models;</span><br><span class=\"line\"></span><br><span class=\"line\">namespace dotnet_core_vue_cli.Controllers</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  public class HomeController : Controller</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    public IActionResult Index()</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      return View();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public IActionResult Error()</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      return View(new ErrorViewModel &#123; RequestId = Activity.Current?.Id ?? HttpContext.TraceIdentifier &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>Index.cshtml</code> 多餘的 HTML 刪除</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@&#123;</span><br><span class=\"line\">    ViewData[\"Title\"] = \"Home Page\";</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>TEST<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>_Layout.cshtml</code> 修改內容如下</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>@ViewData[\"Title\"] - dotnet_core_vue_cli<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">include</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Development 的 CSS --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- &lt;link rel=\"stylesheet\" href=\"~/css/xxx.css\" asp-append-version=\"true\"/&gt; --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">exclude</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Production 的 CSS --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    @RenderBody()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">include</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Development 的 JS --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- &lt;script src=\"~/js/xxx.js\" asp-append-version=\"true\"&gt;&lt;/script&gt; --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">exclude</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Production 的 JS --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @RenderSection(\"Scripts\", required: false)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>\b現在來測試跑看看專案有沒有成功～</p>\n<p>執行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet run</span><br></pre></td></tr></table></figure>\n<p>用瀏覽器看 <code>http://localhost:5000</code> 就會跑出剛剛在 <code>Index.cshtml</code> 改寫的 TEST 字樣囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/jx-O61iOA94K7jY7sjjT1cnBGOG5cuJGlUIqGe96uJOEjZr4gbqFXfb3aD_NWUjP-fsO0pQT8FyHi_WfqN8OvYAijsFrPKfz1eZewo5RDj10Cey0BaWbcPx-fINI8QOSESlq_s-7_NLbC6P5K4n75NztGHc3k1PQybqcZTr7ECKIdjnHvZ7tUgtp0YBOblYyEyUX88rTpLHw40Lhh7LPuSIuQZAXIvUE0q6o0_u7AdfR5wBEfBPMf7TdRVb62uHJzsATQQ9BsAupE4uGj0azfDSiMgassf92umZymj9oLTO7hqZpYT526HkbUSxp8fPkahFvk64wSrClyNFrUltLA0oVXa_YCe1sZ-rS1S5cHxRNNgLDQeUHm8pMWwylXEFTGkszYXe5FVgdxJ-ShYNCOTfj1GU2aAKADKocU_Q2h4jcrX0YyRM8sOiiyI84nEG4ojOS5cAY54IXdT5d_RuAtgZNwh3qnk8MUefgImbnQZQIJnZb45xagVaHqaY3E8L4g7uVBIISo76khvDEW0mgAaCJCmUY-opy5RyFeDFEXJNPbyMfcSgfnMlpzkA_xCJhyhpIqtepveU_QIQqFepAXThCbOGbFX8JP30-seCSQMwFYpFzuTtD6QTwVfHRCDSv9r71dEM-I-EN7MUylDXaRX7MpNKj4UH3=w1024-h670-no\" alt=\"http://localhost:5000\" title=\"首頁\"></p>\n<h2 id=\"安裝-vue-cli-模板\"><a href=\"#安裝-vue-cli-模板\" class=\"headerlink\" title=\"安裝 vue-cli 模板\"></a>安裝 <code>vue-cli</code> 模板</h2><ol>\n<li>安裝全域 <code>vue-cli</code></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g vue-cli</span><br></pre></td></tr></table></figure>\n<ol>\n<li>起始一個簡易的 <code>vue</code> + <code>webpack</code> 專案</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue init webpack-simple</span><br></pre></td></tr></table></figure>\n<p>按照 <code>vue-cli</code> 的指示回覆操作如下圖。</p>\n<p><img src=\"https://lh3.googleusercontent.com/7ZcKoLrotMFeNr2e41u_n_BRCQaMGoBjMQdX5_c1QH0kZycDBNJxLMz0JbnP4SU7Gb70QFSzVcNFWT4EO2qW5ThZCO1lDUhIW_2-4wPR2t02qbBHdlqYaOwAjuJhPioCY_rAFy6y9u9kPZ5rt8hEqfvHYYc76puVmwrv7r-KV9rT6RN5tdQfJzMhwnCCwMZEfysY_g-zWr49MtT2uf3q5jEKpmR3xbQ2P4QajWQ1g5lEjA-hiOQnbJXkfKl9z6tqzBxyNBQTZISlV0C7DIf4pzFTRk0IFLPW9CfnNtDNDIdT3VyTvONjMoxH6tql-qYwb59Qmg4ExG53WKIrw4YlUfVgR0jtNKnpkxQULSzRPG9xeuOdN0KLyDQ8v_Dvy4JsZLrKSPZVhWHmMyge_Kg_BHITk7Rkfu3g4wNWtZXo2keGXtTlX0_0hXdrAfQtX2lWB92lzc7TknYtrT3WwnEs5-2xKyHUh195Re2x-GdrkzbhsctuIFlw4fHHZIIq8NniKT84GZpTRXVPww9n3AqKcy9dOEdkDy_JvmEhOiLuAM3f5HRUp-8qWpo6bue5ItlRI51PgU4LuuralE9R8SgbnynfBHmkI4a_bdFXWTIUj4BJgEEvExRFhjqwpsbDlQT6MK8xd7-D1H7K6fYamrAaVdP8QYzXQwCu=w1024-h579-no\" alt=\"vue-cli\" title=\"vue-cli\"></p>\n<p>執行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n<p>測試 <code>Node</code> 有沒有安裝成功 <code>Vue</code> 專案</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n<p>用瀏覽器看 <code>http://localhost:8080</code> 如果有成功出現如下面畫面就是安裝成功 <code>vue</code> 的專案囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/WTK7IxK_nr3qmzCqevVgFhFZQXnkW0t4QPpng4VkfYOWOQSvFL7eHZbDEvfPqDwEjAazw49geCW3opNOVcz45uRoDcIKjPFmnoL8lL8v5Jppc2MrkEF5OvuDb912EfiapEkmNpw-DxzLcb_S3NKzsjnGs3wiuhUaMep1iSiz2Ctt6Nie9pYoV4ucqhvwJ_J4G9IOZ809FBWn7rcr7yit7K-vGQ3__3mJEv4npj123wb6RhkNcXvAswKA4VeCuaRehdCn13U94F5R0WRFFOJam5VNM_klgKWATfZsPcXMgGbQ2-M9KXmXmbZsQRBok5-qDxi9MNtKS5iEBSwgEVZipKafLl-5eqUxe5jiNSyLrHae7KeYsueMDrodFSQdnCjpPaCBjs6rUIrpsncyZGs3G56E3uMYNAfEpIYD9bzpm77m7_SBNcq8WkxbRYhDgpLsiCjiNFLl9FOXMi7ALPM5pWP5QoTi07vUJJFFU6V-pvwRoFUaOjVWb7B9o3j7RXm9hvRWo35lQ1dIQv-q0Wv-KYgrLySLS_WJtVmkdjs6T8iPAxUl0wTuMx1d99q7tgH_W3gFjuFqNL5mpd9b0T8QMMzDimpsEVCjUmzeza_HddnzVLW08caAEISY8IDdSq6CmO0q_msw-qEgUzRMhry4Bs6fzPmxFIVd=w1024-h670-no\" alt=\"http://localhost:8080\" title=\"首頁\"></p>\n<blockquote>\n<p>誒～你有沒有注意到奇怪的地方啊?!我們跑 <code>vue</code> 的時候是用 <code>node server</code> 執行，但是真正專案要在 <code>.NET server</code> 執行。所以怎麼把這兩者結合呢？主要原理就是：在 <code>Development</code> 時把 <code>node server</code> 當作是前端產生靜態資源 (<code>JS</code>, <code>Css</code>, <code>images</code>…) 的工具; <code>Production</code> 的部分就把產出過後的靜態資源給 <code>.NET server</code> 使用。廢話不多說，我們就來趕緊試試看吧。</p>\n</blockquote>\n<h2 id=\"結合-NET-Core-和-Vue\"><a href=\"#結合-NET-Core-和-Vue\" class=\"headerlink\" title=\"結合 .NET Core 和 Vue\"></a>結合 <code>.NET Core</code> 和 <code>Vue</code></h2><ol>\n<li>修改 <code>webpack.config.js</code>，將靜態檔案產生在 <code>wwwroot</code> 資料夾中</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">......</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    main: <span class=\"string\">'./src/main.js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'./wwwroot'</span>),</span><br><span class=\"line\">    publicPath: <span class=\"string\">'/wwwroot/'</span>,</span><br><span class=\"line\">    filename: <span class=\"string\">'js/build.js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      ......</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif|svg)$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'file-loader'</span>,</span><br><span class=\"line\">        options: &#123;</span><br><span class=\"line\">          publicPath: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">          outputPath: <span class=\"string\">'imgs/'</span>,</span><br><span class=\"line\">          name: <span class=\"string\">'[name].[ext]?[hash]'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">......</span><br></pre></td></tr></table></figure>\n<ol>\n<li>修改 <code>cshtml</code> 加入對應的 <code>js</code> 和 <code>html</code></li>\n</ol>\n<ul>\n<li><code>_Layout.cshtml</code> 修改內容如下</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>@ViewData[\"Title\"] - dotnet_core_vue_cli<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">include</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Development 的 CSS --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- &lt;link rel=\"stylesheet\" href=\"~/css/xxx.css\" asp-append-version=\"true\"/&gt; --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">exclude</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Production 的 CSS --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    @RenderBody()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">include</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Development 的 JS --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"~/js/build.js\"</span> <span class=\"attr\">asp-append-version</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">exclude</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Production 的 JS --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"~/js/build.js\"</span> <span class=\"attr\">asp-append-version</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @RenderSection(\"Scripts\", required: false)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>接著修改 <code>Index.cshtml</code></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@&#123;</span><br><span class=\"line\">    ViewData[\"Title\"] = \"Home Page\";</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>測試跑跑看 <code>.NET server</code> 有沒有成功？</p>\n<p>先產生靜態檔案</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure>\n<p>再啟動伺服器</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet run</span><br></pre></td></tr></table></figure>\n<p>成功就會出現之前一樣的畫面囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/WTK7IxK_nr3qmzCqevVgFhFZQXnkW0t4QPpng4VkfYOWOQSvFL7eHZbDEvfPqDwEjAazw49geCW3opNOVcz45uRoDcIKjPFmnoL8lL8v5Jppc2MrkEF5OvuDb912EfiapEkmNpw-DxzLcb_S3NKzsjnGs3wiuhUaMep1iSiz2Ctt6Nie9pYoV4ucqhvwJ_J4G9IOZ809FBWn7rcr7yit7K-vGQ3__3mJEv4npj123wb6RhkNcXvAswKA4VeCuaRehdCn13U94F5R0WRFFOJam5VNM_klgKWATfZsPcXMgGbQ2-M9KXmXmbZsQRBok5-qDxi9MNtKS5iEBSwgEVZipKafLl-5eqUxe5jiNSyLrHae7KeYsueMDrodFSQdnCjpPaCBjs6rUIrpsncyZGs3G56E3uMYNAfEpIYD9bzpm77m7_SBNcq8WkxbRYhDgpLsiCjiNFLl9FOXMi7ALPM5pWP5QoTi07vUJJFFU6V-pvwRoFUaOjVWb7B9o3j7RXm9hvRWo35lQ1dIQv-q0Wv-KYgrLySLS_WJtVmkdjs6T8iPAxUl0wTuMx1d99q7tgH_W3gFjuFqNL5mpd9b0T8QMMzDimpsEVCjUmzeza_HddnzVLW08caAEISY8IDdSq6CmO0q_msw-qEgUzRMhry4Bs6fzPmxFIVd=w1024-h670-no\" alt=\"http://localhost:5000\" title=\"首頁\"></p>\n<h2 id=\"設定-HMR-和-vue-router-的-fallback\"><a href=\"#設定-HMR-和-vue-router-的-fallback\" class=\"headerlink\" title=\"設定 HMR 和 vue router 的 fallback\"></a>設定 <code>HMR</code> 和 <code>vue router</code> 的 fallback</h2><p>接著才是重頭戲～如魔法般的 <code>HMR</code> 功能登場!!!</p>\n<p>如果還不太知道什麼是 <code>HMR</code> 的，就 google 一下囉～</p>\n<ol>\n<li>安裝 <code>aspnet-webpack</code>, <code>webpack-hot-middleware</code></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D aspnet-webpack</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D webpack-hot-middleware</span><br></pre></td></tr></table></figure>\n<ol>\n<li>新增 <code>ASP.NET Core SPA Services</code></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet add package Microsoft.AspNetCore.SpaServices --version 2.0.1</span><br></pre></td></tr></table></figure>\n<ol>\n<li>修改 <code>Startup.cs</code></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">using Microsoft.AspNetCore.SpaServices.Webpack;</span><br><span class=\"line\"></span><br><span class=\"line\">......</span><br><span class=\"line\">  // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span><br><span class=\"line\">  public void Configure(IApplicationBuilder app, IHostingEnvironment env)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    // [HMR] http://www.c-sharpcorner.com/article/using-hot-module-replacement-feature-of-webpack-in-asp-net-core/</span><br><span class=\"line\">    if (env.IsDevelopment())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      app.UseDeveloperExceptionPage();</span><br><span class=\"line\">      app.UseWebpackDevMiddleware(new WebpackDevMiddlewareOptions</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        HotModuleReplacement = true</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">    app.UseMvc(routes =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      routes.MapRoute(</span><br><span class=\"line\">        name: &quot;default&quot;,</span><br><span class=\"line\">        template: &quot;&#123;controller=Home&#125;/&#123;action=Index&#125;/&#123;id?&#125;&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">      // Use Vue Router must add fallback route</span><br><span class=\"line\">      // Help to navigate directly</span><br><span class=\"line\">      // https://stu.ratcliffe.io/2017/07/20/vuejs-serverside-rendering-with-aspnet-core</span><br><span class=\"line\">      routes.MapSpaFallbackRoute(&quot;spa-fallback&quot;, new &#123; controller = &quot;Home&quot;, action = &quot;Index&quot; &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">......</span><br></pre></td></tr></table></figure>\n<ol>\n<li><code>package.json</code> 指令加上 HMR</li>\n</ol>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  \"scripts\": &#123;</span><br><span class=\"line\">    \"hmr\": \"cross-env ASPNETCORE_ENVIRONMENT=Development NODE_ENV=development dotnet run\",</span><br><span class=\"line\">    \"dev\": \"cross-env NODE_ENV=development webpack-dev-server --open --hot\",</span><br><span class=\"line\">    \"build\": \"cross-env NODE_ENV=production webpack --progress --hide-modules\"</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>執行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run hmr</span><br></pre></td></tr></table></figure>\n<p>成功的話就會從 <code>Chrome</code> 開發者工具看到 <code>HMR</code> 連結成功囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/teS4z4xS0BE6CsIMEuUgrFU5cEQE_naAsDJb_O-6aYc-WeCvmduiHEyRQJPaBzbMQmOImdXcfv1E9VmDRitocPemHDsPCuk-njpIeDdPItuP4kdMfI_cqaJNnrSO9k8NpJC_0NwQj5L8NgHSIH7amFlGYZwNk9JsyxhgMkOCc67_dbYE48P8gTTr0qbqutjyrm14fdsNJjyUJsAPn8xji47-Asj55hOQv8ilN3-3pNNeXAMybVAdNRoCKZk8MnMJea_qTuoiEMzltk_LHP07K6jbamM7--uqYimHhmW2ZtZ89z9GrW5mc9zR4G9X2oosIEByxrB7tlrHPyDm_JDPQ30cVBaqaed0XwYLwYyemd9IDDQb3e5UvfAbih1KB9UK6poAkEuwAaEXvFlkZRC5_rN16EVSzUoHFH5sTQ2_7xVo4YAP0U_gpP4K1gQdVUVM2yFvOBWpf8V0bJQWIv5QV9vxihQ5nZp5Mk58dK8XhAQPMxCQKDc6VdVBQ-5B5VT1_s_OATXA6masol_u--aruB29iWQPemdwa-iGpYdkWmGkAVVXTcyPqqUZ_uZDkoVo5EPhQ-fYZtlrupwtNXy84xiVmbSQSDUr7kFb4ns7e7RQ2oZChZO7bC72UuvqyMTKWH91j1htEDPQJzjHNFJKaKYmd0xg-9R6=w1024-h670-no\" alt=\"http://localhost:5000\" title=\"首頁\"></p>\n<p>今天的範例在 <a href=\"https://github.com/Annilla/dotnet-core-vue-cli/tree/v1.0.0\" target=\"_blank\" rel=\"noopener\">github</a>，下回見～</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"http://www.dotnetcurry.com/aspnet/1383/modern-web-dev-aspnet-core-webpack-vuejs\" target=\"_blank\" rel=\"noopener\">Modern Web Development using ASP.NET Core template, Vue.js and Webpack</a></li>\n<li><a href=\"http://www.c-sharpcorner.com/article/using-hot-module-replacement-feature-of-webpack-in-asp-net-core/\" target=\"_blank\" rel=\"noopener\">Using Hot Module Replacement Feature Of Webpack In ASP.NET Core</a></li>\n<li><a href=\"https://www.nuget.org/packages/Microsoft.AspNetCore.SpaServices/\" target=\"_blank\" rel=\"noopener\">Microsoft.AspNetCore.SpaServices</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"http://www.dotnetcurry.com/images/dotnetcore/vuejs-templates/modernwebdev.png","excerpt":"<p><code>.Net Core</code> 可以不用開啟慢吞吞的 <code>IDE</code>，即可快速建立專案。本篇全程使用 <code>VScode</code>，手把手教你如何用 <code>.NET Core 2.0 MVC</code> + <code>vue-cli</code> 起始一個 <code>SPA</code> 專案。當然， <code>HMR</code> (Hot Module Replacement) 神器也會一併附上啦。<br>","more":"</p>\n<blockquote>\n<p>首先，這裡先澄清一點，就是 <code>.NET Core</code> 的 <code>template</code> 內建有 <code>ASP.NET Core with Vue.js</code>。因為是套裝，裡面還包含 <code>Bootstrap</code>, <code>Typescript</code> 等等，畢竟不是每個專案都會用到這些，所以本篇專注在如何結合 <code>.NET Core</code> 和 <code>Vue</code> ，那些依專案選用的項目就不會在這裡提到。</p>\n</blockquote>\n<h2 id=\"起始-NET-Core-2-0-MVC-專案\"><a href=\"#起始-NET-Core-2-0-MVC-專案\" class=\"headerlink\" title=\"起始 .NET Core 2.0 MVC 專案\"></a>起始 <code>.NET Core 2.0 MVC</code> 專案</h2><ol>\n<li><p>安裝 <a href=\"https://github.com/dotnet/cli\" target=\"_blank\" rel=\"noopener\">.NET Command Line Interface</a></p>\n</li>\n<li><p>新增一個 Core MVC 專案</p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet new &apos;ASP.NET Core Web App (Model-View-Controller)&apos;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>刪除不必要的檔案</li>\n</ol>\n<p>因為我們是 <code>SPA</code> 不需要用到 MVC 其他頁面的功能，所以將多餘的頁面和樣式去除。參考如下的資料夾結構。</p>\n<p><img src=\"https://lh3.googleusercontent.com/SS8p9bPMBScLwOK1WgnN62PV1W2Tzw2B7KHNgVD9hs2BNQdweBgEZ2ryH8b_X24hUSPNbY52hcdlEeblEfWOjKdXFbZW_ZnZ44yftNz9fbfcuhy8BF8BrlMmmF_PBFJhB7AcOXA4o36r24UcqHbMZQcoAnkCxflijNMA7bZhNhWPXTgqXl4N_ePy8CghldoBBFzDgxtrRgPFS5Xm4cjxl69szT3g1yCmQs0goeNWTFOR12nIsnkbUQN1Cru5V6d6Emfbv9zJE8vsMzde_uFU0VyV0OgGd994-sQs-jORDQ1qijU1O3O3Ycb1Ns8ZM6In9ibZmukZ4GBtNV6SW6dj83Ley2Xo4J_4L-jt__9kRBsVvANhIEonZ-R68GcPqE0KhstaAbvu30u4qtWJJBmuRmfbcEA_1w4qdEkDJ4WJlA4PIbqketu_tLSswyN0U5MDSi0DF0PGHjQA8mXsuYhktGhoJzwEZ8HLa0ENNsIkqgKR4enL2EZWJJVcH-Zc5nqus7A-VYiNfIBv90xzV_DXyN9JVtyEuvpY0H85v65J-uRgTnkJv3JE1Oy2c3nwNcbDWVt67WYwmgr_jNheePATkguwF8zRzmp6Y5vbIGcv4O02vqVBobVZmdtycobJ9E_OT_fFwkUxzA9YCJvuwf7zJFibPpyONXOd=w492-h1024-no\" alt=\"刪除多餘頁面和樣式後的檔案\" title=\"資料夾結構\"></p>\n<ul>\n<li><code>HomeController.cs</code> 刪除多餘的 Controller，只保留 <code>Index</code> 和 <code>Error</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">using System;</span><br><span class=\"line\">using System.Collections.Generic;</span><br><span class=\"line\">using System.Diagnostics;</span><br><span class=\"line\">using System.Linq;</span><br><span class=\"line\">using System.Threading.Tasks;</span><br><span class=\"line\">using Microsoft.AspNetCore.Mvc;</span><br><span class=\"line\">using dotnet_core_vue_cli.Models;</span><br><span class=\"line\"></span><br><span class=\"line\">namespace dotnet_core_vue_cli.Controllers</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  public class HomeController : Controller</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    public IActionResult Index()</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      return View();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public IActionResult Error()</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      return View(new ErrorViewModel &#123; RequestId = Activity.Current?.Id ?? HttpContext.TraceIdentifier &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>Index.cshtml</code> 多餘的 HTML 刪除</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@&#123;</span><br><span class=\"line\">    ViewData[\"Title\"] = \"Home Page\";</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>TEST<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>_Layout.cshtml</code> 修改內容如下</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>@ViewData[\"Title\"] - dotnet_core_vue_cli<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">include</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Development 的 CSS --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- &lt;link rel=\"stylesheet\" href=\"~/css/xxx.css\" asp-append-version=\"true\"/&gt; --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">exclude</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Production 的 CSS --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    @RenderBody()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">include</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Development 的 JS --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- &lt;script src=\"~/js/xxx.js\" asp-append-version=\"true\"&gt;&lt;/script&gt; --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">exclude</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Production 的 JS --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @RenderSection(\"Scripts\", required: false)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>\b現在來測試跑看看專案有沒有成功～</p>\n<p>執行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet run</span><br></pre></td></tr></table></figure>\n<p>用瀏覽器看 <code>http://localhost:5000</code> 就會跑出剛剛在 <code>Index.cshtml</code> 改寫的 TEST 字樣囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/jx-O61iOA94K7jY7sjjT1cnBGOG5cuJGlUIqGe96uJOEjZr4gbqFXfb3aD_NWUjP-fsO0pQT8FyHi_WfqN8OvYAijsFrPKfz1eZewo5RDj10Cey0BaWbcPx-fINI8QOSESlq_s-7_NLbC6P5K4n75NztGHc3k1PQybqcZTr7ECKIdjnHvZ7tUgtp0YBOblYyEyUX88rTpLHw40Lhh7LPuSIuQZAXIvUE0q6o0_u7AdfR5wBEfBPMf7TdRVb62uHJzsATQQ9BsAupE4uGj0azfDSiMgassf92umZymj9oLTO7hqZpYT526HkbUSxp8fPkahFvk64wSrClyNFrUltLA0oVXa_YCe1sZ-rS1S5cHxRNNgLDQeUHm8pMWwylXEFTGkszYXe5FVgdxJ-ShYNCOTfj1GU2aAKADKocU_Q2h4jcrX0YyRM8sOiiyI84nEG4ojOS5cAY54IXdT5d_RuAtgZNwh3qnk8MUefgImbnQZQIJnZb45xagVaHqaY3E8L4g7uVBIISo76khvDEW0mgAaCJCmUY-opy5RyFeDFEXJNPbyMfcSgfnMlpzkA_xCJhyhpIqtepveU_QIQqFepAXThCbOGbFX8JP30-seCSQMwFYpFzuTtD6QTwVfHRCDSv9r71dEM-I-EN7MUylDXaRX7MpNKj4UH3=w1024-h670-no\" alt=\"http://localhost:5000\" title=\"首頁\"></p>\n<h2 id=\"安裝-vue-cli-模板\"><a href=\"#安裝-vue-cli-模板\" class=\"headerlink\" title=\"安裝 vue-cli 模板\"></a>安裝 <code>vue-cli</code> 模板</h2><ol>\n<li>安裝全域 <code>vue-cli</code></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g vue-cli</span><br></pre></td></tr></table></figure>\n<ol>\n<li>起始一個簡易的 <code>vue</code> + <code>webpack</code> 專案</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vue init webpack-simple</span><br></pre></td></tr></table></figure>\n<p>按照 <code>vue-cli</code> 的指示回覆操作如下圖。</p>\n<p><img src=\"https://lh3.googleusercontent.com/7ZcKoLrotMFeNr2e41u_n_BRCQaMGoBjMQdX5_c1QH0kZycDBNJxLMz0JbnP4SU7Gb70QFSzVcNFWT4EO2qW5ThZCO1lDUhIW_2-4wPR2t02qbBHdlqYaOwAjuJhPioCY_rAFy6y9u9kPZ5rt8hEqfvHYYc76puVmwrv7r-KV9rT6RN5tdQfJzMhwnCCwMZEfysY_g-zWr49MtT2uf3q5jEKpmR3xbQ2P4QajWQ1g5lEjA-hiOQnbJXkfKl9z6tqzBxyNBQTZISlV0C7DIf4pzFTRk0IFLPW9CfnNtDNDIdT3VyTvONjMoxH6tql-qYwb59Qmg4ExG53WKIrw4YlUfVgR0jtNKnpkxQULSzRPG9xeuOdN0KLyDQ8v_Dvy4JsZLrKSPZVhWHmMyge_Kg_BHITk7Rkfu3g4wNWtZXo2keGXtTlX0_0hXdrAfQtX2lWB92lzc7TknYtrT3WwnEs5-2xKyHUh195Re2x-GdrkzbhsctuIFlw4fHHZIIq8NniKT84GZpTRXVPww9n3AqKcy9dOEdkDy_JvmEhOiLuAM3f5HRUp-8qWpo6bue5ItlRI51PgU4LuuralE9R8SgbnynfBHmkI4a_bdFXWTIUj4BJgEEvExRFhjqwpsbDlQT6MK8xd7-D1H7K6fYamrAaVdP8QYzXQwCu=w1024-h579-no\" alt=\"vue-cli\" title=\"vue-cli\"></p>\n<p>執行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n<p>測試 <code>Node</code> 有沒有安裝成功 <code>Vue</code> 專案</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n<p>用瀏覽器看 <code>http://localhost:8080</code> 如果有成功出現如下面畫面就是安裝成功 <code>vue</code> 的專案囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/WTK7IxK_nr3qmzCqevVgFhFZQXnkW0t4QPpng4VkfYOWOQSvFL7eHZbDEvfPqDwEjAazw49geCW3opNOVcz45uRoDcIKjPFmnoL8lL8v5Jppc2MrkEF5OvuDb912EfiapEkmNpw-DxzLcb_S3NKzsjnGs3wiuhUaMep1iSiz2Ctt6Nie9pYoV4ucqhvwJ_J4G9IOZ809FBWn7rcr7yit7K-vGQ3__3mJEv4npj123wb6RhkNcXvAswKA4VeCuaRehdCn13U94F5R0WRFFOJam5VNM_klgKWATfZsPcXMgGbQ2-M9KXmXmbZsQRBok5-qDxi9MNtKS5iEBSwgEVZipKafLl-5eqUxe5jiNSyLrHae7KeYsueMDrodFSQdnCjpPaCBjs6rUIrpsncyZGs3G56E3uMYNAfEpIYD9bzpm77m7_SBNcq8WkxbRYhDgpLsiCjiNFLl9FOXMi7ALPM5pWP5QoTi07vUJJFFU6V-pvwRoFUaOjVWb7B9o3j7RXm9hvRWo35lQ1dIQv-q0Wv-KYgrLySLS_WJtVmkdjs6T8iPAxUl0wTuMx1d99q7tgH_W3gFjuFqNL5mpd9b0T8QMMzDimpsEVCjUmzeza_HddnzVLW08caAEISY8IDdSq6CmO0q_msw-qEgUzRMhry4Bs6fzPmxFIVd=w1024-h670-no\" alt=\"http://localhost:8080\" title=\"首頁\"></p>\n<blockquote>\n<p>誒～你有沒有注意到奇怪的地方啊?!我們跑 <code>vue</code> 的時候是用 <code>node server</code> 執行，但是真正專案要在 <code>.NET server</code> 執行。所以怎麼把這兩者結合呢？主要原理就是：在 <code>Development</code> 時把 <code>node server</code> 當作是前端產生靜態資源 (<code>JS</code>, <code>Css</code>, <code>images</code>…) 的工具; <code>Production</code> 的部分就把產出過後的靜態資源給 <code>.NET server</code> 使用。廢話不多說，我們就來趕緊試試看吧。</p>\n</blockquote>\n<h2 id=\"結合-NET-Core-和-Vue\"><a href=\"#結合-NET-Core-和-Vue\" class=\"headerlink\" title=\"結合 .NET Core 和 Vue\"></a>結合 <code>.NET Core</code> 和 <code>Vue</code></h2><ol>\n<li>修改 <code>webpack.config.js</code>，將靜態檔案產生在 <code>wwwroot</code> 資料夾中</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">......</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    main: <span class=\"string\">'./src/main.js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'./wwwroot'</span>),</span><br><span class=\"line\">    publicPath: <span class=\"string\">'/wwwroot/'</span>,</span><br><span class=\"line\">    filename: <span class=\"string\">'js/build.js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      ......</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif|svg)$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'file-loader'</span>,</span><br><span class=\"line\">        options: &#123;</span><br><span class=\"line\">          publicPath: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">          outputPath: <span class=\"string\">'imgs/'</span>,</span><br><span class=\"line\">          name: <span class=\"string\">'[name].[ext]?[hash]'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">......</span><br></pre></td></tr></table></figure>\n<ol>\n<li>修改 <code>cshtml</code> 加入對應的 <code>js</code> 和 <code>html</code></li>\n</ol>\n<ul>\n<li><code>_Layout.cshtml</code> 修改內容如下</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>@ViewData[\"Title\"] - dotnet_core_vue_cli<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">include</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Development 的 CSS --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- &lt;link rel=\"stylesheet\" href=\"~/css/xxx.css\" asp-append-version=\"true\"/&gt; --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">exclude</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Production 的 CSS --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    @RenderBody()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">include</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Development 的 JS --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"~/js/build.js\"</span> <span class=\"attr\">asp-append-version</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">exclude</span>=<span class=\"string\">\"Development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 這邊放 Production 的 JS --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"~/js/build.js\"</span> <span class=\"attr\">asp-append-version</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @RenderSection(\"Scripts\", required: false)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>接著修改 <code>Index.cshtml</code></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@&#123;</span><br><span class=\"line\">    ViewData[\"Title\"] = \"Home Page\";</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>測試跑跑看 <code>.NET server</code> 有沒有成功？</p>\n<p>先產生靜態檔案</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure>\n<p>再啟動伺服器</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet run</span><br></pre></td></tr></table></figure>\n<p>成功就會出現之前一樣的畫面囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/WTK7IxK_nr3qmzCqevVgFhFZQXnkW0t4QPpng4VkfYOWOQSvFL7eHZbDEvfPqDwEjAazw49geCW3opNOVcz45uRoDcIKjPFmnoL8lL8v5Jppc2MrkEF5OvuDb912EfiapEkmNpw-DxzLcb_S3NKzsjnGs3wiuhUaMep1iSiz2Ctt6Nie9pYoV4ucqhvwJ_J4G9IOZ809FBWn7rcr7yit7K-vGQ3__3mJEv4npj123wb6RhkNcXvAswKA4VeCuaRehdCn13U94F5R0WRFFOJam5VNM_klgKWATfZsPcXMgGbQ2-M9KXmXmbZsQRBok5-qDxi9MNtKS5iEBSwgEVZipKafLl-5eqUxe5jiNSyLrHae7KeYsueMDrodFSQdnCjpPaCBjs6rUIrpsncyZGs3G56E3uMYNAfEpIYD9bzpm77m7_SBNcq8WkxbRYhDgpLsiCjiNFLl9FOXMi7ALPM5pWP5QoTi07vUJJFFU6V-pvwRoFUaOjVWb7B9o3j7RXm9hvRWo35lQ1dIQv-q0Wv-KYgrLySLS_WJtVmkdjs6T8iPAxUl0wTuMx1d99q7tgH_W3gFjuFqNL5mpd9b0T8QMMzDimpsEVCjUmzeza_HddnzVLW08caAEISY8IDdSq6CmO0q_msw-qEgUzRMhry4Bs6fzPmxFIVd=w1024-h670-no\" alt=\"http://localhost:5000\" title=\"首頁\"></p>\n<h2 id=\"設定-HMR-和-vue-router-的-fallback\"><a href=\"#設定-HMR-和-vue-router-的-fallback\" class=\"headerlink\" title=\"設定 HMR 和 vue router 的 fallback\"></a>設定 <code>HMR</code> 和 <code>vue router</code> 的 fallback</h2><p>接著才是重頭戲～如魔法般的 <code>HMR</code> 功能登場!!!</p>\n<p>如果還不太知道什麼是 <code>HMR</code> 的，就 google 一下囉～</p>\n<ol>\n<li>安裝 <code>aspnet-webpack</code>, <code>webpack-hot-middleware</code></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D aspnet-webpack</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D webpack-hot-middleware</span><br></pre></td></tr></table></figure>\n<ol>\n<li>新增 <code>ASP.NET Core SPA Services</code></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet add package Microsoft.AspNetCore.SpaServices --version 2.0.1</span><br></pre></td></tr></table></figure>\n<ol>\n<li>修改 <code>Startup.cs</code></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">using Microsoft.AspNetCore.SpaServices.Webpack;</span><br><span class=\"line\"></span><br><span class=\"line\">......</span><br><span class=\"line\">  // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span><br><span class=\"line\">  public void Configure(IApplicationBuilder app, IHostingEnvironment env)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    // [HMR] http://www.c-sharpcorner.com/article/using-hot-module-replacement-feature-of-webpack-in-asp-net-core/</span><br><span class=\"line\">    if (env.IsDevelopment())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      app.UseDeveloperExceptionPage();</span><br><span class=\"line\">      app.UseWebpackDevMiddleware(new WebpackDevMiddlewareOptions</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        HotModuleReplacement = true</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">    app.UseMvc(routes =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      routes.MapRoute(</span><br><span class=\"line\">        name: &quot;default&quot;,</span><br><span class=\"line\">        template: &quot;&#123;controller=Home&#125;/&#123;action=Index&#125;/&#123;id?&#125;&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">      // Use Vue Router must add fallback route</span><br><span class=\"line\">      // Help to navigate directly</span><br><span class=\"line\">      // https://stu.ratcliffe.io/2017/07/20/vuejs-serverside-rendering-with-aspnet-core</span><br><span class=\"line\">      routes.MapSpaFallbackRoute(&quot;spa-fallback&quot;, new &#123; controller = &quot;Home&quot;, action = &quot;Index&quot; &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">......</span><br></pre></td></tr></table></figure>\n<ol>\n<li><code>package.json</code> 指令加上 HMR</li>\n</ol>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  \"scripts\": &#123;</span><br><span class=\"line\">    \"hmr\": \"cross-env ASPNETCORE_ENVIRONMENT=Development NODE_ENV=development dotnet run\",</span><br><span class=\"line\">    \"dev\": \"cross-env NODE_ENV=development webpack-dev-server --open --hot\",</span><br><span class=\"line\">    \"build\": \"cross-env NODE_ENV=production webpack --progress --hide-modules\"</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>執行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run hmr</span><br></pre></td></tr></table></figure>\n<p>成功的話就會從 <code>Chrome</code> 開發者工具看到 <code>HMR</code> 連結成功囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/teS4z4xS0BE6CsIMEuUgrFU5cEQE_naAsDJb_O-6aYc-WeCvmduiHEyRQJPaBzbMQmOImdXcfv1E9VmDRitocPemHDsPCuk-njpIeDdPItuP4kdMfI_cqaJNnrSO9k8NpJC_0NwQj5L8NgHSIH7amFlGYZwNk9JsyxhgMkOCc67_dbYE48P8gTTr0qbqutjyrm14fdsNJjyUJsAPn8xji47-Asj55hOQv8ilN3-3pNNeXAMybVAdNRoCKZk8MnMJea_qTuoiEMzltk_LHP07K6jbamM7--uqYimHhmW2ZtZ89z9GrW5mc9zR4G9X2oosIEByxrB7tlrHPyDm_JDPQ30cVBaqaed0XwYLwYyemd9IDDQb3e5UvfAbih1KB9UK6poAkEuwAaEXvFlkZRC5_rN16EVSzUoHFH5sTQ2_7xVo4YAP0U_gpP4K1gQdVUVM2yFvOBWpf8V0bJQWIv5QV9vxihQ5nZp5Mk58dK8XhAQPMxCQKDc6VdVBQ-5B5VT1_s_OATXA6masol_u--aruB29iWQPemdwa-iGpYdkWmGkAVVXTcyPqqUZ_uZDkoVo5EPhQ-fYZtlrupwtNXy84xiVmbSQSDUr7kFb4ns7e7RQ2oZChZO7bC72UuvqyMTKWH91j1htEDPQJzjHNFJKaKYmd0xg-9R6=w1024-h670-no\" alt=\"http://localhost:5000\" title=\"首頁\"></p>\n<p>今天的範例在 <a href=\"https://github.com/Annilla/dotnet-core-vue-cli/tree/v1.0.0\" target=\"_blank\" rel=\"noopener\">github</a>，下回見～</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"http://www.dotnetcurry.com/aspnet/1383/modern-web-dev-aspnet-core-webpack-vuejs\" target=\"_blank\" rel=\"noopener\">Modern Web Development using ASP.NET Core template, Vue.js and Webpack</a></li>\n<li><a href=\"http://www.c-sharpcorner.com/article/using-hot-module-replacement-feature-of-webpack-in-asp-net-core/\" target=\"_blank\" rel=\"noopener\">Using Hot Module Replacement Feature Of Webpack In ASP.NET Core</a></li>\n<li><a href=\"https://www.nuget.org/packages/Microsoft.AspNetCore.SpaServices/\" target=\"_blank\" rel=\"noopener\">Microsoft.AspNetCore.SpaServices</a></li>\n</ul>"},{"title":"Grab Data to CSV by using NodeJS","humbnailImage":"https://cdn-images-1.medium.com/max/1600/1*HP8l7LMMt7Sh5UoO1T-yLQ.png","thumbnailImagePosition":"left","coverImage":"https://cdn-images-1.medium.com/max/1200/1*H-25KB7EbSHjv70HXrdl6w.png","coverMeta":"out","date":"2019-07-03T16:00:00.000Z","updated":"2019-07-03T16:00:00.000Z","_content":"\n工作中遇到一個情境是，打 API 可以要到當下的資訊，但 User 想要幾分鐘之內的紀錄，如果要做報表的話，就要非常手動的用 postman 打 API N 次，然後再將儲存下來的 json 轉成 csv，最後再將 n 個 csv 合成一份檔案。實際若是每分鐘打一次 API，假設只抓十分鐘，就是存十次 json 檔案，再將十個 json 檔案轉成十個 csv ，最後再手動合成一個 csv 檔案，光是手動的時間絕對超過三十分鐘。為此，我決定要寫一隻程式讓上面的所有動作自動化。\n\n<!--more-->\n\n環境使用 NodeJS。\n\n# 安裝套件\n\n共安裝 3 個套件\n\n* axios: 戳 API 用\n* moment: 處理時間\n* json2csv: 將 data 轉成 csv 格式\n\n```\nyarn add axios moment json2csv\n```\n\n# 程式解說\n\n這裡只需要寫一隻 getData.js 就搞定 。\n\n```js\nconst axios = require('axios');\nconst moment = require('moment');\nconst { Parser } = require('json2csv');\nconst fs = require('fs');\n\nlet head = []; // 存取 head 資料\n...\nlet timer = null; // 定時抓取資料的計時器\nlet duration = 60000; // 多久抓一次資料\nlet token = ''; // 存取 API token\nlet apiURL = 'put API URL';\nlet appID = 'put API ID';\nlet appSecret = 'put API Code';\nlet startTime = moment().format(); // 紀錄開始時間\nlet grabMiniute = 3; // 設定要抓取的分鐘數\nlet endTime = moment(startTime).add(grabMiniute, 'minutes'); // 計算結束的時間\n\n// 取得 API token \nasync function getToken() {\n  let res = await axios({\n    methos: 'GET',\n    url: `${apiURL}/api/auth?appId=${appID}&appSecret=${appSecret}`\n  });\n  token = res.data.data;\n}\n\n// 將戳 API 包裝成一個程式，若 token 過期會重戳 API\nasync function requestAPI(apiMethod, apiURL, retryFunc) {\n  try {\n    return await axios({\n      method: apiMethod,\n      url: apiURL,\n      headers: {\n        AccessToken: token,\n        System: appID\n      }\n    });\n  } catch(error) {\n    if (error.message.indexOf('401') > -1) {\n      // get token\n      await getToken();\n      retryFunc();\n    }\n  }\n}\n\n// 戳 head API 取資料\nasync function getHead() {\n  let res = await requestAPI('GET', `${apiURL}/api/Head`, getHead);\n  if (res) { head = head.concat(res.data); }\n  console.log('head', head.length);\n}\n\n...\n\n// 一次取得多種資料\nasync function getAllData() {\n  // get token\n  await getToken();\n\n  console.log(`----- ${grabMiniute} minutes left -----`);\n\n  // grab data\n  getHead();\n  getFeeder();\n  getNozzle();\n\n  grabMiniute = grabMiniute - 1;\n}\n\n// 寫檔案\nfunction writeFile(data, fileName) {\n  fs.writeFile(fileName, data, 'utf8', function (err) {\n    if (err) {\n        console.log(`An error occured while writing ${fileName}.`);\n        return console.log(err);\n    }\n\n    console.log(`${fileName} has been saved.`);\n  });\n}\n\n// 轉格式並儲存檔案\nfunction saveFile() {\n  try {\n    // 將 json 轉 csv\n    const fieldsHead = [columnA, ...];\n    const fieldsFeeder = [columnA, ...];\n    const fieldsNozzle = [columnA, ...];\n    const parserHead = new Parser({ fieldsHead });\n    const parserFeeder = new Parser({ fieldsFeeder });\n    const parserNozzle = new Parser({ fieldsNozzle });\n    const csvFeeder = parserFeeder.parse(feeder);\n    const csvHead = parserHead.parse(head);\n    const csvNozzle = parserNozzle.parse(nozzle);\n\n    console.log(`----- SAVE FILES -----`);\n    writeFile(csvHead, 'Head.csv');\n    writeFile(csvFeeder, 'Feeder.csv');\n    writeFile(csvNozzle, 'Nozzle.csv');\n  } catch (err) {\n    console.error('saveFile ERROR: ', err);\n  }\n}\n\n/* ---------------\n  Start from here\n  ---------------*/\n// 一開始先執行\ngetAllData();\n\n// 啟動計時器\ntimer = setInterval(() => {\n  let now = moment().format();\n  if(moment(now).isBefore(endTime)) {\n    // 如果還沒到結束時間，就繼續取資料\n    getAllData();\n  } else {\n    // 如果時間到就停止計時器\n    clearInterval(timer);\n    // 將資料儲存成檔案\n    saveFile();\n  }\n}, duration);\n```\n\n# 跑起來吧～\n\n```\nnode getData.js\n```\n\n![跑起來吧](https://lh3.googleusercontent.com/j9w9EiGilWwL1E7atc2_7zYqgVhaihr6BfYRaV5yI_7Zqsm35HHQq-PJB16FVphVx-NG13pmNYy6lSX9OCHF_awYWCscNoCuHxWl8S9dVYtbK6cIFPZVlOk2nlHuPWYZ75c4TrgpM3lOYW3SAwF0QGa38s58WuDPHyxBdZDK-JLJgR7IY-ovFu6YZ2I37ciPf93Mvc24Bg9tJJSj7zdYtfwirxPeFXIVL0guofpoTEBAR29_4BsLnEAtsY6pK5KEXNYcjhwjZ7GuUjNfueF2Qe0abLvsorMFWE1JY5ems-ZOVm0Bw-BmXVqkGNknDNd5aIoILBJ5fAyRLmbV7hVCQpzS79jPBdWDicXsTu8c7qQbGqyU1hyB56MJajIEVViQCoEKMDHnuCWuD67a09wBI8zOQoRIYJmkFf1EPZ93bgVt-KPrgOeQIgaEEIerHPmp56OslVqyOsVi_N4iZ5xROgSit4I4wzfQgZYYbdkLkX4H0fV1VX2zpufoKrx0cz6ZMzTxczYtQErozIMQ5nYZDD1I3xAwN9Gxkr79V2gWHZgICAZ_o1N-MHcM-Sdk690fheubq0PwpekkxP_FIxrJCRaLRYYByMybeyt6z6Y1U713nSO05whp-jMXVNkf459UBi-n8I2Zu8LUktni-ZnJ8GacoOoZM6xV=w1173-h812-no \"跑起來吧\")\n\n> 後記：其實 User 一直不停的找我手動抓資料，一開始邊寫程式還要先手動抓資料很阿砸，但後來工具完成後，變成非常順手，覺得幸好有寫這隻小工具的感覺XD","source":"_posts/JS/Grab-Data-To-CSV-By-Using-NodeJS.md","raw":"---\ntitle: Grab Data to CSV by using NodeJS\ncategories:\n  - JS\nhumbnailImage: https://cdn-images-1.medium.com/max/1600/1*HP8l7LMMt7Sh5UoO1T-yLQ.png\nthumbnailImagePosition: left\ncoverImage: https://cdn-images-1.medium.com/max/1200/1*H-25KB7EbSHjv70HXrdl6w.png\ncoverMeta: out\ntags: [JS]\ndate: 2019/07/04\nupdated: 2019/07/04\n---\n\n工作中遇到一個情境是，打 API 可以要到當下的資訊，但 User 想要幾分鐘之內的紀錄，如果要做報表的話，就要非常手動的用 postman 打 API N 次，然後再將儲存下來的 json 轉成 csv，最後再將 n 個 csv 合成一份檔案。實際若是每分鐘打一次 API，假設只抓十分鐘，就是存十次 json 檔案，再將十個 json 檔案轉成十個 csv ，最後再手動合成一個 csv 檔案，光是手動的時間絕對超過三十分鐘。為此，我決定要寫一隻程式讓上面的所有動作自動化。\n\n<!--more-->\n\n環境使用 NodeJS。\n\n# 安裝套件\n\n共安裝 3 個套件\n\n* axios: 戳 API 用\n* moment: 處理時間\n* json2csv: 將 data 轉成 csv 格式\n\n```\nyarn add axios moment json2csv\n```\n\n# 程式解說\n\n這裡只需要寫一隻 getData.js 就搞定 。\n\n```js\nconst axios = require('axios');\nconst moment = require('moment');\nconst { Parser } = require('json2csv');\nconst fs = require('fs');\n\nlet head = []; // 存取 head 資料\n...\nlet timer = null; // 定時抓取資料的計時器\nlet duration = 60000; // 多久抓一次資料\nlet token = ''; // 存取 API token\nlet apiURL = 'put API URL';\nlet appID = 'put API ID';\nlet appSecret = 'put API Code';\nlet startTime = moment().format(); // 紀錄開始時間\nlet grabMiniute = 3; // 設定要抓取的分鐘數\nlet endTime = moment(startTime).add(grabMiniute, 'minutes'); // 計算結束的時間\n\n// 取得 API token \nasync function getToken() {\n  let res = await axios({\n    methos: 'GET',\n    url: `${apiURL}/api/auth?appId=${appID}&appSecret=${appSecret}`\n  });\n  token = res.data.data;\n}\n\n// 將戳 API 包裝成一個程式，若 token 過期會重戳 API\nasync function requestAPI(apiMethod, apiURL, retryFunc) {\n  try {\n    return await axios({\n      method: apiMethod,\n      url: apiURL,\n      headers: {\n        AccessToken: token,\n        System: appID\n      }\n    });\n  } catch(error) {\n    if (error.message.indexOf('401') > -1) {\n      // get token\n      await getToken();\n      retryFunc();\n    }\n  }\n}\n\n// 戳 head API 取資料\nasync function getHead() {\n  let res = await requestAPI('GET', `${apiURL}/api/Head`, getHead);\n  if (res) { head = head.concat(res.data); }\n  console.log('head', head.length);\n}\n\n...\n\n// 一次取得多種資料\nasync function getAllData() {\n  // get token\n  await getToken();\n\n  console.log(`----- ${grabMiniute} minutes left -----`);\n\n  // grab data\n  getHead();\n  getFeeder();\n  getNozzle();\n\n  grabMiniute = grabMiniute - 1;\n}\n\n// 寫檔案\nfunction writeFile(data, fileName) {\n  fs.writeFile(fileName, data, 'utf8', function (err) {\n    if (err) {\n        console.log(`An error occured while writing ${fileName}.`);\n        return console.log(err);\n    }\n\n    console.log(`${fileName} has been saved.`);\n  });\n}\n\n// 轉格式並儲存檔案\nfunction saveFile() {\n  try {\n    // 將 json 轉 csv\n    const fieldsHead = [columnA, ...];\n    const fieldsFeeder = [columnA, ...];\n    const fieldsNozzle = [columnA, ...];\n    const parserHead = new Parser({ fieldsHead });\n    const parserFeeder = new Parser({ fieldsFeeder });\n    const parserNozzle = new Parser({ fieldsNozzle });\n    const csvFeeder = parserFeeder.parse(feeder);\n    const csvHead = parserHead.parse(head);\n    const csvNozzle = parserNozzle.parse(nozzle);\n\n    console.log(`----- SAVE FILES -----`);\n    writeFile(csvHead, 'Head.csv');\n    writeFile(csvFeeder, 'Feeder.csv');\n    writeFile(csvNozzle, 'Nozzle.csv');\n  } catch (err) {\n    console.error('saveFile ERROR: ', err);\n  }\n}\n\n/* ---------------\n  Start from here\n  ---------------*/\n// 一開始先執行\ngetAllData();\n\n// 啟動計時器\ntimer = setInterval(() => {\n  let now = moment().format();\n  if(moment(now).isBefore(endTime)) {\n    // 如果還沒到結束時間，就繼續取資料\n    getAllData();\n  } else {\n    // 如果時間到就停止計時器\n    clearInterval(timer);\n    // 將資料儲存成檔案\n    saveFile();\n  }\n}, duration);\n```\n\n# 跑起來吧～\n\n```\nnode getData.js\n```\n\n![跑起來吧](https://lh3.googleusercontent.com/j9w9EiGilWwL1E7atc2_7zYqgVhaihr6BfYRaV5yI_7Zqsm35HHQq-PJB16FVphVx-NG13pmNYy6lSX9OCHF_awYWCscNoCuHxWl8S9dVYtbK6cIFPZVlOk2nlHuPWYZ75c4TrgpM3lOYW3SAwF0QGa38s58WuDPHyxBdZDK-JLJgR7IY-ovFu6YZ2I37ciPf93Mvc24Bg9tJJSj7zdYtfwirxPeFXIVL0guofpoTEBAR29_4BsLnEAtsY6pK5KEXNYcjhwjZ7GuUjNfueF2Qe0abLvsorMFWE1JY5ems-ZOVm0Bw-BmXVqkGNknDNd5aIoILBJ5fAyRLmbV7hVCQpzS79jPBdWDicXsTu8c7qQbGqyU1hyB56MJajIEVViQCoEKMDHnuCWuD67a09wBI8zOQoRIYJmkFf1EPZ93bgVt-KPrgOeQIgaEEIerHPmp56OslVqyOsVi_N4iZ5xROgSit4I4wzfQgZYYbdkLkX4H0fV1VX2zpufoKrx0cz6ZMzTxczYtQErozIMQ5nYZDD1I3xAwN9Gxkr79V2gWHZgICAZ_o1N-MHcM-Sdk690fheubq0PwpekkxP_FIxrJCRaLRYYByMybeyt6z6Y1U713nSO05whp-jMXVNkf459UBi-n8I2Zu8LUktni-ZnJ8GacoOoZM6xV=w1173-h812-no \"跑起來吧\")\n\n> 後記：其實 User 一直不停的找我手動抓資料，一開始邊寫程式還要先手動抓資料很阿砸，但後來工具完成後，變成非常順手，覺得幸好有寫這隻小工具的感覺XD","slug":"JS/Grab-Data-To-CSV-By-Using-NodeJS","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74q001atudhcrtq4zzx","content":"<p>工作中遇到一個情境是，打 API 可以要到當下的資訊，但 User 想要幾分鐘之內的紀錄，如果要做報表的話，就要非常手動的用 postman 打 API N 次，然後再將儲存下來的 json 轉成 csv，最後再將 n 個 csv 合成一份檔案。實際若是每分鐘打一次 API，假設只抓十分鐘，就是存十次 json 檔案，再將十個 json 檔案轉成十個 csv ，最後再手動合成一個 csv 檔案，光是手動的時間絕對超過三十分鐘。為此，我決定要寫一隻程式讓上面的所有動作自動化。</p>\n<a id=\"more\"></a>\n<p>環境使用 NodeJS。</p>\n<h1 id=\"安裝套件\"><a href=\"#安裝套件\" class=\"headerlink\" title=\"安裝套件\"></a>安裝套件</h1><p>共安裝 3 個套件</p>\n<ul>\n<li>axios: 戳 API 用</li>\n<li>moment: 處理時間</li>\n<li>json2csv: 將 data 轉成 csv 格式</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add axios moment json2csv</span><br></pre></td></tr></table></figure>\n<h1 id=\"程式解說\"><a href=\"#程式解說\" class=\"headerlink\" title=\"程式解說\"></a>程式解說</h1><p>這裡只需要寫一隻 getData.js 就搞定 。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> axios = <span class=\"built_in\">require</span>(<span class=\"string\">'axios'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> moment = <span class=\"built_in\">require</span>(<span class=\"string\">'moment'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; Parser &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'json2csv'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> head = []; <span class=\"comment\">// 存取 head 資料</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">let</span> timer = <span class=\"literal\">null</span>; <span class=\"comment\">// 定時抓取資料的計時器</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> duration = <span class=\"number\">60000</span>; <span class=\"comment\">// 多久抓一次資料</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> token = <span class=\"string\">''</span>; <span class=\"comment\">// 存取 API token</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> apiURL = <span class=\"string\">'put API URL'</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> appID = <span class=\"string\">'put API ID'</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> appSecret = <span class=\"string\">'put API Code'</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> startTime = moment().format(); <span class=\"comment\">// 紀錄開始時間</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> grabMiniute = <span class=\"number\">3</span>; <span class=\"comment\">// 設定要抓取的分鐘數</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> endTime = moment(startTime).add(grabMiniute, <span class=\"string\">'minutes'</span>); <span class=\"comment\">// 計算結束的時間</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 取得 API token </span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getToken</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"keyword\">await</span> axios(&#123;</span><br><span class=\"line\">    methos: <span class=\"string\">'GET'</span>,</span><br><span class=\"line\">    url: <span class=\"string\">`<span class=\"subst\">$&#123;apiURL&#125;</span>/api/auth?appId=<span class=\"subst\">$&#123;appID&#125;</span>&amp;appSecret=<span class=\"subst\">$&#123;appSecret&#125;</span>`</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  token = res.data.data;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 將戳 API 包裝成一個程式，若 token 過期會重戳 API</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">requestAPI</span>(<span class=\"params\">apiMethod, apiURL, retryFunc</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">await</span> axios(&#123;</span><br><span class=\"line\">      method: apiMethod,</span><br><span class=\"line\">      url: apiURL,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        AccessToken: token,</span><br><span class=\"line\">        System: appID</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span>(error) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error.message.indexOf(<span class=\"string\">'401'</span>) &gt; <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// get token</span></span><br><span class=\"line\">      <span class=\"keyword\">await</span> getToken();</span><br><span class=\"line\">      retryFunc();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 戳 head API 取資料</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getHead</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"keyword\">await</span> requestAPI(<span class=\"string\">'GET'</span>, <span class=\"string\">`<span class=\"subst\">$&#123;apiURL&#125;</span>/api/Head`</span>, getHead);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (res) &#123; head = head.concat(res.data); &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'head'</span>, head.length);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 一次取得多種資料</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getAllData</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// get token</span></span><br><span class=\"line\">  <span class=\"keyword\">await</span> getToken();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`----- <span class=\"subst\">$&#123;grabMiniute&#125;</span> minutes left -----`</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// grab data</span></span><br><span class=\"line\">  getHead();</span><br><span class=\"line\">  getFeeder();</span><br><span class=\"line\">  getNozzle();</span><br><span class=\"line\"></span><br><span class=\"line\">  grabMiniute = grabMiniute - <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 寫檔案</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeFile</span>(<span class=\"params\">data, fileName</span>) </span>&#123;</span><br><span class=\"line\">  fs.writeFile(fileName, data, <span class=\"string\">'utf8'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`An error occured while writing <span class=\"subst\">$&#123;fileName&#125;</span>.`</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;fileName&#125;</span> has been saved.`</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 轉格式並儲存檔案</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">saveFile</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 將 json 轉 csv</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> fieldsHead = [columnA, ...];</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fieldsFeeder = [columnA, ...];</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fieldsNozzle = [columnA, ...];</span><br><span class=\"line\">    <span class=\"keyword\">const</span> parserHead = <span class=\"keyword\">new</span> Parser(&#123; fieldsHead &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> parserFeeder = <span class=\"keyword\">new</span> Parser(&#123; fieldsFeeder &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> parserNozzle = <span class=\"keyword\">new</span> Parser(&#123; fieldsNozzle &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> csvFeeder = parserFeeder.parse(feeder);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> csvHead = parserHead.parse(head);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> csvNozzle = parserNozzle.parse(nozzle);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`----- SAVE FILES -----`</span>);</span><br><span class=\"line\">    writeFile(csvHead, <span class=\"string\">'Head.csv'</span>);</span><br><span class=\"line\">    writeFile(csvFeeder, <span class=\"string\">'Feeder.csv'</span>);</span><br><span class=\"line\">    writeFile(csvNozzle, <span class=\"string\">'Nozzle.csv'</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(<span class=\"string\">'saveFile ERROR: '</span>, err);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* ---------------</span></span><br><span class=\"line\"><span class=\"comment\">  Start from here</span></span><br><span class=\"line\"><span class=\"comment\">  ---------------*/</span></span><br><span class=\"line\"><span class=\"comment\">// 一開始先執行</span></span><br><span class=\"line\">getAllData();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 啟動計時器</span></span><br><span class=\"line\">timer = setInterval(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> now = moment().format();</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(moment(now).isBefore(endTime)) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 如果還沒到結束時間，就繼續取資料</span></span><br><span class=\"line\">    getAllData();</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 如果時間到就停止計時器</span></span><br><span class=\"line\">    clearInterval(timer);</span><br><span class=\"line\">    <span class=\"comment\">// 將資料儲存成檔案</span></span><br><span class=\"line\">    saveFile();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;, duration);</span><br></pre></td></tr></table></figure>\n<h1 id=\"跑起來吧～\"><a href=\"#跑起來吧～\" class=\"headerlink\" title=\"跑起來吧～\"></a>跑起來吧～</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node getData.js</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://lh3.googleusercontent.com/j9w9EiGilWwL1E7atc2_7zYqgVhaihr6BfYRaV5yI_7Zqsm35HHQq-PJB16FVphVx-NG13pmNYy6lSX9OCHF_awYWCscNoCuHxWl8S9dVYtbK6cIFPZVlOk2nlHuPWYZ75c4TrgpM3lOYW3SAwF0QGa38s58WuDPHyxBdZDK-JLJgR7IY-ovFu6YZ2I37ciPf93Mvc24Bg9tJJSj7zdYtfwirxPeFXIVL0guofpoTEBAR29_4BsLnEAtsY6pK5KEXNYcjhwjZ7GuUjNfueF2Qe0abLvsorMFWE1JY5ems-ZOVm0Bw-BmXVqkGNknDNd5aIoILBJ5fAyRLmbV7hVCQpzS79jPBdWDicXsTu8c7qQbGqyU1hyB56MJajIEVViQCoEKMDHnuCWuD67a09wBI8zOQoRIYJmkFf1EPZ93bgVt-KPrgOeQIgaEEIerHPmp56OslVqyOsVi_N4iZ5xROgSit4I4wzfQgZYYbdkLkX4H0fV1VX2zpufoKrx0cz6ZMzTxczYtQErozIMQ5nYZDD1I3xAwN9Gxkr79V2gWHZgICAZ_o1N-MHcM-Sdk690fheubq0PwpekkxP_FIxrJCRaLRYYByMybeyt6z6Y1U713nSO05whp-jMXVNkf459UBi-n8I2Zu8LUktni-ZnJ8GacoOoZM6xV=w1173-h812-no\" alt=\"跑起來吧\" title=\"跑起來吧\"></p>\n<blockquote>\n<p>後記：其實 User 一直不停的找我手動抓資料，一開始邊寫程式還要先手動抓資料很阿砸，但後來工具完成後，變成非常順手，覺得幸好有寫這隻小工具的感覺XD</p>\n</blockquote>\n","site":{"data":{}},"thumbnailImageUrl":"https://cdn-images-1.medium.com/max/1200/1*H-25KB7EbSHjv70HXrdl6w.png","excerpt":"<p>工作中遇到一個情境是，打 API 可以要到當下的資訊，但 User 想要幾分鐘之內的紀錄，如果要做報表的話，就要非常手動的用 postman 打 API N 次，然後再將儲存下來的 json 轉成 csv，最後再將 n 個 csv 合成一份檔案。實際若是每分鐘打一次 API，假設只抓十分鐘，就是存十次 json 檔案，再將十個 json 檔案轉成十個 csv ，最後再手動合成一個 csv 檔案，光是手動的時間絕對超過三十分鐘。為此，我決定要寫一隻程式讓上面的所有動作自動化。</p>","more":"<p>環境使用 NodeJS。</p>\n<h1 id=\"安裝套件\"><a href=\"#安裝套件\" class=\"headerlink\" title=\"安裝套件\"></a>安裝套件</h1><p>共安裝 3 個套件</p>\n<ul>\n<li>axios: 戳 API 用</li>\n<li>moment: 處理時間</li>\n<li>json2csv: 將 data 轉成 csv 格式</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add axios moment json2csv</span><br></pre></td></tr></table></figure>\n<h1 id=\"程式解說\"><a href=\"#程式解說\" class=\"headerlink\" title=\"程式解說\"></a>程式解說</h1><p>這裡只需要寫一隻 getData.js 就搞定 。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> axios = <span class=\"built_in\">require</span>(<span class=\"string\">'axios'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> moment = <span class=\"built_in\">require</span>(<span class=\"string\">'moment'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; Parser &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'json2csv'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> head = []; <span class=\"comment\">// 存取 head 資料</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">let</span> timer = <span class=\"literal\">null</span>; <span class=\"comment\">// 定時抓取資料的計時器</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> duration = <span class=\"number\">60000</span>; <span class=\"comment\">// 多久抓一次資料</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> token = <span class=\"string\">''</span>; <span class=\"comment\">// 存取 API token</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> apiURL = <span class=\"string\">'put API URL'</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> appID = <span class=\"string\">'put API ID'</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> appSecret = <span class=\"string\">'put API Code'</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> startTime = moment().format(); <span class=\"comment\">// 紀錄開始時間</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> grabMiniute = <span class=\"number\">3</span>; <span class=\"comment\">// 設定要抓取的分鐘數</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> endTime = moment(startTime).add(grabMiniute, <span class=\"string\">'minutes'</span>); <span class=\"comment\">// 計算結束的時間</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 取得 API token </span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getToken</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"keyword\">await</span> axios(&#123;</span><br><span class=\"line\">    methos: <span class=\"string\">'GET'</span>,</span><br><span class=\"line\">    url: <span class=\"string\">`<span class=\"subst\">$&#123;apiURL&#125;</span>/api/auth?appId=<span class=\"subst\">$&#123;appID&#125;</span>&amp;appSecret=<span class=\"subst\">$&#123;appSecret&#125;</span>`</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  token = res.data.data;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 將戳 API 包裝成一個程式，若 token 過期會重戳 API</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">requestAPI</span>(<span class=\"params\">apiMethod, apiURL, retryFunc</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">await</span> axios(&#123;</span><br><span class=\"line\">      method: apiMethod,</span><br><span class=\"line\">      url: apiURL,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        AccessToken: token,</span><br><span class=\"line\">        System: appID</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span>(error) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error.message.indexOf(<span class=\"string\">'401'</span>) &gt; <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// get token</span></span><br><span class=\"line\">      <span class=\"keyword\">await</span> getToken();</span><br><span class=\"line\">      retryFunc();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 戳 head API 取資料</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getHead</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = <span class=\"keyword\">await</span> requestAPI(<span class=\"string\">'GET'</span>, <span class=\"string\">`<span class=\"subst\">$&#123;apiURL&#125;</span>/api/Head`</span>, getHead);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (res) &#123; head = head.concat(res.data); &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'head'</span>, head.length);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 一次取得多種資料</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getAllData</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// get token</span></span><br><span class=\"line\">  <span class=\"keyword\">await</span> getToken();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`----- <span class=\"subst\">$&#123;grabMiniute&#125;</span> minutes left -----`</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// grab data</span></span><br><span class=\"line\">  getHead();</span><br><span class=\"line\">  getFeeder();</span><br><span class=\"line\">  getNozzle();</span><br><span class=\"line\"></span><br><span class=\"line\">  grabMiniute = grabMiniute - <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 寫檔案</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">writeFile</span>(<span class=\"params\">data, fileName</span>) </span>&#123;</span><br><span class=\"line\">  fs.writeFile(fileName, data, <span class=\"string\">'utf8'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`An error occured while writing <span class=\"subst\">$&#123;fileName&#125;</span>.`</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;fileName&#125;</span> has been saved.`</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 轉格式並儲存檔案</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">saveFile</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 將 json 轉 csv</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> fieldsHead = [columnA, ...];</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fieldsFeeder = [columnA, ...];</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fieldsNozzle = [columnA, ...];</span><br><span class=\"line\">    <span class=\"keyword\">const</span> parserHead = <span class=\"keyword\">new</span> Parser(&#123; fieldsHead &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> parserFeeder = <span class=\"keyword\">new</span> Parser(&#123; fieldsFeeder &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> parserNozzle = <span class=\"keyword\">new</span> Parser(&#123; fieldsNozzle &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> csvFeeder = parserFeeder.parse(feeder);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> csvHead = parserHead.parse(head);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> csvNozzle = parserNozzle.parse(nozzle);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`----- SAVE FILES -----`</span>);</span><br><span class=\"line\">    writeFile(csvHead, <span class=\"string\">'Head.csv'</span>);</span><br><span class=\"line\">    writeFile(csvFeeder, <span class=\"string\">'Feeder.csv'</span>);</span><br><span class=\"line\">    writeFile(csvNozzle, <span class=\"string\">'Nozzle.csv'</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(<span class=\"string\">'saveFile ERROR: '</span>, err);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* ---------------</span></span><br><span class=\"line\"><span class=\"comment\">  Start from here</span></span><br><span class=\"line\"><span class=\"comment\">  ---------------*/</span></span><br><span class=\"line\"><span class=\"comment\">// 一開始先執行</span></span><br><span class=\"line\">getAllData();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 啟動計時器</span></span><br><span class=\"line\">timer = setInterval(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> now = moment().format();</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(moment(now).isBefore(endTime)) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 如果還沒到結束時間，就繼續取資料</span></span><br><span class=\"line\">    getAllData();</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 如果時間到就停止計時器</span></span><br><span class=\"line\">    clearInterval(timer);</span><br><span class=\"line\">    <span class=\"comment\">// 將資料儲存成檔案</span></span><br><span class=\"line\">    saveFile();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;, duration);</span><br></pre></td></tr></table></figure>\n<h1 id=\"跑起來吧～\"><a href=\"#跑起來吧～\" class=\"headerlink\" title=\"跑起來吧～\"></a>跑起來吧～</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node getData.js</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://lh3.googleusercontent.com/j9w9EiGilWwL1E7atc2_7zYqgVhaihr6BfYRaV5yI_7Zqsm35HHQq-PJB16FVphVx-NG13pmNYy6lSX9OCHF_awYWCscNoCuHxWl8S9dVYtbK6cIFPZVlOk2nlHuPWYZ75c4TrgpM3lOYW3SAwF0QGa38s58WuDPHyxBdZDK-JLJgR7IY-ovFu6YZ2I37ciPf93Mvc24Bg9tJJSj7zdYtfwirxPeFXIVL0guofpoTEBAR29_4BsLnEAtsY6pK5KEXNYcjhwjZ7GuUjNfueF2Qe0abLvsorMFWE1JY5ems-ZOVm0Bw-BmXVqkGNknDNd5aIoILBJ5fAyRLmbV7hVCQpzS79jPBdWDicXsTu8c7qQbGqyU1hyB56MJajIEVViQCoEKMDHnuCWuD67a09wBI8zOQoRIYJmkFf1EPZ93bgVt-KPrgOeQIgaEEIerHPmp56OslVqyOsVi_N4iZ5xROgSit4I4wzfQgZYYbdkLkX4H0fV1VX2zpufoKrx0cz6ZMzTxczYtQErozIMQ5nYZDD1I3xAwN9Gxkr79V2gWHZgICAZ_o1N-MHcM-Sdk690fheubq0PwpekkxP_FIxrJCRaLRYYByMybeyt6z6Y1U713nSO05whp-jMXVNkf459UBi-n8I2Zu8LUktni-ZnJ8GacoOoZM6xV=w1173-h812-no\" alt=\"跑起來吧\" title=\"跑起來吧\"></p>\n<blockquote>\n<p>後記：其實 User 一直不停的找我手動抓資料，一開始邊寫程式還要先手動抓資料很阿砸，但後來工具完成後，變成非常順手，覺得幸好有寫這隻小工具的感覺XD</p>\n</blockquote>"},{"title":"Serverless Azure SignalR with C# and Azure Functions","thumbnailImage":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUcAAACaCAMAAAANQHocAAAAYFBMVEX///9ZtNlRsdhSsthIrtb4+/2n1eldttrg8Pf2+/2h0efk8vjD4vBsvN1LsNe93+633O3v9/vQ6POAxOFyvt6YzuaNyeOHx+Lh8PfW6/Sv2OvJ5PGTy+Rtvd54wd+r1urKXpEyAAAGxklEQVR4nO2df2OyIBDHEzBNE7Vyzdrq/b/LR7f1rBUHHErWyefvVvLdAfcLXCwCgUAgEAgEAoFAIBAIBAKBxxDXadtujuvjpk3zeuqneUVWm+ptl0ScyR8441Gya8p2NfWjvQx5uU+E7HS7h3MhP5t1PvUjPj/psuBSJeGVlpInWTr1gz4zbZao7fAOJoOUEOVOMhsNL1LyUzn1Iz8f9ZJLhIjfSLYMu/g1q4xjTPHaKJug5IVVJtxU7OEiC67QF1VitbXANhmFdbJzdAr8uniLTGa/d2fDVezhy6kHMilp4r4w/kXuZhzkHPSRCw4211VytR1nTl+QzdQjmoR04DZ9Dy9m6Euu7QJpnJDz27crMbqKPWIz9cAey3LcpfEXOavdxpuMnUXOSEiPMnYWuZ56eI/i7GdtnJuQlU9r/BKynXqIj+DoW8bO/5lBjJhbTWpeDBIyIZ+SXFlFMaI8D/LS+Wnqcfpma6OPrBbZsGhHEs+jWYUxnYxDdSS+16R2k3oxXEfaS6TN7iGq/pODdWRvUw/WHzZFhJ8AebCOhFMWuYU2l/B4uI5REk87XG+czNr8T9eMoCMjmh9fm/fq32TNCDpGgmZYkxgHfpU8HENHvp1wtN6ojCXW69RhI9RIAbSYqqDoRMZGc/yTgY0BVnV+rN4SSykJhofGbBkqkZ1XJ5vaN0HfxzRqdGElbyzaTskZZGkwR5ck9iozTm9JrRC704/XsTpVbw2+FP8YeRwT0+rH615SKQ0WyWm1WHxohysGVKbyQrtKsmq8QUxPrF0dBxb49lohk5GG8BSsdTqK48Bvb3SLhqQUHOqqCSOUm3V9BYxQhaHWyDjYGnsaWEi+G+H7nwTNtB6yxVyhMXhGZ2LDu7UcwxoXfTkX1pHOjg0OcpRJ/UULmjwnU6gBWyjGssYeOGHJx/uRaYGWx/GssQc0ejKeD7A8jmmNC81mxqj08RVKHdnYyWr1z3Tzmki9awVNOOZA9PmxBjolQIMk4kG+j3X27du6uIyWaiWhPyFSyN6M3jjKIuWaAG3ZRNpKD6Pa4zfKoBzyIYkkxZvxD251PpPCIqGghkjj/ZsPHaNIseid1J9kh8cP2gPA6AaiOrm+VK8gLHv8oD3w6cceFQYJHIUg4kCa+3qcUNT4gWoajUyFuSHFDcVsrQEdSfRLxX5kVKkTA4mloKOOz7ufWgE6kuhOiT1tM4qwGdIx2KMGvr/7Kdo6+tpn7r3rd2CfuVf8FfGkoyJqBjIiRJqlDK1mriiyikDTFBE/fOtFRlWrLVDAINJS4SVPoTz2Bhy74zSu/gCyB8NkLBQ/VAMfljS6xLXNZm7IrapUAPVOE+lMsTosjIEL9YIHNvnQ6MkF64U2kt1XDGUCXC0MZCmiSLUGvCLuDiTfnZc3lClU/YPWYSJu+GKxd57YmB0CjD+JlBVsThZCYJq7K+i/RWS7Nh76gOEIS4J7fgWNNgDTaQWdjoiNFvT2+X2e8lVxjAwxdRW4aYNItbDHsaMCcXwaCmUidcfAi5I6TWyO8Pt0V18QusjH6dY3xEliTSqEjPfYk7lMbG69z+ruBRq563daXCa2ffZVcwqpWx59juvhOExsbtttp70Wn0YvxX8O+NDQsujc6i+UJLRb9+hOGKqxa1qMM8NL+qjkei7giws231qa3rvC6RyK+yZFxtgWtam4NL9KicxZrv8gq6/GWkCaJWYngEil8Br4IKXSjjTe86puq49I2CwUnFAscwFlkPD7tuoi4YLbrbYkby7EGaQEU491ZL9lETRHq2s0rxCgkPnw/8VLk+OCQ1jI2q5wRs53vIC8G1NjkVZCkqnL3ILthJRn6JtsLJJUwuwv2IIX0DexsBKSos9zoUHmIQcISfv9Utj8mQCLVAYhCc/qHmyYrbNIvY5UitYA6JdKuVmkdRL4ZUEn0FzWSEEtXaYAffxVgFEyJOQs3phrGY1cC4mc2ozEuSMjtWW2xsa+VEKSjQdveccXaxBC8oKwA/4XfMe4vZAzkrELEL0JOSsZ/Vkk2xH3v2/JEVntHyHB05a/Qsp57NTX1Pr7052EFLSaUCx5w4aIEpTpW0iidQQjpVXt1NIiOee0WnkQvGPnts4ilUcOZ0L8gcyjaYR85HM/HxtTp9OtkLTzswM427xoKwhppt6jNm4WhIRoT5hlciZpMSfaHWJ2E69hDSNt7NOSNC7Q80V9iGxfORqE1JNmhc385gJzonie5NVJ+yZcJkWSHWeVZHQl3iz3RSQYu14xOe8UZMkp2wQNMdRpeW72pyLpKXbbfXNYp3XQMBAIBAKBQCAQCPzyD//kVoYOpPZmAAAAAElFTkSuQmCC","thumbnailImagePosition":"left","coverImage":"https://i.ytimg.com/vi/Dvv2hkXyHcg/maxresdefault.jpg","coverMeta":"out","date":"2019-09-09T16:00:00.000Z","updated":"2019-09-09T16:00:00.000Z","_content":"\n第一次接觸使用 Azure SignalR，順便玩玩看雲端託管的服務，那我們就來開始吧～\n\n<!--more-->\n\n因為我習慣用 `Vscode` 開發，所以下面說明都是以 `Vscode` 為主。\n\n## 安裝環境\n\n* 安裝 [Azure Functions Core Tools (v2)](https://github.com/Azure/azure-functions-core-tools#installing)\n\n* 安裝 [.NET Core SDK](https://dotnet.microsoft.com/download)\n\n查看 Azure Functions Core Tools 版本\n\n```\nfunc --Version\n```\n\n查看 dotnet core 版本\n\n```\ndotnet --Version\n```\n\n## 登入 Azure 建立 Azuer SignalR\n\n* [Azure 入口網站](https://portal.azure.com/)\n\n新增 SignalR service 如下圖設定。\n\n![SignalR 設定](https://docs.microsoft.com/zh-tw/azure/azure-signalr/media/signalr-quickstart-azure-functions-javascript/signalr-quickstart-create.png \"SignalR 設定\")\n\n> 注意：這篇介紹的是無伺服器的方式，所以 Service Mode 要選擇 Serverless。一個 Azure SignalR 只能選擇一個 Service Mode，所以傳統的 Classic 方式和 Serverless 只能擇一，兩者不能共用同一個 Service。\n\n## 設定 Azure Function\n\n1) 開啟建立好的服務，複製主要連接字串。\n\n![複製主要連接字串](https://lh3.googleusercontent.com/ebUg5MNe8j6YLI5O56lihd2NTFy9SHkFwW0WZdZnz25HzlKWkEpveUnMpfw9Og1Mkm2wPnqATYzpizjHtt6onCppsz7kRYnrXE-DRBapeoxUwNJLvjKR7O8nkZzNVu37tdUtRXIqFCluv42EXrrKaCQbWRKEfsSFsotts0AnmxXqpyEjB7gKkDUngv-Si0OX8UAy4nH2t5oc1uJumiSBkucK4djsxN_QQVLuBjXlFlzN1-lNt6x3j-KlraBvkCf7J9wLB7cp1_lOMldLoK6bG5ixiKebGTJly_gfZ9J4HN2JF0OCPP87eI4QsGlVPprfTGwgw6swCJaO4TiodAj0zzgPq8SX6qmCE7fS7-1gSDLK1hzTNedZ5EzcCTblltvhdsOuxgSJFc464UYaYcTfcwzZ3377cg9jzGa4ijNRdFRGHYQbvdssgoMuxA8_gRV3qmtsssBOQzKhRwFriUOcR2Mk2RnJEzCknPvIhDDq_aDuO0DJvUr18p4zLV3IK3gdawQtusInwbLdySAFB6VGiKoPK2xP6IJA1RYGUIWx3a7uEqX3KPpI0OjVY5lORd_rtCzv2m69xRSB_ygGXHYVt1_Mr_MsI-vVbpOzZtPob9L3BljtzaWXYBaDaFMeFGVKKhTHR_Gv9i12qfSZCi1j9pffRE8uAVRTmJVYozGlhqffUtNkUHxaDsO2=w1035-h483-no \"複製主要連接字串\")\n\n2) 複製官網 [sample](https://github.com/Azure-Samples/signalr-service-quickstart-serverless-chat)\n\n3) 進入 `src/chat/csharp`。 將 `local.settings.sample.json` 重新命名為 `local.settings.json`。 將連接字串貼到 `AzureSignalRConnectionString` 並設定如下。\n\n```json\n{\n  \"IsEncrypted\": false,\n  \"Values\": {\n    \"FUNCTIONS_WORKER_RUNTIME\": \"dotnet\",\n    \"AzureSignalRConnectionString\": \"Your connection string here\"\n  },\n  \"Host\": {\n    \"LocalHttpPort\": 7071,\n    \"CORS\": \"http://127.0.0.1:8080,http://localhost:8080,https://azure-samples.github.io\",\n    \"CORSCredentials\": true\n  }\n}\n```\n\n> 注意：Host 的部分是在 local 測試時，為了避免 CORS 的限制所設定。請務必將 local 要測試的網域加到 CORS 的值裡面。\n\n4) 開啟 Functions.cs。 官方解釋如下：此函數應用程式中有兩個 HTTP 觸發的函式\n\n* GetSignalRInfo - 使用 SignalRConnectionInfo 輸入繫結來產生並傳回有效的連線資訊。\n\n* SendMessage - 在要求主體中接收聊天訊息，並使用 SignalR 輸出繫結來將訊息廣播給所有已連線的用戶端應用程式。\n\n5) 啟動 local function 測試。\n\n```\nfunc start\n```\n\n![local function 啟動](https://lh3.googleusercontent.com/3504Bocz7haQ3JPmdJwqa2XwHdc_EhIQpmtPqtOftqxaQUK5qLHeVAaSz9JNWpEhD7ezP81kEeq6LB6Loa2aL5OIYYWVjjA4GwibWVIl_pbw_BAN9IyZfTBBvmE9Vz-NRljNw1h-6deKZJZLgWT57tKi5I1ml_PwuOFGL0fh1PHbrPq6VC8YyVchEb4l0OdFYdpFz2h14pJMmelh0jV8M7lqQrIY4aK-lN0ttAn01wQZWh7nnXO-aVhFxYVdI6_-SKoDsu2LnFscOqb5QohvLZkFF3FzgPzRqraWwE4F-KRgXrfk1JPrh0r1qB0yAtu0VZfdbwk1PSXlhnabxHVn6_F0Z6pfrcaASFIkQHzrIonsxwPQm40_W5_BJvRxWCxVHQJed5--C4226IoeDXHRu3jevGzWButrAGJq0s9bCDzrmDg_u9MNKP4klPgZDmmLVfOrqZXAIOhrXmiEOvUSPdUXnIyOOzo0mtU7sFyqmf3UnCk7afZQ3uR8gxGhTSEBsVSl743Csc2-Xp84PJ4xWsmwxfi5vxrPRv3NVO5LQ6v5GB_vx49YCqaxJjYv5tZ9Fd_Hq_2S4MhASR5fSGzD_TzReNfs7p0KM333949JNKUb-e2-nLCkwxdHS0Yk-AZKQ70M-bZTUVu3HElg9UrkfqpdMyu4LtzbiimLqIOGyekCOD3FqShQ8r9q=w2206-h1378-no \"local function 啟動\")\n\n## Local Web 測試\n\n1) 因為瀏覽器若打開 html 頁面會預設使用 https 處理。所以為了避免 CORS 限制。請安裝啟動本機的 http 伺服器。 [Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer)\n\n![Live Server](https://lh3.googleusercontent.com/91mzygWcGmu3ljW09OLhtTAfv2Ugb589jczgciy3mOSuWbCUBjOAeN2BUA-MgYWzRbaoXFWwIqoUHqzcykEA4Aw4odpSHDSboaTWxYYpnTT8CmclxtK9t2HYZWUF4HlUKk806h8Jhq3iup2I414hAKpWCtcKgPidv64aPwucq3GYS_ZKsTXudLB7MIfK0wZ_yR47MscN_9ne6KDJvzv3EU4T-1XNMJZdu6ISqzgrUUCgIh-hnUHeSUH6Vy0M1Kc4rNDjBnp14xLA899OhmeZJiB5xQ5UKbv9Icf-dT3yW7qQRSgxWnMvMWgyle_DdmFSYwLJTqMjLaCnBF_LZiS1bJMfDcuctigjp3lqhy75LDcVssUs55sG_8qmd6zgY1A1PVeEbc3faMfQwM9ANDRZA4GAPLFTVYfsp5wVR6cCkYc6tehN7Q1D2DhTrgoJCZ55r0-9nsG-uA11nh5Lmy9Fe7TmPMceVqZXWYYqdP8Q35UHa8Kgq54dfYLjJ2PLOisuHzurd-qQes4NQfhCvsnsXW78VL-UsaW29tFMS_7k7_NH4X9DFNP7oUBsv87ISO_kpm0VWAylbsilxbLT8n5xa57q3USTJuBR5e6DYixRM0L0K_ElogvfiC2TMmYg_F4M5j_Fmg-VoPrxzIt4u6CQ9sNJ6ExcujX0ZEth-aiguKyQNlK2xBs2x9L8=w1908-h938-no \"Live Server\")\n\n2) 用 `Live Server` 開啟 sample html 範本 `/docs/demo/chat-v2/index.html`。\n\n![開啟 sample html 範本](https://lh3.googleusercontent.com/AgiqJicbCJPOqOd7krSCj4eoQulKtewUr71Gs67h-Z3PWiWpQT3hUguVvqQ_Wbsg82SPMZ6Cq5BC9BLN-YkgZQTf1l7JRwd3k5l0yfztgG3Mb_rRUps_ozF1ebzft2z4rst0i4xcEdY453CtVWWHIfkpl6iGgAdDptdUUDfeWvytYg8LEZX-Z9mpkyXI79oI3sYcXVgloKf0FH3ArfwUquBNNwQEUano4e7PPOcYkvXP3d0v9eO2JvayxYfc-c3WSSHEj4rPbx6SvlbZa8O4-0Q_x-rDQuLEoa7u7kCrBnIdaw0xbRxRBhPiGGxbYUJ_s3dBstI4DKzDt-wyJyKBwwV8K5zhfy5wwx4E4grg9NVZf9dp0l2-DDoh7zjHBLCpgLU1-YdmLKp47cmwxLPA7-FnloIsldbLrBS7hv3OQAfDMEb9o8_MQb_44ELsklUVY6wSo6rY894Ew5Wmu24CBd5UbjnO_vjOvvtKNPZKrnDmvnqmofS0x1Kk-Qzy5qKgZ4M3xXt8NAwGm6qa2Xi2vTZhKwy-ApKzBz-VqaOE1VWNW4cCgUZCh00MBeYxWSCdeJOrQlHgkW_tP0zuBBZFxu88siuX6ZTxq3mpVNa7bENEjPJjCSpxMXQemG-CqhQCnGZJTBkSUArTNUSNRDaQ4jixziHJURlhdZlS04s0MGEjPgsLJGM_RKkR=w2206-h1378-no \"開啟 sample html 範本\")\n\n3) \b自動開啟後，務必輸入 `apiBaseUrl` local 測試為 `http://localhost:7071`， Name 也是必填，請輸入聊天室的使用者名稱即可。\n\n4) 成功之後就可以輸入訊息測試。並能多開數個分頁，測試訊息的接收是否正常。\n\n![測試訊息接收](https://lh3.googleusercontent.com/PYziZWr5t2kOAe9sp4dAJ7f9RmUy-MVlPhZqyus33kJyLQIj61CocH4Rdj955TFA1SVQXZlsSqDhZtafBG5Z25vcLlq28mHCp8OnbxOqh65P81rNFxOH56SfUkJ91ha4KPI8ZHzzSk9zArbDgBNE9iM9NjTZ97lsDsbyO9kuqLDpuj2emQ1r9ak9iRLQXAotahmAelkr2dUiLCsbCphjQHX_fZA9k9KAsAmt2Rq7s5eBTqoHr_V3ZPHemP8QHJg41cHBMfLMwxaKKxqh7PtubOq33yRamyEsrFBfEi8mWAPfLTYmJbGD0izpZEuG1fhBamxoRt175Tgjv6qEIrwakqNQyBn_LnRoQCXYsntJ0XaWDka9yM1Vk9g4zeXp9Jdus09p3Gyj_ACYL98ESUffg8ifDiOPy7cAeFje9dM_FG3bQMtNBLn6Rq8BXXOcERuYUunQsOyalskX_8rnrfvDFGNm9I7Lm5y-wUMw59DmiuvvZsftTtM8lzhLKJDPziD1a_r13RhjLlBo1vfXM0Iq8dsGGe0G4KbinGq4kLIIx0rjg_BDDRQwQUThCUzpOVkYzkKPr7zyFTilAaZAsOeF_k54MrnLVq0sBPCUNN2EYUxI-mzWuhEtNIOzY4K-tmP1AtljaQeVRYnuDp-mMbmLfPW-2PiSf7iSlu6B03DhIpS3EfbFHW0xKEUH=w2532-h1246-no \"測試訊息接收\")\n\n## 發布 Azure Function\n\n* 安裝 [Azure Functions](vscode:extension/ms-azuretools.vscode-azurefunctions) 擴充功能。\n\n![Azure Functions](https://docs.microsoft.com/zh-tw/azure/includes/media/functions-install-vs-code-extension/vscode-install-extension.png \"Azure Functions\")\n\n安裝完後請務必重開 VScode。接下來我們開始發布 Azure Function。\n\n1) 請務必確定 VScode 只開啟 src/chat/csharp 中的 csharp 資料夾。\n\n![csharp 資料夾](https://lh3.googleusercontent.com/F2CzlCEtvEpCrmw7V_8x9zWfv-OYRpzWj18QN-HL_WfF6s3XCH8u8FW8QStEVeNvXCI6PDmPNKPdLolL8Vlh5EvtSYJvuYRpCADBrALiZIy510xQPTNSl4vZAiwWfFu7IXTGn9sIINa8YVH_ya_KRfkSX3-_5EvsFNJOwyQna6Itv0IaqDKpR2-TEOADt1-FN73D1WyTINzPcd3xS2IYk5EKJrloZPO1Jbj3ZlXxpvahgExMM5uxUZOR4X49neuWpuyIjxVzjdAKvY4ADg2W5cdBvQG-b02xAer7yQ6k4gB15eI3_d98HWArt-FDrMwt5EP9foIFU-dBT5V4B-C2-woI0MejtaK07QNZ082ahzsqV7odBCUVH2u3laLEVGzFRhAddf1DhpDobOQhk4-IB3XG7kYiRiWXr4lco1JTCYTDhy-TxgyHSpUsyMxtb8f--kjdQ5y1IF_uGQDRhF7dFhEUKImOFRj1Kc7sypo4uMS07dQAvFm0Nt7G5xX-IE8QOKjmgNrvOypegpsFswjQ_RDyd0YuT21ioMs4oogu8qEdanhGBc_9-lmbxa3Pfe_P2RauuKrczEJ2zIZlahNBP_e3CsPQqy1B5FwtWWk7Aej0GkqHLwJ7HmTi4oC6cH0fXQzz2ATYuSKg0VsPPeh5PGAbLsQZDZIipl1ScojTL07PltVv9ZDBYVwn=w916-h898-no \"csharp 資料夾\")\n\n2) 從擴充功能登入 Azure 帳號。\n\n![登入 Azure 帳號](https://lh3.googleusercontent.com/3ycoKSgCD3L5bhujgJ_qsAaR7iEmu-cDzoi3GceJ4nRtwqz9Sh9ZCNXXQ8nvcuWIUgm4mezj76JL3t3dy1lSdIi-74oqXPTDQYxol0-kaSbF5YTSgsdGI2wgSe_TN4g3UToGBBZdBHrGl9Xw784YIbzI2oFFgQ5FGaH2v3-1JkYpHJB1tde5NdND30pRpnwrbFzotRiyxOyt6lBDlWxuBbSpfIDISQa8Ya-sO79Z8r8cl2RMywRmX3WLVBI3OKVl9Gvi5OJuWmoRyb6jIfeBAWM8i89h5rwdEpCVkXvZO1BlxXRnIrp3Bo4u_EMLkC3VZb9G2KNlVkXgVel-6dL9IqoJ8oVPvorFZMV_sgZwW2_C_D6TH_1SsOs3OVlVT8lwoRjY4RGDJbaQzi7QtfZXfGk5--aTvDw7AV25IP0grR_qAt9X2_SmU4tjEWcjTYN6wG6a6FrQsRhbLhhGC1QOdD1NhyMC-tXZhz9XXuwKyC58CHc_ebYMGogv1PUuqhEy0wMrtKKtC0ZxhGZmH52BcjBrp0fIkp5JJIOeaiZelgAQLJ5-PpAvyY4OpDmSUnJle6hKAHFh6UmCFAu3v1bK4nS0zILSiPobyLEnwrkMbHAJzr44wOMTSVQlsa0ogK5GqER5NNRCACJ-61ztnUEEvdLGN3AhkWmQiCk2ya0YEECjl0LeXGuHk72f=w463-h431-no \"登入 Azure 帳號\")\n\n3) 選擇要發布的地方上傳。\n\n![上傳 Azure Functions](https://lh3.googleusercontent.com/g-Un1PRQE8Npznb4Hhi9gK6Doc7h4nunpZA3zKMEypcb5j5Ks54x20lEc2UeRykR532VeixY7u11THtW9HeALTz47SUBzzvE6vYzKZxg56VCa8GugLdxRDxvkDu0x6rZvvilshkKnPhsaNCsWEM2IkWSR3Nj1ctjhoGhn0gjjCTPz63muznRew9qqt87p-4ozb8EVNuHwIkJpCvG99uRGQ5L7cdaL6rS-CMmnJUB4EjyM15NeVCKJRpeiYJHkRnvuO_OhqLRhAVYRNtiFywIfnSviMhR1TU9XHYkq-IzS2V8cJ0FRw5u1FE9sF1BE3tjFNiuGiogDdVZ5X4JaGenHgYQU6TrACnF0I6xkHdC9oKXzXvaDgrQGos5UjNytVJeikB6DhCo0afU5vz1Qjtdn8sNRWqEAJvFAfYzVjDNtLgESZQ-ADAE099ID81UPDTnzbVYjZA8zCBkBZUNwQQOplIK-Xft_6cCFQtcsZx-ReUUJnma0MuhTd866gyM4_07eadyJ3ahZAQCZG73AvpUzxRIUsRpgjJ_-lGeEumg_CMxbF0QdEbvZfxriX7azPOitHPKC8YuXhcMAAmmD_3IEpp_VAVyadbRHWBzPtRvS8pkuMN2mFDlY1Kkabuwo5gvHF1FE9PyNodyni6pMPIJ4d2OOT8UO_5e_26Pjxsp5FOnO1nKbV5UPRqy=w916-h402-no \"上傳 Azure Functions\")\n\n## 測試連線上 Azure Functions\n\n1) 拷貝 Azure Function url，將 html 中 `apiBaseUrl` 改為線上的 url。\n\n![Copy Azure Function url](https://lh3.googleusercontent.com/H_G9dyo8H_V-04HnuKLeYz_RIzpELVQEeIU2Oss1BgV4kb0ih2rs2ihnSG5V4cBpF27Bhuax9uA3jrh5jzi4NXG3xJR8g16s8Nksmlp7Q5zbI6JBkepAhstRwqkBhFiTtt2jAwGlTnWy1TXkPOqzjD8ejAxMDZYuR1Tsrrw9lHCxdicNe233wUwB_9T9Rj7CGP3SM3VvpYsBQ2EBQhrFYyCrEd7bHkMNT7lkuT1CIGT0eniiMKF5r8lmI3JWDKejkDnDj-Xhk5FJ8GhKIpbUTqfbGoYpmRCvhXkXGlPv_225nceq7FJjLbP47e7d0Xyiw4DSfpY4-eLzFQ9Pk1A36sw6u-3kko-FOEWx9hgm2wFkgUn8W-VG60dkn-edy6xzzVBG60BpNBtFU566ckPtVMv0BVtr6rcyTSghwv2BY3iJ5NNQNYl2n9wzDxGAhvp8USAVfkkooBvzISbwUHFE5mdAujs-xyUaQ7JGGwZEP2gpj5UrhW1mj2FKEtuywYk_HW02qkLII8igNcPqbHSy2xKB-hjsaERItaiDeBZvhujagZOWVhYDqdA6MvgfHm9IC8Dx2T2TtZSb6HsTNABrbi3tcRLbiG93_egs5jCaeLvkgA0yxATUZNXirp1z83sRtolFWzJOKeurzUtbT8qSlTkelW7UmZGEblCO6egJM9Oz7e-L4QE8mosh=w988-h371-no \"Copy Azure Function url\")\n\n![修改 apiBaseUrl](https://lh3.googleusercontent.com/6knLBtYnBsO_4Q_JDPw8eeF1ndcFzBRIKrQPXxJY1XU-e_Dtcsf950sXVO5EDI6CsFwAcMyQ_C_noV8rIb-tWuQZaSVgYTV9-PAn8BHzHShn_8oP_nF3-ix7-6bTR_Zd8ABaSYk1mo3LN6bED7uxK0U9mTY36PF53UpWKF018lOsSezcpuouyeM_qF8TPOsuZ4T4t2V7QBc6NM8z5qXVC3uDLPUrQFQwfegIKE_8k5kPgHMxNTPOoVChCf1k4_YEIxQDJUvGdWa36rI789G10b0VHjzCQxS4vRROdTKJ3p2nNfhDd1LxTvsuUGUnIRvcK7wozQ5G0j8hsxCv-xQJ29dgQkG8nhM8RrBX4oz4Na5_169tKWRUIbIwsJQ55UugbqxpM3OC36-BmvxZ9s3cz9ROJ4cYCkKVnREJyXo4gGMFck_h0XYxJe94-I0LXQQ3A3uGATHqRgl_CcE-1xISolLp0mYvgKpOC6XuDiZH1tRGt0xSInHwnZYuMc59fBawXeiivDGkIjacRbbUsHKr0RLPQtb6eAW1MUyVpOVMhjTQlcNWUJ_Vbsy6VtprtIeolwbUQQSNgqRSemMaS_zPCH1djV1gG-94h_8wOcm_phJ8AkfKmN1elF_gB8WTMPFvs9etI30qy60U4zba4HU2tlFYE0OnoyGHOlvaHzjBSj4Pm7zHJ8Ben9tG=w2192-h880-no \"修改 apiBaseUrl\")\n\n2) 因為不同網域去打 API 會有 CORS 的限制，所以需要將測試的網址加到 Azure Function CORS 清單。\n\n![功能設定](https://lh3.googleusercontent.com/QrDuwqSA60bt68i0DoP72Ci94RwvCX6hbD_cjb-yYHhAzBboVJxMZzYIZ6lMgkZAlcv3wyBfBx9sqxwsnUpKwsB9HU8cmQiHCDEnHHLaf5ZsIe5rXI6x8yPAifMnei4xjnRoR5qBkTWoE4jw7gwIE7aDoQeu3VnWTLAndv0-N5nmdY5FoBp1h2ESAM6rvoYYdwxvyWJSJq_xaq43p-koGaoOlEyxfeiUuVGNfPadwjWg9mBAEXFNp2pBa84A4OOd6dfLX1Wzdm1cWgwRtzob9-bF1GZT8f7cj2hl2WMRdhQaP-itxxoFcSVut6uscXFkN1G93Yr7ckHLeiM04jqcMWUdf5IkAtfEInI9lDinK9gljEDCRe8xHCRewByz2Fbp6eSt_RA3RV6FqBi8-VaIuBn0aqlBvPrP7HC4lfFLqy3tdeh7T_afav5Cn2rPn6YuTn4eFGduKK6vvslTShwT208Nl7VE2I9-p9IF0Hndfty1uINjTWP66RRhvpBo40qFSNR95vDw2pGXY-QCEvZinXOk5-YK5RZ6-mmXxc-B5D7mjwbR6u0fiX58NaIL2Wce1hVkraoycTOg2Q1wN25L-OwN2zLmTe9KbwQJ3lqoTsAGuq_tGz-nfHWLpf9cXaqYX3YvEqwN2BwNAs6YKyYCnsR65zG5FlzgSM5UERmDd05BXpI7mnDlhLKF=w996-h574-no \"功能設定\")\n\n![CORS 清單](https://lh3.googleusercontent.com/Rp_UC6QBZeSOB_6j3kFgK-w9aZNOhE_oybskL2rkFZSdEFYrrfnylveIY0fX-wv3wODLHZyD8AOu2IUwYZebGn5Z7r_rx1jNg61SVDRhuXDYKoLpz7WTfCkcrlZqUx2iEyYJifDtSjDE8GtWehIa8QhwbX1Bvd5qV2vg3Ib5opXrbirNkPy_u-LACXcIrb2ppbRJgs18C9KQs-PY1EPOq3L0s82tpCNkDgGm7vXPVzxcof5zYRpF9VEWumxKadf5a080ALj2oqP6zmZsKJNQdLNzVr2xX8GU-n37TijB4G2masD6i1M6LcSxupOoO038I4nlYutuCUfAy4zp4VKB5xX6oFpX1cXePexfH0Lcdak1yjxSO9r53B_ZrbDC3GhG98V9YehQ7ONMzcy0-vEGyijB-D5mzP6FMgDt6qQHOBwgjOt2p7DOOfHv3em8Z08YVcjb0PJD1hLCI6L28CynDIhZKmtVFAYFJnJytd8938x7xdRJ1p4Y0QMZSBDlXj6nj7uEbRcC082NGv9Q4HCjARts7YVkriMl6mmpGcXg9SsBJhfZOLaPl9_eUP2hAu2dntZpSxg9gOVpoEK3yohgeaXLKAOgqH55KDiAikDyw5e_Waqbvz3LqbfT3wR-z5SkYjhaK9nz0pZ4p59cnOkWqu_81nqpMHdGn0quQokoh-nO7WNgfZyL-7RZ=w561-h592-no \"CORS 清單\")\n\n3) 一樣使用 `Live Server` 開啟範本，就會成功連上囉~\n\n## 把 web 放到線上 server 測試\n\n> 注意：剛剛上面都是使用 local web 測試。若要把 web 放在線上測試的話，需要在 Azure Function 設定連線變數。官網沒寫這段，害我鬼打牆了好一陣子呀～怎麼設定變數如下圖。\n\n![Configuration](https://lh3.googleusercontent.com/_aALFr19DSl7A3vekHZWLNC-DKSZhWp44BLPoujaLFiCL6MDn8sxVNKZvw3IKB9-OmwOoxCHSa-ltJurLIG83osiLAaZeTjJxj8AlFnJBt3uGR2tyegFXkdoyxKpa1gDW3dZdPICSsCPiN4KMTlYAzSBdNEQoI3RnOvtkoNqruCcVph5qICYnAfBkGywtdR-dJjTyKKfuW8RZaFEPcHqqGhg35nibhg1jei8wJflLVHtN48vFNcsrAuyfGnziyEGjj-VxPocDb9ofJEHR8uRnIjL9qUOB-zGb9TA1j7Pyo1tV9UkuczX1KWXCO_jsd3rp-FDCAQ2dcHoLc6y9OagLkJSqGC7EJkaccgCuu1HRmb7_woIrvnIO8k5iYbvsf4bO7af8IBLgA-OFR_YlQpIGsXwoc1PSu-rMCGAEzSkhHsDNmTaCpyO-L-YLB7Z3vCOkavIMRpDV1ZcnLYd8jQ5USusENO0bzOXZNo4-D6sPyGhpl9g92pOoQmJ8DRgaxAqTGRxItUpkNLBDudfi-4-jGM_IDbnRTyLlWW9hLx3FLjDfA2QL0-z2Plp0NRfh9qdegDb3Ym-fmKS71Wp2g0WsVxhNhfdf9pDYcAkBDKqNF9HpIlRuATIi_HAGFGJ0W9imvB0-q2gQ1AfS2_YOIvUTK0v1Kl3-OFJuLwZqbm2kL4d-Sei-CSUkhV_=w451-h285-no \"Configuration\")\n\n![Add Variable](https://lh3.googleusercontent.com/jeAfFyL52YQfyyvIpqgAMgrqCLGm3yBtZDYfH_VXbFExgRV2kTjgkj5TOad0fZ4EkwPYyKOfKrgajprSXSsqmn4Tdcp_73h5YRS0VBZz55ZoHE6_ojFZ7TmeAOnd7ONKRQFxzr5jRZEZd34eWwVahN9o9bZYgcBWpebxN0fIihVQdrf3a6meMzzLPRH1HVX8hXwXr_W0j3FKVAz2Lf2-cNa1Bni_eycfszIrU7XIf8fiVuldSBReqZgd5NtbSuiRJSPFIuCjg08_X9e2aCeeKYBfjuy9tS7c2V4f0gUk3CoC9W-Beyh3ueJ17TkIm0BhzbUqWt8y374DL7FQKr55GaHzz734aRkvVOQnUNeR6efL1KVcriTVDwNCbjuqovljM7_b7VvQtY9O766_F8R1TNMRz26z6sqN9QfFbEFGEBbmECjJbecN8VKb-gTZ_4qSqnHTyiI-UCzcWPddZkoZ1mRridVcnZexsEQ6TD-k7upFmprShkVX-MuP-QIjR6MPqS0QCiwTbzSLB6rwgXbdylDIh6oUlc-5PrpYBhetsdjEIKqIDQNKOkEngxCuZn50bixXooAT78orR4EatTwcd67ERYGRqJRB4KQOxSfHaJCuq9ut53NvM9lPxsPsO0f_kuFsYL46-sSodOnd2-CE2dtRUK-nrqejDhWL_9EdLwBTrlAM9Dqph-Yt=w989-h560-no \"Add Variable\")\n\n> 記得如果是線上 web 都要把網域再加到 CORS 清單喔～\n\n以上是無伺服器的雲端 Azure SignalR 基本安裝與設定，如果要玩地端的話可以參考官方[這篇](https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/signalr?view=aspnetcore-2.2&tabs=visual-studio)，那我們下次見～\n\n## 參考資料\n\n* [快速入門：使用 C# 搭配 Azure Functions 與 SignalR 服務來建立聊天室](https://docs.microsoft.com/zh-tw/azure/azure-signalr/signalr-quickstart-azure-functions-csharp)\n* [快速入門：使用 JavaScript 搭配 Azure Functions 與 SignalR 服務來建立聊天室](https://docs.microsoft.com/zh-tw/azure/azure-signalr/signalr-quickstart-azure-functions-javascript)\n* [使用 Visual Studio Code 開發 Azure Functions](https://docs.microsoft.com/zh-tw/azure/azure-functions/functions-develop-vs-code)\n* [教學課程：開始使用 ASP.NET Core SignalR](https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/signalr?view=aspnetcore-2.2&tabs=visual-studio)\n* [將訊息傳送至用戶端](https://docs.microsoft.com/zh-tw/aspnet/core/signalr/hubs?view=aspnetcore-2.2#send-messages-to-clients)\n* [SignalR Tutorial 16 - Coding Our JavaScript (Client Side) - Part 1](https://youtu.be/MK8n8pg9bLE)","source":"_posts/DotnetCore/Serverless-Azure-SignalR-with-C-and-Azure-Functions.md","raw":"---\ntitle: Serverless Azure SignalR with C# and Azure Functions\ncategories:\n  - .NET Core\nthumbnailImage: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUcAAACaCAMAAAANQHocAAAAYFBMVEX///9ZtNlRsdhSsthIrtb4+/2n1eldttrg8Pf2+/2h0efk8vjD4vBsvN1LsNe93+633O3v9/vQ6POAxOFyvt6YzuaNyeOHx+Lh8PfW6/Sv2OvJ5PGTy+Rtvd54wd+r1urKXpEyAAAGxklEQVR4nO2df2OyIBDHEzBNE7Vyzdrq/b/LR7f1rBUHHErWyefvVvLdAfcLXCwCgUAgEAgEAoFAIBAIBAKBxxDXadtujuvjpk3zeuqneUVWm+ptl0ScyR8441Gya8p2NfWjvQx5uU+E7HS7h3MhP5t1PvUjPj/psuBSJeGVlpInWTr1gz4zbZao7fAOJoOUEOVOMhsNL1LyUzn1Iz8f9ZJLhIjfSLYMu/g1q4xjTPHaKJug5IVVJtxU7OEiC67QF1VitbXANhmFdbJzdAr8uniLTGa/d2fDVezhy6kHMilp4r4w/kXuZhzkHPSRCw4211VytR1nTl+QzdQjmoR04DZ9Dy9m6Euu7QJpnJDz27crMbqKPWIz9cAey3LcpfEXOavdxpuMnUXOSEiPMnYWuZ56eI/i7GdtnJuQlU9r/BKynXqIj+DoW8bO/5lBjJhbTWpeDBIyIZ+SXFlFMaI8D/LS+Wnqcfpma6OPrBbZsGhHEs+jWYUxnYxDdSS+16R2k3oxXEfaS6TN7iGq/pODdWRvUw/WHzZFhJ8AebCOhFMWuYU2l/B4uI5REk87XG+czNr8T9eMoCMjmh9fm/fq32TNCDpGgmZYkxgHfpU8HENHvp1wtN6ojCXW69RhI9RIAbSYqqDoRMZGc/yTgY0BVnV+rN4SSykJhofGbBkqkZ1XJ5vaN0HfxzRqdGElbyzaTskZZGkwR5ck9iozTm9JrRC704/XsTpVbw2+FP8YeRwT0+rH615SKQ0WyWm1WHxohysGVKbyQrtKsmq8QUxPrF0dBxb49lohk5GG8BSsdTqK48Bvb3SLhqQUHOqqCSOUm3V9BYxQhaHWyDjYGnsaWEi+G+H7nwTNtB6yxVyhMXhGZ2LDu7UcwxoXfTkX1pHOjg0OcpRJ/UULmjwnU6gBWyjGssYeOGHJx/uRaYGWx/GssQc0ejKeD7A8jmmNC81mxqj08RVKHdnYyWr1z3Tzmki9awVNOOZA9PmxBjolQIMk4kG+j3X27du6uIyWaiWhPyFSyN6M3jjKIuWaAG3ZRNpKD6Pa4zfKoBzyIYkkxZvxD251PpPCIqGghkjj/ZsPHaNIseid1J9kh8cP2gPA6AaiOrm+VK8gLHv8oD3w6cceFQYJHIUg4kCa+3qcUNT4gWoajUyFuSHFDcVsrQEdSfRLxX5kVKkTA4mloKOOz7ufWgE6kuhOiT1tM4qwGdIx2KMGvr/7Kdo6+tpn7r3rd2CfuVf8FfGkoyJqBjIiRJqlDK1mriiyikDTFBE/fOtFRlWrLVDAINJS4SVPoTz2Bhy74zSu/gCyB8NkLBQ/VAMfljS6xLXNZm7IrapUAPVOE+lMsTosjIEL9YIHNvnQ6MkF64U2kt1XDGUCXC0MZCmiSLUGvCLuDiTfnZc3lClU/YPWYSJu+GKxd57YmB0CjD+JlBVsThZCYJq7K+i/RWS7Nh76gOEIS4J7fgWNNgDTaQWdjoiNFvT2+X2e8lVxjAwxdRW4aYNItbDHsaMCcXwaCmUidcfAi5I6TWyO8Pt0V18QusjH6dY3xEliTSqEjPfYk7lMbG69z+ruBRq563daXCa2ffZVcwqpWx59juvhOExsbtttp70Wn0YvxX8O+NDQsujc6i+UJLRb9+hOGKqxa1qMM8NL+qjkei7giws231qa3rvC6RyK+yZFxtgWtam4NL9KicxZrv8gq6/GWkCaJWYngEil8Br4IKXSjjTe86puq49I2CwUnFAscwFlkPD7tuoi4YLbrbYkby7EGaQEU491ZL9lETRHq2s0rxCgkPnw/8VLk+OCQ1jI2q5wRs53vIC8G1NjkVZCkqnL3ILthJRn6JtsLJJUwuwv2IIX0DexsBKSos9zoUHmIQcISfv9Utj8mQCLVAYhCc/qHmyYrbNIvY5UitYA6JdKuVmkdRL4ZUEn0FzWSEEtXaYAffxVgFEyJOQs3phrGY1cC4mc2ozEuSMjtWW2xsa+VEKSjQdveccXaxBC8oKwA/4XfMe4vZAzkrELEL0JOSsZ/Vkk2xH3v2/JEVntHyHB05a/Qsp57NTX1Pr7052EFLSaUCx5w4aIEpTpW0iidQQjpVXt1NIiOee0WnkQvGPnts4ilUcOZ0L8gcyjaYR85HM/HxtTp9OtkLTzswM427xoKwhppt6jNm4WhIRoT5hlciZpMSfaHWJ2E69hDSNt7NOSNC7Q80V9iGxfORqE1JNmhc385gJzonie5NVJ+yZcJkWSHWeVZHQl3iz3RSQYu14xOe8UZMkp2wQNMdRpeW72pyLpKXbbfXNYp3XQMBAIBAKBQCAQCPzyD//kVoYOpPZmAAAAAElFTkSuQmCC\nthumbnailImagePosition: left\ncoverImage: https://i.ytimg.com/vi/Dvv2hkXyHcg/maxresdefault.jpg\ncoverMeta: out\ntags: [.NET Core, dotnet, SignalR, Serverless, Azure Functions, C#, VScode]\ndate: 2019/09/10\nupdated: 2019/09/10\n---\n\n第一次接觸使用 Azure SignalR，順便玩玩看雲端託管的服務，那我們就來開始吧～\n\n<!--more-->\n\n因為我習慣用 `Vscode` 開發，所以下面說明都是以 `Vscode` 為主。\n\n## 安裝環境\n\n* 安裝 [Azure Functions Core Tools (v2)](https://github.com/Azure/azure-functions-core-tools#installing)\n\n* 安裝 [.NET Core SDK](https://dotnet.microsoft.com/download)\n\n查看 Azure Functions Core Tools 版本\n\n```\nfunc --Version\n```\n\n查看 dotnet core 版本\n\n```\ndotnet --Version\n```\n\n## 登入 Azure 建立 Azuer SignalR\n\n* [Azure 入口網站](https://portal.azure.com/)\n\n新增 SignalR service 如下圖設定。\n\n![SignalR 設定](https://docs.microsoft.com/zh-tw/azure/azure-signalr/media/signalr-quickstart-azure-functions-javascript/signalr-quickstart-create.png \"SignalR 設定\")\n\n> 注意：這篇介紹的是無伺服器的方式，所以 Service Mode 要選擇 Serverless。一個 Azure SignalR 只能選擇一個 Service Mode，所以傳統的 Classic 方式和 Serverless 只能擇一，兩者不能共用同一個 Service。\n\n## 設定 Azure Function\n\n1) 開啟建立好的服務，複製主要連接字串。\n\n![複製主要連接字串](https://lh3.googleusercontent.com/ebUg5MNe8j6YLI5O56lihd2NTFy9SHkFwW0WZdZnz25HzlKWkEpveUnMpfw9Og1Mkm2wPnqATYzpizjHtt6onCppsz7kRYnrXE-DRBapeoxUwNJLvjKR7O8nkZzNVu37tdUtRXIqFCluv42EXrrKaCQbWRKEfsSFsotts0AnmxXqpyEjB7gKkDUngv-Si0OX8UAy4nH2t5oc1uJumiSBkucK4djsxN_QQVLuBjXlFlzN1-lNt6x3j-KlraBvkCf7J9wLB7cp1_lOMldLoK6bG5ixiKebGTJly_gfZ9J4HN2JF0OCPP87eI4QsGlVPprfTGwgw6swCJaO4TiodAj0zzgPq8SX6qmCE7fS7-1gSDLK1hzTNedZ5EzcCTblltvhdsOuxgSJFc464UYaYcTfcwzZ3377cg9jzGa4ijNRdFRGHYQbvdssgoMuxA8_gRV3qmtsssBOQzKhRwFriUOcR2Mk2RnJEzCknPvIhDDq_aDuO0DJvUr18p4zLV3IK3gdawQtusInwbLdySAFB6VGiKoPK2xP6IJA1RYGUIWx3a7uEqX3KPpI0OjVY5lORd_rtCzv2m69xRSB_ygGXHYVt1_Mr_MsI-vVbpOzZtPob9L3BljtzaWXYBaDaFMeFGVKKhTHR_Gv9i12qfSZCi1j9pffRE8uAVRTmJVYozGlhqffUtNkUHxaDsO2=w1035-h483-no \"複製主要連接字串\")\n\n2) 複製官網 [sample](https://github.com/Azure-Samples/signalr-service-quickstart-serverless-chat)\n\n3) 進入 `src/chat/csharp`。 將 `local.settings.sample.json` 重新命名為 `local.settings.json`。 將連接字串貼到 `AzureSignalRConnectionString` 並設定如下。\n\n```json\n{\n  \"IsEncrypted\": false,\n  \"Values\": {\n    \"FUNCTIONS_WORKER_RUNTIME\": \"dotnet\",\n    \"AzureSignalRConnectionString\": \"Your connection string here\"\n  },\n  \"Host\": {\n    \"LocalHttpPort\": 7071,\n    \"CORS\": \"http://127.0.0.1:8080,http://localhost:8080,https://azure-samples.github.io\",\n    \"CORSCredentials\": true\n  }\n}\n```\n\n> 注意：Host 的部分是在 local 測試時，為了避免 CORS 的限制所設定。請務必將 local 要測試的網域加到 CORS 的值裡面。\n\n4) 開啟 Functions.cs。 官方解釋如下：此函數應用程式中有兩個 HTTP 觸發的函式\n\n* GetSignalRInfo - 使用 SignalRConnectionInfo 輸入繫結來產生並傳回有效的連線資訊。\n\n* SendMessage - 在要求主體中接收聊天訊息，並使用 SignalR 輸出繫結來將訊息廣播給所有已連線的用戶端應用程式。\n\n5) 啟動 local function 測試。\n\n```\nfunc start\n```\n\n![local function 啟動](https://lh3.googleusercontent.com/3504Bocz7haQ3JPmdJwqa2XwHdc_EhIQpmtPqtOftqxaQUK5qLHeVAaSz9JNWpEhD7ezP81kEeq6LB6Loa2aL5OIYYWVjjA4GwibWVIl_pbw_BAN9IyZfTBBvmE9Vz-NRljNw1h-6deKZJZLgWT57tKi5I1ml_PwuOFGL0fh1PHbrPq6VC8YyVchEb4l0OdFYdpFz2h14pJMmelh0jV8M7lqQrIY4aK-lN0ttAn01wQZWh7nnXO-aVhFxYVdI6_-SKoDsu2LnFscOqb5QohvLZkFF3FzgPzRqraWwE4F-KRgXrfk1JPrh0r1qB0yAtu0VZfdbwk1PSXlhnabxHVn6_F0Z6pfrcaASFIkQHzrIonsxwPQm40_W5_BJvRxWCxVHQJed5--C4226IoeDXHRu3jevGzWButrAGJq0s9bCDzrmDg_u9MNKP4klPgZDmmLVfOrqZXAIOhrXmiEOvUSPdUXnIyOOzo0mtU7sFyqmf3UnCk7afZQ3uR8gxGhTSEBsVSl743Csc2-Xp84PJ4xWsmwxfi5vxrPRv3NVO5LQ6v5GB_vx49YCqaxJjYv5tZ9Fd_Hq_2S4MhASR5fSGzD_TzReNfs7p0KM333949JNKUb-e2-nLCkwxdHS0Yk-AZKQ70M-bZTUVu3HElg9UrkfqpdMyu4LtzbiimLqIOGyekCOD3FqShQ8r9q=w2206-h1378-no \"local function 啟動\")\n\n## Local Web 測試\n\n1) 因為瀏覽器若打開 html 頁面會預設使用 https 處理。所以為了避免 CORS 限制。請安裝啟動本機的 http 伺服器。 [Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer)\n\n![Live Server](https://lh3.googleusercontent.com/91mzygWcGmu3ljW09OLhtTAfv2Ugb589jczgciy3mOSuWbCUBjOAeN2BUA-MgYWzRbaoXFWwIqoUHqzcykEA4Aw4odpSHDSboaTWxYYpnTT8CmclxtK9t2HYZWUF4HlUKk806h8Jhq3iup2I414hAKpWCtcKgPidv64aPwucq3GYS_ZKsTXudLB7MIfK0wZ_yR47MscN_9ne6KDJvzv3EU4T-1XNMJZdu6ISqzgrUUCgIh-hnUHeSUH6Vy0M1Kc4rNDjBnp14xLA899OhmeZJiB5xQ5UKbv9Icf-dT3yW7qQRSgxWnMvMWgyle_DdmFSYwLJTqMjLaCnBF_LZiS1bJMfDcuctigjp3lqhy75LDcVssUs55sG_8qmd6zgY1A1PVeEbc3faMfQwM9ANDRZA4GAPLFTVYfsp5wVR6cCkYc6tehN7Q1D2DhTrgoJCZ55r0-9nsG-uA11nh5Lmy9Fe7TmPMceVqZXWYYqdP8Q35UHa8Kgq54dfYLjJ2PLOisuHzurd-qQes4NQfhCvsnsXW78VL-UsaW29tFMS_7k7_NH4X9DFNP7oUBsv87ISO_kpm0VWAylbsilxbLT8n5xa57q3USTJuBR5e6DYixRM0L0K_ElogvfiC2TMmYg_F4M5j_Fmg-VoPrxzIt4u6CQ9sNJ6ExcujX0ZEth-aiguKyQNlK2xBs2x9L8=w1908-h938-no \"Live Server\")\n\n2) 用 `Live Server` 開啟 sample html 範本 `/docs/demo/chat-v2/index.html`。\n\n![開啟 sample html 範本](https://lh3.googleusercontent.com/AgiqJicbCJPOqOd7krSCj4eoQulKtewUr71Gs67h-Z3PWiWpQT3hUguVvqQ_Wbsg82SPMZ6Cq5BC9BLN-YkgZQTf1l7JRwd3k5l0yfztgG3Mb_rRUps_ozF1ebzft2z4rst0i4xcEdY453CtVWWHIfkpl6iGgAdDptdUUDfeWvytYg8LEZX-Z9mpkyXI79oI3sYcXVgloKf0FH3ArfwUquBNNwQEUano4e7PPOcYkvXP3d0v9eO2JvayxYfc-c3WSSHEj4rPbx6SvlbZa8O4-0Q_x-rDQuLEoa7u7kCrBnIdaw0xbRxRBhPiGGxbYUJ_s3dBstI4DKzDt-wyJyKBwwV8K5zhfy5wwx4E4grg9NVZf9dp0l2-DDoh7zjHBLCpgLU1-YdmLKp47cmwxLPA7-FnloIsldbLrBS7hv3OQAfDMEb9o8_MQb_44ELsklUVY6wSo6rY894Ew5Wmu24CBd5UbjnO_vjOvvtKNPZKrnDmvnqmofS0x1Kk-Qzy5qKgZ4M3xXt8NAwGm6qa2Xi2vTZhKwy-ApKzBz-VqaOE1VWNW4cCgUZCh00MBeYxWSCdeJOrQlHgkW_tP0zuBBZFxu88siuX6ZTxq3mpVNa7bENEjPJjCSpxMXQemG-CqhQCnGZJTBkSUArTNUSNRDaQ4jixziHJURlhdZlS04s0MGEjPgsLJGM_RKkR=w2206-h1378-no \"開啟 sample html 範本\")\n\n3) \b自動開啟後，務必輸入 `apiBaseUrl` local 測試為 `http://localhost:7071`， Name 也是必填，請輸入聊天室的使用者名稱即可。\n\n4) 成功之後就可以輸入訊息測試。並能多開數個分頁，測試訊息的接收是否正常。\n\n![測試訊息接收](https://lh3.googleusercontent.com/PYziZWr5t2kOAe9sp4dAJ7f9RmUy-MVlPhZqyus33kJyLQIj61CocH4Rdj955TFA1SVQXZlsSqDhZtafBG5Z25vcLlq28mHCp8OnbxOqh65P81rNFxOH56SfUkJ91ha4KPI8ZHzzSk9zArbDgBNE9iM9NjTZ97lsDsbyO9kuqLDpuj2emQ1r9ak9iRLQXAotahmAelkr2dUiLCsbCphjQHX_fZA9k9KAsAmt2Rq7s5eBTqoHr_V3ZPHemP8QHJg41cHBMfLMwxaKKxqh7PtubOq33yRamyEsrFBfEi8mWAPfLTYmJbGD0izpZEuG1fhBamxoRt175Tgjv6qEIrwakqNQyBn_LnRoQCXYsntJ0XaWDka9yM1Vk9g4zeXp9Jdus09p3Gyj_ACYL98ESUffg8ifDiOPy7cAeFje9dM_FG3bQMtNBLn6Rq8BXXOcERuYUunQsOyalskX_8rnrfvDFGNm9I7Lm5y-wUMw59DmiuvvZsftTtM8lzhLKJDPziD1a_r13RhjLlBo1vfXM0Iq8dsGGe0G4KbinGq4kLIIx0rjg_BDDRQwQUThCUzpOVkYzkKPr7zyFTilAaZAsOeF_k54MrnLVq0sBPCUNN2EYUxI-mzWuhEtNIOzY4K-tmP1AtljaQeVRYnuDp-mMbmLfPW-2PiSf7iSlu6B03DhIpS3EfbFHW0xKEUH=w2532-h1246-no \"測試訊息接收\")\n\n## 發布 Azure Function\n\n* 安裝 [Azure Functions](vscode:extension/ms-azuretools.vscode-azurefunctions) 擴充功能。\n\n![Azure Functions](https://docs.microsoft.com/zh-tw/azure/includes/media/functions-install-vs-code-extension/vscode-install-extension.png \"Azure Functions\")\n\n安裝完後請務必重開 VScode。接下來我們開始發布 Azure Function。\n\n1) 請務必確定 VScode 只開啟 src/chat/csharp 中的 csharp 資料夾。\n\n![csharp 資料夾](https://lh3.googleusercontent.com/F2CzlCEtvEpCrmw7V_8x9zWfv-OYRpzWj18QN-HL_WfF6s3XCH8u8FW8QStEVeNvXCI6PDmPNKPdLolL8Vlh5EvtSYJvuYRpCADBrALiZIy510xQPTNSl4vZAiwWfFu7IXTGn9sIINa8YVH_ya_KRfkSX3-_5EvsFNJOwyQna6Itv0IaqDKpR2-TEOADt1-FN73D1WyTINzPcd3xS2IYk5EKJrloZPO1Jbj3ZlXxpvahgExMM5uxUZOR4X49neuWpuyIjxVzjdAKvY4ADg2W5cdBvQG-b02xAer7yQ6k4gB15eI3_d98HWArt-FDrMwt5EP9foIFU-dBT5V4B-C2-woI0MejtaK07QNZ082ahzsqV7odBCUVH2u3laLEVGzFRhAddf1DhpDobOQhk4-IB3XG7kYiRiWXr4lco1JTCYTDhy-TxgyHSpUsyMxtb8f--kjdQ5y1IF_uGQDRhF7dFhEUKImOFRj1Kc7sypo4uMS07dQAvFm0Nt7G5xX-IE8QOKjmgNrvOypegpsFswjQ_RDyd0YuT21ioMs4oogu8qEdanhGBc_9-lmbxa3Pfe_P2RauuKrczEJ2zIZlahNBP_e3CsPQqy1B5FwtWWk7Aej0GkqHLwJ7HmTi4oC6cH0fXQzz2ATYuSKg0VsPPeh5PGAbLsQZDZIipl1ScojTL07PltVv9ZDBYVwn=w916-h898-no \"csharp 資料夾\")\n\n2) 從擴充功能登入 Azure 帳號。\n\n![登入 Azure 帳號](https://lh3.googleusercontent.com/3ycoKSgCD3L5bhujgJ_qsAaR7iEmu-cDzoi3GceJ4nRtwqz9Sh9ZCNXXQ8nvcuWIUgm4mezj76JL3t3dy1lSdIi-74oqXPTDQYxol0-kaSbF5YTSgsdGI2wgSe_TN4g3UToGBBZdBHrGl9Xw784YIbzI2oFFgQ5FGaH2v3-1JkYpHJB1tde5NdND30pRpnwrbFzotRiyxOyt6lBDlWxuBbSpfIDISQa8Ya-sO79Z8r8cl2RMywRmX3WLVBI3OKVl9Gvi5OJuWmoRyb6jIfeBAWM8i89h5rwdEpCVkXvZO1BlxXRnIrp3Bo4u_EMLkC3VZb9G2KNlVkXgVel-6dL9IqoJ8oVPvorFZMV_sgZwW2_C_D6TH_1SsOs3OVlVT8lwoRjY4RGDJbaQzi7QtfZXfGk5--aTvDw7AV25IP0grR_qAt9X2_SmU4tjEWcjTYN6wG6a6FrQsRhbLhhGC1QOdD1NhyMC-tXZhz9XXuwKyC58CHc_ebYMGogv1PUuqhEy0wMrtKKtC0ZxhGZmH52BcjBrp0fIkp5JJIOeaiZelgAQLJ5-PpAvyY4OpDmSUnJle6hKAHFh6UmCFAu3v1bK4nS0zILSiPobyLEnwrkMbHAJzr44wOMTSVQlsa0ogK5GqER5NNRCACJ-61ztnUEEvdLGN3AhkWmQiCk2ya0YEECjl0LeXGuHk72f=w463-h431-no \"登入 Azure 帳號\")\n\n3) 選擇要發布的地方上傳。\n\n![上傳 Azure Functions](https://lh3.googleusercontent.com/g-Un1PRQE8Npznb4Hhi9gK6Doc7h4nunpZA3zKMEypcb5j5Ks54x20lEc2UeRykR532VeixY7u11THtW9HeALTz47SUBzzvE6vYzKZxg56VCa8GugLdxRDxvkDu0x6rZvvilshkKnPhsaNCsWEM2IkWSR3Nj1ctjhoGhn0gjjCTPz63muznRew9qqt87p-4ozb8EVNuHwIkJpCvG99uRGQ5L7cdaL6rS-CMmnJUB4EjyM15NeVCKJRpeiYJHkRnvuO_OhqLRhAVYRNtiFywIfnSviMhR1TU9XHYkq-IzS2V8cJ0FRw5u1FE9sF1BE3tjFNiuGiogDdVZ5X4JaGenHgYQU6TrACnF0I6xkHdC9oKXzXvaDgrQGos5UjNytVJeikB6DhCo0afU5vz1Qjtdn8sNRWqEAJvFAfYzVjDNtLgESZQ-ADAE099ID81UPDTnzbVYjZA8zCBkBZUNwQQOplIK-Xft_6cCFQtcsZx-ReUUJnma0MuhTd866gyM4_07eadyJ3ahZAQCZG73AvpUzxRIUsRpgjJ_-lGeEumg_CMxbF0QdEbvZfxriX7azPOitHPKC8YuXhcMAAmmD_3IEpp_VAVyadbRHWBzPtRvS8pkuMN2mFDlY1Kkabuwo5gvHF1FE9PyNodyni6pMPIJ4d2OOT8UO_5e_26Pjxsp5FOnO1nKbV5UPRqy=w916-h402-no \"上傳 Azure Functions\")\n\n## 測試連線上 Azure Functions\n\n1) 拷貝 Azure Function url，將 html 中 `apiBaseUrl` 改為線上的 url。\n\n![Copy Azure Function url](https://lh3.googleusercontent.com/H_G9dyo8H_V-04HnuKLeYz_RIzpELVQEeIU2Oss1BgV4kb0ih2rs2ihnSG5V4cBpF27Bhuax9uA3jrh5jzi4NXG3xJR8g16s8Nksmlp7Q5zbI6JBkepAhstRwqkBhFiTtt2jAwGlTnWy1TXkPOqzjD8ejAxMDZYuR1Tsrrw9lHCxdicNe233wUwB_9T9Rj7CGP3SM3VvpYsBQ2EBQhrFYyCrEd7bHkMNT7lkuT1CIGT0eniiMKF5r8lmI3JWDKejkDnDj-Xhk5FJ8GhKIpbUTqfbGoYpmRCvhXkXGlPv_225nceq7FJjLbP47e7d0Xyiw4DSfpY4-eLzFQ9Pk1A36sw6u-3kko-FOEWx9hgm2wFkgUn8W-VG60dkn-edy6xzzVBG60BpNBtFU566ckPtVMv0BVtr6rcyTSghwv2BY3iJ5NNQNYl2n9wzDxGAhvp8USAVfkkooBvzISbwUHFE5mdAujs-xyUaQ7JGGwZEP2gpj5UrhW1mj2FKEtuywYk_HW02qkLII8igNcPqbHSy2xKB-hjsaERItaiDeBZvhujagZOWVhYDqdA6MvgfHm9IC8Dx2T2TtZSb6HsTNABrbi3tcRLbiG93_egs5jCaeLvkgA0yxATUZNXirp1z83sRtolFWzJOKeurzUtbT8qSlTkelW7UmZGEblCO6egJM9Oz7e-L4QE8mosh=w988-h371-no \"Copy Azure Function url\")\n\n![修改 apiBaseUrl](https://lh3.googleusercontent.com/6knLBtYnBsO_4Q_JDPw8eeF1ndcFzBRIKrQPXxJY1XU-e_Dtcsf950sXVO5EDI6CsFwAcMyQ_C_noV8rIb-tWuQZaSVgYTV9-PAn8BHzHShn_8oP_nF3-ix7-6bTR_Zd8ABaSYk1mo3LN6bED7uxK0U9mTY36PF53UpWKF018lOsSezcpuouyeM_qF8TPOsuZ4T4t2V7QBc6NM8z5qXVC3uDLPUrQFQwfegIKE_8k5kPgHMxNTPOoVChCf1k4_YEIxQDJUvGdWa36rI789G10b0VHjzCQxS4vRROdTKJ3p2nNfhDd1LxTvsuUGUnIRvcK7wozQ5G0j8hsxCv-xQJ29dgQkG8nhM8RrBX4oz4Na5_169tKWRUIbIwsJQ55UugbqxpM3OC36-BmvxZ9s3cz9ROJ4cYCkKVnREJyXo4gGMFck_h0XYxJe94-I0LXQQ3A3uGATHqRgl_CcE-1xISolLp0mYvgKpOC6XuDiZH1tRGt0xSInHwnZYuMc59fBawXeiivDGkIjacRbbUsHKr0RLPQtb6eAW1MUyVpOVMhjTQlcNWUJ_Vbsy6VtprtIeolwbUQQSNgqRSemMaS_zPCH1djV1gG-94h_8wOcm_phJ8AkfKmN1elF_gB8WTMPFvs9etI30qy60U4zba4HU2tlFYE0OnoyGHOlvaHzjBSj4Pm7zHJ8Ben9tG=w2192-h880-no \"修改 apiBaseUrl\")\n\n2) 因為不同網域去打 API 會有 CORS 的限制，所以需要將測試的網址加到 Azure Function CORS 清單。\n\n![功能設定](https://lh3.googleusercontent.com/QrDuwqSA60bt68i0DoP72Ci94RwvCX6hbD_cjb-yYHhAzBboVJxMZzYIZ6lMgkZAlcv3wyBfBx9sqxwsnUpKwsB9HU8cmQiHCDEnHHLaf5ZsIe5rXI6x8yPAifMnei4xjnRoR5qBkTWoE4jw7gwIE7aDoQeu3VnWTLAndv0-N5nmdY5FoBp1h2ESAM6rvoYYdwxvyWJSJq_xaq43p-koGaoOlEyxfeiUuVGNfPadwjWg9mBAEXFNp2pBa84A4OOd6dfLX1Wzdm1cWgwRtzob9-bF1GZT8f7cj2hl2WMRdhQaP-itxxoFcSVut6uscXFkN1G93Yr7ckHLeiM04jqcMWUdf5IkAtfEInI9lDinK9gljEDCRe8xHCRewByz2Fbp6eSt_RA3RV6FqBi8-VaIuBn0aqlBvPrP7HC4lfFLqy3tdeh7T_afav5Cn2rPn6YuTn4eFGduKK6vvslTShwT208Nl7VE2I9-p9IF0Hndfty1uINjTWP66RRhvpBo40qFSNR95vDw2pGXY-QCEvZinXOk5-YK5RZ6-mmXxc-B5D7mjwbR6u0fiX58NaIL2Wce1hVkraoycTOg2Q1wN25L-OwN2zLmTe9KbwQJ3lqoTsAGuq_tGz-nfHWLpf9cXaqYX3YvEqwN2BwNAs6YKyYCnsR65zG5FlzgSM5UERmDd05BXpI7mnDlhLKF=w996-h574-no \"功能設定\")\n\n![CORS 清單](https://lh3.googleusercontent.com/Rp_UC6QBZeSOB_6j3kFgK-w9aZNOhE_oybskL2rkFZSdEFYrrfnylveIY0fX-wv3wODLHZyD8AOu2IUwYZebGn5Z7r_rx1jNg61SVDRhuXDYKoLpz7WTfCkcrlZqUx2iEyYJifDtSjDE8GtWehIa8QhwbX1Bvd5qV2vg3Ib5opXrbirNkPy_u-LACXcIrb2ppbRJgs18C9KQs-PY1EPOq3L0s82tpCNkDgGm7vXPVzxcof5zYRpF9VEWumxKadf5a080ALj2oqP6zmZsKJNQdLNzVr2xX8GU-n37TijB4G2masD6i1M6LcSxupOoO038I4nlYutuCUfAy4zp4VKB5xX6oFpX1cXePexfH0Lcdak1yjxSO9r53B_ZrbDC3GhG98V9YehQ7ONMzcy0-vEGyijB-D5mzP6FMgDt6qQHOBwgjOt2p7DOOfHv3em8Z08YVcjb0PJD1hLCI6L28CynDIhZKmtVFAYFJnJytd8938x7xdRJ1p4Y0QMZSBDlXj6nj7uEbRcC082NGv9Q4HCjARts7YVkriMl6mmpGcXg9SsBJhfZOLaPl9_eUP2hAu2dntZpSxg9gOVpoEK3yohgeaXLKAOgqH55KDiAikDyw5e_Waqbvz3LqbfT3wR-z5SkYjhaK9nz0pZ4p59cnOkWqu_81nqpMHdGn0quQokoh-nO7WNgfZyL-7RZ=w561-h592-no \"CORS 清單\")\n\n3) 一樣使用 `Live Server` 開啟範本，就會成功連上囉~\n\n## 把 web 放到線上 server 測試\n\n> 注意：剛剛上面都是使用 local web 測試。若要把 web 放在線上測試的話，需要在 Azure Function 設定連線變數。官網沒寫這段，害我鬼打牆了好一陣子呀～怎麼設定變數如下圖。\n\n![Configuration](https://lh3.googleusercontent.com/_aALFr19DSl7A3vekHZWLNC-DKSZhWp44BLPoujaLFiCL6MDn8sxVNKZvw3IKB9-OmwOoxCHSa-ltJurLIG83osiLAaZeTjJxj8AlFnJBt3uGR2tyegFXkdoyxKpa1gDW3dZdPICSsCPiN4KMTlYAzSBdNEQoI3RnOvtkoNqruCcVph5qICYnAfBkGywtdR-dJjTyKKfuW8RZaFEPcHqqGhg35nibhg1jei8wJflLVHtN48vFNcsrAuyfGnziyEGjj-VxPocDb9ofJEHR8uRnIjL9qUOB-zGb9TA1j7Pyo1tV9UkuczX1KWXCO_jsd3rp-FDCAQ2dcHoLc6y9OagLkJSqGC7EJkaccgCuu1HRmb7_woIrvnIO8k5iYbvsf4bO7af8IBLgA-OFR_YlQpIGsXwoc1PSu-rMCGAEzSkhHsDNmTaCpyO-L-YLB7Z3vCOkavIMRpDV1ZcnLYd8jQ5USusENO0bzOXZNo4-D6sPyGhpl9g92pOoQmJ8DRgaxAqTGRxItUpkNLBDudfi-4-jGM_IDbnRTyLlWW9hLx3FLjDfA2QL0-z2Plp0NRfh9qdegDb3Ym-fmKS71Wp2g0WsVxhNhfdf9pDYcAkBDKqNF9HpIlRuATIi_HAGFGJ0W9imvB0-q2gQ1AfS2_YOIvUTK0v1Kl3-OFJuLwZqbm2kL4d-Sei-CSUkhV_=w451-h285-no \"Configuration\")\n\n![Add Variable](https://lh3.googleusercontent.com/jeAfFyL52YQfyyvIpqgAMgrqCLGm3yBtZDYfH_VXbFExgRV2kTjgkj5TOad0fZ4EkwPYyKOfKrgajprSXSsqmn4Tdcp_73h5YRS0VBZz55ZoHE6_ojFZ7TmeAOnd7ONKRQFxzr5jRZEZd34eWwVahN9o9bZYgcBWpebxN0fIihVQdrf3a6meMzzLPRH1HVX8hXwXr_W0j3FKVAz2Lf2-cNa1Bni_eycfszIrU7XIf8fiVuldSBReqZgd5NtbSuiRJSPFIuCjg08_X9e2aCeeKYBfjuy9tS7c2V4f0gUk3CoC9W-Beyh3ueJ17TkIm0BhzbUqWt8y374DL7FQKr55GaHzz734aRkvVOQnUNeR6efL1KVcriTVDwNCbjuqovljM7_b7VvQtY9O766_F8R1TNMRz26z6sqN9QfFbEFGEBbmECjJbecN8VKb-gTZ_4qSqnHTyiI-UCzcWPddZkoZ1mRridVcnZexsEQ6TD-k7upFmprShkVX-MuP-QIjR6MPqS0QCiwTbzSLB6rwgXbdylDIh6oUlc-5PrpYBhetsdjEIKqIDQNKOkEngxCuZn50bixXooAT78orR4EatTwcd67ERYGRqJRB4KQOxSfHaJCuq9ut53NvM9lPxsPsO0f_kuFsYL46-sSodOnd2-CE2dtRUK-nrqejDhWL_9EdLwBTrlAM9Dqph-Yt=w989-h560-no \"Add Variable\")\n\n> 記得如果是線上 web 都要把網域再加到 CORS 清單喔～\n\n以上是無伺服器的雲端 Azure SignalR 基本安裝與設定，如果要玩地端的話可以參考官方[這篇](https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/signalr?view=aspnetcore-2.2&tabs=visual-studio)，那我們下次見～\n\n## 參考資料\n\n* [快速入門：使用 C# 搭配 Azure Functions 與 SignalR 服務來建立聊天室](https://docs.microsoft.com/zh-tw/azure/azure-signalr/signalr-quickstart-azure-functions-csharp)\n* [快速入門：使用 JavaScript 搭配 Azure Functions 與 SignalR 服務來建立聊天室](https://docs.microsoft.com/zh-tw/azure/azure-signalr/signalr-quickstart-azure-functions-javascript)\n* [使用 Visual Studio Code 開發 Azure Functions](https://docs.microsoft.com/zh-tw/azure/azure-functions/functions-develop-vs-code)\n* [教學課程：開始使用 ASP.NET Core SignalR](https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/signalr?view=aspnetcore-2.2&tabs=visual-studio)\n* [將訊息傳送至用戶端](https://docs.microsoft.com/zh-tw/aspnet/core/signalr/hubs?view=aspnetcore-2.2#send-messages-to-clients)\n* [SignalR Tutorial 16 - Coding Our JavaScript (Client Side) - Part 1](https://youtu.be/MK8n8pg9bLE)","slug":"DotnetCore/Serverless-Azure-SignalR-with-C-and-Azure-Functions","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74r001dtudh551d542u","content":"<p>第一次接觸使用 Azure SignalR，順便玩玩看雲端託管的服務，那我們就來開始吧～</p>\n<a id=\"more\"></a>\n<p>因為我習慣用 <code>Vscode</code> 開發，所以下面說明都是以 <code>Vscode</code> 為主。</p>\n<h2 id=\"安裝環境\"><a href=\"#安裝環境\" class=\"headerlink\" title=\"安裝環境\"></a>安裝環境</h2><ul>\n<li><p>安裝 <a href=\"https://github.com/Azure/azure-functions-core-tools#installing\" target=\"_blank\" rel=\"noopener\">Azure Functions Core Tools (v2)</a></p>\n</li>\n<li><p>安裝 <a href=\"https://dotnet.microsoft.com/download\" target=\"_blank\" rel=\"noopener\">.NET Core SDK</a></p>\n</li>\n</ul>\n<p>查看 Azure Functions Core Tools 版本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">func --Version</span><br></pre></td></tr></table></figure>\n<p>查看 dotnet core 版本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet --Version</span><br></pre></td></tr></table></figure>\n<h2 id=\"登入-Azure-建立-Azuer-SignalR\"><a href=\"#登入-Azure-建立-Azuer-SignalR\" class=\"headerlink\" title=\"登入 Azure 建立 Azuer SignalR\"></a>登入 Azure 建立 Azuer SignalR</h2><ul>\n<li><a href=\"https://portal.azure.com/\" target=\"_blank\" rel=\"noopener\">Azure 入口網站</a></li>\n</ul>\n<p>新增 SignalR service 如下圖設定。</p>\n<p><img src=\"https://docs.microsoft.com/zh-tw/azure/azure-signalr/media/signalr-quickstart-azure-functions-javascript/signalr-quickstart-create.png\" alt=\"SignalR 設定\" title=\"SignalR 設定\"></p>\n<blockquote>\n<p>注意：這篇介紹的是無伺服器的方式，所以 Service Mode 要選擇 Serverless。一個 Azure SignalR 只能選擇一個 Service Mode，所以傳統的 Classic 方式和 Serverless 只能擇一，兩者不能共用同一個 Service。</p>\n</blockquote>\n<h2 id=\"設定-Azure-Function\"><a href=\"#設定-Azure-Function\" class=\"headerlink\" title=\"設定 Azure Function\"></a>設定 Azure Function</h2><p>1) 開啟建立好的服務，複製主要連接字串。</p>\n<p><img src=\"https://lh3.googleusercontent.com/ebUg5MNe8j6YLI5O56lihd2NTFy9SHkFwW0WZdZnz25HzlKWkEpveUnMpfw9Og1Mkm2wPnqATYzpizjHtt6onCppsz7kRYnrXE-DRBapeoxUwNJLvjKR7O8nkZzNVu37tdUtRXIqFCluv42EXrrKaCQbWRKEfsSFsotts0AnmxXqpyEjB7gKkDUngv-Si0OX8UAy4nH2t5oc1uJumiSBkucK4djsxN_QQVLuBjXlFlzN1-lNt6x3j-KlraBvkCf7J9wLB7cp1_lOMldLoK6bG5ixiKebGTJly_gfZ9J4HN2JF0OCPP87eI4QsGlVPprfTGwgw6swCJaO4TiodAj0zzgPq8SX6qmCE7fS7-1gSDLK1hzTNedZ5EzcCTblltvhdsOuxgSJFc464UYaYcTfcwzZ3377cg9jzGa4ijNRdFRGHYQbvdssgoMuxA8_gRV3qmtsssBOQzKhRwFriUOcR2Mk2RnJEzCknPvIhDDq_aDuO0DJvUr18p4zLV3IK3gdawQtusInwbLdySAFB6VGiKoPK2xP6IJA1RYGUIWx3a7uEqX3KPpI0OjVY5lORd_rtCzv2m69xRSB_ygGXHYVt1_Mr_MsI-vVbpOzZtPob9L3BljtzaWXYBaDaFMeFGVKKhTHR_Gv9i12qfSZCi1j9pffRE8uAVRTmJVYozGlhqffUtNkUHxaDsO2=w1035-h483-no\" alt=\"複製主要連接字串\" title=\"複製主要連接字串\"></p>\n<p>2) 複製官網 <a href=\"https://github.com/Azure-Samples/signalr-service-quickstart-serverless-chat\" target=\"_blank\" rel=\"noopener\">sample</a></p>\n<p>3) 進入 <code>src/chat/csharp</code>。 將 <code>local.settings.sample.json</code> 重新命名為 <code>local.settings.json</code>。 將連接字串貼到 <code>AzureSignalRConnectionString</code> 並設定如下。</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"IsEncrypted\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"Values\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"FUNCTIONS_WORKER_RUNTIME\"</span>: <span class=\"string\">\"dotnet\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"AzureSignalRConnectionString\"</span>: <span class=\"string\">\"Your connection string here\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"Host\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"LocalHttpPort\"</span>: <span class=\"number\">7071</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"CORS\"</span>: <span class=\"string\">\"http://127.0.0.1:8080,http://localhost:8080,https://azure-samples.github.io\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"CORSCredentials\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>注意：Host 的部分是在 local 測試時，為了避免 CORS 的限制所設定。請務必將 local 要測試的網域加到 CORS 的值裡面。</p>\n</blockquote>\n<p>4) 開啟 Functions.cs。 官方解釋如下：此函數應用程式中有兩個 HTTP 觸發的函式</p>\n<ul>\n<li><p>GetSignalRInfo - 使用 SignalRConnectionInfo 輸入繫結來產生並傳回有效的連線資訊。</p>\n</li>\n<li><p>SendMessage - 在要求主體中接收聊天訊息，並使用 SignalR 輸出繫結來將訊息廣播給所有已連線的用戶端應用程式。</p>\n</li>\n</ul>\n<p>5) 啟動 local function 測試。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">func start</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://lh3.googleusercontent.com/3504Bocz7haQ3JPmdJwqa2XwHdc_EhIQpmtPqtOftqxaQUK5qLHeVAaSz9JNWpEhD7ezP81kEeq6LB6Loa2aL5OIYYWVjjA4GwibWVIl_pbw_BAN9IyZfTBBvmE9Vz-NRljNw1h-6deKZJZLgWT57tKi5I1ml_PwuOFGL0fh1PHbrPq6VC8YyVchEb4l0OdFYdpFz2h14pJMmelh0jV8M7lqQrIY4aK-lN0ttAn01wQZWh7nnXO-aVhFxYVdI6_-SKoDsu2LnFscOqb5QohvLZkFF3FzgPzRqraWwE4F-KRgXrfk1JPrh0r1qB0yAtu0VZfdbwk1PSXlhnabxHVn6_F0Z6pfrcaASFIkQHzrIonsxwPQm40_W5_BJvRxWCxVHQJed5--C4226IoeDXHRu3jevGzWButrAGJq0s9bCDzrmDg_u9MNKP4klPgZDmmLVfOrqZXAIOhrXmiEOvUSPdUXnIyOOzo0mtU7sFyqmf3UnCk7afZQ3uR8gxGhTSEBsVSl743Csc2-Xp84PJ4xWsmwxfi5vxrPRv3NVO5LQ6v5GB_vx49YCqaxJjYv5tZ9Fd_Hq_2S4MhASR5fSGzD_TzReNfs7p0KM333949JNKUb-e2-nLCkwxdHS0Yk-AZKQ70M-bZTUVu3HElg9UrkfqpdMyu4LtzbiimLqIOGyekCOD3FqShQ8r9q=w2206-h1378-no\" alt=\"local function 啟動\" title=\"local function 啟動\"></p>\n<h2 id=\"Local-Web-測試\"><a href=\"#Local-Web-測試\" class=\"headerlink\" title=\"Local Web 測試\"></a>Local Web 測試</h2><p>1) 因為瀏覽器若打開 html 頁面會預設使用 https 處理。所以為了避免 CORS 限制。請安裝啟動本機的 http 伺服器。 <a href=\"https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer\" target=\"_blank\" rel=\"noopener\">Live Server</a></p>\n<p><img src=\"https://lh3.googleusercontent.com/91mzygWcGmu3ljW09OLhtTAfv2Ugb589jczgciy3mOSuWbCUBjOAeN2BUA-MgYWzRbaoXFWwIqoUHqzcykEA4Aw4odpSHDSboaTWxYYpnTT8CmclxtK9t2HYZWUF4HlUKk806h8Jhq3iup2I414hAKpWCtcKgPidv64aPwucq3GYS_ZKsTXudLB7MIfK0wZ_yR47MscN_9ne6KDJvzv3EU4T-1XNMJZdu6ISqzgrUUCgIh-hnUHeSUH6Vy0M1Kc4rNDjBnp14xLA899OhmeZJiB5xQ5UKbv9Icf-dT3yW7qQRSgxWnMvMWgyle_DdmFSYwLJTqMjLaCnBF_LZiS1bJMfDcuctigjp3lqhy75LDcVssUs55sG_8qmd6zgY1A1PVeEbc3faMfQwM9ANDRZA4GAPLFTVYfsp5wVR6cCkYc6tehN7Q1D2DhTrgoJCZ55r0-9nsG-uA11nh5Lmy9Fe7TmPMceVqZXWYYqdP8Q35UHa8Kgq54dfYLjJ2PLOisuHzurd-qQes4NQfhCvsnsXW78VL-UsaW29tFMS_7k7_NH4X9DFNP7oUBsv87ISO_kpm0VWAylbsilxbLT8n5xa57q3USTJuBR5e6DYixRM0L0K_ElogvfiC2TMmYg_F4M5j_Fmg-VoPrxzIt4u6CQ9sNJ6ExcujX0ZEth-aiguKyQNlK2xBs2x9L8=w1908-h938-no\" alt=\"Live Server\" title=\"Live Server\"></p>\n<p>2) 用 <code>Live Server</code> 開啟 sample html 範本 <code>/docs/demo/chat-v2/index.html</code>。</p>\n<p><img src=\"https://lh3.googleusercontent.com/AgiqJicbCJPOqOd7krSCj4eoQulKtewUr71Gs67h-Z3PWiWpQT3hUguVvqQ_Wbsg82SPMZ6Cq5BC9BLN-YkgZQTf1l7JRwd3k5l0yfztgG3Mb_rRUps_ozF1ebzft2z4rst0i4xcEdY453CtVWWHIfkpl6iGgAdDptdUUDfeWvytYg8LEZX-Z9mpkyXI79oI3sYcXVgloKf0FH3ArfwUquBNNwQEUano4e7PPOcYkvXP3d0v9eO2JvayxYfc-c3WSSHEj4rPbx6SvlbZa8O4-0Q_x-rDQuLEoa7u7kCrBnIdaw0xbRxRBhPiGGxbYUJ_s3dBstI4DKzDt-wyJyKBwwV8K5zhfy5wwx4E4grg9NVZf9dp0l2-DDoh7zjHBLCpgLU1-YdmLKp47cmwxLPA7-FnloIsldbLrBS7hv3OQAfDMEb9o8_MQb_44ELsklUVY6wSo6rY894Ew5Wmu24CBd5UbjnO_vjOvvtKNPZKrnDmvnqmofS0x1Kk-Qzy5qKgZ4M3xXt8NAwGm6qa2Xi2vTZhKwy-ApKzBz-VqaOE1VWNW4cCgUZCh00MBeYxWSCdeJOrQlHgkW_tP0zuBBZFxu88siuX6ZTxq3mpVNa7bENEjPJjCSpxMXQemG-CqhQCnGZJTBkSUArTNUSNRDaQ4jixziHJURlhdZlS04s0MGEjPgsLJGM_RKkR=w2206-h1378-no\" alt=\"開啟 sample html 範本\" title=\"開啟 sample html 範本\"></p>\n<p>3) \b自動開啟後，務必輸入 <code>apiBaseUrl</code> local 測試為 <code>http://localhost:7071</code>， Name 也是必填，請輸入聊天室的使用者名稱即可。</p>\n<p>4) 成功之後就可以輸入訊息測試。並能多開數個分頁，測試訊息的接收是否正常。</p>\n<p><img src=\"https://lh3.googleusercontent.com/PYziZWr5t2kOAe9sp4dAJ7f9RmUy-MVlPhZqyus33kJyLQIj61CocH4Rdj955TFA1SVQXZlsSqDhZtafBG5Z25vcLlq28mHCp8OnbxOqh65P81rNFxOH56SfUkJ91ha4KPI8ZHzzSk9zArbDgBNE9iM9NjTZ97lsDsbyO9kuqLDpuj2emQ1r9ak9iRLQXAotahmAelkr2dUiLCsbCphjQHX_fZA9k9KAsAmt2Rq7s5eBTqoHr_V3ZPHemP8QHJg41cHBMfLMwxaKKxqh7PtubOq33yRamyEsrFBfEi8mWAPfLTYmJbGD0izpZEuG1fhBamxoRt175Tgjv6qEIrwakqNQyBn_LnRoQCXYsntJ0XaWDka9yM1Vk9g4zeXp9Jdus09p3Gyj_ACYL98ESUffg8ifDiOPy7cAeFje9dM_FG3bQMtNBLn6Rq8BXXOcERuYUunQsOyalskX_8rnrfvDFGNm9I7Lm5y-wUMw59DmiuvvZsftTtM8lzhLKJDPziD1a_r13RhjLlBo1vfXM0Iq8dsGGe0G4KbinGq4kLIIx0rjg_BDDRQwQUThCUzpOVkYzkKPr7zyFTilAaZAsOeF_k54MrnLVq0sBPCUNN2EYUxI-mzWuhEtNIOzY4K-tmP1AtljaQeVRYnuDp-mMbmLfPW-2PiSf7iSlu6B03DhIpS3EfbFHW0xKEUH=w2532-h1246-no\" alt=\"測試訊息接收\" title=\"測試訊息接收\"></p>\n<h2 id=\"發布-Azure-Function\"><a href=\"#發布-Azure-Function\" class=\"headerlink\" title=\"發布 Azure Function\"></a>發布 Azure Function</h2><ul>\n<li>安裝 <a href=\"vscode:extension/ms-azuretools.vscode-azurefunctions\" target=\"_blank\" rel=\"noopener\">Azure Functions</a> 擴充功能。</li>\n</ul>\n<p><img src=\"https://docs.microsoft.com/zh-tw/azure/includes/media/functions-install-vs-code-extension/vscode-install-extension.png\" alt=\"Azure Functions\" title=\"Azure Functions\"></p>\n<p>安裝完後請務必重開 VScode。接下來我們開始發布 Azure Function。</p>\n<p>1) 請務必確定 VScode 只開啟 src/chat/csharp 中的 csharp 資料夾。</p>\n<p><img src=\"https://lh3.googleusercontent.com/F2CzlCEtvEpCrmw7V_8x9zWfv-OYRpzWj18QN-HL_WfF6s3XCH8u8FW8QStEVeNvXCI6PDmPNKPdLolL8Vlh5EvtSYJvuYRpCADBrALiZIy510xQPTNSl4vZAiwWfFu7IXTGn9sIINa8YVH_ya_KRfkSX3-_5EvsFNJOwyQna6Itv0IaqDKpR2-TEOADt1-FN73D1WyTINzPcd3xS2IYk5EKJrloZPO1Jbj3ZlXxpvahgExMM5uxUZOR4X49neuWpuyIjxVzjdAKvY4ADg2W5cdBvQG-b02xAer7yQ6k4gB15eI3_d98HWArt-FDrMwt5EP9foIFU-dBT5V4B-C2-woI0MejtaK07QNZ082ahzsqV7odBCUVH2u3laLEVGzFRhAddf1DhpDobOQhk4-IB3XG7kYiRiWXr4lco1JTCYTDhy-TxgyHSpUsyMxtb8f--kjdQ5y1IF_uGQDRhF7dFhEUKImOFRj1Kc7sypo4uMS07dQAvFm0Nt7G5xX-IE8QOKjmgNrvOypegpsFswjQ_RDyd0YuT21ioMs4oogu8qEdanhGBc_9-lmbxa3Pfe_P2RauuKrczEJ2zIZlahNBP_e3CsPQqy1B5FwtWWk7Aej0GkqHLwJ7HmTi4oC6cH0fXQzz2ATYuSKg0VsPPeh5PGAbLsQZDZIipl1ScojTL07PltVv9ZDBYVwn=w916-h898-no\" alt=\"csharp 資料夾\" title=\"csharp 資料夾\"></p>\n<p>2) 從擴充功能登入 Azure 帳號。</p>\n<p><img src=\"https://lh3.googleusercontent.com/3ycoKSgCD3L5bhujgJ_qsAaR7iEmu-cDzoi3GceJ4nRtwqz9Sh9ZCNXXQ8nvcuWIUgm4mezj76JL3t3dy1lSdIi-74oqXPTDQYxol0-kaSbF5YTSgsdGI2wgSe_TN4g3UToGBBZdBHrGl9Xw784YIbzI2oFFgQ5FGaH2v3-1JkYpHJB1tde5NdND30pRpnwrbFzotRiyxOyt6lBDlWxuBbSpfIDISQa8Ya-sO79Z8r8cl2RMywRmX3WLVBI3OKVl9Gvi5OJuWmoRyb6jIfeBAWM8i89h5rwdEpCVkXvZO1BlxXRnIrp3Bo4u_EMLkC3VZb9G2KNlVkXgVel-6dL9IqoJ8oVPvorFZMV_sgZwW2_C_D6TH_1SsOs3OVlVT8lwoRjY4RGDJbaQzi7QtfZXfGk5--aTvDw7AV25IP0grR_qAt9X2_SmU4tjEWcjTYN6wG6a6FrQsRhbLhhGC1QOdD1NhyMC-tXZhz9XXuwKyC58CHc_ebYMGogv1PUuqhEy0wMrtKKtC0ZxhGZmH52BcjBrp0fIkp5JJIOeaiZelgAQLJ5-PpAvyY4OpDmSUnJle6hKAHFh6UmCFAu3v1bK4nS0zILSiPobyLEnwrkMbHAJzr44wOMTSVQlsa0ogK5GqER5NNRCACJ-61ztnUEEvdLGN3AhkWmQiCk2ya0YEECjl0LeXGuHk72f=w463-h431-no\" alt=\"登入 Azure 帳號\" title=\"登入 Azure 帳號\"></p>\n<p>3) 選擇要發布的地方上傳。</p>\n<p><img src=\"https://lh3.googleusercontent.com/g-Un1PRQE8Npznb4Hhi9gK6Doc7h4nunpZA3zKMEypcb5j5Ks54x20lEc2UeRykR532VeixY7u11THtW9HeALTz47SUBzzvE6vYzKZxg56VCa8GugLdxRDxvkDu0x6rZvvilshkKnPhsaNCsWEM2IkWSR3Nj1ctjhoGhn0gjjCTPz63muznRew9qqt87p-4ozb8EVNuHwIkJpCvG99uRGQ5L7cdaL6rS-CMmnJUB4EjyM15NeVCKJRpeiYJHkRnvuO_OhqLRhAVYRNtiFywIfnSviMhR1TU9XHYkq-IzS2V8cJ0FRw5u1FE9sF1BE3tjFNiuGiogDdVZ5X4JaGenHgYQU6TrACnF0I6xkHdC9oKXzXvaDgrQGos5UjNytVJeikB6DhCo0afU5vz1Qjtdn8sNRWqEAJvFAfYzVjDNtLgESZQ-ADAE099ID81UPDTnzbVYjZA8zCBkBZUNwQQOplIK-Xft_6cCFQtcsZx-ReUUJnma0MuhTd866gyM4_07eadyJ3ahZAQCZG73AvpUzxRIUsRpgjJ_-lGeEumg_CMxbF0QdEbvZfxriX7azPOitHPKC8YuXhcMAAmmD_3IEpp_VAVyadbRHWBzPtRvS8pkuMN2mFDlY1Kkabuwo5gvHF1FE9PyNodyni6pMPIJ4d2OOT8UO_5e_26Pjxsp5FOnO1nKbV5UPRqy=w916-h402-no\" alt=\"上傳 Azure Functions\" title=\"上傳 Azure Functions\"></p>\n<h2 id=\"測試連線上-Azure-Functions\"><a href=\"#測試連線上-Azure-Functions\" class=\"headerlink\" title=\"測試連線上 Azure Functions\"></a>測試連線上 Azure Functions</h2><p>1) 拷貝 Azure Function url，將 html 中 <code>apiBaseUrl</code> 改為線上的 url。</p>\n<p><img src=\"https://lh3.googleusercontent.com/H_G9dyo8H_V-04HnuKLeYz_RIzpELVQEeIU2Oss1BgV4kb0ih2rs2ihnSG5V4cBpF27Bhuax9uA3jrh5jzi4NXG3xJR8g16s8Nksmlp7Q5zbI6JBkepAhstRwqkBhFiTtt2jAwGlTnWy1TXkPOqzjD8ejAxMDZYuR1Tsrrw9lHCxdicNe233wUwB_9T9Rj7CGP3SM3VvpYsBQ2EBQhrFYyCrEd7bHkMNT7lkuT1CIGT0eniiMKF5r8lmI3JWDKejkDnDj-Xhk5FJ8GhKIpbUTqfbGoYpmRCvhXkXGlPv_225nceq7FJjLbP47e7d0Xyiw4DSfpY4-eLzFQ9Pk1A36sw6u-3kko-FOEWx9hgm2wFkgUn8W-VG60dkn-edy6xzzVBG60BpNBtFU566ckPtVMv0BVtr6rcyTSghwv2BY3iJ5NNQNYl2n9wzDxGAhvp8USAVfkkooBvzISbwUHFE5mdAujs-xyUaQ7JGGwZEP2gpj5UrhW1mj2FKEtuywYk_HW02qkLII8igNcPqbHSy2xKB-hjsaERItaiDeBZvhujagZOWVhYDqdA6MvgfHm9IC8Dx2T2TtZSb6HsTNABrbi3tcRLbiG93_egs5jCaeLvkgA0yxATUZNXirp1z83sRtolFWzJOKeurzUtbT8qSlTkelW7UmZGEblCO6egJM9Oz7e-L4QE8mosh=w988-h371-no\" alt=\"Copy Azure Function url\" title=\"Copy Azure Function url\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/6knLBtYnBsO_4Q_JDPw8eeF1ndcFzBRIKrQPXxJY1XU-e_Dtcsf950sXVO5EDI6CsFwAcMyQ_C_noV8rIb-tWuQZaSVgYTV9-PAn8BHzHShn_8oP_nF3-ix7-6bTR_Zd8ABaSYk1mo3LN6bED7uxK0U9mTY36PF53UpWKF018lOsSezcpuouyeM_qF8TPOsuZ4T4t2V7QBc6NM8z5qXVC3uDLPUrQFQwfegIKE_8k5kPgHMxNTPOoVChCf1k4_YEIxQDJUvGdWa36rI789G10b0VHjzCQxS4vRROdTKJ3p2nNfhDd1LxTvsuUGUnIRvcK7wozQ5G0j8hsxCv-xQJ29dgQkG8nhM8RrBX4oz4Na5_169tKWRUIbIwsJQ55UugbqxpM3OC36-BmvxZ9s3cz9ROJ4cYCkKVnREJyXo4gGMFck_h0XYxJe94-I0LXQQ3A3uGATHqRgl_CcE-1xISolLp0mYvgKpOC6XuDiZH1tRGt0xSInHwnZYuMc59fBawXeiivDGkIjacRbbUsHKr0RLPQtb6eAW1MUyVpOVMhjTQlcNWUJ_Vbsy6VtprtIeolwbUQQSNgqRSemMaS_zPCH1djV1gG-94h_8wOcm_phJ8AkfKmN1elF_gB8WTMPFvs9etI30qy60U4zba4HU2tlFYE0OnoyGHOlvaHzjBSj4Pm7zHJ8Ben9tG=w2192-h880-no\" alt=\"修改 apiBaseUrl\" title=\"修改 apiBaseUrl\"></p>\n<p>2) 因為不同網域去打 API 會有 CORS 的限制，所以需要將測試的網址加到 Azure Function CORS 清單。</p>\n<p><img src=\"https://lh3.googleusercontent.com/QrDuwqSA60bt68i0DoP72Ci94RwvCX6hbD_cjb-yYHhAzBboVJxMZzYIZ6lMgkZAlcv3wyBfBx9sqxwsnUpKwsB9HU8cmQiHCDEnHHLaf5ZsIe5rXI6x8yPAifMnei4xjnRoR5qBkTWoE4jw7gwIE7aDoQeu3VnWTLAndv0-N5nmdY5FoBp1h2ESAM6rvoYYdwxvyWJSJq_xaq43p-koGaoOlEyxfeiUuVGNfPadwjWg9mBAEXFNp2pBa84A4OOd6dfLX1Wzdm1cWgwRtzob9-bF1GZT8f7cj2hl2WMRdhQaP-itxxoFcSVut6uscXFkN1G93Yr7ckHLeiM04jqcMWUdf5IkAtfEInI9lDinK9gljEDCRe8xHCRewByz2Fbp6eSt_RA3RV6FqBi8-VaIuBn0aqlBvPrP7HC4lfFLqy3tdeh7T_afav5Cn2rPn6YuTn4eFGduKK6vvslTShwT208Nl7VE2I9-p9IF0Hndfty1uINjTWP66RRhvpBo40qFSNR95vDw2pGXY-QCEvZinXOk5-YK5RZ6-mmXxc-B5D7mjwbR6u0fiX58NaIL2Wce1hVkraoycTOg2Q1wN25L-OwN2zLmTe9KbwQJ3lqoTsAGuq_tGz-nfHWLpf9cXaqYX3YvEqwN2BwNAs6YKyYCnsR65zG5FlzgSM5UERmDd05BXpI7mnDlhLKF=w996-h574-no\" alt=\"功能設定\" title=\"功能設定\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/Rp_UC6QBZeSOB_6j3kFgK-w9aZNOhE_oybskL2rkFZSdEFYrrfnylveIY0fX-wv3wODLHZyD8AOu2IUwYZebGn5Z7r_rx1jNg61SVDRhuXDYKoLpz7WTfCkcrlZqUx2iEyYJifDtSjDE8GtWehIa8QhwbX1Bvd5qV2vg3Ib5opXrbirNkPy_u-LACXcIrb2ppbRJgs18C9KQs-PY1EPOq3L0s82tpCNkDgGm7vXPVzxcof5zYRpF9VEWumxKadf5a080ALj2oqP6zmZsKJNQdLNzVr2xX8GU-n37TijB4G2masD6i1M6LcSxupOoO038I4nlYutuCUfAy4zp4VKB5xX6oFpX1cXePexfH0Lcdak1yjxSO9r53B_ZrbDC3GhG98V9YehQ7ONMzcy0-vEGyijB-D5mzP6FMgDt6qQHOBwgjOt2p7DOOfHv3em8Z08YVcjb0PJD1hLCI6L28CynDIhZKmtVFAYFJnJytd8938x7xdRJ1p4Y0QMZSBDlXj6nj7uEbRcC082NGv9Q4HCjARts7YVkriMl6mmpGcXg9SsBJhfZOLaPl9_eUP2hAu2dntZpSxg9gOVpoEK3yohgeaXLKAOgqH55KDiAikDyw5e_Waqbvz3LqbfT3wR-z5SkYjhaK9nz0pZ4p59cnOkWqu_81nqpMHdGn0quQokoh-nO7WNgfZyL-7RZ=w561-h592-no\" alt=\"CORS 清單\" title=\"CORS 清單\"></p>\n<p>3) 一樣使用 <code>Live Server</code> 開啟範本，就會成功連上囉~</p>\n<h2 id=\"把-web-放到線上-server-測試\"><a href=\"#把-web-放到線上-server-測試\" class=\"headerlink\" title=\"把 web 放到線上 server 測試\"></a>把 web 放到線上 server 測試</h2><blockquote>\n<p>注意：剛剛上面都是使用 local web 測試。若要把 web 放在線上測試的話，需要在 Azure Function 設定連線變數。官網沒寫這段，害我鬼打牆了好一陣子呀～怎麼設定變數如下圖。</p>\n</blockquote>\n<p><img src=\"https://lh3.googleusercontent.com/_aALFr19DSl7A3vekHZWLNC-DKSZhWp44BLPoujaLFiCL6MDn8sxVNKZvw3IKB9-OmwOoxCHSa-ltJurLIG83osiLAaZeTjJxj8AlFnJBt3uGR2tyegFXkdoyxKpa1gDW3dZdPICSsCPiN4KMTlYAzSBdNEQoI3RnOvtkoNqruCcVph5qICYnAfBkGywtdR-dJjTyKKfuW8RZaFEPcHqqGhg35nibhg1jei8wJflLVHtN48vFNcsrAuyfGnziyEGjj-VxPocDb9ofJEHR8uRnIjL9qUOB-zGb9TA1j7Pyo1tV9UkuczX1KWXCO_jsd3rp-FDCAQ2dcHoLc6y9OagLkJSqGC7EJkaccgCuu1HRmb7_woIrvnIO8k5iYbvsf4bO7af8IBLgA-OFR_YlQpIGsXwoc1PSu-rMCGAEzSkhHsDNmTaCpyO-L-YLB7Z3vCOkavIMRpDV1ZcnLYd8jQ5USusENO0bzOXZNo4-D6sPyGhpl9g92pOoQmJ8DRgaxAqTGRxItUpkNLBDudfi-4-jGM_IDbnRTyLlWW9hLx3FLjDfA2QL0-z2Plp0NRfh9qdegDb3Ym-fmKS71Wp2g0WsVxhNhfdf9pDYcAkBDKqNF9HpIlRuATIi_HAGFGJ0W9imvB0-q2gQ1AfS2_YOIvUTK0v1Kl3-OFJuLwZqbm2kL4d-Sei-CSUkhV_=w451-h285-no\" alt=\"Configuration\" title=\"Configuration\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/jeAfFyL52YQfyyvIpqgAMgrqCLGm3yBtZDYfH_VXbFExgRV2kTjgkj5TOad0fZ4EkwPYyKOfKrgajprSXSsqmn4Tdcp_73h5YRS0VBZz55ZoHE6_ojFZ7TmeAOnd7ONKRQFxzr5jRZEZd34eWwVahN9o9bZYgcBWpebxN0fIihVQdrf3a6meMzzLPRH1HVX8hXwXr_W0j3FKVAz2Lf2-cNa1Bni_eycfszIrU7XIf8fiVuldSBReqZgd5NtbSuiRJSPFIuCjg08_X9e2aCeeKYBfjuy9tS7c2V4f0gUk3CoC9W-Beyh3ueJ17TkIm0BhzbUqWt8y374DL7FQKr55GaHzz734aRkvVOQnUNeR6efL1KVcriTVDwNCbjuqovljM7_b7VvQtY9O766_F8R1TNMRz26z6sqN9QfFbEFGEBbmECjJbecN8VKb-gTZ_4qSqnHTyiI-UCzcWPddZkoZ1mRridVcnZexsEQ6TD-k7upFmprShkVX-MuP-QIjR6MPqS0QCiwTbzSLB6rwgXbdylDIh6oUlc-5PrpYBhetsdjEIKqIDQNKOkEngxCuZn50bixXooAT78orR4EatTwcd67ERYGRqJRB4KQOxSfHaJCuq9ut53NvM9lPxsPsO0f_kuFsYL46-sSodOnd2-CE2dtRUK-nrqejDhWL_9EdLwBTrlAM9Dqph-Yt=w989-h560-no\" alt=\"Add Variable\" title=\"Add Variable\"></p>\n<blockquote>\n<p>記得如果是線上 web 都要把網域再加到 CORS 清單喔～</p>\n</blockquote>\n<p>以上是無伺服器的雲端 Azure SignalR 基本安裝與設定，如果要玩地端的話可以參考官方<a href=\"https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/signalr?view=aspnetcore-2.2&amp;tabs=visual-studio\" target=\"_blank\" rel=\"noopener\">這篇</a>，那我們下次見～</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://docs.microsoft.com/zh-tw/azure/azure-signalr/signalr-quickstart-azure-functions-csharp\" target=\"_blank\" rel=\"noopener\">快速入門：使用 C# 搭配 Azure Functions 與 SignalR 服務來建立聊天室</a></li>\n<li><a href=\"https://docs.microsoft.com/zh-tw/azure/azure-signalr/signalr-quickstart-azure-functions-javascript\" target=\"_blank\" rel=\"noopener\">快速入門：使用 JavaScript 搭配 Azure Functions 與 SignalR 服務來建立聊天室</a></li>\n<li><a href=\"https://docs.microsoft.com/zh-tw/azure/azure-functions/functions-develop-vs-code\" target=\"_blank\" rel=\"noopener\">使用 Visual Studio Code 開發 Azure Functions</a></li>\n<li><a href=\"https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/signalr?view=aspnetcore-2.2&amp;tabs=visual-studio\" target=\"_blank\" rel=\"noopener\">教學課程：開始使用 ASP.NET Core SignalR</a></li>\n<li><a href=\"https://docs.microsoft.com/zh-tw/aspnet/core/signalr/hubs?view=aspnetcore-2.2#send-messages-to-clients\" target=\"_blank\" rel=\"noopener\">將訊息傳送至用戶端</a></li>\n<li><a href=\"https://youtu.be/MK8n8pg9bLE\" target=\"_blank\" rel=\"noopener\">SignalR Tutorial 16 - Coding Our JavaScript (Client Side) - Part 1</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUcAAACaCAMAAAANQHocAAAAYFBMVEX///9ZtNlRsdhSsthIrtb4+/2n1eldttrg8Pf2+/2h0efk8vjD4vBsvN1LsNe93+633O3v9/vQ6POAxOFyvt6YzuaNyeOHx+Lh8PfW6/Sv2OvJ5PGTy+Rtvd54wd+r1urKXpEyAAAGxklEQVR4nO2df2OyIBDHEzBNE7Vyzdrq/b/LR7f1rBUHHErWyefvVvLdAfcLXCwCgUAgEAgEAoFAIBAIBAKBxxDXadtujuvjpk3zeuqneUVWm+ptl0ScyR8441Gya8p2NfWjvQx5uU+E7HS7h3MhP5t1PvUjPj/psuBSJeGVlpInWTr1gz4zbZao7fAOJoOUEOVOMhsNL1LyUzn1Iz8f9ZJLhIjfSLYMu/g1q4xjTPHaKJug5IVVJtxU7OEiC67QF1VitbXANhmFdbJzdAr8uniLTGa/d2fDVezhy6kHMilp4r4w/kXuZhzkHPSRCw4211VytR1nTl+QzdQjmoR04DZ9Dy9m6Euu7QJpnJDz27crMbqKPWIz9cAey3LcpfEXOavdxpuMnUXOSEiPMnYWuZ56eI/i7GdtnJuQlU9r/BKynXqIj+DoW8bO/5lBjJhbTWpeDBIyIZ+SXFlFMaI8D/LS+Wnqcfpma6OPrBbZsGhHEs+jWYUxnYxDdSS+16R2k3oxXEfaS6TN7iGq/pODdWRvUw/WHzZFhJ8AebCOhFMWuYU2l/B4uI5REk87XG+czNr8T9eMoCMjmh9fm/fq32TNCDpGgmZYkxgHfpU8HENHvp1wtN6ojCXW69RhI9RIAbSYqqDoRMZGc/yTgY0BVnV+rN4SSykJhofGbBkqkZ1XJ5vaN0HfxzRqdGElbyzaTskZZGkwR5ck9iozTm9JrRC704/XsTpVbw2+FP8YeRwT0+rH615SKQ0WyWm1WHxohysGVKbyQrtKsmq8QUxPrF0dBxb49lohk5GG8BSsdTqK48Bvb3SLhqQUHOqqCSOUm3V9BYxQhaHWyDjYGnsaWEi+G+H7nwTNtB6yxVyhMXhGZ2LDu7UcwxoXfTkX1pHOjg0OcpRJ/UULmjwnU6gBWyjGssYeOGHJx/uRaYGWx/GssQc0ejKeD7A8jmmNC81mxqj08RVKHdnYyWr1z3Tzmki9awVNOOZA9PmxBjolQIMk4kG+j3X27du6uIyWaiWhPyFSyN6M3jjKIuWaAG3ZRNpKD6Pa4zfKoBzyIYkkxZvxD251PpPCIqGghkjj/ZsPHaNIseid1J9kh8cP2gPA6AaiOrm+VK8gLHv8oD3w6cceFQYJHIUg4kCa+3qcUNT4gWoajUyFuSHFDcVsrQEdSfRLxX5kVKkTA4mloKOOz7ufWgE6kuhOiT1tM4qwGdIx2KMGvr/7Kdo6+tpn7r3rd2CfuVf8FfGkoyJqBjIiRJqlDK1mriiyikDTFBE/fOtFRlWrLVDAINJS4SVPoTz2Bhy74zSu/gCyB8NkLBQ/VAMfljS6xLXNZm7IrapUAPVOE+lMsTosjIEL9YIHNvnQ6MkF64U2kt1XDGUCXC0MZCmiSLUGvCLuDiTfnZc3lClU/YPWYSJu+GKxd57YmB0CjD+JlBVsThZCYJq7K+i/RWS7Nh76gOEIS4J7fgWNNgDTaQWdjoiNFvT2+X2e8lVxjAwxdRW4aYNItbDHsaMCcXwaCmUidcfAi5I6TWyO8Pt0V18QusjH6dY3xEliTSqEjPfYk7lMbG69z+ruBRq563daXCa2ffZVcwqpWx59juvhOExsbtttp70Wn0YvxX8O+NDQsujc6i+UJLRb9+hOGKqxa1qMM8NL+qjkei7giws231qa3rvC6RyK+yZFxtgWtam4NL9KicxZrv8gq6/GWkCaJWYngEil8Br4IKXSjjTe86puq49I2CwUnFAscwFlkPD7tuoi4YLbrbYkby7EGaQEU491ZL9lETRHq2s0rxCgkPnw/8VLk+OCQ1jI2q5wRs53vIC8G1NjkVZCkqnL3ILthJRn6JtsLJJUwuwv2IIX0DexsBKSos9zoUHmIQcISfv9Utj8mQCLVAYhCc/qHmyYrbNIvY5UitYA6JdKuVmkdRL4ZUEn0FzWSEEtXaYAffxVgFEyJOQs3phrGY1cC4mc2ozEuSMjtWW2xsa+VEKSjQdveccXaxBC8oKwA/4XfMe4vZAzkrELEL0JOSsZ/Vkk2xH3v2/JEVntHyHB05a/Qsp57NTX1Pr7052EFLSaUCx5w4aIEpTpW0iidQQjpVXt1NIiOee0WnkQvGPnts4ilUcOZ0L8gcyjaYR85HM/HxtTp9OtkLTzswM427xoKwhppt6jNm4WhIRoT5hlciZpMSfaHWJ2E69hDSNt7NOSNC7Q80V9iGxfORqE1JNmhc385gJzonie5NVJ+yZcJkWSHWeVZHQl3iz3RSQYu14xOe8UZMkp2wQNMdRpeW72pyLpKXbbfXNYp3XQMBAIBAKBQCAQCPzyD//kVoYOpPZmAAAAAElFTkSuQmCC","excerpt":"<p>第一次接觸使用 Azure SignalR，順便玩玩看雲端託管的服務，那我們就來開始吧～</p>","more":"<p>因為我習慣用 <code>Vscode</code> 開發，所以下面說明都是以 <code>Vscode</code> 為主。</p>\n<h2 id=\"安裝環境\"><a href=\"#安裝環境\" class=\"headerlink\" title=\"安裝環境\"></a>安裝環境</h2><ul>\n<li><p>安裝 <a href=\"https://github.com/Azure/azure-functions-core-tools#installing\" target=\"_blank\" rel=\"noopener\">Azure Functions Core Tools (v2)</a></p>\n</li>\n<li><p>安裝 <a href=\"https://dotnet.microsoft.com/download\" target=\"_blank\" rel=\"noopener\">.NET Core SDK</a></p>\n</li>\n</ul>\n<p>查看 Azure Functions Core Tools 版本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">func --Version</span><br></pre></td></tr></table></figure>\n<p>查看 dotnet core 版本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet --Version</span><br></pre></td></tr></table></figure>\n<h2 id=\"登入-Azure-建立-Azuer-SignalR\"><a href=\"#登入-Azure-建立-Azuer-SignalR\" class=\"headerlink\" title=\"登入 Azure 建立 Azuer SignalR\"></a>登入 Azure 建立 Azuer SignalR</h2><ul>\n<li><a href=\"https://portal.azure.com/\" target=\"_blank\" rel=\"noopener\">Azure 入口網站</a></li>\n</ul>\n<p>新增 SignalR service 如下圖設定。</p>\n<p><img src=\"https://docs.microsoft.com/zh-tw/azure/azure-signalr/media/signalr-quickstart-azure-functions-javascript/signalr-quickstart-create.png\" alt=\"SignalR 設定\" title=\"SignalR 設定\"></p>\n<blockquote>\n<p>注意：這篇介紹的是無伺服器的方式，所以 Service Mode 要選擇 Serverless。一個 Azure SignalR 只能選擇一個 Service Mode，所以傳統的 Classic 方式和 Serverless 只能擇一，兩者不能共用同一個 Service。</p>\n</blockquote>\n<h2 id=\"設定-Azure-Function\"><a href=\"#設定-Azure-Function\" class=\"headerlink\" title=\"設定 Azure Function\"></a>設定 Azure Function</h2><p>1) 開啟建立好的服務，複製主要連接字串。</p>\n<p><img src=\"https://lh3.googleusercontent.com/ebUg5MNe8j6YLI5O56lihd2NTFy9SHkFwW0WZdZnz25HzlKWkEpveUnMpfw9Og1Mkm2wPnqATYzpizjHtt6onCppsz7kRYnrXE-DRBapeoxUwNJLvjKR7O8nkZzNVu37tdUtRXIqFCluv42EXrrKaCQbWRKEfsSFsotts0AnmxXqpyEjB7gKkDUngv-Si0OX8UAy4nH2t5oc1uJumiSBkucK4djsxN_QQVLuBjXlFlzN1-lNt6x3j-KlraBvkCf7J9wLB7cp1_lOMldLoK6bG5ixiKebGTJly_gfZ9J4HN2JF0OCPP87eI4QsGlVPprfTGwgw6swCJaO4TiodAj0zzgPq8SX6qmCE7fS7-1gSDLK1hzTNedZ5EzcCTblltvhdsOuxgSJFc464UYaYcTfcwzZ3377cg9jzGa4ijNRdFRGHYQbvdssgoMuxA8_gRV3qmtsssBOQzKhRwFriUOcR2Mk2RnJEzCknPvIhDDq_aDuO0DJvUr18p4zLV3IK3gdawQtusInwbLdySAFB6VGiKoPK2xP6IJA1RYGUIWx3a7uEqX3KPpI0OjVY5lORd_rtCzv2m69xRSB_ygGXHYVt1_Mr_MsI-vVbpOzZtPob9L3BljtzaWXYBaDaFMeFGVKKhTHR_Gv9i12qfSZCi1j9pffRE8uAVRTmJVYozGlhqffUtNkUHxaDsO2=w1035-h483-no\" alt=\"複製主要連接字串\" title=\"複製主要連接字串\"></p>\n<p>2) 複製官網 <a href=\"https://github.com/Azure-Samples/signalr-service-quickstart-serverless-chat\" target=\"_blank\" rel=\"noopener\">sample</a></p>\n<p>3) 進入 <code>src/chat/csharp</code>。 將 <code>local.settings.sample.json</code> 重新命名為 <code>local.settings.json</code>。 將連接字串貼到 <code>AzureSignalRConnectionString</code> 並設定如下。</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"IsEncrypted\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"Values\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"FUNCTIONS_WORKER_RUNTIME\"</span>: <span class=\"string\">\"dotnet\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"AzureSignalRConnectionString\"</span>: <span class=\"string\">\"Your connection string here\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"Host\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"LocalHttpPort\"</span>: <span class=\"number\">7071</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"CORS\"</span>: <span class=\"string\">\"http://127.0.0.1:8080,http://localhost:8080,https://azure-samples.github.io\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"CORSCredentials\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>注意：Host 的部分是在 local 測試時，為了避免 CORS 的限制所設定。請務必將 local 要測試的網域加到 CORS 的值裡面。</p>\n</blockquote>\n<p>4) 開啟 Functions.cs。 官方解釋如下：此函數應用程式中有兩個 HTTP 觸發的函式</p>\n<ul>\n<li><p>GetSignalRInfo - 使用 SignalRConnectionInfo 輸入繫結來產生並傳回有效的連線資訊。</p>\n</li>\n<li><p>SendMessage - 在要求主體中接收聊天訊息，並使用 SignalR 輸出繫結來將訊息廣播給所有已連線的用戶端應用程式。</p>\n</li>\n</ul>\n<p>5) 啟動 local function 測試。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">func start</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://lh3.googleusercontent.com/3504Bocz7haQ3JPmdJwqa2XwHdc_EhIQpmtPqtOftqxaQUK5qLHeVAaSz9JNWpEhD7ezP81kEeq6LB6Loa2aL5OIYYWVjjA4GwibWVIl_pbw_BAN9IyZfTBBvmE9Vz-NRljNw1h-6deKZJZLgWT57tKi5I1ml_PwuOFGL0fh1PHbrPq6VC8YyVchEb4l0OdFYdpFz2h14pJMmelh0jV8M7lqQrIY4aK-lN0ttAn01wQZWh7nnXO-aVhFxYVdI6_-SKoDsu2LnFscOqb5QohvLZkFF3FzgPzRqraWwE4F-KRgXrfk1JPrh0r1qB0yAtu0VZfdbwk1PSXlhnabxHVn6_F0Z6pfrcaASFIkQHzrIonsxwPQm40_W5_BJvRxWCxVHQJed5--C4226IoeDXHRu3jevGzWButrAGJq0s9bCDzrmDg_u9MNKP4klPgZDmmLVfOrqZXAIOhrXmiEOvUSPdUXnIyOOzo0mtU7sFyqmf3UnCk7afZQ3uR8gxGhTSEBsVSl743Csc2-Xp84PJ4xWsmwxfi5vxrPRv3NVO5LQ6v5GB_vx49YCqaxJjYv5tZ9Fd_Hq_2S4MhASR5fSGzD_TzReNfs7p0KM333949JNKUb-e2-nLCkwxdHS0Yk-AZKQ70M-bZTUVu3HElg9UrkfqpdMyu4LtzbiimLqIOGyekCOD3FqShQ8r9q=w2206-h1378-no\" alt=\"local function 啟動\" title=\"local function 啟動\"></p>\n<h2 id=\"Local-Web-測試\"><a href=\"#Local-Web-測試\" class=\"headerlink\" title=\"Local Web 測試\"></a>Local Web 測試</h2><p>1) 因為瀏覽器若打開 html 頁面會預設使用 https 處理。所以為了避免 CORS 限制。請安裝啟動本機的 http 伺服器。 <a href=\"https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer\" target=\"_blank\" rel=\"noopener\">Live Server</a></p>\n<p><img src=\"https://lh3.googleusercontent.com/91mzygWcGmu3ljW09OLhtTAfv2Ugb589jczgciy3mOSuWbCUBjOAeN2BUA-MgYWzRbaoXFWwIqoUHqzcykEA4Aw4odpSHDSboaTWxYYpnTT8CmclxtK9t2HYZWUF4HlUKk806h8Jhq3iup2I414hAKpWCtcKgPidv64aPwucq3GYS_ZKsTXudLB7MIfK0wZ_yR47MscN_9ne6KDJvzv3EU4T-1XNMJZdu6ISqzgrUUCgIh-hnUHeSUH6Vy0M1Kc4rNDjBnp14xLA899OhmeZJiB5xQ5UKbv9Icf-dT3yW7qQRSgxWnMvMWgyle_DdmFSYwLJTqMjLaCnBF_LZiS1bJMfDcuctigjp3lqhy75LDcVssUs55sG_8qmd6zgY1A1PVeEbc3faMfQwM9ANDRZA4GAPLFTVYfsp5wVR6cCkYc6tehN7Q1D2DhTrgoJCZ55r0-9nsG-uA11nh5Lmy9Fe7TmPMceVqZXWYYqdP8Q35UHa8Kgq54dfYLjJ2PLOisuHzurd-qQes4NQfhCvsnsXW78VL-UsaW29tFMS_7k7_NH4X9DFNP7oUBsv87ISO_kpm0VWAylbsilxbLT8n5xa57q3USTJuBR5e6DYixRM0L0K_ElogvfiC2TMmYg_F4M5j_Fmg-VoPrxzIt4u6CQ9sNJ6ExcujX0ZEth-aiguKyQNlK2xBs2x9L8=w1908-h938-no\" alt=\"Live Server\" title=\"Live Server\"></p>\n<p>2) 用 <code>Live Server</code> 開啟 sample html 範本 <code>/docs/demo/chat-v2/index.html</code>。</p>\n<p><img src=\"https://lh3.googleusercontent.com/AgiqJicbCJPOqOd7krSCj4eoQulKtewUr71Gs67h-Z3PWiWpQT3hUguVvqQ_Wbsg82SPMZ6Cq5BC9BLN-YkgZQTf1l7JRwd3k5l0yfztgG3Mb_rRUps_ozF1ebzft2z4rst0i4xcEdY453CtVWWHIfkpl6iGgAdDptdUUDfeWvytYg8LEZX-Z9mpkyXI79oI3sYcXVgloKf0FH3ArfwUquBNNwQEUano4e7PPOcYkvXP3d0v9eO2JvayxYfc-c3WSSHEj4rPbx6SvlbZa8O4-0Q_x-rDQuLEoa7u7kCrBnIdaw0xbRxRBhPiGGxbYUJ_s3dBstI4DKzDt-wyJyKBwwV8K5zhfy5wwx4E4grg9NVZf9dp0l2-DDoh7zjHBLCpgLU1-YdmLKp47cmwxLPA7-FnloIsldbLrBS7hv3OQAfDMEb9o8_MQb_44ELsklUVY6wSo6rY894Ew5Wmu24CBd5UbjnO_vjOvvtKNPZKrnDmvnqmofS0x1Kk-Qzy5qKgZ4M3xXt8NAwGm6qa2Xi2vTZhKwy-ApKzBz-VqaOE1VWNW4cCgUZCh00MBeYxWSCdeJOrQlHgkW_tP0zuBBZFxu88siuX6ZTxq3mpVNa7bENEjPJjCSpxMXQemG-CqhQCnGZJTBkSUArTNUSNRDaQ4jixziHJURlhdZlS04s0MGEjPgsLJGM_RKkR=w2206-h1378-no\" alt=\"開啟 sample html 範本\" title=\"開啟 sample html 範本\"></p>\n<p>3) \b自動開啟後，務必輸入 <code>apiBaseUrl</code> local 測試為 <code>http://localhost:7071</code>， Name 也是必填，請輸入聊天室的使用者名稱即可。</p>\n<p>4) 成功之後就可以輸入訊息測試。並能多開數個分頁，測試訊息的接收是否正常。</p>\n<p><img src=\"https://lh3.googleusercontent.com/PYziZWr5t2kOAe9sp4dAJ7f9RmUy-MVlPhZqyus33kJyLQIj61CocH4Rdj955TFA1SVQXZlsSqDhZtafBG5Z25vcLlq28mHCp8OnbxOqh65P81rNFxOH56SfUkJ91ha4KPI8ZHzzSk9zArbDgBNE9iM9NjTZ97lsDsbyO9kuqLDpuj2emQ1r9ak9iRLQXAotahmAelkr2dUiLCsbCphjQHX_fZA9k9KAsAmt2Rq7s5eBTqoHr_V3ZPHemP8QHJg41cHBMfLMwxaKKxqh7PtubOq33yRamyEsrFBfEi8mWAPfLTYmJbGD0izpZEuG1fhBamxoRt175Tgjv6qEIrwakqNQyBn_LnRoQCXYsntJ0XaWDka9yM1Vk9g4zeXp9Jdus09p3Gyj_ACYL98ESUffg8ifDiOPy7cAeFje9dM_FG3bQMtNBLn6Rq8BXXOcERuYUunQsOyalskX_8rnrfvDFGNm9I7Lm5y-wUMw59DmiuvvZsftTtM8lzhLKJDPziD1a_r13RhjLlBo1vfXM0Iq8dsGGe0G4KbinGq4kLIIx0rjg_BDDRQwQUThCUzpOVkYzkKPr7zyFTilAaZAsOeF_k54MrnLVq0sBPCUNN2EYUxI-mzWuhEtNIOzY4K-tmP1AtljaQeVRYnuDp-mMbmLfPW-2PiSf7iSlu6B03DhIpS3EfbFHW0xKEUH=w2532-h1246-no\" alt=\"測試訊息接收\" title=\"測試訊息接收\"></p>\n<h2 id=\"發布-Azure-Function\"><a href=\"#發布-Azure-Function\" class=\"headerlink\" title=\"發布 Azure Function\"></a>發布 Azure Function</h2><ul>\n<li>安裝 <a href=\"vscode:extension/ms-azuretools.vscode-azurefunctions\" target=\"_blank\" rel=\"noopener\">Azure Functions</a> 擴充功能。</li>\n</ul>\n<p><img src=\"https://docs.microsoft.com/zh-tw/azure/includes/media/functions-install-vs-code-extension/vscode-install-extension.png\" alt=\"Azure Functions\" title=\"Azure Functions\"></p>\n<p>安裝完後請務必重開 VScode。接下來我們開始發布 Azure Function。</p>\n<p>1) 請務必確定 VScode 只開啟 src/chat/csharp 中的 csharp 資料夾。</p>\n<p><img src=\"https://lh3.googleusercontent.com/F2CzlCEtvEpCrmw7V_8x9zWfv-OYRpzWj18QN-HL_WfF6s3XCH8u8FW8QStEVeNvXCI6PDmPNKPdLolL8Vlh5EvtSYJvuYRpCADBrALiZIy510xQPTNSl4vZAiwWfFu7IXTGn9sIINa8YVH_ya_KRfkSX3-_5EvsFNJOwyQna6Itv0IaqDKpR2-TEOADt1-FN73D1WyTINzPcd3xS2IYk5EKJrloZPO1Jbj3ZlXxpvahgExMM5uxUZOR4X49neuWpuyIjxVzjdAKvY4ADg2W5cdBvQG-b02xAer7yQ6k4gB15eI3_d98HWArt-FDrMwt5EP9foIFU-dBT5V4B-C2-woI0MejtaK07QNZ082ahzsqV7odBCUVH2u3laLEVGzFRhAddf1DhpDobOQhk4-IB3XG7kYiRiWXr4lco1JTCYTDhy-TxgyHSpUsyMxtb8f--kjdQ5y1IF_uGQDRhF7dFhEUKImOFRj1Kc7sypo4uMS07dQAvFm0Nt7G5xX-IE8QOKjmgNrvOypegpsFswjQ_RDyd0YuT21ioMs4oogu8qEdanhGBc_9-lmbxa3Pfe_P2RauuKrczEJ2zIZlahNBP_e3CsPQqy1B5FwtWWk7Aej0GkqHLwJ7HmTi4oC6cH0fXQzz2ATYuSKg0VsPPeh5PGAbLsQZDZIipl1ScojTL07PltVv9ZDBYVwn=w916-h898-no\" alt=\"csharp 資料夾\" title=\"csharp 資料夾\"></p>\n<p>2) 從擴充功能登入 Azure 帳號。</p>\n<p><img src=\"https://lh3.googleusercontent.com/3ycoKSgCD3L5bhujgJ_qsAaR7iEmu-cDzoi3GceJ4nRtwqz9Sh9ZCNXXQ8nvcuWIUgm4mezj76JL3t3dy1lSdIi-74oqXPTDQYxol0-kaSbF5YTSgsdGI2wgSe_TN4g3UToGBBZdBHrGl9Xw784YIbzI2oFFgQ5FGaH2v3-1JkYpHJB1tde5NdND30pRpnwrbFzotRiyxOyt6lBDlWxuBbSpfIDISQa8Ya-sO79Z8r8cl2RMywRmX3WLVBI3OKVl9Gvi5OJuWmoRyb6jIfeBAWM8i89h5rwdEpCVkXvZO1BlxXRnIrp3Bo4u_EMLkC3VZb9G2KNlVkXgVel-6dL9IqoJ8oVPvorFZMV_sgZwW2_C_D6TH_1SsOs3OVlVT8lwoRjY4RGDJbaQzi7QtfZXfGk5--aTvDw7AV25IP0grR_qAt9X2_SmU4tjEWcjTYN6wG6a6FrQsRhbLhhGC1QOdD1NhyMC-tXZhz9XXuwKyC58CHc_ebYMGogv1PUuqhEy0wMrtKKtC0ZxhGZmH52BcjBrp0fIkp5JJIOeaiZelgAQLJ5-PpAvyY4OpDmSUnJle6hKAHFh6UmCFAu3v1bK4nS0zILSiPobyLEnwrkMbHAJzr44wOMTSVQlsa0ogK5GqER5NNRCACJ-61ztnUEEvdLGN3AhkWmQiCk2ya0YEECjl0LeXGuHk72f=w463-h431-no\" alt=\"登入 Azure 帳號\" title=\"登入 Azure 帳號\"></p>\n<p>3) 選擇要發布的地方上傳。</p>\n<p><img src=\"https://lh3.googleusercontent.com/g-Un1PRQE8Npznb4Hhi9gK6Doc7h4nunpZA3zKMEypcb5j5Ks54x20lEc2UeRykR532VeixY7u11THtW9HeALTz47SUBzzvE6vYzKZxg56VCa8GugLdxRDxvkDu0x6rZvvilshkKnPhsaNCsWEM2IkWSR3Nj1ctjhoGhn0gjjCTPz63muznRew9qqt87p-4ozb8EVNuHwIkJpCvG99uRGQ5L7cdaL6rS-CMmnJUB4EjyM15NeVCKJRpeiYJHkRnvuO_OhqLRhAVYRNtiFywIfnSviMhR1TU9XHYkq-IzS2V8cJ0FRw5u1FE9sF1BE3tjFNiuGiogDdVZ5X4JaGenHgYQU6TrACnF0I6xkHdC9oKXzXvaDgrQGos5UjNytVJeikB6DhCo0afU5vz1Qjtdn8sNRWqEAJvFAfYzVjDNtLgESZQ-ADAE099ID81UPDTnzbVYjZA8zCBkBZUNwQQOplIK-Xft_6cCFQtcsZx-ReUUJnma0MuhTd866gyM4_07eadyJ3ahZAQCZG73AvpUzxRIUsRpgjJ_-lGeEumg_CMxbF0QdEbvZfxriX7azPOitHPKC8YuXhcMAAmmD_3IEpp_VAVyadbRHWBzPtRvS8pkuMN2mFDlY1Kkabuwo5gvHF1FE9PyNodyni6pMPIJ4d2OOT8UO_5e_26Pjxsp5FOnO1nKbV5UPRqy=w916-h402-no\" alt=\"上傳 Azure Functions\" title=\"上傳 Azure Functions\"></p>\n<h2 id=\"測試連線上-Azure-Functions\"><a href=\"#測試連線上-Azure-Functions\" class=\"headerlink\" title=\"測試連線上 Azure Functions\"></a>測試連線上 Azure Functions</h2><p>1) 拷貝 Azure Function url，將 html 中 <code>apiBaseUrl</code> 改為線上的 url。</p>\n<p><img src=\"https://lh3.googleusercontent.com/H_G9dyo8H_V-04HnuKLeYz_RIzpELVQEeIU2Oss1BgV4kb0ih2rs2ihnSG5V4cBpF27Bhuax9uA3jrh5jzi4NXG3xJR8g16s8Nksmlp7Q5zbI6JBkepAhstRwqkBhFiTtt2jAwGlTnWy1TXkPOqzjD8ejAxMDZYuR1Tsrrw9lHCxdicNe233wUwB_9T9Rj7CGP3SM3VvpYsBQ2EBQhrFYyCrEd7bHkMNT7lkuT1CIGT0eniiMKF5r8lmI3JWDKejkDnDj-Xhk5FJ8GhKIpbUTqfbGoYpmRCvhXkXGlPv_225nceq7FJjLbP47e7d0Xyiw4DSfpY4-eLzFQ9Pk1A36sw6u-3kko-FOEWx9hgm2wFkgUn8W-VG60dkn-edy6xzzVBG60BpNBtFU566ckPtVMv0BVtr6rcyTSghwv2BY3iJ5NNQNYl2n9wzDxGAhvp8USAVfkkooBvzISbwUHFE5mdAujs-xyUaQ7JGGwZEP2gpj5UrhW1mj2FKEtuywYk_HW02qkLII8igNcPqbHSy2xKB-hjsaERItaiDeBZvhujagZOWVhYDqdA6MvgfHm9IC8Dx2T2TtZSb6HsTNABrbi3tcRLbiG93_egs5jCaeLvkgA0yxATUZNXirp1z83sRtolFWzJOKeurzUtbT8qSlTkelW7UmZGEblCO6egJM9Oz7e-L4QE8mosh=w988-h371-no\" alt=\"Copy Azure Function url\" title=\"Copy Azure Function url\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/6knLBtYnBsO_4Q_JDPw8eeF1ndcFzBRIKrQPXxJY1XU-e_Dtcsf950sXVO5EDI6CsFwAcMyQ_C_noV8rIb-tWuQZaSVgYTV9-PAn8BHzHShn_8oP_nF3-ix7-6bTR_Zd8ABaSYk1mo3LN6bED7uxK0U9mTY36PF53UpWKF018lOsSezcpuouyeM_qF8TPOsuZ4T4t2V7QBc6NM8z5qXVC3uDLPUrQFQwfegIKE_8k5kPgHMxNTPOoVChCf1k4_YEIxQDJUvGdWa36rI789G10b0VHjzCQxS4vRROdTKJ3p2nNfhDd1LxTvsuUGUnIRvcK7wozQ5G0j8hsxCv-xQJ29dgQkG8nhM8RrBX4oz4Na5_169tKWRUIbIwsJQ55UugbqxpM3OC36-BmvxZ9s3cz9ROJ4cYCkKVnREJyXo4gGMFck_h0XYxJe94-I0LXQQ3A3uGATHqRgl_CcE-1xISolLp0mYvgKpOC6XuDiZH1tRGt0xSInHwnZYuMc59fBawXeiivDGkIjacRbbUsHKr0RLPQtb6eAW1MUyVpOVMhjTQlcNWUJ_Vbsy6VtprtIeolwbUQQSNgqRSemMaS_zPCH1djV1gG-94h_8wOcm_phJ8AkfKmN1elF_gB8WTMPFvs9etI30qy60U4zba4HU2tlFYE0OnoyGHOlvaHzjBSj4Pm7zHJ8Ben9tG=w2192-h880-no\" alt=\"修改 apiBaseUrl\" title=\"修改 apiBaseUrl\"></p>\n<p>2) 因為不同網域去打 API 會有 CORS 的限制，所以需要將測試的網址加到 Azure Function CORS 清單。</p>\n<p><img src=\"https://lh3.googleusercontent.com/QrDuwqSA60bt68i0DoP72Ci94RwvCX6hbD_cjb-yYHhAzBboVJxMZzYIZ6lMgkZAlcv3wyBfBx9sqxwsnUpKwsB9HU8cmQiHCDEnHHLaf5ZsIe5rXI6x8yPAifMnei4xjnRoR5qBkTWoE4jw7gwIE7aDoQeu3VnWTLAndv0-N5nmdY5FoBp1h2ESAM6rvoYYdwxvyWJSJq_xaq43p-koGaoOlEyxfeiUuVGNfPadwjWg9mBAEXFNp2pBa84A4OOd6dfLX1Wzdm1cWgwRtzob9-bF1GZT8f7cj2hl2WMRdhQaP-itxxoFcSVut6uscXFkN1G93Yr7ckHLeiM04jqcMWUdf5IkAtfEInI9lDinK9gljEDCRe8xHCRewByz2Fbp6eSt_RA3RV6FqBi8-VaIuBn0aqlBvPrP7HC4lfFLqy3tdeh7T_afav5Cn2rPn6YuTn4eFGduKK6vvslTShwT208Nl7VE2I9-p9IF0Hndfty1uINjTWP66RRhvpBo40qFSNR95vDw2pGXY-QCEvZinXOk5-YK5RZ6-mmXxc-B5D7mjwbR6u0fiX58NaIL2Wce1hVkraoycTOg2Q1wN25L-OwN2zLmTe9KbwQJ3lqoTsAGuq_tGz-nfHWLpf9cXaqYX3YvEqwN2BwNAs6YKyYCnsR65zG5FlzgSM5UERmDd05BXpI7mnDlhLKF=w996-h574-no\" alt=\"功能設定\" title=\"功能設定\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/Rp_UC6QBZeSOB_6j3kFgK-w9aZNOhE_oybskL2rkFZSdEFYrrfnylveIY0fX-wv3wODLHZyD8AOu2IUwYZebGn5Z7r_rx1jNg61SVDRhuXDYKoLpz7WTfCkcrlZqUx2iEyYJifDtSjDE8GtWehIa8QhwbX1Bvd5qV2vg3Ib5opXrbirNkPy_u-LACXcIrb2ppbRJgs18C9KQs-PY1EPOq3L0s82tpCNkDgGm7vXPVzxcof5zYRpF9VEWumxKadf5a080ALj2oqP6zmZsKJNQdLNzVr2xX8GU-n37TijB4G2masD6i1M6LcSxupOoO038I4nlYutuCUfAy4zp4VKB5xX6oFpX1cXePexfH0Lcdak1yjxSO9r53B_ZrbDC3GhG98V9YehQ7ONMzcy0-vEGyijB-D5mzP6FMgDt6qQHOBwgjOt2p7DOOfHv3em8Z08YVcjb0PJD1hLCI6L28CynDIhZKmtVFAYFJnJytd8938x7xdRJ1p4Y0QMZSBDlXj6nj7uEbRcC082NGv9Q4HCjARts7YVkriMl6mmpGcXg9SsBJhfZOLaPl9_eUP2hAu2dntZpSxg9gOVpoEK3yohgeaXLKAOgqH55KDiAikDyw5e_Waqbvz3LqbfT3wR-z5SkYjhaK9nz0pZ4p59cnOkWqu_81nqpMHdGn0quQokoh-nO7WNgfZyL-7RZ=w561-h592-no\" alt=\"CORS 清單\" title=\"CORS 清單\"></p>\n<p>3) 一樣使用 <code>Live Server</code> 開啟範本，就會成功連上囉~</p>\n<h2 id=\"把-web-放到線上-server-測試\"><a href=\"#把-web-放到線上-server-測試\" class=\"headerlink\" title=\"把 web 放到線上 server 測試\"></a>把 web 放到線上 server 測試</h2><blockquote>\n<p>注意：剛剛上面都是使用 local web 測試。若要把 web 放在線上測試的話，需要在 Azure Function 設定連線變數。官網沒寫這段，害我鬼打牆了好一陣子呀～怎麼設定變數如下圖。</p>\n</blockquote>\n<p><img src=\"https://lh3.googleusercontent.com/_aALFr19DSl7A3vekHZWLNC-DKSZhWp44BLPoujaLFiCL6MDn8sxVNKZvw3IKB9-OmwOoxCHSa-ltJurLIG83osiLAaZeTjJxj8AlFnJBt3uGR2tyegFXkdoyxKpa1gDW3dZdPICSsCPiN4KMTlYAzSBdNEQoI3RnOvtkoNqruCcVph5qICYnAfBkGywtdR-dJjTyKKfuW8RZaFEPcHqqGhg35nibhg1jei8wJflLVHtN48vFNcsrAuyfGnziyEGjj-VxPocDb9ofJEHR8uRnIjL9qUOB-zGb9TA1j7Pyo1tV9UkuczX1KWXCO_jsd3rp-FDCAQ2dcHoLc6y9OagLkJSqGC7EJkaccgCuu1HRmb7_woIrvnIO8k5iYbvsf4bO7af8IBLgA-OFR_YlQpIGsXwoc1PSu-rMCGAEzSkhHsDNmTaCpyO-L-YLB7Z3vCOkavIMRpDV1ZcnLYd8jQ5USusENO0bzOXZNo4-D6sPyGhpl9g92pOoQmJ8DRgaxAqTGRxItUpkNLBDudfi-4-jGM_IDbnRTyLlWW9hLx3FLjDfA2QL0-z2Plp0NRfh9qdegDb3Ym-fmKS71Wp2g0WsVxhNhfdf9pDYcAkBDKqNF9HpIlRuATIi_HAGFGJ0W9imvB0-q2gQ1AfS2_YOIvUTK0v1Kl3-OFJuLwZqbm2kL4d-Sei-CSUkhV_=w451-h285-no\" alt=\"Configuration\" title=\"Configuration\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/jeAfFyL52YQfyyvIpqgAMgrqCLGm3yBtZDYfH_VXbFExgRV2kTjgkj5TOad0fZ4EkwPYyKOfKrgajprSXSsqmn4Tdcp_73h5YRS0VBZz55ZoHE6_ojFZ7TmeAOnd7ONKRQFxzr5jRZEZd34eWwVahN9o9bZYgcBWpebxN0fIihVQdrf3a6meMzzLPRH1HVX8hXwXr_W0j3FKVAz2Lf2-cNa1Bni_eycfszIrU7XIf8fiVuldSBReqZgd5NtbSuiRJSPFIuCjg08_X9e2aCeeKYBfjuy9tS7c2V4f0gUk3CoC9W-Beyh3ueJ17TkIm0BhzbUqWt8y374DL7FQKr55GaHzz734aRkvVOQnUNeR6efL1KVcriTVDwNCbjuqovljM7_b7VvQtY9O766_F8R1TNMRz26z6sqN9QfFbEFGEBbmECjJbecN8VKb-gTZ_4qSqnHTyiI-UCzcWPddZkoZ1mRridVcnZexsEQ6TD-k7upFmprShkVX-MuP-QIjR6MPqS0QCiwTbzSLB6rwgXbdylDIh6oUlc-5PrpYBhetsdjEIKqIDQNKOkEngxCuZn50bixXooAT78orR4EatTwcd67ERYGRqJRB4KQOxSfHaJCuq9ut53NvM9lPxsPsO0f_kuFsYL46-sSodOnd2-CE2dtRUK-nrqejDhWL_9EdLwBTrlAM9Dqph-Yt=w989-h560-no\" alt=\"Add Variable\" title=\"Add Variable\"></p>\n<blockquote>\n<p>記得如果是線上 web 都要把網域再加到 CORS 清單喔～</p>\n</blockquote>\n<p>以上是無伺服器的雲端 Azure SignalR 基本安裝與設定，如果要玩地端的話可以參考官方<a href=\"https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/signalr?view=aspnetcore-2.2&amp;tabs=visual-studio\" target=\"_blank\" rel=\"noopener\">這篇</a>，那我們下次見～</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://docs.microsoft.com/zh-tw/azure/azure-signalr/signalr-quickstart-azure-functions-csharp\" target=\"_blank\" rel=\"noopener\">快速入門：使用 C# 搭配 Azure Functions 與 SignalR 服務來建立聊天室</a></li>\n<li><a href=\"https://docs.microsoft.com/zh-tw/azure/azure-signalr/signalr-quickstart-azure-functions-javascript\" target=\"_blank\" rel=\"noopener\">快速入門：使用 JavaScript 搭配 Azure Functions 與 SignalR 服務來建立聊天室</a></li>\n<li><a href=\"https://docs.microsoft.com/zh-tw/azure/azure-functions/functions-develop-vs-code\" target=\"_blank\" rel=\"noopener\">使用 Visual Studio Code 開發 Azure Functions</a></li>\n<li><a href=\"https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/signalr?view=aspnetcore-2.2&amp;tabs=visual-studio\" target=\"_blank\" rel=\"noopener\">教學課程：開始使用 ASP.NET Core SignalR</a></li>\n<li><a href=\"https://docs.microsoft.com/zh-tw/aspnet/core/signalr/hubs?view=aspnetcore-2.2#send-messages-to-clients\" target=\"_blank\" rel=\"noopener\">將訊息傳送至用戶端</a></li>\n<li><a href=\"https://youtu.be/MK8n8pg9bLE\" target=\"_blank\" rel=\"noopener\">SignalR Tutorial 16 - Coding Our JavaScript (Client Side) - Part 1</a></li>\n</ul>"},{"title":"2018 My Sketch Useful Plugins","thumbnailImage":"https://lh3.googleusercontent.com/15TevdlU0UA0DHjDXR8IFLjUteZ4XGxRObDpCwsIumenN6CLFYQFRcoJnS_6xYGMmbUFHxpqlXp25FcRXorD83F2vgEoldt2orwKDe1_QGMpNRhvu0KtXQ1KxuXUV7GTUSCOn4GXJMj8lCETJtDBXcyl6bi_snLs80aQJu-mSbdzJ-Bj3D_0DpmVrnfS_KyUD7I-RnQZ5FOzarAYJmXYpwjBXGZkGNc1CtiSJ1OAQPCXFsOIj0Wnw8Bpq8z0ysUDOZXt6ZWoC74yspZm10_zGEUyjm5axY0SDCxxwPcdJ_GIhoz90_L9wqRjz1NLVOBgPsDmQwWKzCd4o-M-VgjflYccFA45jcNEr5vV5Pce3JKqX9gJFIL-qVW9J5Y_qjMBZdOr7M3YWveJeo8daOKrF1CIGuInKckICK5-K4h52V_CpV_1jEPEDRfI5OGnX4AfFPnntVRmP3y8raD5ajnxgnFAj3bVmaC4XSDO9ZLJd-soMaaTqa-URYTv4WjGJZGpM-XP2MYrMVyQyafCzc90XKuxo3stdk7qL9-Hua-AQi5S5iVLacJz8LSTRqGcy8vXu_vIG8YHLOCAQAQO3pXJxcwu33BlttXskTLk-b8j2MvYr1OM25EW35MThuYOQNimlGLn7P7f5sphQiTt-aNT0mj-HrD_xE05=s250-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/Ht5ducjpGZIxCwrhATVndjvHuH_-Kz2Tl3a4r071v7j_GHdCDyo5D5myiDer5DZwdhCDWb0ZSgwdusqZsgc3q2GXPXv3I_CGwluVHNyiieve2YsRUy9_-xuJONWJJZ4Fd4gxZAqXh8J57Q811ITlBRHUuA6UJQeM_9cQ52vpmFWXIgM3NBlV0_QcBebviTM6XT3EHucC0Wv4LFpCYffHzM_Aftc_YTG7QVrG5wtBg0ebGhMggyMme6j1kRuxdOI_nvoFpTYxHr58P68R5rcSdXxVXZ0FeYpKaNkmkZ7rNhsL_z3iWI7CxjbSPJD5USGFSS88OdSfp34p9dysnyk8-FJN3COPgxcZh0krE_Yn_pUhAObBn5nWC6WdZzTFCcTHhY4GDsYlsO2OsizYSscRoqCfUaZ_byBLYop2mr4-I2NsOwVTHVMCa3XLZ-bKoEei_GDNuBeSOs6s03lLVgN0-BPnXhqQkRRVSTvg74D1cu65nlDdMEe__a_H8PJxRuxo7kIzuZS2gP7vjwiKkd2bYR705P6P8mWVJf0RTDED3uTtM3it9yvTOa77wiJJtr5Y0h75S5ZrcclHDu6t9WcyFB3yrLuPBNPuieuy10HMhHXBqZqQRX8tyPZaQwNiANFgBQQ1MYs_jXPXnrj5y5-GneVm30LkL5UE=w1024-h683-no","coverMeta":"out","date":"2018-11-03T16:00:00.000Z","updated":"2018-11-03T16:00:00.000Z","_content":"\n這次整理我平常有用且覺得好用的 `Sketch Plugin` 有哪些，有了這些 Plugin 讓我又節省了許多寶貴的時間。\n\n<!--more-->\n\n***\n## Abstract 版本控制\n\n這個不用多說了，之前有先寫了一篇專門講 `Abstract` 版本控制的文章，連結參考[這裡](../Git-Control-for-Using-Abstract-to-Manage-Sketch-Files)。\n\n***\n## Content Generator 內容生成器\n\n每次設計時作個資、照片等假資料又讓你心力憔悴了嗎？不用怕，`Content Generator` 讓你事半功倍，再也不用去 google 搜集資料。只要選起來要替換的部分，再設定要替換的內容即可輕輕鬆鬆完成。\n\nGithub: [https://github.com/timuric/Content-generator-sketch-plugin](https://github.com/timuric/Content-generator-sketch-plugin)\n\nDemo:\n\nGenerating pictures\n![Generating pictures](https://raw.githubusercontent.com/timuric/Content-generator-for-sketch-app/master/tutorial/userpics.gif \"Generating pictures\")\n\nGenerating names\n![Generating names](https://raw.githubusercontent.com/timuric/Content-generator-for-sketch-app/master/tutorial/names.gif \"Generating names\")\n\n其他更多 Demo，去 repo 就看的到囉～\n\n***\n## Paddy 間距設定工具\n\n這個工具主要是因為 Sketch 如果要做按鈕等中間文字長度不固定的元件時，每次都需要重新拉上下左右的間距。使用此工具可以設定固定的間距減少重工的發生。當修改文字或內容時，會自動變更外面的形狀以符合設定。Sketch 未來會把此功能加進去，所以此工具的開發者目前不再繼續維護，但在 Sketch 將新功能加進去之前，還是可以用此工具來設定間距。\n\nGithub: [https://github.com/DWilliames/paddy-sketch-plugin](https://github.com/DWilliames/paddy-sketch-plugin)\n\nDemo:\n![Paddy](https://github.com/DWilliames/paddy-sketch-plugin/raw/master/.images/GIFs/main.gif \"Paddy\")\n\n***\n## Sketch Measure 生成 spec 工具\n\n設計師和工程師之間要如何溝通 design spec 一直是一個很重要的環節。市面上有很多相關的付費軟體，但 `Sketch Measure` 的優勢就在於它是免費且可以生成獨立的 `HTML` 靜態檔（不需上網），只要有瀏覽器即可開啟。我想 Sketch 往後一定會出相關的功能，不過目前用此工具的感覺還不錯，且生成出來的畫面很漂亮。\n\nGithub: [https://github.com/utom/sketch-measure](https://github.com/utom/sketch-measure)\n\nDemo: [http://utom.design/news/](http://utom.design/news/)\n![Sketch Measure](https://camo.githubusercontent.com/87118bae9cca2b18441601d87ca8d6682984afa7/687474703a2f2f75746f6d2e64657369676e2f6578706f72744032782e706e67 \"Sketch Measure\")\n\n***\n## Sketch Palettes 調色盤儲存器\n\n會使用到 `Sketch Palettes` 功能的時機是因為我想把某一個專案的調色盤顏色群組，整個拿到另一個專案裡使用。他的用法是先匯出顏色群組，然後再另一個檔案進行匯入，使用上蠻直覺的。\n\nGithub: [https://github.com/andrewfiorillo/sketch-palettes](https://github.com/andrewfiorillo/sketch-palettes)\n\nDemo:\n![Sketch Palettes](https://github.com/andrewfiorillo/sketch-palettes/raw/master/palettes.png \"Sketch Palettes\")\n\n***\n## Symbol Instance Locator 尋找符號工具\n\nSymbol 在 Sketch 是一個很好用的功能，可以建立一個元件讓許多頁面共用。但若是想找某個 Symbol 用在哪些地方的話要怎麼辦呢？我之前就遇到只要在某些頁面將 symbol 替換成另一個組件的問題，`Symbol Instance Locator` 可以列出所有用到此 symbol 的地方，點擊即可跳往所在頁面，非常實用。\n\nGithub: [https://github.com/sonburn/symbol-instance-locator](https://github.com/sonburn/symbol-instance-locator)\n\nDemo:\n![Symbol Instance Locator](https://raw.githubusercontent.com/sonburn/symbol-instance-locator/master/images/screenshot.png \"Symbol Instance Locator\")\n\n***\n## Symbol Organizer 符號整理器\n\n每次建立 Symbol 時， Sketch 都會將元件新增在另一個 Symbol Page 上，久而久之，Symbol Page 就會變得凌亂不堪。`Symbol Organizer` 就是為了解決此問題才下載的，他可以依據設定值快速幫你排好所有在 Symbol Page 上的 Symbol，不用一個一個調間距啥鬼的，看完超感動！！如果一般頁面也可以用就好了，因為此工具僅適用在 Symbol Page 上，美中不足啊！如果有人有看到類似的工具快跟我說ＸＤ\n\nGithub: [https://github.com/sonburn/symbol-organizer](https://github.com/sonburn/symbol-organizer)\n\nDemo:\n![Symbol Organizer](https://raw.githubusercontent.com/sonburn/symbol-organizer/master/images/screenshot.png \"Symbol Organizer\")\n\n***\n## Unsplash 圖片生成器\n\n這是 Unsplash 和 Sketch 官方合作的工具。為什麼我已經安裝 `Content Generator` 內容生成器，卻還要裝 `Unsplash` 呢？ 原因很簡單，因為 `Unsplash` 的圖片很漂亮，為了要讓 BOSS 能減少打槍的次數，用美美的圖片 Demo 是非常重要的戰力。我也經常去搜尋他的免費照片做設計，是個超佛心的網站。\n\nGithub: [https://github.com/BohemianCoding/unsplash-sketchplugin](https://github.com/BohemianCoding/unsplash-sketchplugin)\n\nDemo:\n![Unsplash](https://github.com/BohemianCoding/unsplash-sketchplugin/raw/master/docs/unsplash-screenshot-001.png \"Unsplash\")\n\n***\n\n很感謝這些開發者做這些 Plugins ，讓設計師們能節省很多寶貴的時間，除了能更順利的闖關之外，還可以去做更多有意義的事情。","source":"_posts/UXUI/2018-My-Sketch-Useful-Plugins.md","raw":"---\ntitle: 2018 My Sketch Useful Plugins\ncategories:\n  - UXUI\nthumbnailImage: https://lh3.googleusercontent.com/15TevdlU0UA0DHjDXR8IFLjUteZ4XGxRObDpCwsIumenN6CLFYQFRcoJnS_6xYGMmbUFHxpqlXp25FcRXorD83F2vgEoldt2orwKDe1_QGMpNRhvu0KtXQ1KxuXUV7GTUSCOn4GXJMj8lCETJtDBXcyl6bi_snLs80aQJu-mSbdzJ-Bj3D_0DpmVrnfS_KyUD7I-RnQZ5FOzarAYJmXYpwjBXGZkGNc1CtiSJ1OAQPCXFsOIj0Wnw8Bpq8z0ysUDOZXt6ZWoC74yspZm10_zGEUyjm5axY0SDCxxwPcdJ_GIhoz90_L9wqRjz1NLVOBgPsDmQwWKzCd4o-M-VgjflYccFA45jcNEr5vV5Pce3JKqX9gJFIL-qVW9J5Y_qjMBZdOr7M3YWveJeo8daOKrF1CIGuInKckICK5-K4h52V_CpV_1jEPEDRfI5OGnX4AfFPnntVRmP3y8raD5ajnxgnFAj3bVmaC4XSDO9ZLJd-soMaaTqa-URYTv4WjGJZGpM-XP2MYrMVyQyafCzc90XKuxo3stdk7qL9-Hua-AQi5S5iVLacJz8LSTRqGcy8vXu_vIG8YHLOCAQAQO3pXJxcwu33BlttXskTLk-b8j2MvYr1OM25EW35MThuYOQNimlGLn7P7f5sphQiTt-aNT0mj-HrD_xE05=s250-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/Ht5ducjpGZIxCwrhATVndjvHuH_-Kz2Tl3a4r071v7j_GHdCDyo5D5myiDer5DZwdhCDWb0ZSgwdusqZsgc3q2GXPXv3I_CGwluVHNyiieve2YsRUy9_-xuJONWJJZ4Fd4gxZAqXh8J57Q811ITlBRHUuA6UJQeM_9cQ52vpmFWXIgM3NBlV0_QcBebviTM6XT3EHucC0Wv4LFpCYffHzM_Aftc_YTG7QVrG5wtBg0ebGhMggyMme6j1kRuxdOI_nvoFpTYxHr58P68R5rcSdXxVXZ0FeYpKaNkmkZ7rNhsL_z3iWI7CxjbSPJD5USGFSS88OdSfp34p9dysnyk8-FJN3COPgxcZh0krE_Yn_pUhAObBn5nWC6WdZzTFCcTHhY4GDsYlsO2OsizYSscRoqCfUaZ_byBLYop2mr4-I2NsOwVTHVMCa3XLZ-bKoEei_GDNuBeSOs6s03lLVgN0-BPnXhqQkRRVSTvg74D1cu65nlDdMEe__a_H8PJxRuxo7kIzuZS2gP7vjwiKkd2bYR705P6P8mWVJf0RTDED3uTtM3it9yvTOa77wiJJtr5Y0h75S5ZrcclHDu6t9WcyFB3yrLuPBNPuieuy10HMhHXBqZqQRX8tyPZaQwNiANFgBQQ1MYs_jXPXnrj5y5-GneVm30LkL5UE=w1024-h683-no\ncoverMeta: out\ntags: [Sketch, UX, UI]\ndate: 2018/11/04\nupdated: 2018/11/04\n---\n\n這次整理我平常有用且覺得好用的 `Sketch Plugin` 有哪些，有了這些 Plugin 讓我又節省了許多寶貴的時間。\n\n<!--more-->\n\n***\n## Abstract 版本控制\n\n這個不用多說了，之前有先寫了一篇專門講 `Abstract` 版本控制的文章，連結參考[這裡](../Git-Control-for-Using-Abstract-to-Manage-Sketch-Files)。\n\n***\n## Content Generator 內容生成器\n\n每次設計時作個資、照片等假資料又讓你心力憔悴了嗎？不用怕，`Content Generator` 讓你事半功倍，再也不用去 google 搜集資料。只要選起來要替換的部分，再設定要替換的內容即可輕輕鬆鬆完成。\n\nGithub: [https://github.com/timuric/Content-generator-sketch-plugin](https://github.com/timuric/Content-generator-sketch-plugin)\n\nDemo:\n\nGenerating pictures\n![Generating pictures](https://raw.githubusercontent.com/timuric/Content-generator-for-sketch-app/master/tutorial/userpics.gif \"Generating pictures\")\n\nGenerating names\n![Generating names](https://raw.githubusercontent.com/timuric/Content-generator-for-sketch-app/master/tutorial/names.gif \"Generating names\")\n\n其他更多 Demo，去 repo 就看的到囉～\n\n***\n## Paddy 間距設定工具\n\n這個工具主要是因為 Sketch 如果要做按鈕等中間文字長度不固定的元件時，每次都需要重新拉上下左右的間距。使用此工具可以設定固定的間距減少重工的發生。當修改文字或內容時，會自動變更外面的形狀以符合設定。Sketch 未來會把此功能加進去，所以此工具的開發者目前不再繼續維護，但在 Sketch 將新功能加進去之前，還是可以用此工具來設定間距。\n\nGithub: [https://github.com/DWilliames/paddy-sketch-plugin](https://github.com/DWilliames/paddy-sketch-plugin)\n\nDemo:\n![Paddy](https://github.com/DWilliames/paddy-sketch-plugin/raw/master/.images/GIFs/main.gif \"Paddy\")\n\n***\n## Sketch Measure 生成 spec 工具\n\n設計師和工程師之間要如何溝通 design spec 一直是一個很重要的環節。市面上有很多相關的付費軟體，但 `Sketch Measure` 的優勢就在於它是免費且可以生成獨立的 `HTML` 靜態檔（不需上網），只要有瀏覽器即可開啟。我想 Sketch 往後一定會出相關的功能，不過目前用此工具的感覺還不錯，且生成出來的畫面很漂亮。\n\nGithub: [https://github.com/utom/sketch-measure](https://github.com/utom/sketch-measure)\n\nDemo: [http://utom.design/news/](http://utom.design/news/)\n![Sketch Measure](https://camo.githubusercontent.com/87118bae9cca2b18441601d87ca8d6682984afa7/687474703a2f2f75746f6d2e64657369676e2f6578706f72744032782e706e67 \"Sketch Measure\")\n\n***\n## Sketch Palettes 調色盤儲存器\n\n會使用到 `Sketch Palettes` 功能的時機是因為我想把某一個專案的調色盤顏色群組，整個拿到另一個專案裡使用。他的用法是先匯出顏色群組，然後再另一個檔案進行匯入，使用上蠻直覺的。\n\nGithub: [https://github.com/andrewfiorillo/sketch-palettes](https://github.com/andrewfiorillo/sketch-palettes)\n\nDemo:\n![Sketch Palettes](https://github.com/andrewfiorillo/sketch-palettes/raw/master/palettes.png \"Sketch Palettes\")\n\n***\n## Symbol Instance Locator 尋找符號工具\n\nSymbol 在 Sketch 是一個很好用的功能，可以建立一個元件讓許多頁面共用。但若是想找某個 Symbol 用在哪些地方的話要怎麼辦呢？我之前就遇到只要在某些頁面將 symbol 替換成另一個組件的問題，`Symbol Instance Locator` 可以列出所有用到此 symbol 的地方，點擊即可跳往所在頁面，非常實用。\n\nGithub: [https://github.com/sonburn/symbol-instance-locator](https://github.com/sonburn/symbol-instance-locator)\n\nDemo:\n![Symbol Instance Locator](https://raw.githubusercontent.com/sonburn/symbol-instance-locator/master/images/screenshot.png \"Symbol Instance Locator\")\n\n***\n## Symbol Organizer 符號整理器\n\n每次建立 Symbol 時， Sketch 都會將元件新增在另一個 Symbol Page 上，久而久之，Symbol Page 就會變得凌亂不堪。`Symbol Organizer` 就是為了解決此問題才下載的，他可以依據設定值快速幫你排好所有在 Symbol Page 上的 Symbol，不用一個一個調間距啥鬼的，看完超感動！！如果一般頁面也可以用就好了，因為此工具僅適用在 Symbol Page 上，美中不足啊！如果有人有看到類似的工具快跟我說ＸＤ\n\nGithub: [https://github.com/sonburn/symbol-organizer](https://github.com/sonburn/symbol-organizer)\n\nDemo:\n![Symbol Organizer](https://raw.githubusercontent.com/sonburn/symbol-organizer/master/images/screenshot.png \"Symbol Organizer\")\n\n***\n## Unsplash 圖片生成器\n\n這是 Unsplash 和 Sketch 官方合作的工具。為什麼我已經安裝 `Content Generator` 內容生成器，卻還要裝 `Unsplash` 呢？ 原因很簡單，因為 `Unsplash` 的圖片很漂亮，為了要讓 BOSS 能減少打槍的次數，用美美的圖片 Demo 是非常重要的戰力。我也經常去搜尋他的免費照片做設計，是個超佛心的網站。\n\nGithub: [https://github.com/BohemianCoding/unsplash-sketchplugin](https://github.com/BohemianCoding/unsplash-sketchplugin)\n\nDemo:\n![Unsplash](https://github.com/BohemianCoding/unsplash-sketchplugin/raw/master/docs/unsplash-screenshot-001.png \"Unsplash\")\n\n***\n\n很感謝這些開發者做這些 Plugins ，讓設計師們能節省很多寶貴的時間，除了能更順利的闖關之外，還可以去做更多有意義的事情。","slug":"UXUI/2018-My-Sketch-Useful-Plugins","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74s001gtudhvncjctpb","content":"<p>這次整理我平常有用且覺得好用的 <code>Sketch Plugin</code> 有哪些，有了這些 Plugin 讓我又節省了許多寶貴的時間。</p>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"Abstract-版本控制\"><a href=\"#Abstract-版本控制\" class=\"headerlink\" title=\"Abstract 版本控制\"></a>Abstract 版本控制</h2><p>這個不用多說了，之前有先寫了一篇專門講 <code>Abstract</code> 版本控制的文章，連結參考<a href=\"../Git-Control-for-Using-Abstract-to-Manage-Sketch-Files\">這裡</a>。</p>\n<hr>\n<h2 id=\"Content-Generator-內容生成器\"><a href=\"#Content-Generator-內容生成器\" class=\"headerlink\" title=\"Content Generator 內容生成器\"></a>Content Generator 內容生成器</h2><p>每次設計時作個資、照片等假資料又讓你心力憔悴了嗎？不用怕，<code>Content Generator</code> 讓你事半功倍，再也不用去 google 搜集資料。只要選起來要替換的部分，再設定要替換的內容即可輕輕鬆鬆完成。</p>\n<p>Github: <a href=\"https://github.com/timuric/Content-generator-sketch-plugin\" target=\"_blank\" rel=\"noopener\">https://github.com/timuric/Content-generator-sketch-plugin</a></p>\n<p>Demo:</p>\n<p>Generating pictures<br><img src=\"https://raw.githubusercontent.com/timuric/Content-generator-for-sketch-app/master/tutorial/userpics.gif\" alt=\"Generating pictures\" title=\"Generating pictures\"></p>\n<p>Generating names<br><img src=\"https://raw.githubusercontent.com/timuric/Content-generator-for-sketch-app/master/tutorial/names.gif\" alt=\"Generating names\" title=\"Generating names\"></p>\n<p>其他更多 Demo，去 repo 就看的到囉～</p>\n<hr>\n<h2 id=\"Paddy-間距設定工具\"><a href=\"#Paddy-間距設定工具\" class=\"headerlink\" title=\"Paddy 間距設定工具\"></a>Paddy 間距設定工具</h2><p>這個工具主要是因為 Sketch 如果要做按鈕等中間文字長度不固定的元件時，每次都需要重新拉上下左右的間距。使用此工具可以設定固定的間距減少重工的發生。當修改文字或內容時，會自動變更外面的形狀以符合設定。Sketch 未來會把此功能加進去，所以此工具的開發者目前不再繼續維護，但在 Sketch 將新功能加進去之前，還是可以用此工具來設定間距。</p>\n<p>Github: <a href=\"https://github.com/DWilliames/paddy-sketch-plugin\" target=\"_blank\" rel=\"noopener\">https://github.com/DWilliames/paddy-sketch-plugin</a></p>\n<p>Demo:<br><img src=\"https://github.com/DWilliames/paddy-sketch-plugin/raw/master/.images/GIFs/main.gif\" alt=\"Paddy\" title=\"Paddy\"></p>\n<hr>\n<h2 id=\"Sketch-Measure-生成-spec-工具\"><a href=\"#Sketch-Measure-生成-spec-工具\" class=\"headerlink\" title=\"Sketch Measure 生成 spec 工具\"></a>Sketch Measure 生成 spec 工具</h2><p>設計師和工程師之間要如何溝通 design spec 一直是一個很重要的環節。市面上有很多相關的付費軟體，但 <code>Sketch Measure</code> 的優勢就在於它是免費且可以生成獨立的 <code>HTML</code> 靜態檔（不需上網），只要有瀏覽器即可開啟。我想 Sketch 往後一定會出相關的功能，不過目前用此工具的感覺還不錯，且生成出來的畫面很漂亮。</p>\n<p>Github: <a href=\"https://github.com/utom/sketch-measure\" target=\"_blank\" rel=\"noopener\">https://github.com/utom/sketch-measure</a></p>\n<p>Demo: <a href=\"http://utom.design/news/\" target=\"_blank\" rel=\"noopener\">http://utom.design/news/</a><br><img src=\"https://camo.githubusercontent.com/87118bae9cca2b18441601d87ca8d6682984afa7/687474703a2f2f75746f6d2e64657369676e2f6578706f72744032782e706e67\" alt=\"Sketch Measure\" title=\"Sketch Measure\"></p>\n<hr>\n<h2 id=\"Sketch-Palettes-調色盤儲存器\"><a href=\"#Sketch-Palettes-調色盤儲存器\" class=\"headerlink\" title=\"Sketch Palettes 調色盤儲存器\"></a>Sketch Palettes 調色盤儲存器</h2><p>會使用到 <code>Sketch Palettes</code> 功能的時機是因為我想把某一個專案的調色盤顏色群組，整個拿到另一個專案裡使用。他的用法是先匯出顏色群組，然後再另一個檔案進行匯入，使用上蠻直覺的。</p>\n<p>Github: <a href=\"https://github.com/andrewfiorillo/sketch-palettes\" target=\"_blank\" rel=\"noopener\">https://github.com/andrewfiorillo/sketch-palettes</a></p>\n<p>Demo:<br><img src=\"https://github.com/andrewfiorillo/sketch-palettes/raw/master/palettes.png\" alt=\"Sketch Palettes\" title=\"Sketch Palettes\"></p>\n<hr>\n<h2 id=\"Symbol-Instance-Locator-尋找符號工具\"><a href=\"#Symbol-Instance-Locator-尋找符號工具\" class=\"headerlink\" title=\"Symbol Instance Locator 尋找符號工具\"></a>Symbol Instance Locator 尋找符號工具</h2><p>Symbol 在 Sketch 是一個很好用的功能，可以建立一個元件讓許多頁面共用。但若是想找某個 Symbol 用在哪些地方的話要怎麼辦呢？我之前就遇到只要在某些頁面將 symbol 替換成另一個組件的問題，<code>Symbol Instance Locator</code> 可以列出所有用到此 symbol 的地方，點擊即可跳往所在頁面，非常實用。</p>\n<p>Github: <a href=\"https://github.com/sonburn/symbol-instance-locator\" target=\"_blank\" rel=\"noopener\">https://github.com/sonburn/symbol-instance-locator</a></p>\n<p>Demo:<br><img src=\"https://raw.githubusercontent.com/sonburn/symbol-instance-locator/master/images/screenshot.png\" alt=\"Symbol Instance Locator\" title=\"Symbol Instance Locator\"></p>\n<hr>\n<h2 id=\"Symbol-Organizer-符號整理器\"><a href=\"#Symbol-Organizer-符號整理器\" class=\"headerlink\" title=\"Symbol Organizer 符號整理器\"></a>Symbol Organizer 符號整理器</h2><p>每次建立 Symbol 時， Sketch 都會將元件新增在另一個 Symbol Page 上，久而久之，Symbol Page 就會變得凌亂不堪。<code>Symbol Organizer</code> 就是為了解決此問題才下載的，他可以依據設定值快速幫你排好所有在 Symbol Page 上的 Symbol，不用一個一個調間距啥鬼的，看完超感動！！如果一般頁面也可以用就好了，因為此工具僅適用在 Symbol Page 上，美中不足啊！如果有人有看到類似的工具快跟我說ＸＤ</p>\n<p>Github: <a href=\"https://github.com/sonburn/symbol-organizer\" target=\"_blank\" rel=\"noopener\">https://github.com/sonburn/symbol-organizer</a></p>\n<p>Demo:<br><img src=\"https://raw.githubusercontent.com/sonburn/symbol-organizer/master/images/screenshot.png\" alt=\"Symbol Organizer\" title=\"Symbol Organizer\"></p>\n<hr>\n<h2 id=\"Unsplash-圖片生成器\"><a href=\"#Unsplash-圖片生成器\" class=\"headerlink\" title=\"Unsplash 圖片生成器\"></a>Unsplash 圖片生成器</h2><p>這是 Unsplash 和 Sketch 官方合作的工具。為什麼我已經安裝 <code>Content Generator</code> 內容生成器，卻還要裝 <code>Unsplash</code> 呢？ 原因很簡單，因為 <code>Unsplash</code> 的圖片很漂亮，為了要讓 BOSS 能減少打槍的次數，用美美的圖片 Demo 是非常重要的戰力。我也經常去搜尋他的免費照片做設計，是個超佛心的網站。</p>\n<p>Github: <a href=\"https://github.com/BohemianCoding/unsplash-sketchplugin\" target=\"_blank\" rel=\"noopener\">https://github.com/BohemianCoding/unsplash-sketchplugin</a></p>\n<p>Demo:<br><img src=\"https://github.com/BohemianCoding/unsplash-sketchplugin/raw/master/docs/unsplash-screenshot-001.png\" alt=\"Unsplash\" title=\"Unsplash\"></p>\n<hr>\n<p>很感謝這些開發者做這些 Plugins ，讓設計師們能節省很多寶貴的時間，除了能更順利的闖關之外，還可以去做更多有意義的事情。</p>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/15TevdlU0UA0DHjDXR8IFLjUteZ4XGxRObDpCwsIumenN6CLFYQFRcoJnS_6xYGMmbUFHxpqlXp25FcRXorD83F2vgEoldt2orwKDe1_QGMpNRhvu0KtXQ1KxuXUV7GTUSCOn4GXJMj8lCETJtDBXcyl6bi_snLs80aQJu-mSbdzJ-Bj3D_0DpmVrnfS_KyUD7I-RnQZ5FOzarAYJmXYpwjBXGZkGNc1CtiSJ1OAQPCXFsOIj0Wnw8Bpq8z0ysUDOZXt6ZWoC74yspZm10_zGEUyjm5axY0SDCxxwPcdJ_GIhoz90_L9wqRjz1NLVOBgPsDmQwWKzCd4o-M-VgjflYccFA45jcNEr5vV5Pce3JKqX9gJFIL-qVW9J5Y_qjMBZdOr7M3YWveJeo8daOKrF1CIGuInKckICK5-K4h52V_CpV_1jEPEDRfI5OGnX4AfFPnntVRmP3y8raD5ajnxgnFAj3bVmaC4XSDO9ZLJd-soMaaTqa-URYTv4WjGJZGpM-XP2MYrMVyQyafCzc90XKuxo3stdk7qL9-Hua-AQi5S5iVLacJz8LSTRqGcy8vXu_vIG8YHLOCAQAQO3pXJxcwu33BlttXskTLk-b8j2MvYr1OM25EW35MThuYOQNimlGLn7P7f5sphQiTt-aNT0mj-HrD_xE05=s250-no","excerpt":"<p>這次整理我平常有用且覺得好用的 <code>Sketch Plugin</code> 有哪些，有了這些 Plugin 讓我又節省了許多寶貴的時間。</p>","more":"<hr>\n<h2 id=\"Abstract-版本控制\"><a href=\"#Abstract-版本控制\" class=\"headerlink\" title=\"Abstract 版本控制\"></a>Abstract 版本控制</h2><p>這個不用多說了，之前有先寫了一篇專門講 <code>Abstract</code> 版本控制的文章，連結參考<a href=\"../Git-Control-for-Using-Abstract-to-Manage-Sketch-Files\">這裡</a>。</p>\n<hr>\n<h2 id=\"Content-Generator-內容生成器\"><a href=\"#Content-Generator-內容生成器\" class=\"headerlink\" title=\"Content Generator 內容生成器\"></a>Content Generator 內容生成器</h2><p>每次設計時作個資、照片等假資料又讓你心力憔悴了嗎？不用怕，<code>Content Generator</code> 讓你事半功倍，再也不用去 google 搜集資料。只要選起來要替換的部分，再設定要替換的內容即可輕輕鬆鬆完成。</p>\n<p>Github: <a href=\"https://github.com/timuric/Content-generator-sketch-plugin\" target=\"_blank\" rel=\"noopener\">https://github.com/timuric/Content-generator-sketch-plugin</a></p>\n<p>Demo:</p>\n<p>Generating pictures<br><img src=\"https://raw.githubusercontent.com/timuric/Content-generator-for-sketch-app/master/tutorial/userpics.gif\" alt=\"Generating pictures\" title=\"Generating pictures\"></p>\n<p>Generating names<br><img src=\"https://raw.githubusercontent.com/timuric/Content-generator-for-sketch-app/master/tutorial/names.gif\" alt=\"Generating names\" title=\"Generating names\"></p>\n<p>其他更多 Demo，去 repo 就看的到囉～</p>\n<hr>\n<h2 id=\"Paddy-間距設定工具\"><a href=\"#Paddy-間距設定工具\" class=\"headerlink\" title=\"Paddy 間距設定工具\"></a>Paddy 間距設定工具</h2><p>這個工具主要是因為 Sketch 如果要做按鈕等中間文字長度不固定的元件時，每次都需要重新拉上下左右的間距。使用此工具可以設定固定的間距減少重工的發生。當修改文字或內容時，會自動變更外面的形狀以符合設定。Sketch 未來會把此功能加進去，所以此工具的開發者目前不再繼續維護，但在 Sketch 將新功能加進去之前，還是可以用此工具來設定間距。</p>\n<p>Github: <a href=\"https://github.com/DWilliames/paddy-sketch-plugin\" target=\"_blank\" rel=\"noopener\">https://github.com/DWilliames/paddy-sketch-plugin</a></p>\n<p>Demo:<br><img src=\"https://github.com/DWilliames/paddy-sketch-plugin/raw/master/.images/GIFs/main.gif\" alt=\"Paddy\" title=\"Paddy\"></p>\n<hr>\n<h2 id=\"Sketch-Measure-生成-spec-工具\"><a href=\"#Sketch-Measure-生成-spec-工具\" class=\"headerlink\" title=\"Sketch Measure 生成 spec 工具\"></a>Sketch Measure 生成 spec 工具</h2><p>設計師和工程師之間要如何溝通 design spec 一直是一個很重要的環節。市面上有很多相關的付費軟體，但 <code>Sketch Measure</code> 的優勢就在於它是免費且可以生成獨立的 <code>HTML</code> 靜態檔（不需上網），只要有瀏覽器即可開啟。我想 Sketch 往後一定會出相關的功能，不過目前用此工具的感覺還不錯，且生成出來的畫面很漂亮。</p>\n<p>Github: <a href=\"https://github.com/utom/sketch-measure\" target=\"_blank\" rel=\"noopener\">https://github.com/utom/sketch-measure</a></p>\n<p>Demo: <a href=\"http://utom.design/news/\" target=\"_blank\" rel=\"noopener\">http://utom.design/news/</a><br><img src=\"https://camo.githubusercontent.com/87118bae9cca2b18441601d87ca8d6682984afa7/687474703a2f2f75746f6d2e64657369676e2f6578706f72744032782e706e67\" alt=\"Sketch Measure\" title=\"Sketch Measure\"></p>\n<hr>\n<h2 id=\"Sketch-Palettes-調色盤儲存器\"><a href=\"#Sketch-Palettes-調色盤儲存器\" class=\"headerlink\" title=\"Sketch Palettes 調色盤儲存器\"></a>Sketch Palettes 調色盤儲存器</h2><p>會使用到 <code>Sketch Palettes</code> 功能的時機是因為我想把某一個專案的調色盤顏色群組，整個拿到另一個專案裡使用。他的用法是先匯出顏色群組，然後再另一個檔案進行匯入，使用上蠻直覺的。</p>\n<p>Github: <a href=\"https://github.com/andrewfiorillo/sketch-palettes\" target=\"_blank\" rel=\"noopener\">https://github.com/andrewfiorillo/sketch-palettes</a></p>\n<p>Demo:<br><img src=\"https://github.com/andrewfiorillo/sketch-palettes/raw/master/palettes.png\" alt=\"Sketch Palettes\" title=\"Sketch Palettes\"></p>\n<hr>\n<h2 id=\"Symbol-Instance-Locator-尋找符號工具\"><a href=\"#Symbol-Instance-Locator-尋找符號工具\" class=\"headerlink\" title=\"Symbol Instance Locator 尋找符號工具\"></a>Symbol Instance Locator 尋找符號工具</h2><p>Symbol 在 Sketch 是一個很好用的功能，可以建立一個元件讓許多頁面共用。但若是想找某個 Symbol 用在哪些地方的話要怎麼辦呢？我之前就遇到只要在某些頁面將 symbol 替換成另一個組件的問題，<code>Symbol Instance Locator</code> 可以列出所有用到此 symbol 的地方，點擊即可跳往所在頁面，非常實用。</p>\n<p>Github: <a href=\"https://github.com/sonburn/symbol-instance-locator\" target=\"_blank\" rel=\"noopener\">https://github.com/sonburn/symbol-instance-locator</a></p>\n<p>Demo:<br><img src=\"https://raw.githubusercontent.com/sonburn/symbol-instance-locator/master/images/screenshot.png\" alt=\"Symbol Instance Locator\" title=\"Symbol Instance Locator\"></p>\n<hr>\n<h2 id=\"Symbol-Organizer-符號整理器\"><a href=\"#Symbol-Organizer-符號整理器\" class=\"headerlink\" title=\"Symbol Organizer 符號整理器\"></a>Symbol Organizer 符號整理器</h2><p>每次建立 Symbol 時， Sketch 都會將元件新增在另一個 Symbol Page 上，久而久之，Symbol Page 就會變得凌亂不堪。<code>Symbol Organizer</code> 就是為了解決此問題才下載的，他可以依據設定值快速幫你排好所有在 Symbol Page 上的 Symbol，不用一個一個調間距啥鬼的，看完超感動！！如果一般頁面也可以用就好了，因為此工具僅適用在 Symbol Page 上，美中不足啊！如果有人有看到類似的工具快跟我說ＸＤ</p>\n<p>Github: <a href=\"https://github.com/sonburn/symbol-organizer\" target=\"_blank\" rel=\"noopener\">https://github.com/sonburn/symbol-organizer</a></p>\n<p>Demo:<br><img src=\"https://raw.githubusercontent.com/sonburn/symbol-organizer/master/images/screenshot.png\" alt=\"Symbol Organizer\" title=\"Symbol Organizer\"></p>\n<hr>\n<h2 id=\"Unsplash-圖片生成器\"><a href=\"#Unsplash-圖片生成器\" class=\"headerlink\" title=\"Unsplash 圖片生成器\"></a>Unsplash 圖片生成器</h2><p>這是 Unsplash 和 Sketch 官方合作的工具。為什麼我已經安裝 <code>Content Generator</code> 內容生成器，卻還要裝 <code>Unsplash</code> 呢？ 原因很簡單，因為 <code>Unsplash</code> 的圖片很漂亮，為了要讓 BOSS 能減少打槍的次數，用美美的圖片 Demo 是非常重要的戰力。我也經常去搜尋他的免費照片做設計，是個超佛心的網站。</p>\n<p>Github: <a href=\"https://github.com/BohemianCoding/unsplash-sketchplugin\" target=\"_blank\" rel=\"noopener\">https://github.com/BohemianCoding/unsplash-sketchplugin</a></p>\n<p>Demo:<br><img src=\"https://github.com/BohemianCoding/unsplash-sketchplugin/raw/master/docs/unsplash-screenshot-001.png\" alt=\"Unsplash\" title=\"Unsplash\"></p>\n<hr>\n<p>很感謝這些開發者做這些 Plugins ，讓設計師們能節省很多寶貴的時間，除了能更順利的闖關之外，還可以去做更多有意義的事情。</p>"},{"title":"JS Retry Function","thumbnailImage":"https://cdn-images-1.medium.com/max/1600/1*HP8l7LMMt7Sh5UoO1T-yLQ.png","thumbnailImagePosition":"left","coverImage":"https://cdn-images-1.medium.com/max/1200/1*H-25KB7EbSHjv70HXrdl6w.png","coverMeta":"out","date":"2019-04-30T16:00:00.000Z","updated":"2019-04-30T16:00:00.000Z","_content":"\n工作上，參考一位前輩寫的 Retry function 的原理記錄，實做經過 N 秒後重複做一件事情的小程式。\n\n<!--more-->\n\n這裡從取得 AD 帳號來舉例。費話不多說，先上 code。\n\n```\nasync getADRetry(){\n    /*--------------------------\n        AD account Retry 機制\n        1. 成功取得 AD 回傳值\n        2. 無法取得 AD 開始 Retry\n        3. Retry 延遲秒數從 nextDelay 開始，每多一次就加 1 秒\n        4. Retry 次數最多 retryNumber 次\n        5. Retry 成功則回傳值，全部失敗則回傳 ''(空字串)\n    --------------------------*/\n    let NtAccount = '';\n    let nextDelay = 0;\n    let retryNumber = 5;\n\n    for(let i = 0; i < retryNumber; i++) {\n\n        // 延遲 nextDelay 秒後\n        await delayTime(nextDelay);\n        // 取得 user\n        NtAccount = getUserName();\n\n        if (NtAccount === '') {\n            // 無法取得 AD\n            // nextDelay 下一次加 1 秒\n            nextDelay = nextDelay + 1000;\n            // Continue Retry\n            console.log(`No AD. Retry [${i + 1}]: for ${nextDelay}ms...`);\n        } else {\n            // 成功取得 AD 跳出迴圈\n            console.log(`Get AD.`);\n            break;\n        }\n\n    }\n\n    return NtAccount;\n},\n```\n\n其中 delayTime 函數用 promise 即可實做，只要傳入毫秒 ms 就能得到延遲的動作。\n\n```\n// Delay 延遲秒數\nexport function delayTime (interval) {\n    return new Promise((resolve) => {\n        setTimeout(resolve, interval);\n    });\n};\n```","source":"_posts/JS/JS-Retry-Function.md","raw":"---\ntitle: JS Retry Function\ncategories:\n  - JS\nthumbnailImage: https://cdn-images-1.medium.com/max/1600/1*HP8l7LMMt7Sh5UoO1T-yLQ.png\nthumbnailImagePosition: left\ncoverImage: https://cdn-images-1.medium.com/max/1200/1*H-25KB7EbSHjv70HXrdl6w.png\ncoverMeta: out\ntags: [JS]\ndate: 2019/05/01\nupdated: 2019/05/01\n---\n\n工作上，參考一位前輩寫的 Retry function 的原理記錄，實做經過 N 秒後重複做一件事情的小程式。\n\n<!--more-->\n\n這裡從取得 AD 帳號來舉例。費話不多說，先上 code。\n\n```\nasync getADRetry(){\n    /*--------------------------\n        AD account Retry 機制\n        1. 成功取得 AD 回傳值\n        2. 無法取得 AD 開始 Retry\n        3. Retry 延遲秒數從 nextDelay 開始，每多一次就加 1 秒\n        4. Retry 次數最多 retryNumber 次\n        5. Retry 成功則回傳值，全部失敗則回傳 ''(空字串)\n    --------------------------*/\n    let NtAccount = '';\n    let nextDelay = 0;\n    let retryNumber = 5;\n\n    for(let i = 0; i < retryNumber; i++) {\n\n        // 延遲 nextDelay 秒後\n        await delayTime(nextDelay);\n        // 取得 user\n        NtAccount = getUserName();\n\n        if (NtAccount === '') {\n            // 無法取得 AD\n            // nextDelay 下一次加 1 秒\n            nextDelay = nextDelay + 1000;\n            // Continue Retry\n            console.log(`No AD. Retry [${i + 1}]: for ${nextDelay}ms...`);\n        } else {\n            // 成功取得 AD 跳出迴圈\n            console.log(`Get AD.`);\n            break;\n        }\n\n    }\n\n    return NtAccount;\n},\n```\n\n其中 delayTime 函數用 promise 即可實做，只要傳入毫秒 ms 就能得到延遲的動作。\n\n```\n// Delay 延遲秒數\nexport function delayTime (interval) {\n    return new Promise((resolve) => {\n        setTimeout(resolve, interval);\n    });\n};\n```","slug":"JS/JS-Retry-Function","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74t001ktudhblf6ct40","content":"<p>工作上，參考一位前輩寫的 Retry function 的原理記錄，實做經過 N 秒後重複做一件事情的小程式。</p>\n<a id=\"more\"></a>\n<p>這裡從取得 AD 帳號來舉例。費話不多說，先上 code。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">async getADRetry()&#123;</span><br><span class=\"line\">    /*--------------------------</span><br><span class=\"line\">        AD account Retry 機制</span><br><span class=\"line\">        1. 成功取得 AD 回傳值</span><br><span class=\"line\">        2. 無法取得 AD 開始 Retry</span><br><span class=\"line\">        3. Retry 延遲秒數從 nextDelay 開始，每多一次就加 1 秒</span><br><span class=\"line\">        4. Retry 次數最多 retryNumber 次</span><br><span class=\"line\">        5. Retry 成功則回傳值，全部失敗則回傳 &apos;&apos;(空字串)</span><br><span class=\"line\">    --------------------------*/</span><br><span class=\"line\">    let NtAccount = &apos;&apos;;</span><br><span class=\"line\">    let nextDelay = 0;</span><br><span class=\"line\">    let retryNumber = 5;</span><br><span class=\"line\"></span><br><span class=\"line\">    for(let i = 0; i &lt; retryNumber; i++) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        // 延遲 nextDelay 秒後</span><br><span class=\"line\">        await delayTime(nextDelay);</span><br><span class=\"line\">        // 取得 user</span><br><span class=\"line\">        NtAccount = getUserName();</span><br><span class=\"line\"></span><br><span class=\"line\">        if (NtAccount === &apos;&apos;) &#123;</span><br><span class=\"line\">            // 無法取得 AD</span><br><span class=\"line\">            // nextDelay 下一次加 1 秒</span><br><span class=\"line\">            nextDelay = nextDelay + 1000;</span><br><span class=\"line\">            // Continue Retry</span><br><span class=\"line\">            console.log(`No AD. Retry [$&#123;i + 1&#125;]: for $&#123;nextDelay&#125;ms...`);</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            // 成功取得 AD 跳出迴圈</span><br><span class=\"line\">            console.log(`Get AD.`);</span><br><span class=\"line\">            break;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    return NtAccount;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>其中 delayTime 函數用 promise 即可實做，只要傳入毫秒 ms 就能得到延遲的動作。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// Delay 延遲秒數</span><br><span class=\"line\">export function delayTime (interval) &#123;</span><br><span class=\"line\">    return new Promise((resolve) =&gt; &#123;</span><br><span class=\"line\">        setTimeout(resolve, interval);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"thumbnailImageUrl":"https://cdn-images-1.medium.com/max/1600/1*HP8l7LMMt7Sh5UoO1T-yLQ.png","excerpt":"<p>工作上，參考一位前輩寫的 Retry function 的原理記錄，實做經過 N 秒後重複做一件事情的小程式。</p>","more":"<p>這裡從取得 AD 帳號來舉例。費話不多說，先上 code。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">async getADRetry()&#123;</span><br><span class=\"line\">    /*--------------------------</span><br><span class=\"line\">        AD account Retry 機制</span><br><span class=\"line\">        1. 成功取得 AD 回傳值</span><br><span class=\"line\">        2. 無法取得 AD 開始 Retry</span><br><span class=\"line\">        3. Retry 延遲秒數從 nextDelay 開始，每多一次就加 1 秒</span><br><span class=\"line\">        4. Retry 次數最多 retryNumber 次</span><br><span class=\"line\">        5. Retry 成功則回傳值，全部失敗則回傳 &apos;&apos;(空字串)</span><br><span class=\"line\">    --------------------------*/</span><br><span class=\"line\">    let NtAccount = &apos;&apos;;</span><br><span class=\"line\">    let nextDelay = 0;</span><br><span class=\"line\">    let retryNumber = 5;</span><br><span class=\"line\"></span><br><span class=\"line\">    for(let i = 0; i &lt; retryNumber; i++) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        // 延遲 nextDelay 秒後</span><br><span class=\"line\">        await delayTime(nextDelay);</span><br><span class=\"line\">        // 取得 user</span><br><span class=\"line\">        NtAccount = getUserName();</span><br><span class=\"line\"></span><br><span class=\"line\">        if (NtAccount === &apos;&apos;) &#123;</span><br><span class=\"line\">            // 無法取得 AD</span><br><span class=\"line\">            // nextDelay 下一次加 1 秒</span><br><span class=\"line\">            nextDelay = nextDelay + 1000;</span><br><span class=\"line\">            // Continue Retry</span><br><span class=\"line\">            console.log(`No AD. Retry [$&#123;i + 1&#125;]: for $&#123;nextDelay&#125;ms...`);</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            // 成功取得 AD 跳出迴圈</span><br><span class=\"line\">            console.log(`Get AD.`);</span><br><span class=\"line\">            break;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    return NtAccount;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>其中 delayTime 函數用 promise 即可實做，只要傳入毫秒 ms 就能得到延遲的動作。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// Delay 延遲秒數</span><br><span class=\"line\">export function delayTime (interval) &#123;</span><br><span class=\"line\">    return new Promise((resolve) =&gt; &#123;</span><br><span class=\"line\">        setTimeout(resolve, interval);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>"},{"title":"React Redux Practice","thumbnailImage":"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/1200px-React-icon.svg.png","thumbnailImagePosition":"left","coverImage":"https://cdn-images-1.medium.com/max/1200/1*y6C4nSvy2Woe0m7bWEn4BA.png","coverMeta":"out","date":"2019-07-02T16:00:00.000Z","updated":"2019-07-02T16:00:00.000Z","_content":"\n最近朋友問我關於 Redux 的問題，但我已經有兩年沒碰 React 了。所以藉此機會找了 youtube 上的[教程](https://youtu.be/OSSpVLpuVWA)，好好複習一次。\n\n<!--more-->\n\n## Redux\n\n* Redux 透過單向數據流模型來管理狀態，幫助應用程式擴展規模\n\n![單向數據流模型](https://lh3.googleusercontent.com/RCAqIMcoBNaVcnbKPXupA177bJvvluPn3GeaSEywgKbQ9tqDWh-cjeds7KbOJiCWStxVGOQLR23kbd0nRhY31T_f7BlJY3CfCXXhGGqYqTaQvZiZKwIpOkY2QBnDdNxY1rEkqvHJAuIrvfRYS5HU5PAiW-JK5baYknZXW-dn14aeptIf1OXblwufjzgNDRSP1gZqUzvG1yyKF88XxV8isg76MQ2yONKLHhrzDNu5Yx_OrcP1u95MtLR9F-mZf_ah65I-JmVYpbtfECihE7VNEn58n7vMp2CIym4JLvRTFspEzCAerEklTkI4aF7oWqcnO-2fK_IImagVK_JU5D2dqBvGA9ZB6XChXPMmbYDs-dinini_zUPgFvYFQK0ZvhW7-KIBsMIVFNNgFhhVZb3wc3mcwrwIvLlmWkqpGHevqclMLAuWlaj-1LeYndUMfE5MzcZ8CSzu7Vo3YO_MjEh8mxSzICgvz-gnIUs6ezMhTCxxSp8SXuta7SZbTcgqDDFzx1BovCKvVgxlvOOD0hNneBq3C0yPBhVAB5mcNInZhjfhWYshXmEJUPZDUiHFXRmMzeCLmoRzUU0DzE2oasezhmYktkb4aRq9XzSkE2d8b9DILg4wWP3skCXG6syozRvTQwnu6z9tZMi96CvFm6RmyKiRebM-Vro_=w922-h548-no \"單向數據流模型\")\n\n* [Redux Devtools](https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd) 幫助開發者進行狀態的監控與偵錯\n\n![Redux Devtools](https://user-images.githubusercontent.com/7957859/48663602-3aac4900-ea9b-11e8-921f-97059cbb599c.png \"Redux Devtools\")\n\n## Redux Flow\n\nRedux Flow 有個儲存所有狀態 (State) 的倉庫 (Store)，頁面會依據這些狀態 (State) 產生對應的介面 (UI)。當使用者對介面 (UI) 觸發動作 (Actions) 時，動作 (Actions) 會把使用者所做的事情 (payload) 傳輸給處理器 (Reducer) 做運算， 處理器 (Reducer) 處理完後變會把倉庫 (Store) 裡的狀態 (State) 更新，所以頁面就會再依據狀態 (State) 的改變產生對應的新介面 (UI)。\n\n![Redux Flow](https://lh3.googleusercontent.com/4fNoEoelX9xGuY9ujaqlV5bkoRzFWVJ12urnnBAs17FYumoFnC31TKe4hTzfpNBzG0Rde55vjURuPCCh7JiRYcl66xMZdgiijutv6ld2sRCwNBevGcfHj5sSUmCBmU3YrVGsagAVIpmmqGiZlI4wIGniBspsMA1CtGFA7f2punGbnfQLE_NhcPU8u_3VAxc3wmJJ1hxhaf_wO_FViTMzHx43-Lk3dmT3H219W4AAUPoPFMwWiiPyzNBtRZVzIyhLb6bGGLZPojsdaf5COQNN4NqfXnwgU0dNFX44tdM-10gYftyOBzsXwiCXu0aoPCei0nRvCp_cRlCClGYC6n9rp-4aNZ8GcaelZqN5nIf0jUYqegcGDoXeruwiy8g0x8_tlX5gAayXencALfp6LjfRTrM9Yry4z_VfgQuws0Y1-zvNdERmcZcFi3xfIPAfWuSxgdn5LeTxsm3fJ9eSCWobTf8n8KLW9rEXiwkBMiIqy4k7gYF6AnLzb9jssIp_huq0gStGif0pQdC-zjk144oSFkqmh9WtQGMGwSXTMfSL0g0NWKk9MehbxzFhRVKA-UrsN961N6dJXvs91IDJk3kT2Pb4ba_rx9yRnTu1mbPEvKp0hB73vro_RC94REWLrlzgkG6i_N9ezftI2z7TciZqnyMlGvCbwLIA=w1340-h932-no \"Redux Flow\")\n\n## 安裝\n\n打下列指令安裝 React App。\n\n```\nnpx create-react-app redux-tutorial\n```\n\n誒？為什麼是 npx 呢？那是什麼？\n所以我去搜尋了[npx 使用教程](https://www.ruanyifeng.com/blog/2019/02/npx.html)如下。\n\n> 除了調用項目內部模塊，npx 還能避免全局安裝的模塊。比如，create-react-app 這個模塊是全局安裝，npx 可以運行它，而且不進行全局安裝。上面代碼運行時，npx 將create-react-app下載到一個臨時目錄，使用以後再刪除。所以，以後再次執行上面的命令，會重新下載create-react-app。\n\n意思就是他不會在你電腦安裝 create-react-app 這個項目呦～幫你產生好專案後，就會自動移除不佔空間。\n\n接下來進入專案，安裝 Redux。\n\n```\ncd redux-tutorial\n```\n\n```\nyarn add redux react-redux\n```\n\n將專案啟動檢查有沒有安裝成功。\n\n```\nyarn start\n```\n\n起成功的話會看到瀏覽器自動開啟頁面如下圖。頁面上會提示去修改 src/App.js 就會自動 reload 畫面。\n\n![專案啟動頁面](https://lh3.googleusercontent.com/0eGc8PAV_LPbfRoLNBV1BkkTQD37TUEjNij_RlVgxSEuYZNY4DKF8uGzrLBHVf2AE4TBM8x9rWyyKuJVMinEABsb-JvpT9bkwb0NNTSKNjYcBbNBmdnZ6W_kg54n3dGO5Nn4z3ODEQeiLYYKsdOj5jwyrsb1o8hgfX6PiirzQaKCa-Nn7uyHM22VNhwKD8ycZsBYICwXla6-z_C-y7a8ycYR1zN7oa0TaMHidHVS74tcBOumyuO5ZZISjlDhYjajvV5ERdTi6ypNQbBq79zXlwjRmjq9UyATG39FOn5Dk3byoatX_sEfevfBxTxDTEgukeEz2anjaoIIzDzEwJJS0MLXZxkAGhtSAwBkU9LCGRh9IPc4IgShJuqA2B8-9qqSBznAukDaKrdbkjotC6gbbv2wsm_ogOhB68qf9fWHap_Jh_32gF-znppLcU-kP9cyGAF1hEBSDdeOngarYU6uSaIuuVlqJFjakf3CgBFdZVspwHQbdYGOmSyxPN_NU_nrZg7dgjYJeI_FkPzR8lY4qETFKPYyfWTCArWuzry2GwQ36VIrcc4lmp5SlhLnyW2WNZmaf-MMkVpjYMmzkNbRymIFamQzA2GO49BmecALKJXy4z_tSkYqsa8pDyRECxa1RGspkoog9YUvthBasLtLTForiwJN0iez=w2560-h1446-no \"專案啟動頁面\")\n\n## 創建 Store\n\n### createStore\n\n教程在 index.js 先創建了簡易的 store。[Git#1](https://github.com/Annilla/react-redux-practice/tree/V1)\n\n```js\n...\nimport { createStore } from 'redux';\n\n// reducer\nfunction reducer(state, action) {\n  // 當 action type 為 _changeState 時，將 state 更改為 action 帶過來的 payload 值\n  if (action.type === '_changeState') {\n    return action.payload.newState;\n  }\n  // 預設沒有動作時的值\n  return 'state';\n}\n\n// 創建 sotre\nconst store = createStore(reducer);\n\n// 印出初始的 state 值\nconsole.log(store.getState());\n\n// 設定動作屬性所帶的 payload 值\nconst action = {\n  type: '_changeState',\n  payload: {\n    newState: 'New State'\n  }\n};\n\n// 將動作帶入 reducer 中，進而更新 store 中的 state\nstore.dispatch(action);\n\n// 印出經過動作後的 state 值\nconsole.log(store.getState());\n\n...\n\n```\n\n### combineReducers\n\n當有兩個以上的 Reducers 時，在 index.js 做合併。 [Git#2](https://github.com/Annilla/react-redux-practice/tree/V2)\n\n```js\n...\nimport { createStore, combineReducers } from 'redux';\n\n// 將 Reducer 分成專門處理產品和使用者資訊兩種\n// 專門處理產品的 Reducer\nfunction productsReducer(state = [], action) {\n  return state;\n}\n// 專門處理使用者的 Reducer\nfunction userReducer(state = '', {type, payload}) {\n  switch (type) {\n    case 'updateUser':\n      return payload.user;\n  }\n  return state;\n}\n// 將兩種 Reducer 合起來放在 store 用\nconst allReducers = combineReducers({\n  products: productsReducer,\n  user: userReducer\n});\n\nconst store = createStore(\n  allReducers,\n  // 放入起始值\n  {\n    products: [{ name: 'iPhone' }],\n    user: 'Anny Chang'\n  },\n  // 開啟 devTool\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\n// 定義動作\nconst updateUserAction = {\n  type: 'updateUser',\n  payload: {\n    user: 'John'\n  }\n}\n\n// 將動作帶入 reducer 中，進而更新 store 中的 state\nstore.dispatch(updateUserAction);\n\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));\n...\n```\n\n## Reducers and Actions\n\n將 Reducers 和 Actions 從 index.js 中抽離。[Git#3](https://github.com/Annilla/react-redux-practice/tree/V3)\n\n### Actions\n\n在 `src/acitons/` 新增 `user-actions.js` 和 `products-actions.js`。\n\nuser-actions.js\n\n```js\n// 將 type 名稱輸出供 Reducer 共用\nexport const UPDATE_USER = 'users:updateUser';\n\nexport function updateUser (newUser) {\n  return {\n    type: UPDATE_USER,\n    payload: {\n      user: newUser\n    }\n  }\n}\n```\n\n### Reducers\n\n在 `src/reducers/` 新增 `user-reducer.js` 和 `products-reducer.js`。\n\nuser-reducer.js\n\n```js\n// 從 Action 那裡取得動作名稱\nimport { UPDATE_USER } from '../actions/user-actions'\n\nexport default function userReducer(state = '', {type, payload}) {\n  switch (type) {\n    case UPDATE_USER:\n      return payload.user;\n    default:\n      return state;\n  }\n}\n```\n\n### View\n\nApp.js\n\n```js\nimport React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport { connect } from 'react-redux';\nimport { updateUser } from './actions/user-actions'\n\nclass App extends Component {\n  constructor(props) {\n    // Using super in classes\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/super#Using_super_in_classes\n    // super() 將父類的構建項目傳到子項目\n    super(props);\n    // 將 onUpdateUser(event) 綁定 component 本身 = this\n    this.onUpdateUser = this.onUpdateUser.bind(this);\n  }\n\n  onUpdateUser(event) {\n    // this = component 本身\n    // 將輸入框的文字丟給 Redux Action\n    this.props.onUpdateUser(event.target.value);\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <p>\n            Edit <code>src/App.js</code> and save to reload.\n          </p>\n          <p>Practice by Anny Chang</p>\n          <a\n            className=\"App-link\"\n            href=\"https://reactjs.org\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Learn React\n          </a>\n          <h1>\n            <input onChange={this.onUpdateUser}></input>\n            <br/>\n            {this.props.user}\n          </h1>\n        </header>\n      </div>\n    );\n  }\n}\n\n// 將 Redux State 丟到此 component 的 prop\nconst mapStateToProps = state => ({\n  products: state.products,\n  user: state.user\n});\n\n// 將 Redux Action 丟到此 component 的 prop\nconst mapActionsToProps = {\n  onUpdateUser: updateUser\n};\n\nexport default connect(mapStateToProps, mapActionsToProps)(App);\n\n```\n\n## Redux-thunk\n\n當我們在接取 API 非同步的請求時，就需要 Redux-thunk 這個 middleware，幫助 Promise 回傳過後可以在 dispatch 其他的 Action。[Git#4](https://github.com/Annilla/react-redux-practice/tree/V4)\n\n安裝 redux-thunk。\n\n```\nyarn add redux-thunk\n```\n\n在 index.js 引用 thunk。\n\n```js\n...\nimport thunk from 'redux-thunk';\nimport { applyMiddleware, compose, createStore, combineReducers } from 'redux';\n...\n\n// 使用 applyMiddleware 將 thunk 帶進去改變原生 dispatch 行為\n// Thunk 是一個以 action 為本的包裹器\n// 在 Redux 中藉由 Redux-Thunk 這個 Redux Middleware 讓我們可以在使用時不去區分 pure action creator 還是 thunk action creator\nconst allStoreEnhancers = compose (\n  applyMiddleware(thunk),\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\nconst store = createStore(\n  allReducers,\n  {\n    products: [{ name: 'iPhone' }],\n    user: 'Anny Chang'\n  },\n  allStoreEnhancers\n);\n\n...\n```\n\n### Actions\n\nuser-actions.js\n\n```js\nimport axios from 'axios';\n\n...\nexport const SHOW_ERROR = 'users:showError';\n\n...\n\nexport function showError () {\n  return {\n    type: SHOW_ERROR,\n    payload: {\n      user: 'ERROR!!'\n    }\n  }\n}\n\nexport function apiRequest() {\n  return dispatch => {\n    // 使用 axios 接取 API Promise\n    // 這邊網址因為有 CORS，所以必定 ERROR\n    axios({\n      method: 'GET',\n      url: 'http://google.com'\n    }).then(response => {\n      // 成功的話會 dispatch updateUser Action\n      console.log('SUCCESS');\n      dispatch(updateUser(response.newUser));\n    }).catch(response => {\n      // 失敗的話會 dispatch showError Action\n      console.log('ERROR');\n      dispatch(showError());\n    })\n  }\n}\n```\n\n### Reducers\n\nuser-reducer.js\n\n```js\nimport { UPDATE_USER, SHOW_ERROR } from '../actions/user-actions'\n\nexport default function userReducer(state = '', {type, payload}) {\n  switch (type) {\n    case UPDATE_USER:\n      return payload.user;\n    case SHOW_ERROR:\n      return payload.user;\n    default:\n      return state;\n  }\n}\n```\n\n### View\n\nApp.js\n\n```js\n...\nimport { updateUser, apiRequest } from './actions/user-actions'\n\nclass App extends Component {\n  constructor(props) {\n    ...\n  }\n\n  // 在 component 出現的時候進行 API request\n  componentDidMount () {\n    this.props.onApiRequest();\n  }\n\n  ...\n\n  render() {\n    ...\n  }\n}\n\n...\n\n// 將 apiRequest 放到此 component 的 props\nconst mapActionsToProps = {\n  onUpdateUser: updateUser,\n  onApiRequest: apiRequest\n};\n\nexport default connect(mapStateToProps, mapActionsToProps)(App);\n```\n\n## Reselect\n\n使用者每次都會透過 action 去做 dispatch 進而改變 state 的值。那麼，問題來了，如果需要的計算量比較大，每次更新的重新計算就會造成性能的問題。為了避免不必要的計算，Reselect 就是來解決此問題。[Git#5](https://github.com/Annilla/react-redux-practice/tree/V5)\n\n> 如果有用過 Vue 的話，就類似 computed 的功能。\n\nSelectors 的特點為：\n\n* Selectors 可以用來計算延伸的資料，允許 Redux 去儲存最低限度的 state。也就是說，state 只儲存原始的基本資料，中間延伸的計算透過 Selector 呈現即可。\n\n* Selectors 很有效率。一個 selector 只會在與他相關的變數有改變的時候才會重新計算。\n\n* Selectors 可以多個組合。可被其他的 selectors 當作變數來運用。\n\n這邊解釋就不用影片中的範例，因為我覺得官方提供的 example 解釋更為貼切。\n\n```js\nimport { createSelector } from 'reselect'\n\n// 把 shop 裡面的 items 抓出來\nconst shopItemsSelector = state => state.shop.items\n// 把 shop 裡面的 taxPercent 抓出來\nconst taxPercentSelector = state => state.shop.taxPercent\n\n// 把 items 的 value 做總和\nconst subtotalSelector = createSelector(\n  shopItemsSelector,\n  items => items.reduce((acc, item) => acc + item.value, 0)\n)\n\n// 用 subtotal 和 taxPercent 計算總稅額\nconst taxSelector = createSelector(\n  subtotalSelector,\n  taxPercentSelector,\n  (subtotal, taxPercent) => subtotal * (taxPercent / 100)\n)\n\n// 用 subtotal 和 tax 計算加稅後的總金額\nexport const totalSelector = createSelector(\n  subtotalSelector,\n  taxSelector,\n  (subtotal, tax) => ({ total: subtotal + tax })\n)\n\nlet exampleState = {\n  shop: {\n    taxPercent: 8,\n    items: [\n      { name: 'apple', value: 1.20 },\n      { name: 'orange', value: 0.95 },\n    ]\n  }\n}\n\nconsole.log(subtotalSelector(exampleState)) // 2.15\nconsole.log(taxSelector(exampleState))      // 0.172\nconsole.log(totalSelector(exampleState))    // { total: 2.322 }\n```\n\n## Smart VS Dumb Component\n\n你不可能把每個子 component 都跟 Store 做聯繫，這樣很累且是過度使用。所以我們就會有一個專門和 Store 做聯繫的 Component，也就是 Smart Component。他接到資料後會往下傳給只吃 prop 的 Dumb Component。如此一來我們就能保持只有少數 Smart Component 控制 Store，而底下的 Dumb Component 因為只吃 prop 傳進來的值，所以也可安心的重複使用。\n\n> Smart VS Dumb Component 的概念是通用的理論，並不是 React 獨有。所以同樣的概念也適用在 Vue 和 Angular 等框架上。\n\n![Smart VS Dumb Component](https://huzidaha.github.io/static/assets/img/posts/25608378-BE07-4050-88B1-72025085875A.png \"Smart VS Dumb Component\")\n\n## 參考資料\n\n* [Redux Middleware大略架構](https://medium.com/@WendellLiu/redux-middleware%E5%A4%A7%E7%95%A5%E6%9E%B6%E6%A7%8B-ace7e646c929)\n* [讓你的Action能作更多 — Redux-Thunk](https://medium.com/frochu/%E9%80%81%E8%AE%93%E4%BD%A0%E7%9A%84action%E8%83%BD%E4%BD%9C%E6%9B%B4%E5%A4%9A-redux-thunk-c07bc5488e48)\n* [react-redux性能优化之reselect](https://www.jianshu.com/p/1fcef4c892ba)\n* [Smart 组件 vs Dumb 组件](http://huziketang.mangojuice.top/books/react/lesson43)","source":"_posts/JS/React-Redux-Practice.md","raw":"---\ntitle: React Redux Practice\ncategories:\n  - JS\n  - React\nthumbnailImage: https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/1200px-React-icon.svg.png\nthumbnailImagePosition: left\ncoverImage: https://cdn-images-1.medium.com/max/1200/1*y6C4nSvy2Woe0m7bWEn4BA.png\ncoverMeta: out\ntags: [JS, React, Redux]\ndate: 2019/07/03\nupdated: 2019/07/03\n---\n\n最近朋友問我關於 Redux 的問題，但我已經有兩年沒碰 React 了。所以藉此機會找了 youtube 上的[教程](https://youtu.be/OSSpVLpuVWA)，好好複習一次。\n\n<!--more-->\n\n## Redux\n\n* Redux 透過單向數據流模型來管理狀態，幫助應用程式擴展規模\n\n![單向數據流模型](https://lh3.googleusercontent.com/RCAqIMcoBNaVcnbKPXupA177bJvvluPn3GeaSEywgKbQ9tqDWh-cjeds7KbOJiCWStxVGOQLR23kbd0nRhY31T_f7BlJY3CfCXXhGGqYqTaQvZiZKwIpOkY2QBnDdNxY1rEkqvHJAuIrvfRYS5HU5PAiW-JK5baYknZXW-dn14aeptIf1OXblwufjzgNDRSP1gZqUzvG1yyKF88XxV8isg76MQ2yONKLHhrzDNu5Yx_OrcP1u95MtLR9F-mZf_ah65I-JmVYpbtfECihE7VNEn58n7vMp2CIym4JLvRTFspEzCAerEklTkI4aF7oWqcnO-2fK_IImagVK_JU5D2dqBvGA9ZB6XChXPMmbYDs-dinini_zUPgFvYFQK0ZvhW7-KIBsMIVFNNgFhhVZb3wc3mcwrwIvLlmWkqpGHevqclMLAuWlaj-1LeYndUMfE5MzcZ8CSzu7Vo3YO_MjEh8mxSzICgvz-gnIUs6ezMhTCxxSp8SXuta7SZbTcgqDDFzx1BovCKvVgxlvOOD0hNneBq3C0yPBhVAB5mcNInZhjfhWYshXmEJUPZDUiHFXRmMzeCLmoRzUU0DzE2oasezhmYktkb4aRq9XzSkE2d8b9DILg4wWP3skCXG6syozRvTQwnu6z9tZMi96CvFm6RmyKiRebM-Vro_=w922-h548-no \"單向數據流模型\")\n\n* [Redux Devtools](https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd) 幫助開發者進行狀態的監控與偵錯\n\n![Redux Devtools](https://user-images.githubusercontent.com/7957859/48663602-3aac4900-ea9b-11e8-921f-97059cbb599c.png \"Redux Devtools\")\n\n## Redux Flow\n\nRedux Flow 有個儲存所有狀態 (State) 的倉庫 (Store)，頁面會依據這些狀態 (State) 產生對應的介面 (UI)。當使用者對介面 (UI) 觸發動作 (Actions) 時，動作 (Actions) 會把使用者所做的事情 (payload) 傳輸給處理器 (Reducer) 做運算， 處理器 (Reducer) 處理完後變會把倉庫 (Store) 裡的狀態 (State) 更新，所以頁面就會再依據狀態 (State) 的改變產生對應的新介面 (UI)。\n\n![Redux Flow](https://lh3.googleusercontent.com/4fNoEoelX9xGuY9ujaqlV5bkoRzFWVJ12urnnBAs17FYumoFnC31TKe4hTzfpNBzG0Rde55vjURuPCCh7JiRYcl66xMZdgiijutv6ld2sRCwNBevGcfHj5sSUmCBmU3YrVGsagAVIpmmqGiZlI4wIGniBspsMA1CtGFA7f2punGbnfQLE_NhcPU8u_3VAxc3wmJJ1hxhaf_wO_FViTMzHx43-Lk3dmT3H219W4AAUPoPFMwWiiPyzNBtRZVzIyhLb6bGGLZPojsdaf5COQNN4NqfXnwgU0dNFX44tdM-10gYftyOBzsXwiCXu0aoPCei0nRvCp_cRlCClGYC6n9rp-4aNZ8GcaelZqN5nIf0jUYqegcGDoXeruwiy8g0x8_tlX5gAayXencALfp6LjfRTrM9Yry4z_VfgQuws0Y1-zvNdERmcZcFi3xfIPAfWuSxgdn5LeTxsm3fJ9eSCWobTf8n8KLW9rEXiwkBMiIqy4k7gYF6AnLzb9jssIp_huq0gStGif0pQdC-zjk144oSFkqmh9WtQGMGwSXTMfSL0g0NWKk9MehbxzFhRVKA-UrsN961N6dJXvs91IDJk3kT2Pb4ba_rx9yRnTu1mbPEvKp0hB73vro_RC94REWLrlzgkG6i_N9ezftI2z7TciZqnyMlGvCbwLIA=w1340-h932-no \"Redux Flow\")\n\n## 安裝\n\n打下列指令安裝 React App。\n\n```\nnpx create-react-app redux-tutorial\n```\n\n誒？為什麼是 npx 呢？那是什麼？\n所以我去搜尋了[npx 使用教程](https://www.ruanyifeng.com/blog/2019/02/npx.html)如下。\n\n> 除了調用項目內部模塊，npx 還能避免全局安裝的模塊。比如，create-react-app 這個模塊是全局安裝，npx 可以運行它，而且不進行全局安裝。上面代碼運行時，npx 將create-react-app下載到一個臨時目錄，使用以後再刪除。所以，以後再次執行上面的命令，會重新下載create-react-app。\n\n意思就是他不會在你電腦安裝 create-react-app 這個項目呦～幫你產生好專案後，就會自動移除不佔空間。\n\n接下來進入專案，安裝 Redux。\n\n```\ncd redux-tutorial\n```\n\n```\nyarn add redux react-redux\n```\n\n將專案啟動檢查有沒有安裝成功。\n\n```\nyarn start\n```\n\n起成功的話會看到瀏覽器自動開啟頁面如下圖。頁面上會提示去修改 src/App.js 就會自動 reload 畫面。\n\n![專案啟動頁面](https://lh3.googleusercontent.com/0eGc8PAV_LPbfRoLNBV1BkkTQD37TUEjNij_RlVgxSEuYZNY4DKF8uGzrLBHVf2AE4TBM8x9rWyyKuJVMinEABsb-JvpT9bkwb0NNTSKNjYcBbNBmdnZ6W_kg54n3dGO5Nn4z3ODEQeiLYYKsdOj5jwyrsb1o8hgfX6PiirzQaKCa-Nn7uyHM22VNhwKD8ycZsBYICwXla6-z_C-y7a8ycYR1zN7oa0TaMHidHVS74tcBOumyuO5ZZISjlDhYjajvV5ERdTi6ypNQbBq79zXlwjRmjq9UyATG39FOn5Dk3byoatX_sEfevfBxTxDTEgukeEz2anjaoIIzDzEwJJS0MLXZxkAGhtSAwBkU9LCGRh9IPc4IgShJuqA2B8-9qqSBznAukDaKrdbkjotC6gbbv2wsm_ogOhB68qf9fWHap_Jh_32gF-znppLcU-kP9cyGAF1hEBSDdeOngarYU6uSaIuuVlqJFjakf3CgBFdZVspwHQbdYGOmSyxPN_NU_nrZg7dgjYJeI_FkPzR8lY4qETFKPYyfWTCArWuzry2GwQ36VIrcc4lmp5SlhLnyW2WNZmaf-MMkVpjYMmzkNbRymIFamQzA2GO49BmecALKJXy4z_tSkYqsa8pDyRECxa1RGspkoog9YUvthBasLtLTForiwJN0iez=w2560-h1446-no \"專案啟動頁面\")\n\n## 創建 Store\n\n### createStore\n\n教程在 index.js 先創建了簡易的 store。[Git#1](https://github.com/Annilla/react-redux-practice/tree/V1)\n\n```js\n...\nimport { createStore } from 'redux';\n\n// reducer\nfunction reducer(state, action) {\n  // 當 action type 為 _changeState 時，將 state 更改為 action 帶過來的 payload 值\n  if (action.type === '_changeState') {\n    return action.payload.newState;\n  }\n  // 預設沒有動作時的值\n  return 'state';\n}\n\n// 創建 sotre\nconst store = createStore(reducer);\n\n// 印出初始的 state 值\nconsole.log(store.getState());\n\n// 設定動作屬性所帶的 payload 值\nconst action = {\n  type: '_changeState',\n  payload: {\n    newState: 'New State'\n  }\n};\n\n// 將動作帶入 reducer 中，進而更新 store 中的 state\nstore.dispatch(action);\n\n// 印出經過動作後的 state 值\nconsole.log(store.getState());\n\n...\n\n```\n\n### combineReducers\n\n當有兩個以上的 Reducers 時，在 index.js 做合併。 [Git#2](https://github.com/Annilla/react-redux-practice/tree/V2)\n\n```js\n...\nimport { createStore, combineReducers } from 'redux';\n\n// 將 Reducer 分成專門處理產品和使用者資訊兩種\n// 專門處理產品的 Reducer\nfunction productsReducer(state = [], action) {\n  return state;\n}\n// 專門處理使用者的 Reducer\nfunction userReducer(state = '', {type, payload}) {\n  switch (type) {\n    case 'updateUser':\n      return payload.user;\n  }\n  return state;\n}\n// 將兩種 Reducer 合起來放在 store 用\nconst allReducers = combineReducers({\n  products: productsReducer,\n  user: userReducer\n});\n\nconst store = createStore(\n  allReducers,\n  // 放入起始值\n  {\n    products: [{ name: 'iPhone' }],\n    user: 'Anny Chang'\n  },\n  // 開啟 devTool\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\n// 定義動作\nconst updateUserAction = {\n  type: 'updateUser',\n  payload: {\n    user: 'John'\n  }\n}\n\n// 將動作帶入 reducer 中，進而更新 store 中的 state\nstore.dispatch(updateUserAction);\n\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));\n...\n```\n\n## Reducers and Actions\n\n將 Reducers 和 Actions 從 index.js 中抽離。[Git#3](https://github.com/Annilla/react-redux-practice/tree/V3)\n\n### Actions\n\n在 `src/acitons/` 新增 `user-actions.js` 和 `products-actions.js`。\n\nuser-actions.js\n\n```js\n// 將 type 名稱輸出供 Reducer 共用\nexport const UPDATE_USER = 'users:updateUser';\n\nexport function updateUser (newUser) {\n  return {\n    type: UPDATE_USER,\n    payload: {\n      user: newUser\n    }\n  }\n}\n```\n\n### Reducers\n\n在 `src/reducers/` 新增 `user-reducer.js` 和 `products-reducer.js`。\n\nuser-reducer.js\n\n```js\n// 從 Action 那裡取得動作名稱\nimport { UPDATE_USER } from '../actions/user-actions'\n\nexport default function userReducer(state = '', {type, payload}) {\n  switch (type) {\n    case UPDATE_USER:\n      return payload.user;\n    default:\n      return state;\n  }\n}\n```\n\n### View\n\nApp.js\n\n```js\nimport React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport { connect } from 'react-redux';\nimport { updateUser } from './actions/user-actions'\n\nclass App extends Component {\n  constructor(props) {\n    // Using super in classes\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/super#Using_super_in_classes\n    // super() 將父類的構建項目傳到子項目\n    super(props);\n    // 將 onUpdateUser(event) 綁定 component 本身 = this\n    this.onUpdateUser = this.onUpdateUser.bind(this);\n  }\n\n  onUpdateUser(event) {\n    // this = component 本身\n    // 將輸入框的文字丟給 Redux Action\n    this.props.onUpdateUser(event.target.value);\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <p>\n            Edit <code>src/App.js</code> and save to reload.\n          </p>\n          <p>Practice by Anny Chang</p>\n          <a\n            className=\"App-link\"\n            href=\"https://reactjs.org\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Learn React\n          </a>\n          <h1>\n            <input onChange={this.onUpdateUser}></input>\n            <br/>\n            {this.props.user}\n          </h1>\n        </header>\n      </div>\n    );\n  }\n}\n\n// 將 Redux State 丟到此 component 的 prop\nconst mapStateToProps = state => ({\n  products: state.products,\n  user: state.user\n});\n\n// 將 Redux Action 丟到此 component 的 prop\nconst mapActionsToProps = {\n  onUpdateUser: updateUser\n};\n\nexport default connect(mapStateToProps, mapActionsToProps)(App);\n\n```\n\n## Redux-thunk\n\n當我們在接取 API 非同步的請求時，就需要 Redux-thunk 這個 middleware，幫助 Promise 回傳過後可以在 dispatch 其他的 Action。[Git#4](https://github.com/Annilla/react-redux-practice/tree/V4)\n\n安裝 redux-thunk。\n\n```\nyarn add redux-thunk\n```\n\n在 index.js 引用 thunk。\n\n```js\n...\nimport thunk from 'redux-thunk';\nimport { applyMiddleware, compose, createStore, combineReducers } from 'redux';\n...\n\n// 使用 applyMiddleware 將 thunk 帶進去改變原生 dispatch 行為\n// Thunk 是一個以 action 為本的包裹器\n// 在 Redux 中藉由 Redux-Thunk 這個 Redux Middleware 讓我們可以在使用時不去區分 pure action creator 還是 thunk action creator\nconst allStoreEnhancers = compose (\n  applyMiddleware(thunk),\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\nconst store = createStore(\n  allReducers,\n  {\n    products: [{ name: 'iPhone' }],\n    user: 'Anny Chang'\n  },\n  allStoreEnhancers\n);\n\n...\n```\n\n### Actions\n\nuser-actions.js\n\n```js\nimport axios from 'axios';\n\n...\nexport const SHOW_ERROR = 'users:showError';\n\n...\n\nexport function showError () {\n  return {\n    type: SHOW_ERROR,\n    payload: {\n      user: 'ERROR!!'\n    }\n  }\n}\n\nexport function apiRequest() {\n  return dispatch => {\n    // 使用 axios 接取 API Promise\n    // 這邊網址因為有 CORS，所以必定 ERROR\n    axios({\n      method: 'GET',\n      url: 'http://google.com'\n    }).then(response => {\n      // 成功的話會 dispatch updateUser Action\n      console.log('SUCCESS');\n      dispatch(updateUser(response.newUser));\n    }).catch(response => {\n      // 失敗的話會 dispatch showError Action\n      console.log('ERROR');\n      dispatch(showError());\n    })\n  }\n}\n```\n\n### Reducers\n\nuser-reducer.js\n\n```js\nimport { UPDATE_USER, SHOW_ERROR } from '../actions/user-actions'\n\nexport default function userReducer(state = '', {type, payload}) {\n  switch (type) {\n    case UPDATE_USER:\n      return payload.user;\n    case SHOW_ERROR:\n      return payload.user;\n    default:\n      return state;\n  }\n}\n```\n\n### View\n\nApp.js\n\n```js\n...\nimport { updateUser, apiRequest } from './actions/user-actions'\n\nclass App extends Component {\n  constructor(props) {\n    ...\n  }\n\n  // 在 component 出現的時候進行 API request\n  componentDidMount () {\n    this.props.onApiRequest();\n  }\n\n  ...\n\n  render() {\n    ...\n  }\n}\n\n...\n\n// 將 apiRequest 放到此 component 的 props\nconst mapActionsToProps = {\n  onUpdateUser: updateUser,\n  onApiRequest: apiRequest\n};\n\nexport default connect(mapStateToProps, mapActionsToProps)(App);\n```\n\n## Reselect\n\n使用者每次都會透過 action 去做 dispatch 進而改變 state 的值。那麼，問題來了，如果需要的計算量比較大，每次更新的重新計算就會造成性能的問題。為了避免不必要的計算，Reselect 就是來解決此問題。[Git#5](https://github.com/Annilla/react-redux-practice/tree/V5)\n\n> 如果有用過 Vue 的話，就類似 computed 的功能。\n\nSelectors 的特點為：\n\n* Selectors 可以用來計算延伸的資料，允許 Redux 去儲存最低限度的 state。也就是說，state 只儲存原始的基本資料，中間延伸的計算透過 Selector 呈現即可。\n\n* Selectors 很有效率。一個 selector 只會在與他相關的變數有改變的時候才會重新計算。\n\n* Selectors 可以多個組合。可被其他的 selectors 當作變數來運用。\n\n這邊解釋就不用影片中的範例，因為我覺得官方提供的 example 解釋更為貼切。\n\n```js\nimport { createSelector } from 'reselect'\n\n// 把 shop 裡面的 items 抓出來\nconst shopItemsSelector = state => state.shop.items\n// 把 shop 裡面的 taxPercent 抓出來\nconst taxPercentSelector = state => state.shop.taxPercent\n\n// 把 items 的 value 做總和\nconst subtotalSelector = createSelector(\n  shopItemsSelector,\n  items => items.reduce((acc, item) => acc + item.value, 0)\n)\n\n// 用 subtotal 和 taxPercent 計算總稅額\nconst taxSelector = createSelector(\n  subtotalSelector,\n  taxPercentSelector,\n  (subtotal, taxPercent) => subtotal * (taxPercent / 100)\n)\n\n// 用 subtotal 和 tax 計算加稅後的總金額\nexport const totalSelector = createSelector(\n  subtotalSelector,\n  taxSelector,\n  (subtotal, tax) => ({ total: subtotal + tax })\n)\n\nlet exampleState = {\n  shop: {\n    taxPercent: 8,\n    items: [\n      { name: 'apple', value: 1.20 },\n      { name: 'orange', value: 0.95 },\n    ]\n  }\n}\n\nconsole.log(subtotalSelector(exampleState)) // 2.15\nconsole.log(taxSelector(exampleState))      // 0.172\nconsole.log(totalSelector(exampleState))    // { total: 2.322 }\n```\n\n## Smart VS Dumb Component\n\n你不可能把每個子 component 都跟 Store 做聯繫，這樣很累且是過度使用。所以我們就會有一個專門和 Store 做聯繫的 Component，也就是 Smart Component。他接到資料後會往下傳給只吃 prop 的 Dumb Component。如此一來我們就能保持只有少數 Smart Component 控制 Store，而底下的 Dumb Component 因為只吃 prop 傳進來的值，所以也可安心的重複使用。\n\n> Smart VS Dumb Component 的概念是通用的理論，並不是 React 獨有。所以同樣的概念也適用在 Vue 和 Angular 等框架上。\n\n![Smart VS Dumb Component](https://huzidaha.github.io/static/assets/img/posts/25608378-BE07-4050-88B1-72025085875A.png \"Smart VS Dumb Component\")\n\n## 參考資料\n\n* [Redux Middleware大略架構](https://medium.com/@WendellLiu/redux-middleware%E5%A4%A7%E7%95%A5%E6%9E%B6%E6%A7%8B-ace7e646c929)\n* [讓你的Action能作更多 — Redux-Thunk](https://medium.com/frochu/%E9%80%81%E8%AE%93%E4%BD%A0%E7%9A%84action%E8%83%BD%E4%BD%9C%E6%9B%B4%E5%A4%9A-redux-thunk-c07bc5488e48)\n* [react-redux性能优化之reselect](https://www.jianshu.com/p/1fcef4c892ba)\n* [Smart 组件 vs Dumb 组件](http://huziketang.mangojuice.top/books/react/lesson43)","slug":"JS/React-Redux-Practice","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74v001otudhdgmjylcy","content":"<p>最近朋友問我關於 Redux 的問題，但我已經有兩年沒碰 React 了。所以藉此機會找了 youtube 上的<a href=\"https://youtu.be/OSSpVLpuVWA\" target=\"_blank\" rel=\"noopener\">教程</a>，好好複習一次。</p>\n<a id=\"more\"></a>\n<h2 id=\"Redux\"><a href=\"#Redux\" class=\"headerlink\" title=\"Redux\"></a>Redux</h2><ul>\n<li>Redux 透過單向數據流模型來管理狀態，幫助應用程式擴展規模</li>\n</ul>\n<p><img src=\"https://lh3.googleusercontent.com/RCAqIMcoBNaVcnbKPXupA177bJvvluPn3GeaSEywgKbQ9tqDWh-cjeds7KbOJiCWStxVGOQLR23kbd0nRhY31T_f7BlJY3CfCXXhGGqYqTaQvZiZKwIpOkY2QBnDdNxY1rEkqvHJAuIrvfRYS5HU5PAiW-JK5baYknZXW-dn14aeptIf1OXblwufjzgNDRSP1gZqUzvG1yyKF88XxV8isg76MQ2yONKLHhrzDNu5Yx_OrcP1u95MtLR9F-mZf_ah65I-JmVYpbtfECihE7VNEn58n7vMp2CIym4JLvRTFspEzCAerEklTkI4aF7oWqcnO-2fK_IImagVK_JU5D2dqBvGA9ZB6XChXPMmbYDs-dinini_zUPgFvYFQK0ZvhW7-KIBsMIVFNNgFhhVZb3wc3mcwrwIvLlmWkqpGHevqclMLAuWlaj-1LeYndUMfE5MzcZ8CSzu7Vo3YO_MjEh8mxSzICgvz-gnIUs6ezMhTCxxSp8SXuta7SZbTcgqDDFzx1BovCKvVgxlvOOD0hNneBq3C0yPBhVAB5mcNInZhjfhWYshXmEJUPZDUiHFXRmMzeCLmoRzUU0DzE2oasezhmYktkb4aRq9XzSkE2d8b9DILg4wWP3skCXG6syozRvTQwnu6z9tZMi96CvFm6RmyKiRebM-Vro_=w922-h548-no\" alt=\"單向數據流模型\" title=\"單向數據流模型\"></p>\n<ul>\n<li><a href=\"https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd\" target=\"_blank\" rel=\"noopener\">Redux Devtools</a> 幫助開發者進行狀態的監控與偵錯</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/7957859/48663602-3aac4900-ea9b-11e8-921f-97059cbb599c.png\" alt=\"Redux Devtools\" title=\"Redux Devtools\"></p>\n<h2 id=\"Redux-Flow\"><a href=\"#Redux-Flow\" class=\"headerlink\" title=\"Redux Flow\"></a>Redux Flow</h2><p>Redux Flow 有個儲存所有狀態 (State) 的倉庫 (Store)，頁面會依據這些狀態 (State) 產生對應的介面 (UI)。當使用者對介面 (UI) 觸發動作 (Actions) 時，動作 (Actions) 會把使用者所做的事情 (payload) 傳輸給處理器 (Reducer) 做運算， 處理器 (Reducer) 處理完後變會把倉庫 (Store) 裡的狀態 (State) 更新，所以頁面就會再依據狀態 (State) 的改變產生對應的新介面 (UI)。</p>\n<p><img src=\"https://lh3.googleusercontent.com/4fNoEoelX9xGuY9ujaqlV5bkoRzFWVJ12urnnBAs17FYumoFnC31TKe4hTzfpNBzG0Rde55vjURuPCCh7JiRYcl66xMZdgiijutv6ld2sRCwNBevGcfHj5sSUmCBmU3YrVGsagAVIpmmqGiZlI4wIGniBspsMA1CtGFA7f2punGbnfQLE_NhcPU8u_3VAxc3wmJJ1hxhaf_wO_FViTMzHx43-Lk3dmT3H219W4AAUPoPFMwWiiPyzNBtRZVzIyhLb6bGGLZPojsdaf5COQNN4NqfXnwgU0dNFX44tdM-10gYftyOBzsXwiCXu0aoPCei0nRvCp_cRlCClGYC6n9rp-4aNZ8GcaelZqN5nIf0jUYqegcGDoXeruwiy8g0x8_tlX5gAayXencALfp6LjfRTrM9Yry4z_VfgQuws0Y1-zvNdERmcZcFi3xfIPAfWuSxgdn5LeTxsm3fJ9eSCWobTf8n8KLW9rEXiwkBMiIqy4k7gYF6AnLzb9jssIp_huq0gStGif0pQdC-zjk144oSFkqmh9WtQGMGwSXTMfSL0g0NWKk9MehbxzFhRVKA-UrsN961N6dJXvs91IDJk3kT2Pb4ba_rx9yRnTu1mbPEvKp0hB73vro_RC94REWLrlzgkG6i_N9ezftI2z7TciZqnyMlGvCbwLIA=w1340-h932-no\" alt=\"Redux Flow\" title=\"Redux Flow\"></p>\n<h2 id=\"安裝\"><a href=\"#安裝\" class=\"headerlink\" title=\"安裝\"></a>安裝</h2><p>打下列指令安裝 React App。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx create-react-app redux-tutorial</span><br></pre></td></tr></table></figure>\n<p>誒？為什麼是 npx 呢？那是什麼？<br>所以我去搜尋了<a href=\"https://www.ruanyifeng.com/blog/2019/02/npx.html\" target=\"_blank\" rel=\"noopener\">npx 使用教程</a>如下。</p>\n<blockquote>\n<p>除了調用項目內部模塊，npx 還能避免全局安裝的模塊。比如，create-react-app 這個模塊是全局安裝，npx 可以運行它，而且不進行全局安裝。上面代碼運行時，npx 將create-react-app下載到一個臨時目錄，使用以後再刪除。所以，以後再次執行上面的命令，會重新下載create-react-app。</p>\n</blockquote>\n<p>意思就是他不會在你電腦安裝 create-react-app 這個項目呦～幫你產生好專案後，就會自動移除不佔空間。</p>\n<p>接下來進入專案，安裝 Redux。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd redux-tutorial</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add redux react-redux</span><br></pre></td></tr></table></figure>\n<p>將專案啟動檢查有沒有安裝成功。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn start</span><br></pre></td></tr></table></figure>\n<p>起成功的話會看到瀏覽器自動開啟頁面如下圖。頁面上會提示去修改 src/App.js 就會自動 reload 畫面。</p>\n<p><img src=\"https://lh3.googleusercontent.com/0eGc8PAV_LPbfRoLNBV1BkkTQD37TUEjNij_RlVgxSEuYZNY4DKF8uGzrLBHVf2AE4TBM8x9rWyyKuJVMinEABsb-JvpT9bkwb0NNTSKNjYcBbNBmdnZ6W_kg54n3dGO5Nn4z3ODEQeiLYYKsdOj5jwyrsb1o8hgfX6PiirzQaKCa-Nn7uyHM22VNhwKD8ycZsBYICwXla6-z_C-y7a8ycYR1zN7oa0TaMHidHVS74tcBOumyuO5ZZISjlDhYjajvV5ERdTi6ypNQbBq79zXlwjRmjq9UyATG39FOn5Dk3byoatX_sEfevfBxTxDTEgukeEz2anjaoIIzDzEwJJS0MLXZxkAGhtSAwBkU9LCGRh9IPc4IgShJuqA2B8-9qqSBznAukDaKrdbkjotC6gbbv2wsm_ogOhB68qf9fWHap_Jh_32gF-znppLcU-kP9cyGAF1hEBSDdeOngarYU6uSaIuuVlqJFjakf3CgBFdZVspwHQbdYGOmSyxPN_NU_nrZg7dgjYJeI_FkPzR8lY4qETFKPYyfWTCArWuzry2GwQ36VIrcc4lmp5SlhLnyW2WNZmaf-MMkVpjYMmzkNbRymIFamQzA2GO49BmecALKJXy4z_tSkYqsa8pDyRECxa1RGspkoog9YUvthBasLtLTForiwJN0iez=w2560-h1446-no\" alt=\"專案啟動頁面\" title=\"專案啟動頁面\"></p>\n<h2 id=\"創建-Store\"><a href=\"#創建-Store\" class=\"headerlink\" title=\"創建 Store\"></a>創建 Store</h2><h3 id=\"createStore\"><a href=\"#createStore\" class=\"headerlink\" title=\"createStore\"></a>createStore</h3><p>教程在 index.js 先創建了簡易的 store。<a href=\"https://github.com/Annilla/react-redux-practice/tree/V1\" target=\"_blank\" rel=\"noopener\">Git#1</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// reducer</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer</span>(<span class=\"params\">state, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 當 action type 為 _changeState 時，將 state 更改為 action 帶過來的 payload 值</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (action.type === <span class=\"string\">'_changeState'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> action.payload.newState;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 預設沒有動作時的值</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'state'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 創建 sotre</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(reducer);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 印出初始的 state 值</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(store.getState());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 設定動作屬性所帶的 payload 值</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> action = &#123;</span><br><span class=\"line\">  type: <span class=\"string\">'_changeState'</span>,</span><br><span class=\"line\">  payload: &#123;</span><br><span class=\"line\">    newState: <span class=\"string\">'New State'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 將動作帶入 reducer 中，進而更新 store 中的 state</span></span><br><span class=\"line\">store.dispatch(action);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 印出經過動作後的 state 值</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(store.getState());</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h3 id=\"combineReducers\"><a href=\"#combineReducers\" class=\"headerlink\" title=\"combineReducers\"></a>combineReducers</h3><p>當有兩個以上的 Reducers 時，在 index.js 做合併。 <a href=\"https://github.com/Annilla/react-redux-practice/tree/V2\" target=\"_blank\" rel=\"noopener\">Git#2</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore, combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 將 Reducer 分成專門處理產品和使用者資訊兩種</span></span><br><span class=\"line\"><span class=\"comment\">// 專門處理產品的 Reducer</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">productsReducer</span>(<span class=\"params\">state = [], action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 專門處理使用者的 Reducer</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">userReducer</span>(<span class=\"params\">state = <span class=\"string\">''</span>, &#123;type, payload&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'updateUser'</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> payload.user;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 將兩種 Reducer 合起來放在 store 用</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> allReducers = combineReducers(&#123;</span><br><span class=\"line\">  products: productsReducer,</span><br><span class=\"line\">  user: userReducer</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">  allReducers,</span><br><span class=\"line\">  <span class=\"comment\">// 放入起始值</span></span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    products: [&#123; <span class=\"attr\">name</span>: <span class=\"string\">'iPhone'</span> &#125;],</span><br><span class=\"line\">    user: <span class=\"string\">'Anny Chang'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// 開啟 devTool</span></span><br><span class=\"line\">  <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定義動作</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> updateUserAction = &#123;</span><br><span class=\"line\">  type: <span class=\"string\">'updateUser'</span>,</span><br><span class=\"line\">  payload: &#123;</span><br><span class=\"line\">    user: <span class=\"string\">'John'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 將動作帶入 reducer 中，進而更新 store 中的 state</span></span><br><span class=\"line\">store.dispatch(updateUserAction);</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Provider</span> <span class=\"attr\">store</span>=<span class=\"string\">&#123;store&#125;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">Provider</span>&gt;</span></span>, <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'root'</span>));</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h2 id=\"Reducers-and-Actions\"><a href=\"#Reducers-and-Actions\" class=\"headerlink\" title=\"Reducers and Actions\"></a>Reducers and Actions</h2><p>將 Reducers 和 Actions 從 index.js 中抽離。<a href=\"https://github.com/Annilla/react-redux-practice/tree/V3\" target=\"_blank\" rel=\"noopener\">Git#3</a></p>\n<h3 id=\"Actions\"><a href=\"#Actions\" class=\"headerlink\" title=\"Actions\"></a>Actions</h3><p>在 <code>src/acitons/</code> 新增 <code>user-actions.js</code> 和 <code>products-actions.js</code>。</p>\n<p>user-actions.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 將 type 名稱輸出供 Reducer 共用</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> UPDATE_USER = <span class=\"string\">'users:updateUser'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateUser</span> (<span class=\"params\">newUser</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: UPDATE_USER,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      user: newUser</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Reducers\"><a href=\"#Reducers\" class=\"headerlink\" title=\"Reducers\"></a>Reducers</h3><p>在 <code>src/reducers/</code> 新增 <code>user-reducer.js</code> 和 <code>products-reducer.js</code>。</p>\n<p>user-reducer.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 從 Action 那裡取得動作名稱</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; UPDATE_USER &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../actions/user-actions'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">userReducer</span>(<span class=\"params\">state = <span class=\"string\">''</span>, &#123;type, payload&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> UPDATE_USER:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> payload.user;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"View\"><a href=\"#View\" class=\"headerlink\" title=\"View\"></a>View</h3><p>App.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> logo <span class=\"keyword\">from</span> <span class=\"string\">'./logo.svg'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'./App.css'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; connect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; updateUser &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./actions/user-actions'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(props) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Using super in classes</span></span><br><span class=\"line\">    <span class=\"comment\">// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/super#Using_super_in_classes</span></span><br><span class=\"line\">    <span class=\"comment\">// super() 將父類的構建項目傳到子項目</span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>(props);</span><br><span class=\"line\">    <span class=\"comment\">// 將 onUpdateUser(event) 綁定 component 本身 = this</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.onUpdateUser = <span class=\"keyword\">this</span>.onUpdateUser.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  onUpdateUser(event) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// this = component 本身</span></span><br><span class=\"line\">    <span class=\"comment\">// 將輸入框的文字丟給 Redux Action</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.props.onUpdateUser(event.target.value);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">\"App\"</span>&gt;</span><br><span class=\"line\">        &lt;header className=<span class=\"string\">\"App-header\"</span>&gt;</span><br><span class=\"line\">          &lt;img src=&#123;logo&#125; className=<span class=\"string\">\"App-logo\"</span> alt=<span class=\"string\">\"logo\"</span> /&gt;</span><br><span class=\"line\">          &lt;p&gt;</span><br><span class=\"line\">            Edit &lt;code&gt;src/App.js&lt;<span class=\"regexp\">/code&gt; and save to reload.</span></span><br><span class=\"line\"><span class=\"regexp\">          &lt;/</span>p&gt;</span><br><span class=\"line\">          &lt;p&gt;Practice by Anny Chang&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">          &lt;a</span></span><br><span class=\"line\"><span class=\"regexp\">            className=\"App-link\"</span></span><br><span class=\"line\"><span class=\"regexp\">            href=\"https:/</span><span class=\"regexp\">/reactjs.org\"</span></span><br><span class=\"line\"><span class=\"regexp\">            target=\"_blank\"</span></span><br><span class=\"line\"><span class=\"regexp\">            rel=\"noopener noreferrer\"</span></span><br><span class=\"line\"><span class=\"regexp\">          &gt;</span></span><br><span class=\"line\"><span class=\"regexp\">            Learn React</span></span><br><span class=\"line\"><span class=\"regexp\">          &lt;/</span>a&gt;</span><br><span class=\"line\">          &lt;h1&gt;</span><br><span class=\"line\">            &lt;input onChange=&#123;<span class=\"keyword\">this</span>.onUpdateUser&#125;&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">input</span>&gt;</span></span></span><br><span class=\"line\">            &lt;br/&gt;</span><br><span class=\"line\">            &#123;<span class=\"keyword\">this</span>.props.user&#125;</span><br><span class=\"line\">          &lt;<span class=\"regexp\">/h1&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>header&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    );</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">/</span><span class=\"regexp\">/ 將 Redux State 丟到此 component 的 prop</span></span><br><span class=\"line\"><span class=\"regexp\">const mapStateToProps = state =&gt; (&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">  products: state.products,</span></span><br><span class=\"line\"><span class=\"regexp\">  user: state.user</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;);</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">/</span><span class=\"regexp\">/ 將 Redux Action 丟到此 component 的 prop</span></span><br><span class=\"line\"><span class=\"regexp\">const mapActionsToProps = &#123;</span></span><br><span class=\"line\"><span class=\"regexp\">  onUpdateUser: updateUser</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">export default connect(mapStateToProps, mapActionsToProps)(App);</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Redux-thunk\"><a href=\"#Redux-thunk\" class=\"headerlink\" title=\"Redux-thunk\"></a>Redux-thunk</h2><p>當我們在接取 API 非同步的請求時，就需要 Redux-thunk 這個 middleware，幫助 Promise 回傳過後可以在 dispatch 其他的 Action。<a href=\"https://github.com/Annilla/react-redux-practice/tree/V4\" target=\"_blank\" rel=\"noopener\">Git#4</a></p>\n<p>安裝 redux-thunk。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add redux-thunk</span><br></pre></td></tr></table></figure>\n<p>在 index.js 引用 thunk。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">import</span> thunk <span class=\"keyword\">from</span> <span class=\"string\">'redux-thunk'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; applyMiddleware, compose, createStore, combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span>;</span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用 applyMiddleware 將 thunk 帶進去改變原生 dispatch 行為</span></span><br><span class=\"line\"><span class=\"comment\">// Thunk 是一個以 action 為本的包裹器</span></span><br><span class=\"line\"><span class=\"comment\">// 在 Redux 中藉由 Redux-Thunk 這個 Redux Middleware 讓我們可以在使用時不去區分 pure action creator 還是 thunk action creator</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> allStoreEnhancers = compose (</span><br><span class=\"line\">  applyMiddleware(thunk),</span><br><span class=\"line\">  <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">  allReducers,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    products: [&#123; <span class=\"attr\">name</span>: <span class=\"string\">'iPhone'</span> &#125;],</span><br><span class=\"line\">    user: <span class=\"string\">'Anny Chang'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  allStoreEnhancers</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h3 id=\"Actions-1\"><a href=\"#Actions-1\" class=\"headerlink\" title=\"Actions\"></a>Actions</h3><p>user-actions.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> SHOW_ERROR = <span class=\"string\">'users:showError'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showError</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: SHOW_ERROR,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      user: <span class=\"string\">'ERROR!!'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">apiRequest</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 使用 axios 接取 API Promise</span></span><br><span class=\"line\">    <span class=\"comment\">// 這邊網址因為有 CORS，所以必定 ERROR</span></span><br><span class=\"line\">    axios(&#123;</span><br><span class=\"line\">      method: <span class=\"string\">'GET'</span>,</span><br><span class=\"line\">      url: <span class=\"string\">'http://google.com'</span></span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 成功的話會 dispatch updateUser Action</span></span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'SUCCESS'</span>);</span><br><span class=\"line\">      dispatch(updateUser(response.newUser));</span><br><span class=\"line\">    &#125;).catch(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 失敗的話會 dispatch showError Action</span></span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'ERROR'</span>);</span><br><span class=\"line\">      dispatch(showError());</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Reducers-1\"><a href=\"#Reducers-1\" class=\"headerlink\" title=\"Reducers\"></a>Reducers</h3><p>user-reducer.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; UPDATE_USER, SHOW_ERROR &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../actions/user-actions'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">userReducer</span>(<span class=\"params\">state = <span class=\"string\">''</span>, &#123;type, payload&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> UPDATE_USER:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> payload.user;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> SHOW_ERROR:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> payload.user;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"View-1\"><a href=\"#View-1\" class=\"headerlink\" title=\"View\"></a>View</h3><p>App.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; updateUser, apiRequest &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./actions/user-actions'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(props) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 在 component 出現的時候進行 API request</span></span><br><span class=\"line\">  componentDidMount () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.props.onApiRequest();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 將 apiRequest 放到此 component 的 props</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mapActionsToProps = &#123;</span><br><span class=\"line\">  onUpdateUser: updateUser,</span><br><span class=\"line\">  onApiRequest: apiRequest</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect(mapStateToProps, mapActionsToProps)(App);</span><br></pre></td></tr></table></figure>\n<h2 id=\"Reselect\"><a href=\"#Reselect\" class=\"headerlink\" title=\"Reselect\"></a>Reselect</h2><p>使用者每次都會透過 action 去做 dispatch 進而改變 state 的值。那麼，問題來了，如果需要的計算量比較大，每次更新的重新計算就會造成性能的問題。為了避免不必要的計算，Reselect 就是來解決此問題。<a href=\"https://github.com/Annilla/react-redux-practice/tree/V5\" target=\"_blank\" rel=\"noopener\">Git#5</a></p>\n<blockquote>\n<p>如果有用過 Vue 的話，就類似 computed 的功能。</p>\n</blockquote>\n<p>Selectors 的特點為：</p>\n<ul>\n<li><p>Selectors 可以用來計算延伸的資料，允許 Redux 去儲存最低限度的 state。也就是說，state 只儲存原始的基本資料，中間延伸的計算透過 Selector 呈現即可。</p>\n</li>\n<li><p>Selectors 很有效率。一個 selector 只會在與他相關的變數有改變的時候才會重新計算。</p>\n</li>\n<li><p>Selectors 可以多個組合。可被其他的 selectors 當作變數來運用。</p>\n</li>\n</ul>\n<p>這邊解釋就不用影片中的範例，因為我覺得官方提供的 example 解釋更為貼切。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createSelector &#125; <span class=\"keyword\">from</span> <span class=\"string\">'reselect'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 把 shop 裡面的 items 抓出來</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> shopItemsSelector = <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.shop.items</span><br><span class=\"line\"><span class=\"comment\">// 把 shop 裡面的 taxPercent 抓出來</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> taxPercentSelector = <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.shop.taxPercent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 把 items 的 value 做總和</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> subtotalSelector = createSelector(</span><br><span class=\"line\">  shopItemsSelector,</span><br><span class=\"line\">  items =&gt; items.reduce(<span class=\"function\">(<span class=\"params\">acc, item</span>) =&gt;</span> acc + item.value, <span class=\"number\">0</span>)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 用 subtotal 和 taxPercent 計算總稅額</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> taxSelector = createSelector(</span><br><span class=\"line\">  subtotalSelector,</span><br><span class=\"line\">  taxPercentSelector,</span><br><span class=\"line\">  (subtotal, taxPercent) =&gt; subtotal * (taxPercent / <span class=\"number\">100</span>)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 用 subtotal 和 tax 計算加稅後的總金額</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> totalSelector = createSelector(</span><br><span class=\"line\">  subtotalSelector,</span><br><span class=\"line\">  taxSelector,</span><br><span class=\"line\">  (subtotal, tax) =&gt; (&#123; <span class=\"attr\">total</span>: subtotal + tax &#125;)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> exampleState = &#123;</span><br><span class=\"line\">  shop: &#123;</span><br><span class=\"line\">    taxPercent: <span class=\"number\">8</span>,</span><br><span class=\"line\">    items: [</span><br><span class=\"line\">      &#123; <span class=\"attr\">name</span>: <span class=\"string\">'apple'</span>, <span class=\"attr\">value</span>: <span class=\"number\">1.20</span> &#125;,</span><br><span class=\"line\">      &#123; <span class=\"attr\">name</span>: <span class=\"string\">'orange'</span>, <span class=\"attr\">value</span>: <span class=\"number\">0.95</span> &#125;,</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(subtotalSelector(exampleState)) <span class=\"comment\">// 2.15</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(taxSelector(exampleState))      <span class=\"comment\">// 0.172</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(totalSelector(exampleState))    <span class=\"comment\">// &#123; total: 2.322 &#125;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Smart-VS-Dumb-Component\"><a href=\"#Smart-VS-Dumb-Component\" class=\"headerlink\" title=\"Smart VS Dumb Component\"></a>Smart VS Dumb Component</h2><p>你不可能把每個子 component 都跟 Store 做聯繫，這樣很累且是過度使用。所以我們就會有一個專門和 Store 做聯繫的 Component，也就是 Smart Component。他接到資料後會往下傳給只吃 prop 的 Dumb Component。如此一來我們就能保持只有少數 Smart Component 控制 Store，而底下的 Dumb Component 因為只吃 prop 傳進來的值，所以也可安心的重複使用。</p>\n<blockquote>\n<p>Smart VS Dumb Component 的概念是通用的理論，並不是 React 獨有。所以同樣的概念也適用在 Vue 和 Angular 等框架上。</p>\n</blockquote>\n<p><img src=\"https://huzidaha.github.io/static/assets/img/posts/25608378-BE07-4050-88B1-72025085875A.png\" alt=\"Smart VS Dumb Component\" title=\"Smart VS Dumb Component\"></p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://medium.com/@WendellLiu/redux-middleware%E5%A4%A7%E7%95%A5%E6%9E%B6%E6%A7%8B-ace7e646c929\" target=\"_blank\" rel=\"noopener\">Redux Middleware大略架構</a></li>\n<li><a href=\"https://medium.com/frochu/%E9%80%81%E8%AE%93%E4%BD%A0%E7%9A%84action%E8%83%BD%E4%BD%9C%E6%9B%B4%E5%A4%9A-redux-thunk-c07bc5488e48\" target=\"_blank\" rel=\"noopener\">讓你的Action能作更多 — Redux-Thunk</a></li>\n<li><a href=\"https://www.jianshu.com/p/1fcef4c892ba\" target=\"_blank\" rel=\"noopener\">react-redux性能优化之reselect</a></li>\n<li><a href=\"http://huziketang.mangojuice.top/books/react/lesson43\" target=\"_blank\" rel=\"noopener\">Smart 组件 vs Dumb 组件</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/1200px-React-icon.svg.png","excerpt":"<p>最近朋友問我關於 Redux 的問題，但我已經有兩年沒碰 React 了。所以藉此機會找了 youtube 上的<a href=\"https://youtu.be/OSSpVLpuVWA\" target=\"_blank\" rel=\"noopener\">教程</a>，好好複習一次。</p>","more":"<h2 id=\"Redux\"><a href=\"#Redux\" class=\"headerlink\" title=\"Redux\"></a>Redux</h2><ul>\n<li>Redux 透過單向數據流模型來管理狀態，幫助應用程式擴展規模</li>\n</ul>\n<p><img src=\"https://lh3.googleusercontent.com/RCAqIMcoBNaVcnbKPXupA177bJvvluPn3GeaSEywgKbQ9tqDWh-cjeds7KbOJiCWStxVGOQLR23kbd0nRhY31T_f7BlJY3CfCXXhGGqYqTaQvZiZKwIpOkY2QBnDdNxY1rEkqvHJAuIrvfRYS5HU5PAiW-JK5baYknZXW-dn14aeptIf1OXblwufjzgNDRSP1gZqUzvG1yyKF88XxV8isg76MQ2yONKLHhrzDNu5Yx_OrcP1u95MtLR9F-mZf_ah65I-JmVYpbtfECihE7VNEn58n7vMp2CIym4JLvRTFspEzCAerEklTkI4aF7oWqcnO-2fK_IImagVK_JU5D2dqBvGA9ZB6XChXPMmbYDs-dinini_zUPgFvYFQK0ZvhW7-KIBsMIVFNNgFhhVZb3wc3mcwrwIvLlmWkqpGHevqclMLAuWlaj-1LeYndUMfE5MzcZ8CSzu7Vo3YO_MjEh8mxSzICgvz-gnIUs6ezMhTCxxSp8SXuta7SZbTcgqDDFzx1BovCKvVgxlvOOD0hNneBq3C0yPBhVAB5mcNInZhjfhWYshXmEJUPZDUiHFXRmMzeCLmoRzUU0DzE2oasezhmYktkb4aRq9XzSkE2d8b9DILg4wWP3skCXG6syozRvTQwnu6z9tZMi96CvFm6RmyKiRebM-Vro_=w922-h548-no\" alt=\"單向數據流模型\" title=\"單向數據流模型\"></p>\n<ul>\n<li><a href=\"https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd\" target=\"_blank\" rel=\"noopener\">Redux Devtools</a> 幫助開發者進行狀態的監控與偵錯</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/7957859/48663602-3aac4900-ea9b-11e8-921f-97059cbb599c.png\" alt=\"Redux Devtools\" title=\"Redux Devtools\"></p>\n<h2 id=\"Redux-Flow\"><a href=\"#Redux-Flow\" class=\"headerlink\" title=\"Redux Flow\"></a>Redux Flow</h2><p>Redux Flow 有個儲存所有狀態 (State) 的倉庫 (Store)，頁面會依據這些狀態 (State) 產生對應的介面 (UI)。當使用者對介面 (UI) 觸發動作 (Actions) 時，動作 (Actions) 會把使用者所做的事情 (payload) 傳輸給處理器 (Reducer) 做運算， 處理器 (Reducer) 處理完後變會把倉庫 (Store) 裡的狀態 (State) 更新，所以頁面就會再依據狀態 (State) 的改變產生對應的新介面 (UI)。</p>\n<p><img src=\"https://lh3.googleusercontent.com/4fNoEoelX9xGuY9ujaqlV5bkoRzFWVJ12urnnBAs17FYumoFnC31TKe4hTzfpNBzG0Rde55vjURuPCCh7JiRYcl66xMZdgiijutv6ld2sRCwNBevGcfHj5sSUmCBmU3YrVGsagAVIpmmqGiZlI4wIGniBspsMA1CtGFA7f2punGbnfQLE_NhcPU8u_3VAxc3wmJJ1hxhaf_wO_FViTMzHx43-Lk3dmT3H219W4AAUPoPFMwWiiPyzNBtRZVzIyhLb6bGGLZPojsdaf5COQNN4NqfXnwgU0dNFX44tdM-10gYftyOBzsXwiCXu0aoPCei0nRvCp_cRlCClGYC6n9rp-4aNZ8GcaelZqN5nIf0jUYqegcGDoXeruwiy8g0x8_tlX5gAayXencALfp6LjfRTrM9Yry4z_VfgQuws0Y1-zvNdERmcZcFi3xfIPAfWuSxgdn5LeTxsm3fJ9eSCWobTf8n8KLW9rEXiwkBMiIqy4k7gYF6AnLzb9jssIp_huq0gStGif0pQdC-zjk144oSFkqmh9WtQGMGwSXTMfSL0g0NWKk9MehbxzFhRVKA-UrsN961N6dJXvs91IDJk3kT2Pb4ba_rx9yRnTu1mbPEvKp0hB73vro_RC94REWLrlzgkG6i_N9ezftI2z7TciZqnyMlGvCbwLIA=w1340-h932-no\" alt=\"Redux Flow\" title=\"Redux Flow\"></p>\n<h2 id=\"安裝\"><a href=\"#安裝\" class=\"headerlink\" title=\"安裝\"></a>安裝</h2><p>打下列指令安裝 React App。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx create-react-app redux-tutorial</span><br></pre></td></tr></table></figure>\n<p>誒？為什麼是 npx 呢？那是什麼？<br>所以我去搜尋了<a href=\"https://www.ruanyifeng.com/blog/2019/02/npx.html\" target=\"_blank\" rel=\"noopener\">npx 使用教程</a>如下。</p>\n<blockquote>\n<p>除了調用項目內部模塊，npx 還能避免全局安裝的模塊。比如，create-react-app 這個模塊是全局安裝，npx 可以運行它，而且不進行全局安裝。上面代碼運行時，npx 將create-react-app下載到一個臨時目錄，使用以後再刪除。所以，以後再次執行上面的命令，會重新下載create-react-app。</p>\n</blockquote>\n<p>意思就是他不會在你電腦安裝 create-react-app 這個項目呦～幫你產生好專案後，就會自動移除不佔空間。</p>\n<p>接下來進入專案，安裝 Redux。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd redux-tutorial</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add redux react-redux</span><br></pre></td></tr></table></figure>\n<p>將專案啟動檢查有沒有安裝成功。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn start</span><br></pre></td></tr></table></figure>\n<p>起成功的話會看到瀏覽器自動開啟頁面如下圖。頁面上會提示去修改 src/App.js 就會自動 reload 畫面。</p>\n<p><img src=\"https://lh3.googleusercontent.com/0eGc8PAV_LPbfRoLNBV1BkkTQD37TUEjNij_RlVgxSEuYZNY4DKF8uGzrLBHVf2AE4TBM8x9rWyyKuJVMinEABsb-JvpT9bkwb0NNTSKNjYcBbNBmdnZ6W_kg54n3dGO5Nn4z3ODEQeiLYYKsdOj5jwyrsb1o8hgfX6PiirzQaKCa-Nn7uyHM22VNhwKD8ycZsBYICwXla6-z_C-y7a8ycYR1zN7oa0TaMHidHVS74tcBOumyuO5ZZISjlDhYjajvV5ERdTi6ypNQbBq79zXlwjRmjq9UyATG39FOn5Dk3byoatX_sEfevfBxTxDTEgukeEz2anjaoIIzDzEwJJS0MLXZxkAGhtSAwBkU9LCGRh9IPc4IgShJuqA2B8-9qqSBznAukDaKrdbkjotC6gbbv2wsm_ogOhB68qf9fWHap_Jh_32gF-znppLcU-kP9cyGAF1hEBSDdeOngarYU6uSaIuuVlqJFjakf3CgBFdZVspwHQbdYGOmSyxPN_NU_nrZg7dgjYJeI_FkPzR8lY4qETFKPYyfWTCArWuzry2GwQ36VIrcc4lmp5SlhLnyW2WNZmaf-MMkVpjYMmzkNbRymIFamQzA2GO49BmecALKJXy4z_tSkYqsa8pDyRECxa1RGspkoog9YUvthBasLtLTForiwJN0iez=w2560-h1446-no\" alt=\"專案啟動頁面\" title=\"專案啟動頁面\"></p>\n<h2 id=\"創建-Store\"><a href=\"#創建-Store\" class=\"headerlink\" title=\"創建 Store\"></a>創建 Store</h2><h3 id=\"createStore\"><a href=\"#createStore\" class=\"headerlink\" title=\"createStore\"></a>createStore</h3><p>教程在 index.js 先創建了簡易的 store。<a href=\"https://github.com/Annilla/react-redux-practice/tree/V1\" target=\"_blank\" rel=\"noopener\">Git#1</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// reducer</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer</span>(<span class=\"params\">state, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 當 action type 為 _changeState 時，將 state 更改為 action 帶過來的 payload 值</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (action.type === <span class=\"string\">'_changeState'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> action.payload.newState;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 預設沒有動作時的值</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'state'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 創建 sotre</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(reducer);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 印出初始的 state 值</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(store.getState());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 設定動作屬性所帶的 payload 值</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> action = &#123;</span><br><span class=\"line\">  type: <span class=\"string\">'_changeState'</span>,</span><br><span class=\"line\">  payload: &#123;</span><br><span class=\"line\">    newState: <span class=\"string\">'New State'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 將動作帶入 reducer 中，進而更新 store 中的 state</span></span><br><span class=\"line\">store.dispatch(action);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 印出經過動作後的 state 值</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(store.getState());</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h3 id=\"combineReducers\"><a href=\"#combineReducers\" class=\"headerlink\" title=\"combineReducers\"></a>combineReducers</h3><p>當有兩個以上的 Reducers 時，在 index.js 做合併。 <a href=\"https://github.com/Annilla/react-redux-practice/tree/V2\" target=\"_blank\" rel=\"noopener\">Git#2</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore, combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 將 Reducer 分成專門處理產品和使用者資訊兩種</span></span><br><span class=\"line\"><span class=\"comment\">// 專門處理產品的 Reducer</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">productsReducer</span>(<span class=\"params\">state = [], action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 專門處理使用者的 Reducer</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">userReducer</span>(<span class=\"params\">state = <span class=\"string\">''</span>, &#123;type, payload&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'updateUser'</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> payload.user;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 將兩種 Reducer 合起來放在 store 用</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> allReducers = combineReducers(&#123;</span><br><span class=\"line\">  products: productsReducer,</span><br><span class=\"line\">  user: userReducer</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">  allReducers,</span><br><span class=\"line\">  <span class=\"comment\">// 放入起始值</span></span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    products: [&#123; <span class=\"attr\">name</span>: <span class=\"string\">'iPhone'</span> &#125;],</span><br><span class=\"line\">    user: <span class=\"string\">'Anny Chang'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// 開啟 devTool</span></span><br><span class=\"line\">  <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定義動作</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> updateUserAction = &#123;</span><br><span class=\"line\">  type: <span class=\"string\">'updateUser'</span>,</span><br><span class=\"line\">  payload: &#123;</span><br><span class=\"line\">    user: <span class=\"string\">'John'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 將動作帶入 reducer 中，進而更新 store 中的 state</span></span><br><span class=\"line\">store.dispatch(updateUserAction);</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Provider</span> <span class=\"attr\">store</span>=<span class=\"string\">&#123;store&#125;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">Provider</span>&gt;</span></span>, <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'root'</span>));</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h2 id=\"Reducers-and-Actions\"><a href=\"#Reducers-and-Actions\" class=\"headerlink\" title=\"Reducers and Actions\"></a>Reducers and Actions</h2><p>將 Reducers 和 Actions 從 index.js 中抽離。<a href=\"https://github.com/Annilla/react-redux-practice/tree/V3\" target=\"_blank\" rel=\"noopener\">Git#3</a></p>\n<h3 id=\"Actions\"><a href=\"#Actions\" class=\"headerlink\" title=\"Actions\"></a>Actions</h3><p>在 <code>src/acitons/</code> 新增 <code>user-actions.js</code> 和 <code>products-actions.js</code>。</p>\n<p>user-actions.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 將 type 名稱輸出供 Reducer 共用</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> UPDATE_USER = <span class=\"string\">'users:updateUser'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateUser</span> (<span class=\"params\">newUser</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: UPDATE_USER,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      user: newUser</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Reducers\"><a href=\"#Reducers\" class=\"headerlink\" title=\"Reducers\"></a>Reducers</h3><p>在 <code>src/reducers/</code> 新增 <code>user-reducer.js</code> 和 <code>products-reducer.js</code>。</p>\n<p>user-reducer.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 從 Action 那裡取得動作名稱</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; UPDATE_USER &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../actions/user-actions'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">userReducer</span>(<span class=\"params\">state = <span class=\"string\">''</span>, &#123;type, payload&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> UPDATE_USER:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> payload.user;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"View\"><a href=\"#View\" class=\"headerlink\" title=\"View\"></a>View</h3><p>App.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> logo <span class=\"keyword\">from</span> <span class=\"string\">'./logo.svg'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'./App.css'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; connect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; updateUser &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./actions/user-actions'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(props) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Using super in classes</span></span><br><span class=\"line\">    <span class=\"comment\">// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/super#Using_super_in_classes</span></span><br><span class=\"line\">    <span class=\"comment\">// super() 將父類的構建項目傳到子項目</span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>(props);</span><br><span class=\"line\">    <span class=\"comment\">// 將 onUpdateUser(event) 綁定 component 本身 = this</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.onUpdateUser = <span class=\"keyword\">this</span>.onUpdateUser.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  onUpdateUser(event) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// this = component 本身</span></span><br><span class=\"line\">    <span class=\"comment\">// 將輸入框的文字丟給 Redux Action</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.props.onUpdateUser(event.target.value);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">\"App\"</span>&gt;</span><br><span class=\"line\">        &lt;header className=<span class=\"string\">\"App-header\"</span>&gt;</span><br><span class=\"line\">          &lt;img src=&#123;logo&#125; className=<span class=\"string\">\"App-logo\"</span> alt=<span class=\"string\">\"logo\"</span> /&gt;</span><br><span class=\"line\">          &lt;p&gt;</span><br><span class=\"line\">            Edit &lt;code&gt;src/App.js&lt;<span class=\"regexp\">/code&gt; and save to reload.</span></span><br><span class=\"line\"><span class=\"regexp\">          &lt;/</span>p&gt;</span><br><span class=\"line\">          &lt;p&gt;Practice by Anny Chang&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">          &lt;a</span></span><br><span class=\"line\"><span class=\"regexp\">            className=\"App-link\"</span></span><br><span class=\"line\"><span class=\"regexp\">            href=\"https:/</span><span class=\"regexp\">/reactjs.org\"</span></span><br><span class=\"line\"><span class=\"regexp\">            target=\"_blank\"</span></span><br><span class=\"line\"><span class=\"regexp\">            rel=\"noopener noreferrer\"</span></span><br><span class=\"line\"><span class=\"regexp\">          &gt;</span></span><br><span class=\"line\"><span class=\"regexp\">            Learn React</span></span><br><span class=\"line\"><span class=\"regexp\">          &lt;/</span>a&gt;</span><br><span class=\"line\">          &lt;h1&gt;</span><br><span class=\"line\">            &lt;input onChange=&#123;<span class=\"keyword\">this</span>.onUpdateUser&#125;&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">input</span>&gt;</span></span></span><br><span class=\"line\">            &lt;br/&gt;</span><br><span class=\"line\">            &#123;<span class=\"keyword\">this</span>.props.user&#125;</span><br><span class=\"line\">          &lt;<span class=\"regexp\">/h1&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>header&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    );</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">/</span><span class=\"regexp\">/ 將 Redux State 丟到此 component 的 prop</span></span><br><span class=\"line\"><span class=\"regexp\">const mapStateToProps = state =&gt; (&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">  products: state.products,</span></span><br><span class=\"line\"><span class=\"regexp\">  user: state.user</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;);</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">/</span><span class=\"regexp\">/ 將 Redux Action 丟到此 component 的 prop</span></span><br><span class=\"line\"><span class=\"regexp\">const mapActionsToProps = &#123;</span></span><br><span class=\"line\"><span class=\"regexp\">  onUpdateUser: updateUser</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">export default connect(mapStateToProps, mapActionsToProps)(App);</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Redux-thunk\"><a href=\"#Redux-thunk\" class=\"headerlink\" title=\"Redux-thunk\"></a>Redux-thunk</h2><p>當我們在接取 API 非同步的請求時，就需要 Redux-thunk 這個 middleware，幫助 Promise 回傳過後可以在 dispatch 其他的 Action。<a href=\"https://github.com/Annilla/react-redux-practice/tree/V4\" target=\"_blank\" rel=\"noopener\">Git#4</a></p>\n<p>安裝 redux-thunk。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add redux-thunk</span><br></pre></td></tr></table></figure>\n<p>在 index.js 引用 thunk。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">import</span> thunk <span class=\"keyword\">from</span> <span class=\"string\">'redux-thunk'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; applyMiddleware, compose, createStore, combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span>;</span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用 applyMiddleware 將 thunk 帶進去改變原生 dispatch 行為</span></span><br><span class=\"line\"><span class=\"comment\">// Thunk 是一個以 action 為本的包裹器</span></span><br><span class=\"line\"><span class=\"comment\">// 在 Redux 中藉由 Redux-Thunk 這個 Redux Middleware 讓我們可以在使用時不去區分 pure action creator 還是 thunk action creator</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> allStoreEnhancers = compose (</span><br><span class=\"line\">  applyMiddleware(thunk),</span><br><span class=\"line\">  <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; <span class=\"built_in\">window</span>.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">  allReducers,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    products: [&#123; <span class=\"attr\">name</span>: <span class=\"string\">'iPhone'</span> &#125;],</span><br><span class=\"line\">    user: <span class=\"string\">'Anny Chang'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  allStoreEnhancers</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h3 id=\"Actions-1\"><a href=\"#Actions-1\" class=\"headerlink\" title=\"Actions\"></a>Actions</h3><p>user-actions.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> SHOW_ERROR = <span class=\"string\">'users:showError'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showError</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: SHOW_ERROR,</span><br><span class=\"line\">    payload: &#123;</span><br><span class=\"line\">      user: <span class=\"string\">'ERROR!!'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">apiRequest</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 使用 axios 接取 API Promise</span></span><br><span class=\"line\">    <span class=\"comment\">// 這邊網址因為有 CORS，所以必定 ERROR</span></span><br><span class=\"line\">    axios(&#123;</span><br><span class=\"line\">      method: <span class=\"string\">'GET'</span>,</span><br><span class=\"line\">      url: <span class=\"string\">'http://google.com'</span></span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 成功的話會 dispatch updateUser Action</span></span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'SUCCESS'</span>);</span><br><span class=\"line\">      dispatch(updateUser(response.newUser));</span><br><span class=\"line\">    &#125;).catch(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 失敗的話會 dispatch showError Action</span></span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'ERROR'</span>);</span><br><span class=\"line\">      dispatch(showError());</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Reducers-1\"><a href=\"#Reducers-1\" class=\"headerlink\" title=\"Reducers\"></a>Reducers</h3><p>user-reducer.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; UPDATE_USER, SHOW_ERROR &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../actions/user-actions'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">userReducer</span>(<span class=\"params\">state = <span class=\"string\">''</span>, &#123;type, payload&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> UPDATE_USER:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> payload.user;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> SHOW_ERROR:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> payload.user;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"View-1\"><a href=\"#View-1\" class=\"headerlink\" title=\"View\"></a>View</h3><p>App.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; updateUser, apiRequest &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./actions/user-actions'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(props) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 在 component 出現的時候進行 API request</span></span><br><span class=\"line\">  componentDidMount () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.props.onApiRequest();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 將 apiRequest 放到此 component 的 props</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mapActionsToProps = &#123;</span><br><span class=\"line\">  onUpdateUser: updateUser,</span><br><span class=\"line\">  onApiRequest: apiRequest</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect(mapStateToProps, mapActionsToProps)(App);</span><br></pre></td></tr></table></figure>\n<h2 id=\"Reselect\"><a href=\"#Reselect\" class=\"headerlink\" title=\"Reselect\"></a>Reselect</h2><p>使用者每次都會透過 action 去做 dispatch 進而改變 state 的值。那麼，問題來了，如果需要的計算量比較大，每次更新的重新計算就會造成性能的問題。為了避免不必要的計算，Reselect 就是來解決此問題。<a href=\"https://github.com/Annilla/react-redux-practice/tree/V5\" target=\"_blank\" rel=\"noopener\">Git#5</a></p>\n<blockquote>\n<p>如果有用過 Vue 的話，就類似 computed 的功能。</p>\n</blockquote>\n<p>Selectors 的特點為：</p>\n<ul>\n<li><p>Selectors 可以用來計算延伸的資料，允許 Redux 去儲存最低限度的 state。也就是說，state 只儲存原始的基本資料，中間延伸的計算透過 Selector 呈現即可。</p>\n</li>\n<li><p>Selectors 很有效率。一個 selector 只會在與他相關的變數有改變的時候才會重新計算。</p>\n</li>\n<li><p>Selectors 可以多個組合。可被其他的 selectors 當作變數來運用。</p>\n</li>\n</ul>\n<p>這邊解釋就不用影片中的範例，因為我覺得官方提供的 example 解釋更為貼切。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createSelector &#125; <span class=\"keyword\">from</span> <span class=\"string\">'reselect'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 把 shop 裡面的 items 抓出來</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> shopItemsSelector = <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.shop.items</span><br><span class=\"line\"><span class=\"comment\">// 把 shop 裡面的 taxPercent 抓出來</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> taxPercentSelector = <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.shop.taxPercent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 把 items 的 value 做總和</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> subtotalSelector = createSelector(</span><br><span class=\"line\">  shopItemsSelector,</span><br><span class=\"line\">  items =&gt; items.reduce(<span class=\"function\">(<span class=\"params\">acc, item</span>) =&gt;</span> acc + item.value, <span class=\"number\">0</span>)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 用 subtotal 和 taxPercent 計算總稅額</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> taxSelector = createSelector(</span><br><span class=\"line\">  subtotalSelector,</span><br><span class=\"line\">  taxPercentSelector,</span><br><span class=\"line\">  (subtotal, taxPercent) =&gt; subtotal * (taxPercent / <span class=\"number\">100</span>)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 用 subtotal 和 tax 計算加稅後的總金額</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> totalSelector = createSelector(</span><br><span class=\"line\">  subtotalSelector,</span><br><span class=\"line\">  taxSelector,</span><br><span class=\"line\">  (subtotal, tax) =&gt; (&#123; <span class=\"attr\">total</span>: subtotal + tax &#125;)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> exampleState = &#123;</span><br><span class=\"line\">  shop: &#123;</span><br><span class=\"line\">    taxPercent: <span class=\"number\">8</span>,</span><br><span class=\"line\">    items: [</span><br><span class=\"line\">      &#123; <span class=\"attr\">name</span>: <span class=\"string\">'apple'</span>, <span class=\"attr\">value</span>: <span class=\"number\">1.20</span> &#125;,</span><br><span class=\"line\">      &#123; <span class=\"attr\">name</span>: <span class=\"string\">'orange'</span>, <span class=\"attr\">value</span>: <span class=\"number\">0.95</span> &#125;,</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(subtotalSelector(exampleState)) <span class=\"comment\">// 2.15</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(taxSelector(exampleState))      <span class=\"comment\">// 0.172</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(totalSelector(exampleState))    <span class=\"comment\">// &#123; total: 2.322 &#125;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Smart-VS-Dumb-Component\"><a href=\"#Smart-VS-Dumb-Component\" class=\"headerlink\" title=\"Smart VS Dumb Component\"></a>Smart VS Dumb Component</h2><p>你不可能把每個子 component 都跟 Store 做聯繫，這樣很累且是過度使用。所以我們就會有一個專門和 Store 做聯繫的 Component，也就是 Smart Component。他接到資料後會往下傳給只吃 prop 的 Dumb Component。如此一來我們就能保持只有少數 Smart Component 控制 Store，而底下的 Dumb Component 因為只吃 prop 傳進來的值，所以也可安心的重複使用。</p>\n<blockquote>\n<p>Smart VS Dumb Component 的概念是通用的理論，並不是 React 獨有。所以同樣的概念也適用在 Vue 和 Angular 等框架上。</p>\n</blockquote>\n<p><img src=\"https://huzidaha.github.io/static/assets/img/posts/25608378-BE07-4050-88B1-72025085875A.png\" alt=\"Smart VS Dumb Component\" title=\"Smart VS Dumb Component\"></p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://medium.com/@WendellLiu/redux-middleware%E5%A4%A7%E7%95%A5%E6%9E%B6%E6%A7%8B-ace7e646c929\" target=\"_blank\" rel=\"noopener\">Redux Middleware大略架構</a></li>\n<li><a href=\"https://medium.com/frochu/%E9%80%81%E8%AE%93%E4%BD%A0%E7%9A%84action%E8%83%BD%E4%BD%9C%E6%9B%B4%E5%A4%9A-redux-thunk-c07bc5488e48\" target=\"_blank\" rel=\"noopener\">讓你的Action能作更多 — Redux-Thunk</a></li>\n<li><a href=\"https://www.jianshu.com/p/1fcef4c892ba\" target=\"_blank\" rel=\"noopener\">react-redux性能优化之reselect</a></li>\n<li><a href=\"http://huziketang.mangojuice.top/books/react/lesson43\" target=\"_blank\" rel=\"noopener\">Smart 组件 vs Dumb 组件</a></li>\n</ul>"},{"title":"Adobe XD New Feature - Auto-Animate","thumbnailImage":"https://lh3.googleusercontent.com/15TevdlU0UA0DHjDXR8IFLjUteZ4XGxRObDpCwsIumenN6CLFYQFRcoJnS_6xYGMmbUFHxpqlXp25FcRXorD83F2vgEoldt2orwKDe1_QGMpNRhvu0KtXQ1KxuXUV7GTUSCOn4GXJMj8lCETJtDBXcyl6bi_snLs80aQJu-mSbdzJ-Bj3D_0DpmVrnfS_KyUD7I-RnQZ5FOzarAYJmXYpwjBXGZkGNc1CtiSJ1OAQPCXFsOIj0Wnw8Bpq8z0ysUDOZXt6ZWoC74yspZm10_zGEUyjm5axY0SDCxxwPcdJ_GIhoz90_L9wqRjz1NLVOBgPsDmQwWKzCd4o-M-VgjflYccFA45jcNEr5vV5Pce3JKqX9gJFIL-qVW9J5Y_qjMBZdOr7M3YWveJeo8daOKrF1CIGuInKckICK5-K4h52V_CpV_1jEPEDRfI5OGnX4AfFPnntVRmP3y8raD5ajnxgnFAj3bVmaC4XSDO9ZLJd-soMaaTqa-URYTv4WjGJZGpM-XP2MYrMVyQyafCzc90XKuxo3stdk7qL9-Hua-AQi5S5iVLacJz8LSTRqGcy8vXu_vIG8YHLOCAQAQO3pXJxcwu33BlttXskTLk-b8j2MvYr1OM25EW35MThuYOQNimlGLn7P7f5sphQiTt-aNT0mj-HrD_xE05=s250-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/Ht5ducjpGZIxCwrhATVndjvHuH_-Kz2Tl3a4r071v7j_GHdCDyo5D5myiDer5DZwdhCDWb0ZSgwdusqZsgc3q2GXPXv3I_CGwluVHNyiieve2YsRUy9_-xuJONWJJZ4Fd4gxZAqXh8J57Q811ITlBRHUuA6UJQeM_9cQ52vpmFWXIgM3NBlV0_QcBebviTM6XT3EHucC0Wv4LFpCYffHzM_Aftc_YTG7QVrG5wtBg0ebGhMggyMme6j1kRuxdOI_nvoFpTYxHr58P68R5rcSdXxVXZ0FeYpKaNkmkZ7rNhsL_z3iWI7CxjbSPJD5USGFSS88OdSfp34p9dysnyk8-FJN3COPgxcZh0krE_Yn_pUhAObBn5nWC6WdZzTFCcTHhY4GDsYlsO2OsizYSscRoqCfUaZ_byBLYop2mr4-I2NsOwVTHVMCa3XLZ-bKoEei_GDNuBeSOs6s03lLVgN0-BPnXhqQkRRVSTvg74D1cu65nlDdMEe__a_H8PJxRuxo7kIzuZS2gP7vjwiKkd2bYR705P6P8mWVJf0RTDED3uTtM3it9yvTOa77wiJJtr5Y0h75S5ZrcclHDu6t9WcyFB3yrLuPBNPuieuy10HMhHXBqZqQRX8tyPZaQwNiANFgBQQ1MYs_jXPXnrj5y5-GneVm30LkL5UE=w1024-h683-no","coverMeta":"out","date":"2018-12-01T16:00:00.000Z","updated":"2018-12-01T16:00:00.000Z","_content":"\nAdobe XD 新功能 Auto-animate 在 2018 年 10 月釋放，雖然現在介紹好像有點晚了，但看了介紹就覺得超威的，想要好好整理一篇順便收集目前線上不錯的 Auto-animate reference。\n\n<!--more-->\n\n***\n## `auto-animate` 是什麼？\n\n一般來說設計師要模擬互動的過程，通常是靠著複製並微調數個 `artboards` ，並透過使用者點擊切換這些 `artboards` 來呈現互動效果，但以往 `XD` 的功能只能做到點擊淡入下個 `artboard`，過程是直接的切換而沒有漸進式的變化。新功能 `auto-animate` 則是讓設計師使用 `XD` 在同個元件不同 `artboards` 做屬性的微調後，對該元件加上 `auto-animate` 後就會自動呈現 `transition` 的效果，且觸發條件除了舊的 `tap`（點擊） 外還新增了 `drag`（拖拉） 的觸發動作，這樣就可以模擬手機左右滑或上下滑的互動效果，聽起來超令人興奮的。至於元件可支援的 `auto-animate` 屬性例如：大小、位置、旋轉等等，可參考此[官網說明](https://helpx.adobe.com/xd/kb/supported-auto-animate-features-in-xd.html)。\n\n> PS. XD prototype 的觸發動作除了 `Tap` 和 `Drag` 外還有 `Time` 和 `Voice`，這個等以後有機會研究再跟大家分享。\n\n***\n## 如何製作 `auto-animate`？\n\n在解釋步驟前先來看一張官網 demo 左右拖拉互動的效果圖。\n\n![模擬左右拖拉互動效果](https://helpx.adobe.com/content/dam/help/en/xd/help/create-prototypes-using-auto-animate/jcr_content/main-pars/image/Drag.gif \"模擬左右拖拉互動效果\")\n\n製作流程：\n\n1) 將第一個使用者看到的 `artboard` 設為首頁（成功設置完 `artboard` 左上角會有房子的藍色 logo 圖示）。\n\n2) 將要展示的滑動過程依順序將 `artboard` 一個一個連結好。其中要設定的參數如下：\n* Trigger: 設置 Drag 屬性\n* Action: 設置 Auto-Animate\n* Destination: 設置要連結的下個 artboard \n* Easing: 選擇 transition 過程要使用的變換函數 (同 CSS)\n\n設定參數可參考下圖。\n![auto-animate 設定參數](https://helpx.adobe.com/content/dam/help/en/xd/help/create-prototypes-using-auto-animate/jcr_content/main-pars/procedure_1208997114/proc_par/step_2/step_par/image/Setting-up-Drag.png \"auto-animate 設定參數\")\n\n將將！是不是很 easy ~\n\n***\n## 線上 `auto-animate` 作品分享\n\n免費的 XD 作品我通常都是來找[XDGuro](https://www.xdguru.com/3)，大家可以自行來挖寶，下面推薦一些我看到不錯的 `auto-animate` 作品。\n\n### [Auto Animate – Free XD UI kit](https://www.xdguru.com/auto-animate-free-ui-kit-xd/)\n\n![Auto Animate – Free XD UI kit](https://www.xdguru.com/wp-content/uploads/2018/11/Auto-Animate-Free-UI-kit-1014x487.jpg \"Auto Animate – Free XD UI kit\")\n\n這是官方寫的 demo ，裡面列出了各種常用的動畫效果，例如：Loading Bar, Number Counter, Day/Night Switch, Drag Carrousel, Pull to Refresh, Swipe Away, Parallax... 你想得到的都做得出來。真的是太神奇了～有用 XD 的設計師必載的參考文件！！\n\n### [Mobile XD scrolling interaction](https://www.xdguru.com/mobile-xd-scrolling-interaction/)\n\n![Mobile XD scrolling interaction](https://www.xdguru.com/wp-content/uploads/2018/11/Mobile-XD-scrolling-interaction-1014x487.jpg \"Mobile XD scrolling interaction\")\n\n這個作品也是我一看到就立馬收藏的好物！他模擬了最上方 User 資訊如何縮放漸變的過程，互動感覺非常流暢～喜歡！！\n\n### [Ice Cream App animation](https://www.xdguru.com/ice-cream-app-animation-xd/)\n\n![Ice Cream App animation](https://www.xdguru.com/wp-content/uploads/2018/10/Ice-Cream-App-animation-1014x487.jpg \"Ice Cream App animation\")\n\n這個作品也用到了經典的點擊和拖拉效果，也值得收藏!\n比較可惜的是左右滑動換冰淇淋的部分不知道為什麼有些卡卡的，還要再多研究一下XD\n\n看完了這些讓我更加愛上 `XD`，最近發現他也開放 plugin 功能，但目前還沒看到什麼厲害的 plugin，另外版本控制這部分也是我期待的一點，希望他能盡快有這些功能～哈哈 （使用著 Sketch 卻望著 XD 的設計師心聲）\n\n\n## 參考資料\n\n* [Create prototypes using auto-animate](https://helpx.adobe.com/xd/help/create-prototypes-using-auto-animate.html)\n* [Supported properties for auto-animate in XD artboard transitions](https://helpx.adobe.com/xd/kb/supported-auto-animate-features-in-xd.html)\n* [Auto Animate – Free XD UI kit](https://www.xdguru.com/auto-animate-free-ui-kit-xd/)\n* [Mobile XD scrolling interaction](https://www.xdguru.com/mobile-xd-scrolling-interaction/)\n* [Ice Cream App animation](https://www.xdguru.com/ice-cream-app-animation-xd/)","source":"_posts/UXUI/Adobe-XD-New-Feature-Auto-Animate.md","raw":"---\ntitle: Adobe XD New Feature - Auto-Animate\ncategories:\n  - UXUI\nthumbnailImage: https://lh3.googleusercontent.com/15TevdlU0UA0DHjDXR8IFLjUteZ4XGxRObDpCwsIumenN6CLFYQFRcoJnS_6xYGMmbUFHxpqlXp25FcRXorD83F2vgEoldt2orwKDe1_QGMpNRhvu0KtXQ1KxuXUV7GTUSCOn4GXJMj8lCETJtDBXcyl6bi_snLs80aQJu-mSbdzJ-Bj3D_0DpmVrnfS_KyUD7I-RnQZ5FOzarAYJmXYpwjBXGZkGNc1CtiSJ1OAQPCXFsOIj0Wnw8Bpq8z0ysUDOZXt6ZWoC74yspZm10_zGEUyjm5axY0SDCxxwPcdJ_GIhoz90_L9wqRjz1NLVOBgPsDmQwWKzCd4o-M-VgjflYccFA45jcNEr5vV5Pce3JKqX9gJFIL-qVW9J5Y_qjMBZdOr7M3YWveJeo8daOKrF1CIGuInKckICK5-K4h52V_CpV_1jEPEDRfI5OGnX4AfFPnntVRmP3y8raD5ajnxgnFAj3bVmaC4XSDO9ZLJd-soMaaTqa-URYTv4WjGJZGpM-XP2MYrMVyQyafCzc90XKuxo3stdk7qL9-Hua-AQi5S5iVLacJz8LSTRqGcy8vXu_vIG8YHLOCAQAQO3pXJxcwu33BlttXskTLk-b8j2MvYr1OM25EW35MThuYOQNimlGLn7P7f5sphQiTt-aNT0mj-HrD_xE05=s250-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/Ht5ducjpGZIxCwrhATVndjvHuH_-Kz2Tl3a4r071v7j_GHdCDyo5D5myiDer5DZwdhCDWb0ZSgwdusqZsgc3q2GXPXv3I_CGwluVHNyiieve2YsRUy9_-xuJONWJJZ4Fd4gxZAqXh8J57Q811ITlBRHUuA6UJQeM_9cQ52vpmFWXIgM3NBlV0_QcBebviTM6XT3EHucC0Wv4LFpCYffHzM_Aftc_YTG7QVrG5wtBg0ebGhMggyMme6j1kRuxdOI_nvoFpTYxHr58P68R5rcSdXxVXZ0FeYpKaNkmkZ7rNhsL_z3iWI7CxjbSPJD5USGFSS88OdSfp34p9dysnyk8-FJN3COPgxcZh0krE_Yn_pUhAObBn5nWC6WdZzTFCcTHhY4GDsYlsO2OsizYSscRoqCfUaZ_byBLYop2mr4-I2NsOwVTHVMCa3XLZ-bKoEei_GDNuBeSOs6s03lLVgN0-BPnXhqQkRRVSTvg74D1cu65nlDdMEe__a_H8PJxRuxo7kIzuZS2gP7vjwiKkd2bYR705P6P8mWVJf0RTDED3uTtM3it9yvTOa77wiJJtr5Y0h75S5ZrcclHDu6t9WcyFB3yrLuPBNPuieuy10HMhHXBqZqQRX8tyPZaQwNiANFgBQQ1MYs_jXPXnrj5y5-GneVm30LkL5UE=w1024-h683-no\ncoverMeta: out\ntags: [Adobe XD, UX, UI]\ndate: 2018/12/02\nupdated: 2018/12/02\n---\n\nAdobe XD 新功能 Auto-animate 在 2018 年 10 月釋放，雖然現在介紹好像有點晚了，但看了介紹就覺得超威的，想要好好整理一篇順便收集目前線上不錯的 Auto-animate reference。\n\n<!--more-->\n\n***\n## `auto-animate` 是什麼？\n\n一般來說設計師要模擬互動的過程，通常是靠著複製並微調數個 `artboards` ，並透過使用者點擊切換這些 `artboards` 來呈現互動效果，但以往 `XD` 的功能只能做到點擊淡入下個 `artboard`，過程是直接的切換而沒有漸進式的變化。新功能 `auto-animate` 則是讓設計師使用 `XD` 在同個元件不同 `artboards` 做屬性的微調後，對該元件加上 `auto-animate` 後就會自動呈現 `transition` 的效果，且觸發條件除了舊的 `tap`（點擊） 外還新增了 `drag`（拖拉） 的觸發動作，這樣就可以模擬手機左右滑或上下滑的互動效果，聽起來超令人興奮的。至於元件可支援的 `auto-animate` 屬性例如：大小、位置、旋轉等等，可參考此[官網說明](https://helpx.adobe.com/xd/kb/supported-auto-animate-features-in-xd.html)。\n\n> PS. XD prototype 的觸發動作除了 `Tap` 和 `Drag` 外還有 `Time` 和 `Voice`，這個等以後有機會研究再跟大家分享。\n\n***\n## 如何製作 `auto-animate`？\n\n在解釋步驟前先來看一張官網 demo 左右拖拉互動的效果圖。\n\n![模擬左右拖拉互動效果](https://helpx.adobe.com/content/dam/help/en/xd/help/create-prototypes-using-auto-animate/jcr_content/main-pars/image/Drag.gif \"模擬左右拖拉互動效果\")\n\n製作流程：\n\n1) 將第一個使用者看到的 `artboard` 設為首頁（成功設置完 `artboard` 左上角會有房子的藍色 logo 圖示）。\n\n2) 將要展示的滑動過程依順序將 `artboard` 一個一個連結好。其中要設定的參數如下：\n* Trigger: 設置 Drag 屬性\n* Action: 設置 Auto-Animate\n* Destination: 設置要連結的下個 artboard \n* Easing: 選擇 transition 過程要使用的變換函數 (同 CSS)\n\n設定參數可參考下圖。\n![auto-animate 設定參數](https://helpx.adobe.com/content/dam/help/en/xd/help/create-prototypes-using-auto-animate/jcr_content/main-pars/procedure_1208997114/proc_par/step_2/step_par/image/Setting-up-Drag.png \"auto-animate 設定參數\")\n\n將將！是不是很 easy ~\n\n***\n## 線上 `auto-animate` 作品分享\n\n免費的 XD 作品我通常都是來找[XDGuro](https://www.xdguru.com/3)，大家可以自行來挖寶，下面推薦一些我看到不錯的 `auto-animate` 作品。\n\n### [Auto Animate – Free XD UI kit](https://www.xdguru.com/auto-animate-free-ui-kit-xd/)\n\n![Auto Animate – Free XD UI kit](https://www.xdguru.com/wp-content/uploads/2018/11/Auto-Animate-Free-UI-kit-1014x487.jpg \"Auto Animate – Free XD UI kit\")\n\n這是官方寫的 demo ，裡面列出了各種常用的動畫效果，例如：Loading Bar, Number Counter, Day/Night Switch, Drag Carrousel, Pull to Refresh, Swipe Away, Parallax... 你想得到的都做得出來。真的是太神奇了～有用 XD 的設計師必載的參考文件！！\n\n### [Mobile XD scrolling interaction](https://www.xdguru.com/mobile-xd-scrolling-interaction/)\n\n![Mobile XD scrolling interaction](https://www.xdguru.com/wp-content/uploads/2018/11/Mobile-XD-scrolling-interaction-1014x487.jpg \"Mobile XD scrolling interaction\")\n\n這個作品也是我一看到就立馬收藏的好物！他模擬了最上方 User 資訊如何縮放漸變的過程，互動感覺非常流暢～喜歡！！\n\n### [Ice Cream App animation](https://www.xdguru.com/ice-cream-app-animation-xd/)\n\n![Ice Cream App animation](https://www.xdguru.com/wp-content/uploads/2018/10/Ice-Cream-App-animation-1014x487.jpg \"Ice Cream App animation\")\n\n這個作品也用到了經典的點擊和拖拉效果，也值得收藏!\n比較可惜的是左右滑動換冰淇淋的部分不知道為什麼有些卡卡的，還要再多研究一下XD\n\n看完了這些讓我更加愛上 `XD`，最近發現他也開放 plugin 功能，但目前還沒看到什麼厲害的 plugin，另外版本控制這部分也是我期待的一點，希望他能盡快有這些功能～哈哈 （使用著 Sketch 卻望著 XD 的設計師心聲）\n\n\n## 參考資料\n\n* [Create prototypes using auto-animate](https://helpx.adobe.com/xd/help/create-prototypes-using-auto-animate.html)\n* [Supported properties for auto-animate in XD artboard transitions](https://helpx.adobe.com/xd/kb/supported-auto-animate-features-in-xd.html)\n* [Auto Animate – Free XD UI kit](https://www.xdguru.com/auto-animate-free-ui-kit-xd/)\n* [Mobile XD scrolling interaction](https://www.xdguru.com/mobile-xd-scrolling-interaction/)\n* [Ice Cream App animation](https://www.xdguru.com/ice-cream-app-animation-xd/)","slug":"UXUI/Adobe-XD-New-Feature-Auto-Animate","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74w001studh4n9y8taz","content":"<p>Adobe XD 新功能 Auto-animate 在 2018 年 10 月釋放，雖然現在介紹好像有點晚了，但看了介紹就覺得超威的，想要好好整理一篇順便收集目前線上不錯的 Auto-animate reference。</p>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"auto-animate-是什麼？\"><a href=\"#auto-animate-是什麼？\" class=\"headerlink\" title=\"auto-animate 是什麼？\"></a><code>auto-animate</code> 是什麼？</h2><p>一般來說設計師要模擬互動的過程，通常是靠著複製並微調數個 <code>artboards</code> ，並透過使用者點擊切換這些 <code>artboards</code> 來呈現互動效果，但以往 <code>XD</code> 的功能只能做到點擊淡入下個 <code>artboard</code>，過程是直接的切換而沒有漸進式的變化。新功能 <code>auto-animate</code> 則是讓設計師使用 <code>XD</code> 在同個元件不同 <code>artboards</code> 做屬性的微調後，對該元件加上 <code>auto-animate</code> 後就會自動呈現 <code>transition</code> 的效果，且觸發條件除了舊的 <code>tap</code>（點擊） 外還新增了 <code>drag</code>（拖拉） 的觸發動作，這樣就可以模擬手機左右滑或上下滑的互動效果，聽起來超令人興奮的。至於元件可支援的 <code>auto-animate</code> 屬性例如：大小、位置、旋轉等等，可參考此<a href=\"https://helpx.adobe.com/xd/kb/supported-auto-animate-features-in-xd.html\" target=\"_blank\" rel=\"noopener\">官網說明</a>。</p>\n<blockquote>\n<p>PS. XD prototype 的觸發動作除了 <code>Tap</code> 和 <code>Drag</code> 外還有 <code>Time</code> 和 <code>Voice</code>，這個等以後有機會研究再跟大家分享。</p>\n</blockquote>\n<hr>\n<h2 id=\"如何製作-auto-animate？\"><a href=\"#如何製作-auto-animate？\" class=\"headerlink\" title=\"如何製作 auto-animate？\"></a>如何製作 <code>auto-animate</code>？</h2><p>在解釋步驟前先來看一張官網 demo 左右拖拉互動的效果圖。</p>\n<p><img src=\"https://helpx.adobe.com/content/dam/help/en/xd/help/create-prototypes-using-auto-animate/jcr_content/main-pars/image/Drag.gif\" alt=\"模擬左右拖拉互動效果\" title=\"模擬左右拖拉互動效果\"></p>\n<p>製作流程：</p>\n<p>1) 將第一個使用者看到的 <code>artboard</code> 設為首頁（成功設置完 <code>artboard</code> 左上角會有房子的藍色 logo 圖示）。</p>\n<p>2) 將要展示的滑動過程依順序將 <code>artboard</code> 一個一個連結好。其中要設定的參數如下：</p>\n<ul>\n<li>Trigger: 設置 Drag 屬性</li>\n<li>Action: 設置 Auto-Animate</li>\n<li>Destination: 設置要連結的下個 artboard </li>\n<li>Easing: 選擇 transition 過程要使用的變換函數 (同 CSS)</li>\n</ul>\n<p>設定參數可參考下圖。<br><img src=\"https://helpx.adobe.com/content/dam/help/en/xd/help/create-prototypes-using-auto-animate/jcr_content/main-pars/procedure_1208997114/proc_par/step_2/step_par/image/Setting-up-Drag.png\" alt=\"auto-animate 設定參數\" title=\"auto-animate 設定參數\"></p>\n<p>將將！是不是很 easy ~</p>\n<hr>\n<h2 id=\"線上-auto-animate-作品分享\"><a href=\"#線上-auto-animate-作品分享\" class=\"headerlink\" title=\"線上 auto-animate 作品分享\"></a>線上 <code>auto-animate</code> 作品分享</h2><p>免費的 XD 作品我通常都是來找<a href=\"https://www.xdguru.com/3\" target=\"_blank\" rel=\"noopener\">XDGuro</a>，大家可以自行來挖寶，下面推薦一些我看到不錯的 <code>auto-animate</code> 作品。</p>\n<h3 id=\"Auto-Animate-–-Free-XD-UI-kit\"><a href=\"#Auto-Animate-–-Free-XD-UI-kit\" class=\"headerlink\" title=\"Auto Animate – Free XD UI kit\"></a><a href=\"https://www.xdguru.com/auto-animate-free-ui-kit-xd/\" target=\"_blank\" rel=\"noopener\">Auto Animate – Free XD UI kit</a></h3><p><img src=\"https://www.xdguru.com/wp-content/uploads/2018/11/Auto-Animate-Free-UI-kit-1014x487.jpg\" alt=\"Auto Animate – Free XD UI kit\" title=\"Auto Animate – Free XD UI kit\"></p>\n<p>這是官方寫的 demo ，裡面列出了各種常用的動畫效果，例如：Loading Bar, Number Counter, Day/Night Switch, Drag Carrousel, Pull to Refresh, Swipe Away, Parallax… 你想得到的都做得出來。真的是太神奇了～有用 XD 的設計師必載的參考文件！！</p>\n<h3 id=\"Mobile-XD-scrolling-interaction\"><a href=\"#Mobile-XD-scrolling-interaction\" class=\"headerlink\" title=\"Mobile XD scrolling interaction\"></a><a href=\"https://www.xdguru.com/mobile-xd-scrolling-interaction/\" target=\"_blank\" rel=\"noopener\">Mobile XD scrolling interaction</a></h3><p><img src=\"https://www.xdguru.com/wp-content/uploads/2018/11/Mobile-XD-scrolling-interaction-1014x487.jpg\" alt=\"Mobile XD scrolling interaction\" title=\"Mobile XD scrolling interaction\"></p>\n<p>這個作品也是我一看到就立馬收藏的好物！他模擬了最上方 User 資訊如何縮放漸變的過程，互動感覺非常流暢～喜歡！！</p>\n<h3 id=\"Ice-Cream-App-animation\"><a href=\"#Ice-Cream-App-animation\" class=\"headerlink\" title=\"Ice Cream App animation\"></a><a href=\"https://www.xdguru.com/ice-cream-app-animation-xd/\" target=\"_blank\" rel=\"noopener\">Ice Cream App animation</a></h3><p><img src=\"https://www.xdguru.com/wp-content/uploads/2018/10/Ice-Cream-App-animation-1014x487.jpg\" alt=\"Ice Cream App animation\" title=\"Ice Cream App animation\"></p>\n<p>這個作品也用到了經典的點擊和拖拉效果，也值得收藏!<br>比較可惜的是左右滑動換冰淇淋的部分不知道為什麼有些卡卡的，還要再多研究一下XD</p>\n<p>看完了這些讓我更加愛上 <code>XD</code>，最近發現他也開放 plugin 功能，但目前還沒看到什麼厲害的 plugin，另外版本控制這部分也是我期待的一點，希望他能盡快有這些功能～哈哈 （使用著 Sketch 卻望著 XD 的設計師心聲）</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://helpx.adobe.com/xd/help/create-prototypes-using-auto-animate.html\" target=\"_blank\" rel=\"noopener\">Create prototypes using auto-animate</a></li>\n<li><a href=\"https://helpx.adobe.com/xd/kb/supported-auto-animate-features-in-xd.html\" target=\"_blank\" rel=\"noopener\">Supported properties for auto-animate in XD artboard transitions</a></li>\n<li><a href=\"https://www.xdguru.com/auto-animate-free-ui-kit-xd/\" target=\"_blank\" rel=\"noopener\">Auto Animate – Free XD UI kit</a></li>\n<li><a href=\"https://www.xdguru.com/mobile-xd-scrolling-interaction/\" target=\"_blank\" rel=\"noopener\">Mobile XD scrolling interaction</a></li>\n<li><a href=\"https://www.xdguru.com/ice-cream-app-animation-xd/\" target=\"_blank\" rel=\"noopener\">Ice Cream App animation</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/15TevdlU0UA0DHjDXR8IFLjUteZ4XGxRObDpCwsIumenN6CLFYQFRcoJnS_6xYGMmbUFHxpqlXp25FcRXorD83F2vgEoldt2orwKDe1_QGMpNRhvu0KtXQ1KxuXUV7GTUSCOn4GXJMj8lCETJtDBXcyl6bi_snLs80aQJu-mSbdzJ-Bj3D_0DpmVrnfS_KyUD7I-RnQZ5FOzarAYJmXYpwjBXGZkGNc1CtiSJ1OAQPCXFsOIj0Wnw8Bpq8z0ysUDOZXt6ZWoC74yspZm10_zGEUyjm5axY0SDCxxwPcdJ_GIhoz90_L9wqRjz1NLVOBgPsDmQwWKzCd4o-M-VgjflYccFA45jcNEr5vV5Pce3JKqX9gJFIL-qVW9J5Y_qjMBZdOr7M3YWveJeo8daOKrF1CIGuInKckICK5-K4h52V_CpV_1jEPEDRfI5OGnX4AfFPnntVRmP3y8raD5ajnxgnFAj3bVmaC4XSDO9ZLJd-soMaaTqa-URYTv4WjGJZGpM-XP2MYrMVyQyafCzc90XKuxo3stdk7qL9-Hua-AQi5S5iVLacJz8LSTRqGcy8vXu_vIG8YHLOCAQAQO3pXJxcwu33BlttXskTLk-b8j2MvYr1OM25EW35MThuYOQNimlGLn7P7f5sphQiTt-aNT0mj-HrD_xE05=s250-no","excerpt":"<p>Adobe XD 新功能 Auto-animate 在 2018 年 10 月釋放，雖然現在介紹好像有點晚了，但看了介紹就覺得超威的，想要好好整理一篇順便收集目前線上不錯的 Auto-animate reference。</p>","more":"<hr>\n<h2 id=\"auto-animate-是什麼？\"><a href=\"#auto-animate-是什麼？\" class=\"headerlink\" title=\"auto-animate 是什麼？\"></a><code>auto-animate</code> 是什麼？</h2><p>一般來說設計師要模擬互動的過程，通常是靠著複製並微調數個 <code>artboards</code> ，並透過使用者點擊切換這些 <code>artboards</code> 來呈現互動效果，但以往 <code>XD</code> 的功能只能做到點擊淡入下個 <code>artboard</code>，過程是直接的切換而沒有漸進式的變化。新功能 <code>auto-animate</code> 則是讓設計師使用 <code>XD</code> 在同個元件不同 <code>artboards</code> 做屬性的微調後，對該元件加上 <code>auto-animate</code> 後就會自動呈現 <code>transition</code> 的效果，且觸發條件除了舊的 <code>tap</code>（點擊） 外還新增了 <code>drag</code>（拖拉） 的觸發動作，這樣就可以模擬手機左右滑或上下滑的互動效果，聽起來超令人興奮的。至於元件可支援的 <code>auto-animate</code> 屬性例如：大小、位置、旋轉等等，可參考此<a href=\"https://helpx.adobe.com/xd/kb/supported-auto-animate-features-in-xd.html\" target=\"_blank\" rel=\"noopener\">官網說明</a>。</p>\n<blockquote>\n<p>PS. XD prototype 的觸發動作除了 <code>Tap</code> 和 <code>Drag</code> 外還有 <code>Time</code> 和 <code>Voice</code>，這個等以後有機會研究再跟大家分享。</p>\n</blockquote>\n<hr>\n<h2 id=\"如何製作-auto-animate？\"><a href=\"#如何製作-auto-animate？\" class=\"headerlink\" title=\"如何製作 auto-animate？\"></a>如何製作 <code>auto-animate</code>？</h2><p>在解釋步驟前先來看一張官網 demo 左右拖拉互動的效果圖。</p>\n<p><img src=\"https://helpx.adobe.com/content/dam/help/en/xd/help/create-prototypes-using-auto-animate/jcr_content/main-pars/image/Drag.gif\" alt=\"模擬左右拖拉互動效果\" title=\"模擬左右拖拉互動效果\"></p>\n<p>製作流程：</p>\n<p>1) 將第一個使用者看到的 <code>artboard</code> 設為首頁（成功設置完 <code>artboard</code> 左上角會有房子的藍色 logo 圖示）。</p>\n<p>2) 將要展示的滑動過程依順序將 <code>artboard</code> 一個一個連結好。其中要設定的參數如下：</p>\n<ul>\n<li>Trigger: 設置 Drag 屬性</li>\n<li>Action: 設置 Auto-Animate</li>\n<li>Destination: 設置要連結的下個 artboard </li>\n<li>Easing: 選擇 transition 過程要使用的變換函數 (同 CSS)</li>\n</ul>\n<p>設定參數可參考下圖。<br><img src=\"https://helpx.adobe.com/content/dam/help/en/xd/help/create-prototypes-using-auto-animate/jcr_content/main-pars/procedure_1208997114/proc_par/step_2/step_par/image/Setting-up-Drag.png\" alt=\"auto-animate 設定參數\" title=\"auto-animate 設定參數\"></p>\n<p>將將！是不是很 easy ~</p>\n<hr>\n<h2 id=\"線上-auto-animate-作品分享\"><a href=\"#線上-auto-animate-作品分享\" class=\"headerlink\" title=\"線上 auto-animate 作品分享\"></a>線上 <code>auto-animate</code> 作品分享</h2><p>免費的 XD 作品我通常都是來找<a href=\"https://www.xdguru.com/3\" target=\"_blank\" rel=\"noopener\">XDGuro</a>，大家可以自行來挖寶，下面推薦一些我看到不錯的 <code>auto-animate</code> 作品。</p>\n<h3 id=\"Auto-Animate-–-Free-XD-UI-kit\"><a href=\"#Auto-Animate-–-Free-XD-UI-kit\" class=\"headerlink\" title=\"Auto Animate – Free XD UI kit\"></a><a href=\"https://www.xdguru.com/auto-animate-free-ui-kit-xd/\" target=\"_blank\" rel=\"noopener\">Auto Animate – Free XD UI kit</a></h3><p><img src=\"https://www.xdguru.com/wp-content/uploads/2018/11/Auto-Animate-Free-UI-kit-1014x487.jpg\" alt=\"Auto Animate – Free XD UI kit\" title=\"Auto Animate – Free XD UI kit\"></p>\n<p>這是官方寫的 demo ，裡面列出了各種常用的動畫效果，例如：Loading Bar, Number Counter, Day/Night Switch, Drag Carrousel, Pull to Refresh, Swipe Away, Parallax… 你想得到的都做得出來。真的是太神奇了～有用 XD 的設計師必載的參考文件！！</p>\n<h3 id=\"Mobile-XD-scrolling-interaction\"><a href=\"#Mobile-XD-scrolling-interaction\" class=\"headerlink\" title=\"Mobile XD scrolling interaction\"></a><a href=\"https://www.xdguru.com/mobile-xd-scrolling-interaction/\" target=\"_blank\" rel=\"noopener\">Mobile XD scrolling interaction</a></h3><p><img src=\"https://www.xdguru.com/wp-content/uploads/2018/11/Mobile-XD-scrolling-interaction-1014x487.jpg\" alt=\"Mobile XD scrolling interaction\" title=\"Mobile XD scrolling interaction\"></p>\n<p>這個作品也是我一看到就立馬收藏的好物！他模擬了最上方 User 資訊如何縮放漸變的過程，互動感覺非常流暢～喜歡！！</p>\n<h3 id=\"Ice-Cream-App-animation\"><a href=\"#Ice-Cream-App-animation\" class=\"headerlink\" title=\"Ice Cream App animation\"></a><a href=\"https://www.xdguru.com/ice-cream-app-animation-xd/\" target=\"_blank\" rel=\"noopener\">Ice Cream App animation</a></h3><p><img src=\"https://www.xdguru.com/wp-content/uploads/2018/10/Ice-Cream-App-animation-1014x487.jpg\" alt=\"Ice Cream App animation\" title=\"Ice Cream App animation\"></p>\n<p>這個作品也用到了經典的點擊和拖拉效果，也值得收藏!<br>比較可惜的是左右滑動換冰淇淋的部分不知道為什麼有些卡卡的，還要再多研究一下XD</p>\n<p>看完了這些讓我更加愛上 <code>XD</code>，最近發現他也開放 plugin 功能，但目前還沒看到什麼厲害的 plugin，另外版本控制這部分也是我期待的一點，希望他能盡快有這些功能～哈哈 （使用著 Sketch 卻望著 XD 的設計師心聲）</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://helpx.adobe.com/xd/help/create-prototypes-using-auto-animate.html\" target=\"_blank\" rel=\"noopener\">Create prototypes using auto-animate</a></li>\n<li><a href=\"https://helpx.adobe.com/xd/kb/supported-auto-animate-features-in-xd.html\" target=\"_blank\" rel=\"noopener\">Supported properties for auto-animate in XD artboard transitions</a></li>\n<li><a href=\"https://www.xdguru.com/auto-animate-free-ui-kit-xd/\" target=\"_blank\" rel=\"noopener\">Auto Animate – Free XD UI kit</a></li>\n<li><a href=\"https://www.xdguru.com/mobile-xd-scrolling-interaction/\" target=\"_blank\" rel=\"noopener\">Mobile XD scrolling interaction</a></li>\n<li><a href=\"https://www.xdguru.com/ice-cream-app-animation-xd/\" target=\"_blank\" rel=\"noopener\">Ice Cream App animation</a></li>\n</ul>"},{"title":"Git Control for Using Abstract to Manage Sketch Files","thumbnailImage":"https://lh3.googleusercontent.com/15TevdlU0UA0DHjDXR8IFLjUteZ4XGxRObDpCwsIumenN6CLFYQFRcoJnS_6xYGMmbUFHxpqlXp25FcRXorD83F2vgEoldt2orwKDe1_QGMpNRhvu0KtXQ1KxuXUV7GTUSCOn4GXJMj8lCETJtDBXcyl6bi_snLs80aQJu-mSbdzJ-Bj3D_0DpmVrnfS_KyUD7I-RnQZ5FOzarAYJmXYpwjBXGZkGNc1CtiSJ1OAQPCXFsOIj0Wnw8Bpq8z0ysUDOZXt6ZWoC74yspZm10_zGEUyjm5axY0SDCxxwPcdJ_GIhoz90_L9wqRjz1NLVOBgPsDmQwWKzCd4o-M-VgjflYccFA45jcNEr5vV5Pce3JKqX9gJFIL-qVW9J5Y_qjMBZdOr7M3YWveJeo8daOKrF1CIGuInKckICK5-K4h52V_CpV_1jEPEDRfI5OGnX4AfFPnntVRmP3y8raD5ajnxgnFAj3bVmaC4XSDO9ZLJd-soMaaTqa-URYTv4WjGJZGpM-XP2MYrMVyQyafCzc90XKuxo3stdk7qL9-Hua-AQi5S5iVLacJz8LSTRqGcy8vXu_vIG8YHLOCAQAQO3pXJxcwu33BlttXskTLk-b8j2MvYr1OM25EW35MThuYOQNimlGLn7P7f5sphQiTt-aNT0mj-HrD_xE05=s250-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/Ht5ducjpGZIxCwrhATVndjvHuH_-Kz2Tl3a4r071v7j_GHdCDyo5D5myiDer5DZwdhCDWb0ZSgwdusqZsgc3q2GXPXv3I_CGwluVHNyiieve2YsRUy9_-xuJONWJJZ4Fd4gxZAqXh8J57Q811ITlBRHUuA6UJQeM_9cQ52vpmFWXIgM3NBlV0_QcBebviTM6XT3EHucC0Wv4LFpCYffHzM_Aftc_YTG7QVrG5wtBg0ebGhMggyMme6j1kRuxdOI_nvoFpTYxHr58P68R5rcSdXxVXZ0FeYpKaNkmkZ7rNhsL_z3iWI7CxjbSPJD5USGFSS88OdSfp34p9dysnyk8-FJN3COPgxcZh0krE_Yn_pUhAObBn5nWC6WdZzTFCcTHhY4GDsYlsO2OsizYSscRoqCfUaZ_byBLYop2mr4-I2NsOwVTHVMCa3XLZ-bKoEei_GDNuBeSOs6s03lLVgN0-BPnXhqQkRRVSTvg74D1cu65nlDdMEe__a_H8PJxRuxo7kIzuZS2gP7vjwiKkd2bYR705P6P8mWVJf0RTDED3uTtM3it9yvTOa77wiJJtr5Y0h75S5ZrcclHDu6t9WcyFB3yrLuPBNPuieuy10HMhHXBqZqQRX8tyPZaQwNiANFgBQQ1MYs_jXPXnrj5y5-GneVm30LkL5UE=w1024-h683-no","coverMeta":"out","date":"2018-11-03T16:00:00.000Z","updated":"2018-11-03T16:00:00.000Z","_content":"\n這篇要來介紹 `Abstract` 的主要功能，和我平常會怎麼使用他來做版本控制。\n\n<!--more-->\n\n***\n## Projects 所有專案\n\n登入後的首頁就是顯示所有專案的頁面。專案分為 `ACTIVE` 和 `ARCHIVED`，這兩個分類主要是讓設計師團隊去區分哪些專案是還在進行的，哪些專案是已經結案的。專案只會越來越多，所以我覺得這個功能很好，可以在團隊合作時能很快的找到要設計的專案。我自己目前是一人設計，但目前管理的專案就有十幾個以上，往後專案數量只會遞增，所以我覺得這個功能對設計師來說是十分貼心。但要注意若要使用專案分類的話，是要自己去手動設定的喔，並不會自動知道你的專案已經結案了，所以這部分是手動設定也蠻合理的。\n\n![Projects/ACTIVE](https://lh3.googleusercontent.com/-2IXT8A9fh8LNqeFa7pv9eOVku3fBO0fYRQR3T7GdbaMUgaEmddURlFrA2RvBF-PI3HAzqHw3M40mKvpZAwAFo7YYD5Xleugxzc5K88Ty2XkOqwKLBiIghOtch6ycWlYTaJrLtd95nbmUUS60JO9tz_xGIl9M9eYuwH2sik7ddUyvx8bVVAt75p_mIVPHcQ-6Eo2IhZCGq-KG4VkLA7AcbAAC6jcWpuy5H3OgaTTGf2N_lSwtlm-gwLgIHhJlB2E56Q1QZDPaDAebgJ8c8t3PyD5nDw_AML2BgqdQISujtesJBi3P34_PhzG_HD63suwNy_0n72Qb3Y-mnIJKCA7Nnvjh-towFitQn9gex7mEk7Sk0Q_cYnlPH4t7oCRp5bx5x4iSkYXfG5xr_MWAF2N3dAJeCr5JPNjMBEUWjPhJfJPMFIqGtNhBDknNnqBc93OgeP3Y1lGxvbD2M30nb1QGijbr6m_g3ouzva4kUqZ--NlsXdJwueyJJv7v6HSNx3LSfOYAEvsUIaqb7PcY8am89PIdW4rK_BWMIpVRIVISs61xeD3uYoBRQ1enaWUQY18eMRB2BErTh9dGQg3uOzYKUE7L1kg5W6XteSJozWp9XvZBvVMo4T0B5x8263RZw0jwbsiXT8RfOgjx-GqAFRWUWTkoGzy2XkU=w1023-h619-no \"Projects/ACTIVE\")\n\n![Projects/ARCHIVED](https://lh3.googleusercontent.com/pAv7exhVOlv-orzAfufPHGAP6I_hX345rCvKJHQcynwpP_L_X1fyAjLPwO3wGHyqCJ9073wuy0hPH6nU8tOIKwESYswPLMypk37S0xWQ00tYAYGy7w3cADAxDn3Xmb85VHEydHzqk1MA34BaH6wEjO7m_js3q8esOO07JE702_ee2yeisNnbny--tD54E_lZd_agJcSgLcr-I7cjEWiyZHB72S2BXMx0Ybn3Ylstvie5hYL69Im8LZN4QKgmOU-9gMm6rZxiyzDU8Sh1-qPpNqQ7YROhDP0UpIhE6Ju8yIQv3ElBZN8hhSQF5gpcMrFKsk_BVTAb9ZLz88_q9o_tAk18f5l8VaN97rO9JQzcytg2z-4qj-Jxu2OjuB9TLnCNjiPuUftI0vkiPJ2GuTXFiiI5Zr7iXJKu9az639PP3-hbj3Hx6x8_9dSXgWG12e8Jy4Fwni59R8_BN0zx6FYAngfSV1-k8I416Egj81_Tn98LQD-3JsShYEMfJrAix_qx9yyO-VesL2UEslhRF7rd87TYNtZNPe9g1LDHwlrDl89gpvB9dP1g6zNfMmr5gUB6yQvGDlFtkhZ8dzqptGSUtoYc4EbYxVGdLOUnRcQ8E31foJLkv3hubyklf7J4Dy4Q5Hf7SJ15BwkjX0vZHqYoXbA05z4L59MR=w1023-h618-no \"Projects/ARCHIVED\")\n\n> Tip: 預設專案的排序是照名稱，如果想要專案特別置頂的話，可以按專案卡片上的星星就會強制置頂囉～\n\n要開新專案就按 `New Project` 新增，詳細操作可以參考官網的[說明](https://www.goabstract.com/how-it-works/)，這裡就不再贅述。\n\n![New Project](https://lh3.googleusercontent.com/1Vz2DcZM1aWCJjYeOv6hLGZ6Tc0n0cLd75Ap7ze5z2Lng3k24WvV8lGII0UsFLgsyZNnhu8eWe5uI5StppnBqSzSARjP93-FYEHrBRtSLujEWPwDitK5Ve0NofifsEDeDeplzpaouF_w9vrIwMJ7F9ESivEMZfm8EGLu8CspQXcn24eBgwJReBCv1HbmKZScDjbrOnSUs6MbITqwS5QLYLpLePRPGx-dBEBggKGNKq3i8qB5tEnQijuqyVjryDlGMJqLLjxNHVBIysXKV0rviQNJFB-kk3u4Y1FeJs2NzCSuZHXjxKIv-Hbc44EzsfDz10-YsDzWOym2UsukCu8QLdbueDe20oiF71qQTI8zE1aVaIF54Fb45PUtg0FPqP7Fl3bCpWeHf9tBcyo6g31dJRHUKAJ68Yx9nJhBCE2ZoVjYCbnTgqyvYHmthzyJNDgaGZGtIFsSBGjTXYMMNJVHUAmJjcnw3aqd8AKBX9qZVZG0c76YqSv0KIHCEmWd1oKVcpevvrafRQrxcLMGXV0ycAwmvQF2f6Jg30Gxfbs8fQ48IJK1cELVXm7mW5LMih7APLgpCdr-M0wYrPgOJN-FSuu6-6rU_jqej25j6ogYKuFI6Erzy81uV9HRbA65Mg6GxWXzJnzeX8H-2F1kWIKS03EX-ZuX5v5h=w1023-h614-no \"New Project\")\n\n***\n## Project Overview 專案概況\n\n點擊進入單一專案後，會看到 `Overview` 頁面，這頁是把專案的概況整理成一張張的小卡，讓設計師能快速回憶過往設計並能儘快進入狀態。比較特別的是其中有一個小卡 `About`，類似小白板的感覺，主要功能是紀錄專案的描述和相關文件的參照，我覺得這個部分超棒的！！！因為要設計一個專案，絕對是有許許多多的需求，這些需求總有一個管理的地方，而 Abstract 運用了這張卡片讓流程可以順利的參照。但美中不足的是如果可以像 `Azure Devops` 有個 task board 聯繫 git，並在 merge 的時候有 close task 的功能，將會對設計師團隊有很大的助益。\n\n![Project Overview](https://lh3.googleusercontent.com/-_oB_2ao_K1fbmbMm1DD7plg9BaWkLBzZrRxVLAQK-_2EB9YldTsNHBkz27nljxApmRpBEEbP6fEVZaoxlBuxeiOgF6BU65lUnYTJaSKpprANPD4KGXmB8swyIFyQTtQBz7RcyqxzlYtTy7Bo53kkQl96iiqOvoUaxTsdpTJVuHwE_yWmsu7lz52wr0MhbT6axYvYrrHqKYda_JIOLkGkpyxofVzRM4U79UM_kS9oieYbckdHEcT7t_gyxqUdeygLyewc1rZxXrq2yzQjNs7W6vxYvR6PTh6-1jt97NrH32wl6sPLQpGe7nMUQc8-c4fyQR1dOnX9uQ3ndczBLumUGvSUlmsjkm-GzdEumIySQO3-DeIxZb20wRCVsgUAcO5uGsZO2iGwxgeVWyfjIe0vtX-WKtO6H2XKAwVXsT7_a-7QvYZEa1Vu-uz5mZnlb5vaseRwB7tiv_UnB1wwnXjbLrlaTUAsNGvfQmPIPdJKcQNGi_rfpx_sRG-_6fbgej0HCkzFRokgKP10CFesWbD9BpnnYWx9DS9_NYAJEZonLDdrbY3wDzTd8zpAHTObHzet1Q4DUw7spKDT5rBmgMnZU1YthqYBh5nBZh1ICphlxBP2Dn5Ugb-xMOO63qp2-kNMF5ra1tGdODUhJcMnVA4E0yfXnC-ETHj=w1023-h619-no \"Project Overview\")\n\n***\n## Project Master 專案主分支\n\nMaster 就是此專案的主要 branch，分為 Overview/Commits/Files 三個小功能。正常來說 `Abstract` 不會讓設計師去 commit Master branch，所以如果在這裡去點擊 `EDIT IN SKETCH` 做任何變更是不會讓使用者 commit 上去的。在 Master branch 設計師只會有兩種選擇，要麻獨立開啟檔案不給你做 commit，要麻就是建議你開 branch 做完後再 merge 回來，這一點跟一般的 git 不太一樣，畢竟設計檔案也不會有用到 hotfix 的時候，所以這樣防呆也比較安全。\n\n![Project Master Files](https://lh3.googleusercontent.com/gjq4zyufwjTpLB7hQ_wg9Rusr5hnnhsqpdIKEbIT3EDk3Rnm5YQ-tk81C4ASq3dEgPx43wb3mxsjD6z8I0FZjJnRa_IgtyoLWmXutsxrnqYfCMmcftB1vKkk0LV8im7JxZ1nu0dbVFtA4NnfqstnC34WTBcSdrcjhQcC0nuW7SnRBaY_6OVWCt7TTV6hLdA-9Q_0AdniVqOjcOzgB3pLXPhtX1xUOZqFVS5Vsd2EEsAeOkz_DcEZlsMJ8k_a-MCywYO6HEmepK3ZgKAyCPMmA2WmINZt4TvwlbOp9yffx1TDcQ4ZwHPtaLgwOqO6bsyUPrUSSj7_9Dj53UuickyDTAYGbGWKK-UG8bFBBclYMGeksorPu4VV2oeevIeroJsPl8bGNgqByyTimoO0qIG7Qc_8691kwEfHRh19my6xaD6CPKCry6Pzsi8P-KKGjVZCR-iiEy0NpBWMwOYmj4RlrXonRjm62nd8QWK4SIjHcHWglFTVGQ44BL4dgD-k7kQsd28qTBRzpfj0uOIY8CLTpwkTuW10OP6KHeZ56EqcJR538Ae2cuoKvc2Wd93WRySCdf9yL2gR-twyNnxEW5RxiTLP9Fbw4P8DOdkqx1T60CvdXZwI5PgyyA0Ck2LnK33F32FxjHElds3NJiWil9rrCdntPU7tW3yl=w1022-h620-no \"Project Master Files\")\n\n![Project Master Commits](https://lh3.googleusercontent.com/znS0iAXuVEvPOlhIOL_wlzCmYt9VgJCLEWJ4Lm9y0kAdCef9SfTel1NL8-h5hE1jGsra526Pp5BmxWDsLJnuE2cKNIirE8jQDcIOuDfKQi_SfBWFZvjBUKOyL5OtChPUQD26xUEW-xajZoHKmrJnAYKSfIPMqseCJzSQkrL_90DDnA_N20B-43SG4lYwBHHdQHe_XOPLkGt4fa6voR9KhnxBI4TCmx8Ba2AyRCnKp_u3XEUSTHR32Z-QjO-_z1GE8AKi3S2WJjDHRoIyAtW85D7YxZ3sXDpdzAr9cEAdreouTY_8bTt0zK9TzmhZfUuYnOJ6CoFTwA7YcBm5k4_x9qIA2FF1BSNHCqDvNnu4nyWlzVYiyA7JrBulgeodU7tCLCrdvpiUKXaPQ2yzM4LD8paoUFU6ljHYtYxVV6-4KOd4DDDnfYIqGpfSqrGEmQGoVejG7HJ-KJ90a-kycmgnFz08CrZ145IHu-9Bk2KZUAtkB5uRe769mojUtelz80Y74aA6VxD7Fn_R93-wJlMoeWIDg2GTHlMinW5aCNZdg4_7x1wsTHmNARvBeAYeLdXFdi7ZbuHJGfMum74xO4LLO5_Ym8pUzLD6o5f3vkOPqQJXm2dHulxrnt5tTER6Unh520zJO5DI8PZSxEEoNut23dntE9xeyXvR=w1026-h620-no \"Project Master Commits\")\n\n***\n## Project Branches 專案分支\n\n這個功能是 `Abstract` 的核心。上一段提到正常的版本控制流程如同 git 一般，應該要做 `NEW BRANCH` 的動作開新分隻，並在新分支做 `EDIT IN SKETCH`，儲存完後對分支進行 commit 的動作，確定都修改完成最後才會將數個 commit merge 到 Master branch。這樣做除了多人設計師可以合作外，如果像我一樣孤獨的設計師也有好處嗎？答案絕對是YES! 因為設計跟寫程式不一樣，同一個需求，常常需要多種設計方案來比較，但 BOSS 又是那種看不到畫面就感覺不到的人，所以這時候開 branch 就非常好用。不同 branch 代表不同的設計方案，這樣既不會干擾原設計，又可以將最後確定要做的 branch 做 merge，其他不需要的方案也可以留底做紀錄。超愛！！\n\n![Project Branches](https://lh3.googleusercontent.com/YMwJ6QF8ELcQyu9v149YVgKqPMBd6coFba1xGhj0pZIcFo5pIXOj__M9q8HexsG98T642rfCSG5kBsW049dAs_RkpeWYzXNifgZqt8CYVuA8JJy4w8gdeokOfsHdmZpfh25QV4RLLXKeBzeDa39zltfoKn6wm4BA2KnzNCWCjMtUu9ZyvleFX_p7xTzenabPy9nq_nO3_c0ygpVfRfrsH3dxvfwNak18bIbcMBoZAHANMZpN7aWAuXTbwSroLPvc4E2IDYuG8DvtkyLGFIeQ0DxxazXNmF6nb7AD-mH3CtRQwO10grAK9Kh3TJKRutOXmyaypvQ52ppw8ixSG3CBmnvI6q7AX0d6-LQAhox_IElE6m2nRfSIh0ATu6NY4dqEpy4UEuu3-uveuzBqpKjBdA09UctNxrbpVwZSjZkPzmHgzEzEF9zpEjClwJvjCQGOm-mMBhhxPA8nwOnVXAib6EX8yQVA9JbgjoDlpl89B57hhcu9d4vOfTRGnQLbygT3Pd3wyc0cbVikM_Z1fdkN3HVAJ3nNz2LwkyDtjiwItopNVawGu2dxBRzmak5BMCEgAFOfi4fJV1ZFTjZoQ4kLWNOXA0OWcjDKkMlyb3VJ9tZSVD_c3G8TtTtb9TlCJ1LdtaLiBKPxKqmd3d4vGyyix9UbzwBAxkDX=w1022-h616-no \"Project Branches\")\n\n> Tip: 對每張預覽圖點進去都可以做 COMMENT/COMPARE/INSPECT 的功能。 COMMENT 就是給不同設計師合作時的討論。 COMPARE 就是可以比對設計圖修改前後的不同處。 INSPECT 是新功能尚未開放，但我猜應該是讓設計師可跟工程師溝通的 spec，這部分我目前是先用 Sketch 的 plugin 輸出成互動的 HTML 解決，如果 Abstract 之後有開放此功能的話，將會是一大福音。\n\n![Pages](https://lh3.googleusercontent.com/ZRGh0dvdsa4_9yjD0zsq1rYQ4rfJjo8VxLSG4q6jD4p-KvE0s-fwPaEdBGxV26ol9LNfC15pGrfNIrjBYf-7UbK0WkGw7wsMPhvf_Nb45ecIlD_aC_bK1y844cuiP-WftQaZF3sasfinPGXm_UF6ROnCWfMafg5feUwnYSmJWh04jnVD0wUbi6D-CuCjOm3gVc-hANHCKfmDskpjmlLFn-AeMoj79-3fmkKSa8aQjQUslFHRuwn8W4XC7xTCztFy8JP7sAStDVu8BEcmECyXKS4t2WqCwVJE1Q4ptuJWszgo_8yDFzW_1v_aL3wolRUIt0F0yf9IP0BxQzlATEDgyasinQB_JGYoUtlr0mUNZjg6QFeLT47ZDQr3pqf70_FjTON7eJsubnwUclXTonbHK6ERD_pZlECnVUIRy-T1vFWQYroxlZ4upb2BrEG3l1Haum6UdAuULeQr0D6qxeoNEscYFnTAWRCV1AcRUP0iy0yiXkYRSwzBeqnU0PjFbtHxtGmanY8ijx1spIjNQ_65bmHGlDaaOPT7yvvZwHDRlPWm7HH1dTr_gK1iXYPA2ZV0WKIn-sUV7vDkSMMH-0do6REnQvRT_Sp4S3jBSbWWeEnH-Ky9Cwpknc-_EDfZpaUvEN7Txx3qQACbTMqUyAurEepMlViHatVQ=w1023-h621-no \"Pages\")\n\n***\n## 2018 對應 Sketch Library 的功能\n\nSketch 的新功能 `Library`， Abstract 也有支援，而且使用起來相當順暢。當已經有一組設計元件/框架想要共用多個不同的專案時，我們可以開一個單獨的專案並將其 sketch 檔案 import 為 Library 做管理。在另一個要使用此 Library 的專案在 Files 的子頁面做 `Link Library` 的動作。這樣只要原本 Library 的元件有做修改，有使用到此共用元件的專案也會一併更新，如此一來就可以做到 Library 和一般專案分開管理，又可以做到互相關聯。這個新功能雖然是 Sketch 研發，但搭配上 Abstract 後更是如虎添翼，打 BOSS 嚇嚇叫！詳細實作可參考官網[說明](https://support.goabstract.com/hc/en-us/articles/360016370931-Build-a-Library)。\n\n> Tip: `Import Sketch file as Library` 後檔案的 icon 會變成粉紫色鑽石（預設是橘黃色），這樣就表示有新增 Library 成功喔～\n\n![Library](https://lh3.googleusercontent.com/AmGnIR7k0l-SdY5hD_94kR6OO-pCMseKchuEeBcrfPtlgEtmule4zv5GB-GCFafrWYnuB_WgLM-HUbq1MSn19wvglEBu_SZ330zh-lu3GTdbiPotoc6KAR7ZCCGL-4NHj8lfL23FxkM3Yc-wSD9Ecu8L5WWx0vMUznNXsSFOcKXOjnBS8uk_n2XefeKGlS7ZZrvXLmHi5vlY8bVrz-rRoBTSwZft6njuqlKpBw5KP5nmjqqEaIpO9rxbB3GT5nwbLmAZeVITJjVnJoOsPR5hX6Z_WD2j0Qn6Q8jj-mKr-Pu9gWRmdYy4oT6G5ZemDpRHtq7I5NcgO9-hDgOFGTXDEneff0tdKfuu7lfyKz7MDimBAqZELILN5dCf6V8gzIhoUHNHSU7XndmlXXUP-CUn_vJJxWeOBNlVB0tnbsG8UziCyG_hj0hKmyIHvEeYwxPwGwX_2uWOH_tt1MIguJGu1SXJIrzYOL9lTY7crgjFduWMztg5IoBv5F8pbXFBdNBGnPgPlf8p8SHfKm5-nKcsqgHnDd4ADyYuuDPIhDtenZc97AuLnBj6oJVkZwVoxvf8IZdrZACuDIIOiZJ02b9HNvUzIMvegeUBxxjKisJdd_yT81jTwq7rcXhW4vacP6RvdPriXhQ61zE6qm5vQLLMGfWL3Hjd3kxi=w1021-h619-no \"Library\")","source":"_posts/UXUI/Git-Control-for-Using-Abstract-to-Manage-Sketch-Files.md","raw":"---\ntitle: Git Control for Using Abstract to Manage Sketch Files\ncategories:\n  - UXUI\nthumbnailImage: https://lh3.googleusercontent.com/15TevdlU0UA0DHjDXR8IFLjUteZ4XGxRObDpCwsIumenN6CLFYQFRcoJnS_6xYGMmbUFHxpqlXp25FcRXorD83F2vgEoldt2orwKDe1_QGMpNRhvu0KtXQ1KxuXUV7GTUSCOn4GXJMj8lCETJtDBXcyl6bi_snLs80aQJu-mSbdzJ-Bj3D_0DpmVrnfS_KyUD7I-RnQZ5FOzarAYJmXYpwjBXGZkGNc1CtiSJ1OAQPCXFsOIj0Wnw8Bpq8z0ysUDOZXt6ZWoC74yspZm10_zGEUyjm5axY0SDCxxwPcdJ_GIhoz90_L9wqRjz1NLVOBgPsDmQwWKzCd4o-M-VgjflYccFA45jcNEr5vV5Pce3JKqX9gJFIL-qVW9J5Y_qjMBZdOr7M3YWveJeo8daOKrF1CIGuInKckICK5-K4h52V_CpV_1jEPEDRfI5OGnX4AfFPnntVRmP3y8raD5ajnxgnFAj3bVmaC4XSDO9ZLJd-soMaaTqa-URYTv4WjGJZGpM-XP2MYrMVyQyafCzc90XKuxo3stdk7qL9-Hua-AQi5S5iVLacJz8LSTRqGcy8vXu_vIG8YHLOCAQAQO3pXJxcwu33BlttXskTLk-b8j2MvYr1OM25EW35MThuYOQNimlGLn7P7f5sphQiTt-aNT0mj-HrD_xE05=s250-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/Ht5ducjpGZIxCwrhATVndjvHuH_-Kz2Tl3a4r071v7j_GHdCDyo5D5myiDer5DZwdhCDWb0ZSgwdusqZsgc3q2GXPXv3I_CGwluVHNyiieve2YsRUy9_-xuJONWJJZ4Fd4gxZAqXh8J57Q811ITlBRHUuA6UJQeM_9cQ52vpmFWXIgM3NBlV0_QcBebviTM6XT3EHucC0Wv4LFpCYffHzM_Aftc_YTG7QVrG5wtBg0ebGhMggyMme6j1kRuxdOI_nvoFpTYxHr58P68R5rcSdXxVXZ0FeYpKaNkmkZ7rNhsL_z3iWI7CxjbSPJD5USGFSS88OdSfp34p9dysnyk8-FJN3COPgxcZh0krE_Yn_pUhAObBn5nWC6WdZzTFCcTHhY4GDsYlsO2OsizYSscRoqCfUaZ_byBLYop2mr4-I2NsOwVTHVMCa3XLZ-bKoEei_GDNuBeSOs6s03lLVgN0-BPnXhqQkRRVSTvg74D1cu65nlDdMEe__a_H8PJxRuxo7kIzuZS2gP7vjwiKkd2bYR705P6P8mWVJf0RTDED3uTtM3it9yvTOa77wiJJtr5Y0h75S5ZrcclHDu6t9WcyFB3yrLuPBNPuieuy10HMhHXBqZqQRX8tyPZaQwNiANFgBQQ1MYs_jXPXnrj5y5-GneVm30LkL5UE=w1024-h683-no\ncoverMeta: out\ntags: [Sketch, Abstract, UX, UI]\ndate: 2018/11/04\nupdated: 2018/11/04\n---\n\n這篇要來介紹 `Abstract` 的主要功能，和我平常會怎麼使用他來做版本控制。\n\n<!--more-->\n\n***\n## Projects 所有專案\n\n登入後的首頁就是顯示所有專案的頁面。專案分為 `ACTIVE` 和 `ARCHIVED`，這兩個分類主要是讓設計師團隊去區分哪些專案是還在進行的，哪些專案是已經結案的。專案只會越來越多，所以我覺得這個功能很好，可以在團隊合作時能很快的找到要設計的專案。我自己目前是一人設計，但目前管理的專案就有十幾個以上，往後專案數量只會遞增，所以我覺得這個功能對設計師來說是十分貼心。但要注意若要使用專案分類的話，是要自己去手動設定的喔，並不會自動知道你的專案已經結案了，所以這部分是手動設定也蠻合理的。\n\n![Projects/ACTIVE](https://lh3.googleusercontent.com/-2IXT8A9fh8LNqeFa7pv9eOVku3fBO0fYRQR3T7GdbaMUgaEmddURlFrA2RvBF-PI3HAzqHw3M40mKvpZAwAFo7YYD5Xleugxzc5K88Ty2XkOqwKLBiIghOtch6ycWlYTaJrLtd95nbmUUS60JO9tz_xGIl9M9eYuwH2sik7ddUyvx8bVVAt75p_mIVPHcQ-6Eo2IhZCGq-KG4VkLA7AcbAAC6jcWpuy5H3OgaTTGf2N_lSwtlm-gwLgIHhJlB2E56Q1QZDPaDAebgJ8c8t3PyD5nDw_AML2BgqdQISujtesJBi3P34_PhzG_HD63suwNy_0n72Qb3Y-mnIJKCA7Nnvjh-towFitQn9gex7mEk7Sk0Q_cYnlPH4t7oCRp5bx5x4iSkYXfG5xr_MWAF2N3dAJeCr5JPNjMBEUWjPhJfJPMFIqGtNhBDknNnqBc93OgeP3Y1lGxvbD2M30nb1QGijbr6m_g3ouzva4kUqZ--NlsXdJwueyJJv7v6HSNx3LSfOYAEvsUIaqb7PcY8am89PIdW4rK_BWMIpVRIVISs61xeD3uYoBRQ1enaWUQY18eMRB2BErTh9dGQg3uOzYKUE7L1kg5W6XteSJozWp9XvZBvVMo4T0B5x8263RZw0jwbsiXT8RfOgjx-GqAFRWUWTkoGzy2XkU=w1023-h619-no \"Projects/ACTIVE\")\n\n![Projects/ARCHIVED](https://lh3.googleusercontent.com/pAv7exhVOlv-orzAfufPHGAP6I_hX345rCvKJHQcynwpP_L_X1fyAjLPwO3wGHyqCJ9073wuy0hPH6nU8tOIKwESYswPLMypk37S0xWQ00tYAYGy7w3cADAxDn3Xmb85VHEydHzqk1MA34BaH6wEjO7m_js3q8esOO07JE702_ee2yeisNnbny--tD54E_lZd_agJcSgLcr-I7cjEWiyZHB72S2BXMx0Ybn3Ylstvie5hYL69Im8LZN4QKgmOU-9gMm6rZxiyzDU8Sh1-qPpNqQ7YROhDP0UpIhE6Ju8yIQv3ElBZN8hhSQF5gpcMrFKsk_BVTAb9ZLz88_q9o_tAk18f5l8VaN97rO9JQzcytg2z-4qj-Jxu2OjuB9TLnCNjiPuUftI0vkiPJ2GuTXFiiI5Zr7iXJKu9az639PP3-hbj3Hx6x8_9dSXgWG12e8Jy4Fwni59R8_BN0zx6FYAngfSV1-k8I416Egj81_Tn98LQD-3JsShYEMfJrAix_qx9yyO-VesL2UEslhRF7rd87TYNtZNPe9g1LDHwlrDl89gpvB9dP1g6zNfMmr5gUB6yQvGDlFtkhZ8dzqptGSUtoYc4EbYxVGdLOUnRcQ8E31foJLkv3hubyklf7J4Dy4Q5Hf7SJ15BwkjX0vZHqYoXbA05z4L59MR=w1023-h618-no \"Projects/ARCHIVED\")\n\n> Tip: 預設專案的排序是照名稱，如果想要專案特別置頂的話，可以按專案卡片上的星星就會強制置頂囉～\n\n要開新專案就按 `New Project` 新增，詳細操作可以參考官網的[說明](https://www.goabstract.com/how-it-works/)，這裡就不再贅述。\n\n![New Project](https://lh3.googleusercontent.com/1Vz2DcZM1aWCJjYeOv6hLGZ6Tc0n0cLd75Ap7ze5z2Lng3k24WvV8lGII0UsFLgsyZNnhu8eWe5uI5StppnBqSzSARjP93-FYEHrBRtSLujEWPwDitK5Ve0NofifsEDeDeplzpaouF_w9vrIwMJ7F9ESivEMZfm8EGLu8CspQXcn24eBgwJReBCv1HbmKZScDjbrOnSUs6MbITqwS5QLYLpLePRPGx-dBEBggKGNKq3i8qB5tEnQijuqyVjryDlGMJqLLjxNHVBIysXKV0rviQNJFB-kk3u4Y1FeJs2NzCSuZHXjxKIv-Hbc44EzsfDz10-YsDzWOym2UsukCu8QLdbueDe20oiF71qQTI8zE1aVaIF54Fb45PUtg0FPqP7Fl3bCpWeHf9tBcyo6g31dJRHUKAJ68Yx9nJhBCE2ZoVjYCbnTgqyvYHmthzyJNDgaGZGtIFsSBGjTXYMMNJVHUAmJjcnw3aqd8AKBX9qZVZG0c76YqSv0KIHCEmWd1oKVcpevvrafRQrxcLMGXV0ycAwmvQF2f6Jg30Gxfbs8fQ48IJK1cELVXm7mW5LMih7APLgpCdr-M0wYrPgOJN-FSuu6-6rU_jqej25j6ogYKuFI6Erzy81uV9HRbA65Mg6GxWXzJnzeX8H-2F1kWIKS03EX-ZuX5v5h=w1023-h614-no \"New Project\")\n\n***\n## Project Overview 專案概況\n\n點擊進入單一專案後，會看到 `Overview` 頁面，這頁是把專案的概況整理成一張張的小卡，讓設計師能快速回憶過往設計並能儘快進入狀態。比較特別的是其中有一個小卡 `About`，類似小白板的感覺，主要功能是紀錄專案的描述和相關文件的參照，我覺得這個部分超棒的！！！因為要設計一個專案，絕對是有許許多多的需求，這些需求總有一個管理的地方，而 Abstract 運用了這張卡片讓流程可以順利的參照。但美中不足的是如果可以像 `Azure Devops` 有個 task board 聯繫 git，並在 merge 的時候有 close task 的功能，將會對設計師團隊有很大的助益。\n\n![Project Overview](https://lh3.googleusercontent.com/-_oB_2ao_K1fbmbMm1DD7plg9BaWkLBzZrRxVLAQK-_2EB9YldTsNHBkz27nljxApmRpBEEbP6fEVZaoxlBuxeiOgF6BU65lUnYTJaSKpprANPD4KGXmB8swyIFyQTtQBz7RcyqxzlYtTy7Bo53kkQl96iiqOvoUaxTsdpTJVuHwE_yWmsu7lz52wr0MhbT6axYvYrrHqKYda_JIOLkGkpyxofVzRM4U79UM_kS9oieYbckdHEcT7t_gyxqUdeygLyewc1rZxXrq2yzQjNs7W6vxYvR6PTh6-1jt97NrH32wl6sPLQpGe7nMUQc8-c4fyQR1dOnX9uQ3ndczBLumUGvSUlmsjkm-GzdEumIySQO3-DeIxZb20wRCVsgUAcO5uGsZO2iGwxgeVWyfjIe0vtX-WKtO6H2XKAwVXsT7_a-7QvYZEa1Vu-uz5mZnlb5vaseRwB7tiv_UnB1wwnXjbLrlaTUAsNGvfQmPIPdJKcQNGi_rfpx_sRG-_6fbgej0HCkzFRokgKP10CFesWbD9BpnnYWx9DS9_NYAJEZonLDdrbY3wDzTd8zpAHTObHzet1Q4DUw7spKDT5rBmgMnZU1YthqYBh5nBZh1ICphlxBP2Dn5Ugb-xMOO63qp2-kNMF5ra1tGdODUhJcMnVA4E0yfXnC-ETHj=w1023-h619-no \"Project Overview\")\n\n***\n## Project Master 專案主分支\n\nMaster 就是此專案的主要 branch，分為 Overview/Commits/Files 三個小功能。正常來說 `Abstract` 不會讓設計師去 commit Master branch，所以如果在這裡去點擊 `EDIT IN SKETCH` 做任何變更是不會讓使用者 commit 上去的。在 Master branch 設計師只會有兩種選擇，要麻獨立開啟檔案不給你做 commit，要麻就是建議你開 branch 做完後再 merge 回來，這一點跟一般的 git 不太一樣，畢竟設計檔案也不會有用到 hotfix 的時候，所以這樣防呆也比較安全。\n\n![Project Master Files](https://lh3.googleusercontent.com/gjq4zyufwjTpLB7hQ_wg9Rusr5hnnhsqpdIKEbIT3EDk3Rnm5YQ-tk81C4ASq3dEgPx43wb3mxsjD6z8I0FZjJnRa_IgtyoLWmXutsxrnqYfCMmcftB1vKkk0LV8im7JxZ1nu0dbVFtA4NnfqstnC34WTBcSdrcjhQcC0nuW7SnRBaY_6OVWCt7TTV6hLdA-9Q_0AdniVqOjcOzgB3pLXPhtX1xUOZqFVS5Vsd2EEsAeOkz_DcEZlsMJ8k_a-MCywYO6HEmepK3ZgKAyCPMmA2WmINZt4TvwlbOp9yffx1TDcQ4ZwHPtaLgwOqO6bsyUPrUSSj7_9Dj53UuickyDTAYGbGWKK-UG8bFBBclYMGeksorPu4VV2oeevIeroJsPl8bGNgqByyTimoO0qIG7Qc_8691kwEfHRh19my6xaD6CPKCry6Pzsi8P-KKGjVZCR-iiEy0NpBWMwOYmj4RlrXonRjm62nd8QWK4SIjHcHWglFTVGQ44BL4dgD-k7kQsd28qTBRzpfj0uOIY8CLTpwkTuW10OP6KHeZ56EqcJR538Ae2cuoKvc2Wd93WRySCdf9yL2gR-twyNnxEW5RxiTLP9Fbw4P8DOdkqx1T60CvdXZwI5PgyyA0Ck2LnK33F32FxjHElds3NJiWil9rrCdntPU7tW3yl=w1022-h620-no \"Project Master Files\")\n\n![Project Master Commits](https://lh3.googleusercontent.com/znS0iAXuVEvPOlhIOL_wlzCmYt9VgJCLEWJ4Lm9y0kAdCef9SfTel1NL8-h5hE1jGsra526Pp5BmxWDsLJnuE2cKNIirE8jQDcIOuDfKQi_SfBWFZvjBUKOyL5OtChPUQD26xUEW-xajZoHKmrJnAYKSfIPMqseCJzSQkrL_90DDnA_N20B-43SG4lYwBHHdQHe_XOPLkGt4fa6voR9KhnxBI4TCmx8Ba2AyRCnKp_u3XEUSTHR32Z-QjO-_z1GE8AKi3S2WJjDHRoIyAtW85D7YxZ3sXDpdzAr9cEAdreouTY_8bTt0zK9TzmhZfUuYnOJ6CoFTwA7YcBm5k4_x9qIA2FF1BSNHCqDvNnu4nyWlzVYiyA7JrBulgeodU7tCLCrdvpiUKXaPQ2yzM4LD8paoUFU6ljHYtYxVV6-4KOd4DDDnfYIqGpfSqrGEmQGoVejG7HJ-KJ90a-kycmgnFz08CrZ145IHu-9Bk2KZUAtkB5uRe769mojUtelz80Y74aA6VxD7Fn_R93-wJlMoeWIDg2GTHlMinW5aCNZdg4_7x1wsTHmNARvBeAYeLdXFdi7ZbuHJGfMum74xO4LLO5_Ym8pUzLD6o5f3vkOPqQJXm2dHulxrnt5tTER6Unh520zJO5DI8PZSxEEoNut23dntE9xeyXvR=w1026-h620-no \"Project Master Commits\")\n\n***\n## Project Branches 專案分支\n\n這個功能是 `Abstract` 的核心。上一段提到正常的版本控制流程如同 git 一般，應該要做 `NEW BRANCH` 的動作開新分隻，並在新分支做 `EDIT IN SKETCH`，儲存完後對分支進行 commit 的動作，確定都修改完成最後才會將數個 commit merge 到 Master branch。這樣做除了多人設計師可以合作外，如果像我一樣孤獨的設計師也有好處嗎？答案絕對是YES! 因為設計跟寫程式不一樣，同一個需求，常常需要多種設計方案來比較，但 BOSS 又是那種看不到畫面就感覺不到的人，所以這時候開 branch 就非常好用。不同 branch 代表不同的設計方案，這樣既不會干擾原設計，又可以將最後確定要做的 branch 做 merge，其他不需要的方案也可以留底做紀錄。超愛！！\n\n![Project Branches](https://lh3.googleusercontent.com/YMwJ6QF8ELcQyu9v149YVgKqPMBd6coFba1xGhj0pZIcFo5pIXOj__M9q8HexsG98T642rfCSG5kBsW049dAs_RkpeWYzXNifgZqt8CYVuA8JJy4w8gdeokOfsHdmZpfh25QV4RLLXKeBzeDa39zltfoKn6wm4BA2KnzNCWCjMtUu9ZyvleFX_p7xTzenabPy9nq_nO3_c0ygpVfRfrsH3dxvfwNak18bIbcMBoZAHANMZpN7aWAuXTbwSroLPvc4E2IDYuG8DvtkyLGFIeQ0DxxazXNmF6nb7AD-mH3CtRQwO10grAK9Kh3TJKRutOXmyaypvQ52ppw8ixSG3CBmnvI6q7AX0d6-LQAhox_IElE6m2nRfSIh0ATu6NY4dqEpy4UEuu3-uveuzBqpKjBdA09UctNxrbpVwZSjZkPzmHgzEzEF9zpEjClwJvjCQGOm-mMBhhxPA8nwOnVXAib6EX8yQVA9JbgjoDlpl89B57hhcu9d4vOfTRGnQLbygT3Pd3wyc0cbVikM_Z1fdkN3HVAJ3nNz2LwkyDtjiwItopNVawGu2dxBRzmak5BMCEgAFOfi4fJV1ZFTjZoQ4kLWNOXA0OWcjDKkMlyb3VJ9tZSVD_c3G8TtTtb9TlCJ1LdtaLiBKPxKqmd3d4vGyyix9UbzwBAxkDX=w1022-h616-no \"Project Branches\")\n\n> Tip: 對每張預覽圖點進去都可以做 COMMENT/COMPARE/INSPECT 的功能。 COMMENT 就是給不同設計師合作時的討論。 COMPARE 就是可以比對設計圖修改前後的不同處。 INSPECT 是新功能尚未開放，但我猜應該是讓設計師可跟工程師溝通的 spec，這部分我目前是先用 Sketch 的 plugin 輸出成互動的 HTML 解決，如果 Abstract 之後有開放此功能的話，將會是一大福音。\n\n![Pages](https://lh3.googleusercontent.com/ZRGh0dvdsa4_9yjD0zsq1rYQ4rfJjo8VxLSG4q6jD4p-KvE0s-fwPaEdBGxV26ol9LNfC15pGrfNIrjBYf-7UbK0WkGw7wsMPhvf_Nb45ecIlD_aC_bK1y844cuiP-WftQaZF3sasfinPGXm_UF6ROnCWfMafg5feUwnYSmJWh04jnVD0wUbi6D-CuCjOm3gVc-hANHCKfmDskpjmlLFn-AeMoj79-3fmkKSa8aQjQUslFHRuwn8W4XC7xTCztFy8JP7sAStDVu8BEcmECyXKS4t2WqCwVJE1Q4ptuJWszgo_8yDFzW_1v_aL3wolRUIt0F0yf9IP0BxQzlATEDgyasinQB_JGYoUtlr0mUNZjg6QFeLT47ZDQr3pqf70_FjTON7eJsubnwUclXTonbHK6ERD_pZlECnVUIRy-T1vFWQYroxlZ4upb2BrEG3l1Haum6UdAuULeQr0D6qxeoNEscYFnTAWRCV1AcRUP0iy0yiXkYRSwzBeqnU0PjFbtHxtGmanY8ijx1spIjNQ_65bmHGlDaaOPT7yvvZwHDRlPWm7HH1dTr_gK1iXYPA2ZV0WKIn-sUV7vDkSMMH-0do6REnQvRT_Sp4S3jBSbWWeEnH-Ky9Cwpknc-_EDfZpaUvEN7Txx3qQACbTMqUyAurEepMlViHatVQ=w1023-h621-no \"Pages\")\n\n***\n## 2018 對應 Sketch Library 的功能\n\nSketch 的新功能 `Library`， Abstract 也有支援，而且使用起來相當順暢。當已經有一組設計元件/框架想要共用多個不同的專案時，我們可以開一個單獨的專案並將其 sketch 檔案 import 為 Library 做管理。在另一個要使用此 Library 的專案在 Files 的子頁面做 `Link Library` 的動作。這樣只要原本 Library 的元件有做修改，有使用到此共用元件的專案也會一併更新，如此一來就可以做到 Library 和一般專案分開管理，又可以做到互相關聯。這個新功能雖然是 Sketch 研發，但搭配上 Abstract 後更是如虎添翼，打 BOSS 嚇嚇叫！詳細實作可參考官網[說明](https://support.goabstract.com/hc/en-us/articles/360016370931-Build-a-Library)。\n\n> Tip: `Import Sketch file as Library` 後檔案的 icon 會變成粉紫色鑽石（預設是橘黃色），這樣就表示有新增 Library 成功喔～\n\n![Library](https://lh3.googleusercontent.com/AmGnIR7k0l-SdY5hD_94kR6OO-pCMseKchuEeBcrfPtlgEtmule4zv5GB-GCFafrWYnuB_WgLM-HUbq1MSn19wvglEBu_SZ330zh-lu3GTdbiPotoc6KAR7ZCCGL-4NHj8lfL23FxkM3Yc-wSD9Ecu8L5WWx0vMUznNXsSFOcKXOjnBS8uk_n2XefeKGlS7ZZrvXLmHi5vlY8bVrz-rRoBTSwZft6njuqlKpBw5KP5nmjqqEaIpO9rxbB3GT5nwbLmAZeVITJjVnJoOsPR5hX6Z_WD2j0Qn6Q8jj-mKr-Pu9gWRmdYy4oT6G5ZemDpRHtq7I5NcgO9-hDgOFGTXDEneff0tdKfuu7lfyKz7MDimBAqZELILN5dCf6V8gzIhoUHNHSU7XndmlXXUP-CUn_vJJxWeOBNlVB0tnbsG8UziCyG_hj0hKmyIHvEeYwxPwGwX_2uWOH_tt1MIguJGu1SXJIrzYOL9lTY7crgjFduWMztg5IoBv5F8pbXFBdNBGnPgPlf8p8SHfKm5-nKcsqgHnDd4ADyYuuDPIhDtenZc97AuLnBj6oJVkZwVoxvf8IZdrZACuDIIOiZJ02b9HNvUzIMvegeUBxxjKisJdd_yT81jTwq7rcXhW4vacP6RvdPriXhQ61zE6qm5vQLLMGfWL3Hjd3kxi=w1021-h619-no \"Library\")","slug":"UXUI/Git-Control-for-Using-Abstract-to-Manage-Sketch-Files","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74x001vtudhha3jtgf2","content":"<p>這篇要來介紹 <code>Abstract</code> 的主要功能，和我平常會怎麼使用他來做版本控制。</p>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"Projects-所有專案\"><a href=\"#Projects-所有專案\" class=\"headerlink\" title=\"Projects 所有專案\"></a>Projects 所有專案</h2><p>登入後的首頁就是顯示所有專案的頁面。專案分為 <code>ACTIVE</code> 和 <code>ARCHIVED</code>，這兩個分類主要是讓設計師團隊去區分哪些專案是還在進行的，哪些專案是已經結案的。專案只會越來越多，所以我覺得這個功能很好，可以在團隊合作時能很快的找到要設計的專案。我自己目前是一人設計，但目前管理的專案就有十幾個以上，往後專案數量只會遞增，所以我覺得這個功能對設計師來說是十分貼心。但要注意若要使用專案分類的話，是要自己去手動設定的喔，並不會自動知道你的專案已經結案了，所以這部分是手動設定也蠻合理的。</p>\n<p><img src=\"https://lh3.googleusercontent.com/-2IXT8A9fh8LNqeFa7pv9eOVku3fBO0fYRQR3T7GdbaMUgaEmddURlFrA2RvBF-PI3HAzqHw3M40mKvpZAwAFo7YYD5Xleugxzc5K88Ty2XkOqwKLBiIghOtch6ycWlYTaJrLtd95nbmUUS60JO9tz_xGIl9M9eYuwH2sik7ddUyvx8bVVAt75p_mIVPHcQ-6Eo2IhZCGq-KG4VkLA7AcbAAC6jcWpuy5H3OgaTTGf2N_lSwtlm-gwLgIHhJlB2E56Q1QZDPaDAebgJ8c8t3PyD5nDw_AML2BgqdQISujtesJBi3P34_PhzG_HD63suwNy_0n72Qb3Y-mnIJKCA7Nnvjh-towFitQn9gex7mEk7Sk0Q_cYnlPH4t7oCRp5bx5x4iSkYXfG5xr_MWAF2N3dAJeCr5JPNjMBEUWjPhJfJPMFIqGtNhBDknNnqBc93OgeP3Y1lGxvbD2M30nb1QGijbr6m_g3ouzva4kUqZ--NlsXdJwueyJJv7v6HSNx3LSfOYAEvsUIaqb7PcY8am89PIdW4rK_BWMIpVRIVISs61xeD3uYoBRQ1enaWUQY18eMRB2BErTh9dGQg3uOzYKUE7L1kg5W6XteSJozWp9XvZBvVMo4T0B5x8263RZw0jwbsiXT8RfOgjx-GqAFRWUWTkoGzy2XkU=w1023-h619-no\" alt=\"Projects/ACTIVE\" title=\"Projects/ACTIVE\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/pAv7exhVOlv-orzAfufPHGAP6I_hX345rCvKJHQcynwpP_L_X1fyAjLPwO3wGHyqCJ9073wuy0hPH6nU8tOIKwESYswPLMypk37S0xWQ00tYAYGy7w3cADAxDn3Xmb85VHEydHzqk1MA34BaH6wEjO7m_js3q8esOO07JE702_ee2yeisNnbny--tD54E_lZd_agJcSgLcr-I7cjEWiyZHB72S2BXMx0Ybn3Ylstvie5hYL69Im8LZN4QKgmOU-9gMm6rZxiyzDU8Sh1-qPpNqQ7YROhDP0UpIhE6Ju8yIQv3ElBZN8hhSQF5gpcMrFKsk_BVTAb9ZLz88_q9o_tAk18f5l8VaN97rO9JQzcytg2z-4qj-Jxu2OjuB9TLnCNjiPuUftI0vkiPJ2GuTXFiiI5Zr7iXJKu9az639PP3-hbj3Hx6x8_9dSXgWG12e8Jy4Fwni59R8_BN0zx6FYAngfSV1-k8I416Egj81_Tn98LQD-3JsShYEMfJrAix_qx9yyO-VesL2UEslhRF7rd87TYNtZNPe9g1LDHwlrDl89gpvB9dP1g6zNfMmr5gUB6yQvGDlFtkhZ8dzqptGSUtoYc4EbYxVGdLOUnRcQ8E31foJLkv3hubyklf7J4Dy4Q5Hf7SJ15BwkjX0vZHqYoXbA05z4L59MR=w1023-h618-no\" alt=\"Projects/ARCHIVED\" title=\"Projects/ARCHIVED\"></p>\n<blockquote>\n<p>Tip: 預設專案的排序是照名稱，如果想要專案特別置頂的話，可以按專案卡片上的星星就會強制置頂囉～</p>\n</blockquote>\n<p>要開新專案就按 <code>New Project</code> 新增，詳細操作可以參考官網的<a href=\"https://www.goabstract.com/how-it-works/\" target=\"_blank\" rel=\"noopener\">說明</a>，這裡就不再贅述。</p>\n<p><img src=\"https://lh3.googleusercontent.com/1Vz2DcZM1aWCJjYeOv6hLGZ6Tc0n0cLd75Ap7ze5z2Lng3k24WvV8lGII0UsFLgsyZNnhu8eWe5uI5StppnBqSzSARjP93-FYEHrBRtSLujEWPwDitK5Ve0NofifsEDeDeplzpaouF_w9vrIwMJ7F9ESivEMZfm8EGLu8CspQXcn24eBgwJReBCv1HbmKZScDjbrOnSUs6MbITqwS5QLYLpLePRPGx-dBEBggKGNKq3i8qB5tEnQijuqyVjryDlGMJqLLjxNHVBIysXKV0rviQNJFB-kk3u4Y1FeJs2NzCSuZHXjxKIv-Hbc44EzsfDz10-YsDzWOym2UsukCu8QLdbueDe20oiF71qQTI8zE1aVaIF54Fb45PUtg0FPqP7Fl3bCpWeHf9tBcyo6g31dJRHUKAJ68Yx9nJhBCE2ZoVjYCbnTgqyvYHmthzyJNDgaGZGtIFsSBGjTXYMMNJVHUAmJjcnw3aqd8AKBX9qZVZG0c76YqSv0KIHCEmWd1oKVcpevvrafRQrxcLMGXV0ycAwmvQF2f6Jg30Gxfbs8fQ48IJK1cELVXm7mW5LMih7APLgpCdr-M0wYrPgOJN-FSuu6-6rU_jqej25j6ogYKuFI6Erzy81uV9HRbA65Mg6GxWXzJnzeX8H-2F1kWIKS03EX-ZuX5v5h=w1023-h614-no\" alt=\"New Project\" title=\"New Project\"></p>\n<hr>\n<h2 id=\"Project-Overview-專案概況\"><a href=\"#Project-Overview-專案概況\" class=\"headerlink\" title=\"Project Overview 專案概況\"></a>Project Overview 專案概況</h2><p>點擊進入單一專案後，會看到 <code>Overview</code> 頁面，這頁是把專案的概況整理成一張張的小卡，讓設計師能快速回憶過往設計並能儘快進入狀態。比較特別的是其中有一個小卡 <code>About</code>，類似小白板的感覺，主要功能是紀錄專案的描述和相關文件的參照，我覺得這個部分超棒的！！！因為要設計一個專案，絕對是有許許多多的需求，這些需求總有一個管理的地方，而 Abstract 運用了這張卡片讓流程可以順利的參照。但美中不足的是如果可以像 <code>Azure Devops</code> 有個 task board 聯繫 git，並在 merge 的時候有 close task 的功能，將會對設計師團隊有很大的助益。</p>\n<p><img src=\"https://lh3.googleusercontent.com/-_oB_2ao_K1fbmbMm1DD7plg9BaWkLBzZrRxVLAQK-_2EB9YldTsNHBkz27nljxApmRpBEEbP6fEVZaoxlBuxeiOgF6BU65lUnYTJaSKpprANPD4KGXmB8swyIFyQTtQBz7RcyqxzlYtTy7Bo53kkQl96iiqOvoUaxTsdpTJVuHwE_yWmsu7lz52wr0MhbT6axYvYrrHqKYda_JIOLkGkpyxofVzRM4U79UM_kS9oieYbckdHEcT7t_gyxqUdeygLyewc1rZxXrq2yzQjNs7W6vxYvR6PTh6-1jt97NrH32wl6sPLQpGe7nMUQc8-c4fyQR1dOnX9uQ3ndczBLumUGvSUlmsjkm-GzdEumIySQO3-DeIxZb20wRCVsgUAcO5uGsZO2iGwxgeVWyfjIe0vtX-WKtO6H2XKAwVXsT7_a-7QvYZEa1Vu-uz5mZnlb5vaseRwB7tiv_UnB1wwnXjbLrlaTUAsNGvfQmPIPdJKcQNGi_rfpx_sRG-_6fbgej0HCkzFRokgKP10CFesWbD9BpnnYWx9DS9_NYAJEZonLDdrbY3wDzTd8zpAHTObHzet1Q4DUw7spKDT5rBmgMnZU1YthqYBh5nBZh1ICphlxBP2Dn5Ugb-xMOO63qp2-kNMF5ra1tGdODUhJcMnVA4E0yfXnC-ETHj=w1023-h619-no\" alt=\"Project Overview\" title=\"Project Overview\"></p>\n<hr>\n<h2 id=\"Project-Master-專案主分支\"><a href=\"#Project-Master-專案主分支\" class=\"headerlink\" title=\"Project Master 專案主分支\"></a>Project Master 專案主分支</h2><p>Master 就是此專案的主要 branch，分為 Overview/Commits/Files 三個小功能。正常來說 <code>Abstract</code> 不會讓設計師去 commit Master branch，所以如果在這裡去點擊 <code>EDIT IN SKETCH</code> 做任何變更是不會讓使用者 commit 上去的。在 Master branch 設計師只會有兩種選擇，要麻獨立開啟檔案不給你做 commit，要麻就是建議你開 branch 做完後再 merge 回來，這一點跟一般的 git 不太一樣，畢竟設計檔案也不會有用到 hotfix 的時候，所以這樣防呆也比較安全。</p>\n<p><img src=\"https://lh3.googleusercontent.com/gjq4zyufwjTpLB7hQ_wg9Rusr5hnnhsqpdIKEbIT3EDk3Rnm5YQ-tk81C4ASq3dEgPx43wb3mxsjD6z8I0FZjJnRa_IgtyoLWmXutsxrnqYfCMmcftB1vKkk0LV8im7JxZ1nu0dbVFtA4NnfqstnC34WTBcSdrcjhQcC0nuW7SnRBaY_6OVWCt7TTV6hLdA-9Q_0AdniVqOjcOzgB3pLXPhtX1xUOZqFVS5Vsd2EEsAeOkz_DcEZlsMJ8k_a-MCywYO6HEmepK3ZgKAyCPMmA2WmINZt4TvwlbOp9yffx1TDcQ4ZwHPtaLgwOqO6bsyUPrUSSj7_9Dj53UuickyDTAYGbGWKK-UG8bFBBclYMGeksorPu4VV2oeevIeroJsPl8bGNgqByyTimoO0qIG7Qc_8691kwEfHRh19my6xaD6CPKCry6Pzsi8P-KKGjVZCR-iiEy0NpBWMwOYmj4RlrXonRjm62nd8QWK4SIjHcHWglFTVGQ44BL4dgD-k7kQsd28qTBRzpfj0uOIY8CLTpwkTuW10OP6KHeZ56EqcJR538Ae2cuoKvc2Wd93WRySCdf9yL2gR-twyNnxEW5RxiTLP9Fbw4P8DOdkqx1T60CvdXZwI5PgyyA0Ck2LnK33F32FxjHElds3NJiWil9rrCdntPU7tW3yl=w1022-h620-no\" alt=\"Project Master Files\" title=\"Project Master Files\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/znS0iAXuVEvPOlhIOL_wlzCmYt9VgJCLEWJ4Lm9y0kAdCef9SfTel1NL8-h5hE1jGsra526Pp5BmxWDsLJnuE2cKNIirE8jQDcIOuDfKQi_SfBWFZvjBUKOyL5OtChPUQD26xUEW-xajZoHKmrJnAYKSfIPMqseCJzSQkrL_90DDnA_N20B-43SG4lYwBHHdQHe_XOPLkGt4fa6voR9KhnxBI4TCmx8Ba2AyRCnKp_u3XEUSTHR32Z-QjO-_z1GE8AKi3S2WJjDHRoIyAtW85D7YxZ3sXDpdzAr9cEAdreouTY_8bTt0zK9TzmhZfUuYnOJ6CoFTwA7YcBm5k4_x9qIA2FF1BSNHCqDvNnu4nyWlzVYiyA7JrBulgeodU7tCLCrdvpiUKXaPQ2yzM4LD8paoUFU6ljHYtYxVV6-4KOd4DDDnfYIqGpfSqrGEmQGoVejG7HJ-KJ90a-kycmgnFz08CrZ145IHu-9Bk2KZUAtkB5uRe769mojUtelz80Y74aA6VxD7Fn_R93-wJlMoeWIDg2GTHlMinW5aCNZdg4_7x1wsTHmNARvBeAYeLdXFdi7ZbuHJGfMum74xO4LLO5_Ym8pUzLD6o5f3vkOPqQJXm2dHulxrnt5tTER6Unh520zJO5DI8PZSxEEoNut23dntE9xeyXvR=w1026-h620-no\" alt=\"Project Master Commits\" title=\"Project Master Commits\"></p>\n<hr>\n<h2 id=\"Project-Branches-專案分支\"><a href=\"#Project-Branches-專案分支\" class=\"headerlink\" title=\"Project Branches 專案分支\"></a>Project Branches 專案分支</h2><p>這個功能是 <code>Abstract</code> 的核心。上一段提到正常的版本控制流程如同 git 一般，應該要做 <code>NEW BRANCH</code> 的動作開新分隻，並在新分支做 <code>EDIT IN SKETCH</code>，儲存完後對分支進行 commit 的動作，確定都修改完成最後才會將數個 commit merge 到 Master branch。這樣做除了多人設計師可以合作外，如果像我一樣孤獨的設計師也有好處嗎？答案絕對是YES! 因為設計跟寫程式不一樣，同一個需求，常常需要多種設計方案來比較，但 BOSS 又是那種看不到畫面就感覺不到的人，所以這時候開 branch 就非常好用。不同 branch 代表不同的設計方案，這樣既不會干擾原設計，又可以將最後確定要做的 branch 做 merge，其他不需要的方案也可以留底做紀錄。超愛！！</p>\n<p><img src=\"https://lh3.googleusercontent.com/YMwJ6QF8ELcQyu9v149YVgKqPMBd6coFba1xGhj0pZIcFo5pIXOj__M9q8HexsG98T642rfCSG5kBsW049dAs_RkpeWYzXNifgZqt8CYVuA8JJy4w8gdeokOfsHdmZpfh25QV4RLLXKeBzeDa39zltfoKn6wm4BA2KnzNCWCjMtUu9ZyvleFX_p7xTzenabPy9nq_nO3_c0ygpVfRfrsH3dxvfwNak18bIbcMBoZAHANMZpN7aWAuXTbwSroLPvc4E2IDYuG8DvtkyLGFIeQ0DxxazXNmF6nb7AD-mH3CtRQwO10grAK9Kh3TJKRutOXmyaypvQ52ppw8ixSG3CBmnvI6q7AX0d6-LQAhox_IElE6m2nRfSIh0ATu6NY4dqEpy4UEuu3-uveuzBqpKjBdA09UctNxrbpVwZSjZkPzmHgzEzEF9zpEjClwJvjCQGOm-mMBhhxPA8nwOnVXAib6EX8yQVA9JbgjoDlpl89B57hhcu9d4vOfTRGnQLbygT3Pd3wyc0cbVikM_Z1fdkN3HVAJ3nNz2LwkyDtjiwItopNVawGu2dxBRzmak5BMCEgAFOfi4fJV1ZFTjZoQ4kLWNOXA0OWcjDKkMlyb3VJ9tZSVD_c3G8TtTtb9TlCJ1LdtaLiBKPxKqmd3d4vGyyix9UbzwBAxkDX=w1022-h616-no\" alt=\"Project Branches\" title=\"Project Branches\"></p>\n<blockquote>\n<p>Tip: 對每張預覽圖點進去都可以做 COMMENT/COMPARE/INSPECT 的功能。 COMMENT 就是給不同設計師合作時的討論。 COMPARE 就是可以比對設計圖修改前後的不同處。 INSPECT 是新功能尚未開放，但我猜應該是讓設計師可跟工程師溝通的 spec，這部分我目前是先用 Sketch 的 plugin 輸出成互動的 HTML 解決，如果 Abstract 之後有開放此功能的話，將會是一大福音。</p>\n</blockquote>\n<p><img src=\"https://lh3.googleusercontent.com/ZRGh0dvdsa4_9yjD0zsq1rYQ4rfJjo8VxLSG4q6jD4p-KvE0s-fwPaEdBGxV26ol9LNfC15pGrfNIrjBYf-7UbK0WkGw7wsMPhvf_Nb45ecIlD_aC_bK1y844cuiP-WftQaZF3sasfinPGXm_UF6ROnCWfMafg5feUwnYSmJWh04jnVD0wUbi6D-CuCjOm3gVc-hANHCKfmDskpjmlLFn-AeMoj79-3fmkKSa8aQjQUslFHRuwn8W4XC7xTCztFy8JP7sAStDVu8BEcmECyXKS4t2WqCwVJE1Q4ptuJWszgo_8yDFzW_1v_aL3wolRUIt0F0yf9IP0BxQzlATEDgyasinQB_JGYoUtlr0mUNZjg6QFeLT47ZDQr3pqf70_FjTON7eJsubnwUclXTonbHK6ERD_pZlECnVUIRy-T1vFWQYroxlZ4upb2BrEG3l1Haum6UdAuULeQr0D6qxeoNEscYFnTAWRCV1AcRUP0iy0yiXkYRSwzBeqnU0PjFbtHxtGmanY8ijx1spIjNQ_65bmHGlDaaOPT7yvvZwHDRlPWm7HH1dTr_gK1iXYPA2ZV0WKIn-sUV7vDkSMMH-0do6REnQvRT_Sp4S3jBSbWWeEnH-Ky9Cwpknc-_EDfZpaUvEN7Txx3qQACbTMqUyAurEepMlViHatVQ=w1023-h621-no\" alt=\"Pages\" title=\"Pages\"></p>\n<hr>\n<h2 id=\"2018-對應-Sketch-Library-的功能\"><a href=\"#2018-對應-Sketch-Library-的功能\" class=\"headerlink\" title=\"2018 對應 Sketch Library 的功能\"></a>2018 對應 Sketch Library 的功能</h2><p>Sketch 的新功能 <code>Library</code>， Abstract 也有支援，而且使用起來相當順暢。當已經有一組設計元件/框架想要共用多個不同的專案時，我們可以開一個單獨的專案並將其 sketch 檔案 import 為 Library 做管理。在另一個要使用此 Library 的專案在 Files 的子頁面做 <code>Link Library</code> 的動作。這樣只要原本 Library 的元件有做修改，有使用到此共用元件的專案也會一併更新，如此一來就可以做到 Library 和一般專案分開管理，又可以做到互相關聯。這個新功能雖然是 Sketch 研發，但搭配上 Abstract 後更是如虎添翼，打 BOSS 嚇嚇叫！詳細實作可參考官網<a href=\"https://support.goabstract.com/hc/en-us/articles/360016370931-Build-a-Library\" target=\"_blank\" rel=\"noopener\">說明</a>。</p>\n<blockquote>\n<p>Tip: <code>Import Sketch file as Library</code> 後檔案的 icon 會變成粉紫色鑽石（預設是橘黃色），這樣就表示有新增 Library 成功喔～</p>\n</blockquote>\n<p><img src=\"https://lh3.googleusercontent.com/AmGnIR7k0l-SdY5hD_94kR6OO-pCMseKchuEeBcrfPtlgEtmule4zv5GB-GCFafrWYnuB_WgLM-HUbq1MSn19wvglEBu_SZ330zh-lu3GTdbiPotoc6KAR7ZCCGL-4NHj8lfL23FxkM3Yc-wSD9Ecu8L5WWx0vMUznNXsSFOcKXOjnBS8uk_n2XefeKGlS7ZZrvXLmHi5vlY8bVrz-rRoBTSwZft6njuqlKpBw5KP5nmjqqEaIpO9rxbB3GT5nwbLmAZeVITJjVnJoOsPR5hX6Z_WD2j0Qn6Q8jj-mKr-Pu9gWRmdYy4oT6G5ZemDpRHtq7I5NcgO9-hDgOFGTXDEneff0tdKfuu7lfyKz7MDimBAqZELILN5dCf6V8gzIhoUHNHSU7XndmlXXUP-CUn_vJJxWeOBNlVB0tnbsG8UziCyG_hj0hKmyIHvEeYwxPwGwX_2uWOH_tt1MIguJGu1SXJIrzYOL9lTY7crgjFduWMztg5IoBv5F8pbXFBdNBGnPgPlf8p8SHfKm5-nKcsqgHnDd4ADyYuuDPIhDtenZc97AuLnBj6oJVkZwVoxvf8IZdrZACuDIIOiZJ02b9HNvUzIMvegeUBxxjKisJdd_yT81jTwq7rcXhW4vacP6RvdPriXhQ61zE6qm5vQLLMGfWL3Hjd3kxi=w1021-h619-no\" alt=\"Library\" title=\"Library\"></p>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/15TevdlU0UA0DHjDXR8IFLjUteZ4XGxRObDpCwsIumenN6CLFYQFRcoJnS_6xYGMmbUFHxpqlXp25FcRXorD83F2vgEoldt2orwKDe1_QGMpNRhvu0KtXQ1KxuXUV7GTUSCOn4GXJMj8lCETJtDBXcyl6bi_snLs80aQJu-mSbdzJ-Bj3D_0DpmVrnfS_KyUD7I-RnQZ5FOzarAYJmXYpwjBXGZkGNc1CtiSJ1OAQPCXFsOIj0Wnw8Bpq8z0ysUDOZXt6ZWoC74yspZm10_zGEUyjm5axY0SDCxxwPcdJ_GIhoz90_L9wqRjz1NLVOBgPsDmQwWKzCd4o-M-VgjflYccFA45jcNEr5vV5Pce3JKqX9gJFIL-qVW9J5Y_qjMBZdOr7M3YWveJeo8daOKrF1CIGuInKckICK5-K4h52V_CpV_1jEPEDRfI5OGnX4AfFPnntVRmP3y8raD5ajnxgnFAj3bVmaC4XSDO9ZLJd-soMaaTqa-URYTv4WjGJZGpM-XP2MYrMVyQyafCzc90XKuxo3stdk7qL9-Hua-AQi5S5iVLacJz8LSTRqGcy8vXu_vIG8YHLOCAQAQO3pXJxcwu33BlttXskTLk-b8j2MvYr1OM25EW35MThuYOQNimlGLn7P7f5sphQiTt-aNT0mj-HrD_xE05=s250-no","excerpt":"<p>這篇要來介紹 <code>Abstract</code> 的主要功能，和我平常會怎麼使用他來做版本控制。</p>","more":"<hr>\n<h2 id=\"Projects-所有專案\"><a href=\"#Projects-所有專案\" class=\"headerlink\" title=\"Projects 所有專案\"></a>Projects 所有專案</h2><p>登入後的首頁就是顯示所有專案的頁面。專案分為 <code>ACTIVE</code> 和 <code>ARCHIVED</code>，這兩個分類主要是讓設計師團隊去區分哪些專案是還在進行的，哪些專案是已經結案的。專案只會越來越多，所以我覺得這個功能很好，可以在團隊合作時能很快的找到要設計的專案。我自己目前是一人設計，但目前管理的專案就有十幾個以上，往後專案數量只會遞增，所以我覺得這個功能對設計師來說是十分貼心。但要注意若要使用專案分類的話，是要自己去手動設定的喔，並不會自動知道你的專案已經結案了，所以這部分是手動設定也蠻合理的。</p>\n<p><img src=\"https://lh3.googleusercontent.com/-2IXT8A9fh8LNqeFa7pv9eOVku3fBO0fYRQR3T7GdbaMUgaEmddURlFrA2RvBF-PI3HAzqHw3M40mKvpZAwAFo7YYD5Xleugxzc5K88Ty2XkOqwKLBiIghOtch6ycWlYTaJrLtd95nbmUUS60JO9tz_xGIl9M9eYuwH2sik7ddUyvx8bVVAt75p_mIVPHcQ-6Eo2IhZCGq-KG4VkLA7AcbAAC6jcWpuy5H3OgaTTGf2N_lSwtlm-gwLgIHhJlB2E56Q1QZDPaDAebgJ8c8t3PyD5nDw_AML2BgqdQISujtesJBi3P34_PhzG_HD63suwNy_0n72Qb3Y-mnIJKCA7Nnvjh-towFitQn9gex7mEk7Sk0Q_cYnlPH4t7oCRp5bx5x4iSkYXfG5xr_MWAF2N3dAJeCr5JPNjMBEUWjPhJfJPMFIqGtNhBDknNnqBc93OgeP3Y1lGxvbD2M30nb1QGijbr6m_g3ouzva4kUqZ--NlsXdJwueyJJv7v6HSNx3LSfOYAEvsUIaqb7PcY8am89PIdW4rK_BWMIpVRIVISs61xeD3uYoBRQ1enaWUQY18eMRB2BErTh9dGQg3uOzYKUE7L1kg5W6XteSJozWp9XvZBvVMo4T0B5x8263RZw0jwbsiXT8RfOgjx-GqAFRWUWTkoGzy2XkU=w1023-h619-no\" alt=\"Projects/ACTIVE\" title=\"Projects/ACTIVE\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/pAv7exhVOlv-orzAfufPHGAP6I_hX345rCvKJHQcynwpP_L_X1fyAjLPwO3wGHyqCJ9073wuy0hPH6nU8tOIKwESYswPLMypk37S0xWQ00tYAYGy7w3cADAxDn3Xmb85VHEydHzqk1MA34BaH6wEjO7m_js3q8esOO07JE702_ee2yeisNnbny--tD54E_lZd_agJcSgLcr-I7cjEWiyZHB72S2BXMx0Ybn3Ylstvie5hYL69Im8LZN4QKgmOU-9gMm6rZxiyzDU8Sh1-qPpNqQ7YROhDP0UpIhE6Ju8yIQv3ElBZN8hhSQF5gpcMrFKsk_BVTAb9ZLz88_q9o_tAk18f5l8VaN97rO9JQzcytg2z-4qj-Jxu2OjuB9TLnCNjiPuUftI0vkiPJ2GuTXFiiI5Zr7iXJKu9az639PP3-hbj3Hx6x8_9dSXgWG12e8Jy4Fwni59R8_BN0zx6FYAngfSV1-k8I416Egj81_Tn98LQD-3JsShYEMfJrAix_qx9yyO-VesL2UEslhRF7rd87TYNtZNPe9g1LDHwlrDl89gpvB9dP1g6zNfMmr5gUB6yQvGDlFtkhZ8dzqptGSUtoYc4EbYxVGdLOUnRcQ8E31foJLkv3hubyklf7J4Dy4Q5Hf7SJ15BwkjX0vZHqYoXbA05z4L59MR=w1023-h618-no\" alt=\"Projects/ARCHIVED\" title=\"Projects/ARCHIVED\"></p>\n<blockquote>\n<p>Tip: 預設專案的排序是照名稱，如果想要專案特別置頂的話，可以按專案卡片上的星星就會強制置頂囉～</p>\n</blockquote>\n<p>要開新專案就按 <code>New Project</code> 新增，詳細操作可以參考官網的<a href=\"https://www.goabstract.com/how-it-works/\" target=\"_blank\" rel=\"noopener\">說明</a>，這裡就不再贅述。</p>\n<p><img src=\"https://lh3.googleusercontent.com/1Vz2DcZM1aWCJjYeOv6hLGZ6Tc0n0cLd75Ap7ze5z2Lng3k24WvV8lGII0UsFLgsyZNnhu8eWe5uI5StppnBqSzSARjP93-FYEHrBRtSLujEWPwDitK5Ve0NofifsEDeDeplzpaouF_w9vrIwMJ7F9ESivEMZfm8EGLu8CspQXcn24eBgwJReBCv1HbmKZScDjbrOnSUs6MbITqwS5QLYLpLePRPGx-dBEBggKGNKq3i8qB5tEnQijuqyVjryDlGMJqLLjxNHVBIysXKV0rviQNJFB-kk3u4Y1FeJs2NzCSuZHXjxKIv-Hbc44EzsfDz10-YsDzWOym2UsukCu8QLdbueDe20oiF71qQTI8zE1aVaIF54Fb45PUtg0FPqP7Fl3bCpWeHf9tBcyo6g31dJRHUKAJ68Yx9nJhBCE2ZoVjYCbnTgqyvYHmthzyJNDgaGZGtIFsSBGjTXYMMNJVHUAmJjcnw3aqd8AKBX9qZVZG0c76YqSv0KIHCEmWd1oKVcpevvrafRQrxcLMGXV0ycAwmvQF2f6Jg30Gxfbs8fQ48IJK1cELVXm7mW5LMih7APLgpCdr-M0wYrPgOJN-FSuu6-6rU_jqej25j6ogYKuFI6Erzy81uV9HRbA65Mg6GxWXzJnzeX8H-2F1kWIKS03EX-ZuX5v5h=w1023-h614-no\" alt=\"New Project\" title=\"New Project\"></p>\n<hr>\n<h2 id=\"Project-Overview-專案概況\"><a href=\"#Project-Overview-專案概況\" class=\"headerlink\" title=\"Project Overview 專案概況\"></a>Project Overview 專案概況</h2><p>點擊進入單一專案後，會看到 <code>Overview</code> 頁面，這頁是把專案的概況整理成一張張的小卡，讓設計師能快速回憶過往設計並能儘快進入狀態。比較特別的是其中有一個小卡 <code>About</code>，類似小白板的感覺，主要功能是紀錄專案的描述和相關文件的參照，我覺得這個部分超棒的！！！因為要設計一個專案，絕對是有許許多多的需求，這些需求總有一個管理的地方，而 Abstract 運用了這張卡片讓流程可以順利的參照。但美中不足的是如果可以像 <code>Azure Devops</code> 有個 task board 聯繫 git，並在 merge 的時候有 close task 的功能，將會對設計師團隊有很大的助益。</p>\n<p><img src=\"https://lh3.googleusercontent.com/-_oB_2ao_K1fbmbMm1DD7plg9BaWkLBzZrRxVLAQK-_2EB9YldTsNHBkz27nljxApmRpBEEbP6fEVZaoxlBuxeiOgF6BU65lUnYTJaSKpprANPD4KGXmB8swyIFyQTtQBz7RcyqxzlYtTy7Bo53kkQl96iiqOvoUaxTsdpTJVuHwE_yWmsu7lz52wr0MhbT6axYvYrrHqKYda_JIOLkGkpyxofVzRM4U79UM_kS9oieYbckdHEcT7t_gyxqUdeygLyewc1rZxXrq2yzQjNs7W6vxYvR6PTh6-1jt97NrH32wl6sPLQpGe7nMUQc8-c4fyQR1dOnX9uQ3ndczBLumUGvSUlmsjkm-GzdEumIySQO3-DeIxZb20wRCVsgUAcO5uGsZO2iGwxgeVWyfjIe0vtX-WKtO6H2XKAwVXsT7_a-7QvYZEa1Vu-uz5mZnlb5vaseRwB7tiv_UnB1wwnXjbLrlaTUAsNGvfQmPIPdJKcQNGi_rfpx_sRG-_6fbgej0HCkzFRokgKP10CFesWbD9BpnnYWx9DS9_NYAJEZonLDdrbY3wDzTd8zpAHTObHzet1Q4DUw7spKDT5rBmgMnZU1YthqYBh5nBZh1ICphlxBP2Dn5Ugb-xMOO63qp2-kNMF5ra1tGdODUhJcMnVA4E0yfXnC-ETHj=w1023-h619-no\" alt=\"Project Overview\" title=\"Project Overview\"></p>\n<hr>\n<h2 id=\"Project-Master-專案主分支\"><a href=\"#Project-Master-專案主分支\" class=\"headerlink\" title=\"Project Master 專案主分支\"></a>Project Master 專案主分支</h2><p>Master 就是此專案的主要 branch，分為 Overview/Commits/Files 三個小功能。正常來說 <code>Abstract</code> 不會讓設計師去 commit Master branch，所以如果在這裡去點擊 <code>EDIT IN SKETCH</code> 做任何變更是不會讓使用者 commit 上去的。在 Master branch 設計師只會有兩種選擇，要麻獨立開啟檔案不給你做 commit，要麻就是建議你開 branch 做完後再 merge 回來，這一點跟一般的 git 不太一樣，畢竟設計檔案也不會有用到 hotfix 的時候，所以這樣防呆也比較安全。</p>\n<p><img src=\"https://lh3.googleusercontent.com/gjq4zyufwjTpLB7hQ_wg9Rusr5hnnhsqpdIKEbIT3EDk3Rnm5YQ-tk81C4ASq3dEgPx43wb3mxsjD6z8I0FZjJnRa_IgtyoLWmXutsxrnqYfCMmcftB1vKkk0LV8im7JxZ1nu0dbVFtA4NnfqstnC34WTBcSdrcjhQcC0nuW7SnRBaY_6OVWCt7TTV6hLdA-9Q_0AdniVqOjcOzgB3pLXPhtX1xUOZqFVS5Vsd2EEsAeOkz_DcEZlsMJ8k_a-MCywYO6HEmepK3ZgKAyCPMmA2WmINZt4TvwlbOp9yffx1TDcQ4ZwHPtaLgwOqO6bsyUPrUSSj7_9Dj53UuickyDTAYGbGWKK-UG8bFBBclYMGeksorPu4VV2oeevIeroJsPl8bGNgqByyTimoO0qIG7Qc_8691kwEfHRh19my6xaD6CPKCry6Pzsi8P-KKGjVZCR-iiEy0NpBWMwOYmj4RlrXonRjm62nd8QWK4SIjHcHWglFTVGQ44BL4dgD-k7kQsd28qTBRzpfj0uOIY8CLTpwkTuW10OP6KHeZ56EqcJR538Ae2cuoKvc2Wd93WRySCdf9yL2gR-twyNnxEW5RxiTLP9Fbw4P8DOdkqx1T60CvdXZwI5PgyyA0Ck2LnK33F32FxjHElds3NJiWil9rrCdntPU7tW3yl=w1022-h620-no\" alt=\"Project Master Files\" title=\"Project Master Files\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/znS0iAXuVEvPOlhIOL_wlzCmYt9VgJCLEWJ4Lm9y0kAdCef9SfTel1NL8-h5hE1jGsra526Pp5BmxWDsLJnuE2cKNIirE8jQDcIOuDfKQi_SfBWFZvjBUKOyL5OtChPUQD26xUEW-xajZoHKmrJnAYKSfIPMqseCJzSQkrL_90DDnA_N20B-43SG4lYwBHHdQHe_XOPLkGt4fa6voR9KhnxBI4TCmx8Ba2AyRCnKp_u3XEUSTHR32Z-QjO-_z1GE8AKi3S2WJjDHRoIyAtW85D7YxZ3sXDpdzAr9cEAdreouTY_8bTt0zK9TzmhZfUuYnOJ6CoFTwA7YcBm5k4_x9qIA2FF1BSNHCqDvNnu4nyWlzVYiyA7JrBulgeodU7tCLCrdvpiUKXaPQ2yzM4LD8paoUFU6ljHYtYxVV6-4KOd4DDDnfYIqGpfSqrGEmQGoVejG7HJ-KJ90a-kycmgnFz08CrZ145IHu-9Bk2KZUAtkB5uRe769mojUtelz80Y74aA6VxD7Fn_R93-wJlMoeWIDg2GTHlMinW5aCNZdg4_7x1wsTHmNARvBeAYeLdXFdi7ZbuHJGfMum74xO4LLO5_Ym8pUzLD6o5f3vkOPqQJXm2dHulxrnt5tTER6Unh520zJO5DI8PZSxEEoNut23dntE9xeyXvR=w1026-h620-no\" alt=\"Project Master Commits\" title=\"Project Master Commits\"></p>\n<hr>\n<h2 id=\"Project-Branches-專案分支\"><a href=\"#Project-Branches-專案分支\" class=\"headerlink\" title=\"Project Branches 專案分支\"></a>Project Branches 專案分支</h2><p>這個功能是 <code>Abstract</code> 的核心。上一段提到正常的版本控制流程如同 git 一般，應該要做 <code>NEW BRANCH</code> 的動作開新分隻，並在新分支做 <code>EDIT IN SKETCH</code>，儲存完後對分支進行 commit 的動作，確定都修改完成最後才會將數個 commit merge 到 Master branch。這樣做除了多人設計師可以合作外，如果像我一樣孤獨的設計師也有好處嗎？答案絕對是YES! 因為設計跟寫程式不一樣，同一個需求，常常需要多種設計方案來比較，但 BOSS 又是那種看不到畫面就感覺不到的人，所以這時候開 branch 就非常好用。不同 branch 代表不同的設計方案，這樣既不會干擾原設計，又可以將最後確定要做的 branch 做 merge，其他不需要的方案也可以留底做紀錄。超愛！！</p>\n<p><img src=\"https://lh3.googleusercontent.com/YMwJ6QF8ELcQyu9v149YVgKqPMBd6coFba1xGhj0pZIcFo5pIXOj__M9q8HexsG98T642rfCSG5kBsW049dAs_RkpeWYzXNifgZqt8CYVuA8JJy4w8gdeokOfsHdmZpfh25QV4RLLXKeBzeDa39zltfoKn6wm4BA2KnzNCWCjMtUu9ZyvleFX_p7xTzenabPy9nq_nO3_c0ygpVfRfrsH3dxvfwNak18bIbcMBoZAHANMZpN7aWAuXTbwSroLPvc4E2IDYuG8DvtkyLGFIeQ0DxxazXNmF6nb7AD-mH3CtRQwO10grAK9Kh3TJKRutOXmyaypvQ52ppw8ixSG3CBmnvI6q7AX0d6-LQAhox_IElE6m2nRfSIh0ATu6NY4dqEpy4UEuu3-uveuzBqpKjBdA09UctNxrbpVwZSjZkPzmHgzEzEF9zpEjClwJvjCQGOm-mMBhhxPA8nwOnVXAib6EX8yQVA9JbgjoDlpl89B57hhcu9d4vOfTRGnQLbygT3Pd3wyc0cbVikM_Z1fdkN3HVAJ3nNz2LwkyDtjiwItopNVawGu2dxBRzmak5BMCEgAFOfi4fJV1ZFTjZoQ4kLWNOXA0OWcjDKkMlyb3VJ9tZSVD_c3G8TtTtb9TlCJ1LdtaLiBKPxKqmd3d4vGyyix9UbzwBAxkDX=w1022-h616-no\" alt=\"Project Branches\" title=\"Project Branches\"></p>\n<blockquote>\n<p>Tip: 對每張預覽圖點進去都可以做 COMMENT/COMPARE/INSPECT 的功能。 COMMENT 就是給不同設計師合作時的討論。 COMPARE 就是可以比對設計圖修改前後的不同處。 INSPECT 是新功能尚未開放，但我猜應該是讓設計師可跟工程師溝通的 spec，這部分我目前是先用 Sketch 的 plugin 輸出成互動的 HTML 解決，如果 Abstract 之後有開放此功能的話，將會是一大福音。</p>\n</blockquote>\n<p><img src=\"https://lh3.googleusercontent.com/ZRGh0dvdsa4_9yjD0zsq1rYQ4rfJjo8VxLSG4q6jD4p-KvE0s-fwPaEdBGxV26ol9LNfC15pGrfNIrjBYf-7UbK0WkGw7wsMPhvf_Nb45ecIlD_aC_bK1y844cuiP-WftQaZF3sasfinPGXm_UF6ROnCWfMafg5feUwnYSmJWh04jnVD0wUbi6D-CuCjOm3gVc-hANHCKfmDskpjmlLFn-AeMoj79-3fmkKSa8aQjQUslFHRuwn8W4XC7xTCztFy8JP7sAStDVu8BEcmECyXKS4t2WqCwVJE1Q4ptuJWszgo_8yDFzW_1v_aL3wolRUIt0F0yf9IP0BxQzlATEDgyasinQB_JGYoUtlr0mUNZjg6QFeLT47ZDQr3pqf70_FjTON7eJsubnwUclXTonbHK6ERD_pZlECnVUIRy-T1vFWQYroxlZ4upb2BrEG3l1Haum6UdAuULeQr0D6qxeoNEscYFnTAWRCV1AcRUP0iy0yiXkYRSwzBeqnU0PjFbtHxtGmanY8ijx1spIjNQ_65bmHGlDaaOPT7yvvZwHDRlPWm7HH1dTr_gK1iXYPA2ZV0WKIn-sUV7vDkSMMH-0do6REnQvRT_Sp4S3jBSbWWeEnH-Ky9Cwpknc-_EDfZpaUvEN7Txx3qQACbTMqUyAurEepMlViHatVQ=w1023-h621-no\" alt=\"Pages\" title=\"Pages\"></p>\n<hr>\n<h2 id=\"2018-對應-Sketch-Library-的功能\"><a href=\"#2018-對應-Sketch-Library-的功能\" class=\"headerlink\" title=\"2018 對應 Sketch Library 的功能\"></a>2018 對應 Sketch Library 的功能</h2><p>Sketch 的新功能 <code>Library</code>， Abstract 也有支援，而且使用起來相當順暢。當已經有一組設計元件/框架想要共用多個不同的專案時，我們可以開一個單獨的專案並將其 sketch 檔案 import 為 Library 做管理。在另一個要使用此 Library 的專案在 Files 的子頁面做 <code>Link Library</code> 的動作。這樣只要原本 Library 的元件有做修改，有使用到此共用元件的專案也會一併更新，如此一來就可以做到 Library 和一般專案分開管理，又可以做到互相關聯。這個新功能雖然是 Sketch 研發，但搭配上 Abstract 後更是如虎添翼，打 BOSS 嚇嚇叫！詳細實作可參考官網<a href=\"https://support.goabstract.com/hc/en-us/articles/360016370931-Build-a-Library\" target=\"_blank\" rel=\"noopener\">說明</a>。</p>\n<blockquote>\n<p>Tip: <code>Import Sketch file as Library</code> 後檔案的 icon 會變成粉紫色鑽石（預設是橘黃色），這樣就表示有新增 Library 成功喔～</p>\n</blockquote>\n<p><img src=\"https://lh3.googleusercontent.com/AmGnIR7k0l-SdY5hD_94kR6OO-pCMseKchuEeBcrfPtlgEtmule4zv5GB-GCFafrWYnuB_WgLM-HUbq1MSn19wvglEBu_SZ330zh-lu3GTdbiPotoc6KAR7ZCCGL-4NHj8lfL23FxkM3Yc-wSD9Ecu8L5WWx0vMUznNXsSFOcKXOjnBS8uk_n2XefeKGlS7ZZrvXLmHi5vlY8bVrz-rRoBTSwZft6njuqlKpBw5KP5nmjqqEaIpO9rxbB3GT5nwbLmAZeVITJjVnJoOsPR5hX6Z_WD2j0Qn6Q8jj-mKr-Pu9gWRmdYy4oT6G5ZemDpRHtq7I5NcgO9-hDgOFGTXDEneff0tdKfuu7lfyKz7MDimBAqZELILN5dCf6V8gzIhoUHNHSU7XndmlXXUP-CUn_vJJxWeOBNlVB0tnbsG8UziCyG_hj0hKmyIHvEeYwxPwGwX_2uWOH_tt1MIguJGu1SXJIrzYOL9lTY7crgjFduWMztg5IoBv5F8pbXFBdNBGnPgPlf8p8SHfKm5-nKcsqgHnDd4ADyYuuDPIhDtenZc97AuLnBj6oJVkZwVoxvf8IZdrZACuDIIOiZJ02b9HNvUzIMvegeUBxxjKisJdd_yT81jTwq7rcXhW4vacP6RvdPriXhQ61zE6qm5vQLLMGfWL3Hjd3kxi=w1021-h619-no\" alt=\"Library\" title=\"Library\"></p>"},{"title":"Google Material Design - Introduction","thumbnailImage":"https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no","thumbnailImagePosition":"left","coverImage":"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1Hfurrx3NHOuac_WreNWxG-2qdKjliIx_%2Fintro-illo-metaphor.png","coverMeta":"out","date":"2019-02-08T16:00:00.000Z","updated":"2019-02-08T16:00:00.000Z","_content":"\n從 2018 年 8 月開始 Material Design 進行大幅度的更新。到目前為止發展出許多豐富的資源、工具和工作流，讓設計師、工程師們合作更順利，也積極舉辦比賽、研討會並分享業界使用示例讓大家有更多互相學習的空間，最近會寫一系列關於 Google Material Design 的文章，雖然已經使用 Material Design 超過一年了，但還是想透過閱讀新文件的機會，來邊學邊分享給大家XD\n\n<!--more-->\n\n## Introduction - Google Material Design\n\n### 設計目標 Goals\n\n1. 創建(Create)：創建一種視覺語言，將好的設計原則與科技結合。\n\n2. 統一(Unify)：跨平台設備下開發單一的底層系統，統一用戶體驗。\n\n3. 客製化(Customize)：擴展 Material 的視覺語言，為創新和品牌識別提供可靈活變化的基礎程式。\n\n### 設計原則 Principles\n\nMaterial 是一種譬喻。Material Design 的靈感來自物理世界和其組成，包括它們如何反射光線和投射陰影。把我們所使用的媒介重新想像成紙張和墨水材質的變化。\n\n1. 大膽、圖形導向、有意象的：Material Design 是依印刷設計方法來設計，包含字體設計(typography)、格線系統(grids)、間距(space)、比例(scale)、顏色(color)和意象(imagery)等。Material Design 創造層次感且有意義的體驗，讓使用者沈浸在環境中。\n\n2. 互動(Motion)蘊含意義：透過細微的反饋和關聯的漸變，來保持使用者動作的連續性和聚焦的效果。當元素出現在屏幕上時，它們會變化並重新組織環境，並通過互動產生新的變化。\n\n3. 靈活的基礎程式：Material Design 系統可以依品牌來擴展其視覺語言。它是由許多客製化的程式基底組成，可以無痛依設計加入組件(components)、插件(plug-ins)和設計元素(design elements)。\n\n4. 跨平台：Material Design 在不同平台保持相同的 UI，在 Android、 iOS、Flutter 和 web 上使用相同的共用組件。\n\n\nMaterial Design 維持每月更新的速度，對設計和工程師呈現其功能和擴展性，有興趣可以在官方[github](https://github.com/material-components/material-components/blob/develop/ROADMAP.md/)看到最新的釋出內容。下回我們將介紹 Material Design 的 Workflow 工作流，還有許多超好用的工具，我們下回見！\n\n\n## 參考資料\n\n* [Material Design Introduction](https://material.io/design/introduction/#)","source":"_posts/UXUI/Google-Material-Design-Introduction.md","raw":"---\ntitle: Google Material Design - Introduction\ncategories:\n  - UXUI\n  - Material Design\nthumbnailImage: https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no\nthumbnailImagePosition: left\ncoverImage: https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1Hfurrx3NHOuac_WreNWxG-2qdKjliIx_%2Fintro-illo-metaphor.png\ncoverMeta: out\ntags: [UX, UI, Material Design]\ndate: 2019/02/09\nupdated: 2019/02/09\n---\n\n從 2018 年 8 月開始 Material Design 進行大幅度的更新。到目前為止發展出許多豐富的資源、工具和工作流，讓設計師、工程師們合作更順利，也積極舉辦比賽、研討會並分享業界使用示例讓大家有更多互相學習的空間，最近會寫一系列關於 Google Material Design 的文章，雖然已經使用 Material Design 超過一年了，但還是想透過閱讀新文件的機會，來邊學邊分享給大家XD\n\n<!--more-->\n\n## Introduction - Google Material Design\n\n### 設計目標 Goals\n\n1. 創建(Create)：創建一種視覺語言，將好的設計原則與科技結合。\n\n2. 統一(Unify)：跨平台設備下開發單一的底層系統，統一用戶體驗。\n\n3. 客製化(Customize)：擴展 Material 的視覺語言，為創新和品牌識別提供可靈活變化的基礎程式。\n\n### 設計原則 Principles\n\nMaterial 是一種譬喻。Material Design 的靈感來自物理世界和其組成，包括它們如何反射光線和投射陰影。把我們所使用的媒介重新想像成紙張和墨水材質的變化。\n\n1. 大膽、圖形導向、有意象的：Material Design 是依印刷設計方法來設計，包含字體設計(typography)、格線系統(grids)、間距(space)、比例(scale)、顏色(color)和意象(imagery)等。Material Design 創造層次感且有意義的體驗，讓使用者沈浸在環境中。\n\n2. 互動(Motion)蘊含意義：透過細微的反饋和關聯的漸變，來保持使用者動作的連續性和聚焦的效果。當元素出現在屏幕上時，它們會變化並重新組織環境，並通過互動產生新的變化。\n\n3. 靈活的基礎程式：Material Design 系統可以依品牌來擴展其視覺語言。它是由許多客製化的程式基底組成，可以無痛依設計加入組件(components)、插件(plug-ins)和設計元素(design elements)。\n\n4. 跨平台：Material Design 在不同平台保持相同的 UI，在 Android、 iOS、Flutter 和 web 上使用相同的共用組件。\n\n\nMaterial Design 維持每月更新的速度，對設計和工程師呈現其功能和擴展性，有興趣可以在官方[github](https://github.com/material-components/material-components/blob/develop/ROADMAP.md/)看到最新的釋出內容。下回我們將介紹 Material Design 的 Workflow 工作流，還有許多超好用的工具，我們下回見！\n\n\n## 參考資料\n\n* [Material Design Introduction](https://material.io/design/introduction/#)","slug":"UXUI/Google-Material-Design-Introduction","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74y001ytudhr6ddez9x","content":"<p>從 2018 年 8 月開始 Material Design 進行大幅度的更新。到目前為止發展出許多豐富的資源、工具和工作流，讓設計師、工程師們合作更順利，也積極舉辦比賽、研討會並分享業界使用示例讓大家有更多互相學習的空間，最近會寫一系列關於 Google Material Design 的文章，雖然已經使用 Material Design 超過一年了，但還是想透過閱讀新文件的機會，來邊學邊分享給大家XD</p>\n<a id=\"more\"></a>\n<h2 id=\"Introduction-Google-Material-Design\"><a href=\"#Introduction-Google-Material-Design\" class=\"headerlink\" title=\"Introduction - Google Material Design\"></a>Introduction - Google Material Design</h2><h3 id=\"設計目標-Goals\"><a href=\"#設計目標-Goals\" class=\"headerlink\" title=\"設計目標 Goals\"></a>設計目標 Goals</h3><ol>\n<li><p>創建(Create)：創建一種視覺語言，將好的設計原則與科技結合。</p>\n</li>\n<li><p>統一(Unify)：跨平台設備下開發單一的底層系統，統一用戶體驗。</p>\n</li>\n<li><p>客製化(Customize)：擴展 Material 的視覺語言，為創新和品牌識別提供可靈活變化的基礎程式。</p>\n</li>\n</ol>\n<h3 id=\"設計原則-Principles\"><a href=\"#設計原則-Principles\" class=\"headerlink\" title=\"設計原則 Principles\"></a>設計原則 Principles</h3><p>Material 是一種譬喻。Material Design 的靈感來自物理世界和其組成，包括它們如何反射光線和投射陰影。把我們所使用的媒介重新想像成紙張和墨水材質的變化。</p>\n<ol>\n<li><p>大膽、圖形導向、有意象的：Material Design 是依印刷設計方法來設計，包含字體設計(typography)、格線系統(grids)、間距(space)、比例(scale)、顏色(color)和意象(imagery)等。Material Design 創造層次感且有意義的體驗，讓使用者沈浸在環境中。</p>\n</li>\n<li><p>互動(Motion)蘊含意義：透過細微的反饋和關聯的漸變，來保持使用者動作的連續性和聚焦的效果。當元素出現在屏幕上時，它們會變化並重新組織環境，並通過互動產生新的變化。</p>\n</li>\n<li><p>靈活的基礎程式：Material Design 系統可以依品牌來擴展其視覺語言。它是由許多客製化的程式基底組成，可以無痛依設計加入組件(components)、插件(plug-ins)和設計元素(design elements)。</p>\n</li>\n<li><p>跨平台：Material Design 在不同平台保持相同的 UI，在 Android、 iOS、Flutter 和 web 上使用相同的共用組件。</p>\n</li>\n</ol>\n<p>Material Design 維持每月更新的速度，對設計和工程師呈現其功能和擴展性，有興趣可以在官方<a href=\"https://github.com/material-components/material-components/blob/develop/ROADMAP.md/\" target=\"_blank\" rel=\"noopener\">github</a>看到最新的釋出內容。下回我們將介紹 Material Design 的 Workflow 工作流，還有許多超好用的工具，我們下回見！</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://material.io/design/introduction/#\" target=\"_blank\" rel=\"noopener\">Material Design Introduction</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no","excerpt":"<p>從 2018 年 8 月開始 Material Design 進行大幅度的更新。到目前為止發展出許多豐富的資源、工具和工作流，讓設計師、工程師們合作更順利，也積極舉辦比賽、研討會並分享業界使用示例讓大家有更多互相學習的空間，最近會寫一系列關於 Google Material Design 的文章，雖然已經使用 Material Design 超過一年了，但還是想透過閱讀新文件的機會，來邊學邊分享給大家XD</p>","more":"<h2 id=\"Introduction-Google-Material-Design\"><a href=\"#Introduction-Google-Material-Design\" class=\"headerlink\" title=\"Introduction - Google Material Design\"></a>Introduction - Google Material Design</h2><h3 id=\"設計目標-Goals\"><a href=\"#設計目標-Goals\" class=\"headerlink\" title=\"設計目標 Goals\"></a>設計目標 Goals</h3><ol>\n<li><p>創建(Create)：創建一種視覺語言，將好的設計原則與科技結合。</p>\n</li>\n<li><p>統一(Unify)：跨平台設備下開發單一的底層系統，統一用戶體驗。</p>\n</li>\n<li><p>客製化(Customize)：擴展 Material 的視覺語言，為創新和品牌識別提供可靈活變化的基礎程式。</p>\n</li>\n</ol>\n<h3 id=\"設計原則-Principles\"><a href=\"#設計原則-Principles\" class=\"headerlink\" title=\"設計原則 Principles\"></a>設計原則 Principles</h3><p>Material 是一種譬喻。Material Design 的靈感來自物理世界和其組成，包括它們如何反射光線和投射陰影。把我們所使用的媒介重新想像成紙張和墨水材質的變化。</p>\n<ol>\n<li><p>大膽、圖形導向、有意象的：Material Design 是依印刷設計方法來設計，包含字體設計(typography)、格線系統(grids)、間距(space)、比例(scale)、顏色(color)和意象(imagery)等。Material Design 創造層次感且有意義的體驗，讓使用者沈浸在環境中。</p>\n</li>\n<li><p>互動(Motion)蘊含意義：透過細微的反饋和關聯的漸變，來保持使用者動作的連續性和聚焦的效果。當元素出現在屏幕上時，它們會變化並重新組織環境，並通過互動產生新的變化。</p>\n</li>\n<li><p>靈活的基礎程式：Material Design 系統可以依品牌來擴展其視覺語言。它是由許多客製化的程式基底組成，可以無痛依設計加入組件(components)、插件(plug-ins)和設計元素(design elements)。</p>\n</li>\n<li><p>跨平台：Material Design 在不同平台保持相同的 UI，在 Android、 iOS、Flutter 和 web 上使用相同的共用組件。</p>\n</li>\n</ol>\n<p>Material Design 維持每月更新的速度，對設計和工程師呈現其功能和擴展性，有興趣可以在官方<a href=\"https://github.com/material-components/material-components/blob/develop/ROADMAP.md/\" target=\"_blank\" rel=\"noopener\">github</a>看到最新的釋出內容。下回我們將介紹 Material Design 的 Workflow 工作流，還有許多超好用的工具，我們下回見！</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://material.io/design/introduction/#\" target=\"_blank\" rel=\"noopener\">Material Design Introduction</a></li>\n</ul>"},{"title":"Google Material Studies - Rally","thumbnailImage":"https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no","thumbnailImagePosition":"left","coverImage":"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1MvqIqiMU-07zdfL5gFNeKeg1DrzFHOtj%2Fcasestudies-rally-main.png","coverMeta":"out","date":"2019-04-04T16:00:00.000Z","updated":"2019-04-04T16:00:00.000Z","_content":"\nMaterial Guildline 應該很多設計師都閱讀過 N 遍了，但要設計時如何在框架下做到客制這件事應該還是很疑惑。官網上提出了幾個業界的實例分享，這點讓我很有興趣，所以接下來我會一一對這些案例做介紹。因為我上班做的案子比較多是系統類的設計，所以我第一個想介紹比較類似的是 Rally 這個案例。下面內容會一邊介紹，一邊穿插自己在職場上的一些心得或想法。\n\n<!--more-->\n\n# 案例背景\n\nRally 是一個管理財務的 APP，它會追蹤使用者的花費習慣並產生預測和適當的警示通知。Rally 是設計來呈現大量且密集的資訊，讓使用者可管理和研究資料模式。\n\n### 數據性導向之美 (Data-driven aesthetic)\n\nUI 採用暗灰色提高質感，並用亮色系凸顯資料。在資料與背景顏色高對比之下，讓使用者更容易閱讀 APP 內的圖表。\n\n![Rally UI](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F16CNi69TWdOluvYdoeNwd5QK4P5nkE48-%2Fcasestudies-rally-brandattributes.png \"Rally UI\")\n\nUI 設計專注在查看、研究和了解資料。圖表呈現在儀表板上，讓使用者查看花費摘要和單一交易的細節。此 UI 設計透過排版、顏色和形狀的凸顯，讓畫面是密集且直覺的。\n\n> 心得：蠻喜歡這樣的暗色背景搭亮色的配色，但因目前公司的一般使用者還是比較習慣白色背景的配色模式，所以暗色背景的搭配在考慮時間和緊急度下，我自己是只敢用在自己小組內部用的專案上，比較沒有時間上的壓力。\n\n# 產品架構\n\nRally 架構是層級式的，讓使用者透過不同分類查看他們的財務。\n\n內容根據個人財務區分不同的 sections，像是帳戶、預算、帳單。首頁著重在讓使用者前往這些 sections 的導向。\n\n### 導覽列\n\n因為 Rally 專注在呈現和描述不同面向的財務資訊，所以如何讓使用者能輕易的在這些sections 移動是很重要的。Rally 有一個固定位置的導覽列讓使用者能方便的切換 sections。在桌機和平板，Rally 使用的是直列式的導覽列。在手機，則是用橫向標籤的方式。這項的導航模式很理想，雖然它們總是在屏幕上，但佔用的空間非常小。\n\n![Rally 導覽列](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1PIJeS6GJLIExYX9mWOmb7UzWB0-Nl5VB%2Fcasestudies-family-rally.png \"Rally 導覽列\")\n\n在直列式的導覽列中，每個目的地會用一個獨特的 icon 呈現。當 section 被點選的時候，icon 就會變亮且標題會出現在 icon 下方。\n\n![直列式的導覽列](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1-qsgxAELdMrSDPRKV-l-N_2dW5fYeljj%2Fcasestudies-rally-rail.png \"直列式的導覽列\")\n\n在橫向標籤導覽中，當 section 被點選的時候，icon 就會變亮且標題會出現在 icon 右方，其他 icon 將會適當的移動位置。\n\n![橫向標籤導覽](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dHfpA4R1RVHn5zRSxInMllujv_C7pxv7%2Fcasestudies-rally-tabs.png \"橫向標籤導覽\")\n\n> 心得：這邊如果導覽項目數目很少，這樣設計ok。但要注意往後的擴充性，若是 section 的數目增加是否要增加 sub section，手機上方 tab 的空間是否會不夠呈現，這些都是可能會碰到的問題。\n\n# 排版\n\nRally 使用 12 grid system。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1lAQUZTvSoen3matP1gpDJqVpKnZpARy6%2Fcasestudies-rally-grid-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### 視覺層級\n\nRally 使用色彩或紗幕來區分視覺上的層級。\n\n舉例：當使用者滑動下方資料的時候，為確保統計圖固定在上方，使用不同的色彩來區分視覺層級。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dq6I1nDovqvUydVHH5jTeI9VA6ftfz7H%2Frally-flow1-170808-casestudies-rally-elevation-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n舉例：當有 popup 出現時，背景使用紗幕霧化背景。\n\n![霧化背景](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1eBiwYfz1_8oSLrlWN_9uNjA_TGVqRBS2%2Fcasestudies-rally-elevation-scrim.png \"霧化背景\")\n\n> 心得：用色彩和霧化效果來做層級區分我覺得還蠻實用且能提升質感。但在霧化背景的方式，需要考量到開發者是否能配合。若還有捨棄不了 IE 瀏覽器的公司，則會因為裝置的限制而必須要有第二方案來替代霧化的方式，比如說改用暗色且透明度低的樣式。\n\n# 顏色\n\n有時候需要顯示多個圖表在一個螢幕上，且每個圖表包含多個 sections。為了能足夠表達狀態， Rally 的配色採用 1 個主色調加上 5 個配色。這個設計讓系統呈現可讀性高且獨特的信息圖表。\n\n當三個圖表出現在同一個螢幕上，每個圖表使用其中的兩個顏色。\n\n1. Primary Green and Dark Green.\n2. Orange and Yellow.\n3. Purple and Blue.\n\n![配色](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1TnwFyAe31SQDfL21qM9hZ1dcGQVRyB23%2Fcasestudies-rally-color-75percentzoom.png \"配色\")\n\n### 顏色主題\n\n除了 6 色以外， Rally 還有一個針對這 6 個顏色延伸 10 色版的調色盤。如下圖。\n\n* 圓圈形狀代表在此 APP 中有用到的色版\n* \"P\" 代表主色調\n* 其他沒有文字的圓圈則是配色\n\n![顏色主題](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F17gZmwIGdzlDr-Hl2jTu2SSgc_ATBGaPt%2Fcasestudies-rally-color-palettes.png \"顏色主題\")\n\n> 心得：我還沒用過那麼多的配色設計過，因為顏色越多，需要考量的點會更複雜，可能需要找時間嘗試看看。\n\n# 文字與圖示\n\nRally 用兩種字體：Eczar 和 Roboto Condensed。\n\n1. Roboto Condensed：介面預設字體，適合密集的佈局。\n2. Eczar：只用在首要標題和純數字清單，適合呈現數據。\n\n![字體](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1t7i8LPPdmRkpdLV4u-p0oHvlhRTRbEb3%2Fcasestudies-rally-type.png \"字體\")\n\nRally 使用客製化的 icon 來呈現不同的 sections。\n\n1. 所有圖示使用一樣的格線架構確保一致性。\n2. 所有 Rally 圖示\n\n![圖示](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1zqz0w6AEK_D9Kxb8ntWTb8lXJHkGjakk%2Fcasestudies-rally-icons.png \"圖示\")\n\n> 心得：在數據表達的部分使用另一種字體這是一個不錯的點子，可以凸顯出數據的呈現，會想要嘗試看看。圖示的部分，在統一格線架構下設計很合理，但在一般專案時間不足的狀況下，通常我會直接使用 Material Icons ，省去設計圖示這塊。\n\n# 形狀\n\n元件根據大小使用不同的形狀類型，將形狀做分類可以讓螢幕一次放多個元件，分類包含：\n\n1. 小元件 (S)：文字輸入區塊(Filled text fields)。\n2. 中元件 (M)：卡片(Cards)。\n3. 大元件 (L)：數據表格(Data Tables)。\n\n元件都是 0 圓角。\n\n![形狀分類](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1RpTrPB3UprQBcFfZh6ZnI4xNtUEyThIQ%2Frally-shape.png \"形狀分類\")\n\n![形狀元件](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1HuOHmVEu0rKr8Bfes708nHM9osOWiHIm%2Frally-shape-b.png \"形狀元件\")\n\n# 元件\n\n### 卡片和清單\n\n在 overview 頁面使用卡片去呈現多個財務摘要，像是 Accounts 和 Bills。\n\n![卡片](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1gDGHc1gTW-FsOvmmXjZ6i5UF_U9CS0Ga%2Fcasestudies-rally-cards-1.png \"卡片\")\n\n當點選 Accounts，摘要資訊卡片會展開顯示更多細節在清單中。\n\n![清單](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F128elUbInT1Me7Ra3gJGsndRDRq6JbAcn%2Fcasestudies-rally-list.png \"清單\")\n\n### 橫幅、提示bar和對話框\n\n* 橫幅(Banners)：比較不那麼重要的訊息選擇用橫幅的方式呈現，通常會搭配圖示。\n* 提示 bar 和對話框(Snackbars and dialogs)：重要的訊息則是用提示 bar 和對話框呈現，並不會包含圖示。\n\n在平板上的橫幅呈現在導覽列旁。\n\n![橫幅 - 平板](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1X3ShTSv1KbUgazHtrp7wzXApy36TH1na%2Fcasestudies-rally-alerts-tablet.png \"橫幅 - 平板\")\n\n在手機上的橫幅呈現在最上方。\n\n![橫幅 - 手機](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1qcuHjBEJaoYI-_Vel0SlCTr4MXrlO3Ta%2Fcasestudies-rally-alerts-mobile.png \"橫幅 - 手機\")\n\n在桌機上的橫幅則是自己一個直欄位專門呈現。\n\n![橫幅 - 桌機](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1aEZcxrXD6L__739kup3Zzi5x73UFoIiz%2Fcasestudies-rally-alerts-desktop.png \"橫幅 - 桌機\")\n\n重要訊息出現提示 bar 或對話框。\n\n![對話框](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1UGbGapFacfgXBv5ijUiAjwNBKmw2v9yh%2Fcasestudies-rally-dialogs-mobile.png \"對話框\")\n\n![提示 bar](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1ccB2eglPzvAai1YC4QgkxgYlFErDtJFs%2Fcasestudies-rally-snackbar.png \"提示 bar\")\n\n> 心得：沒有將這三個元件一起混用的經驗，頂多用其中的兩個而已，所以他這樣從訊息的重要性來區分用哪種元件的方式很值得參考。\n\n# 交互動作\n\nRally 在登入頁面顯示動畫 logo 增加 APP 的印象。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SdTGjLEmVjxVQfQHUxjrbWEO9GEnbHab%2F01-rally-launch.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n當用戶點開一個帳戶時，畫面會使用從內到外漸變展開的子頁面。點選返回後，則會從外到內漸變縮合回上一頁。加強使用者對深度的感知。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SjV2Eky-4d80UhOL4dm9k-EhG-r8IDm2%2F02-rally-parentchild.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n點選頁籤則是使用左右滑動的漸變動畫。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SkeVD6imJA_MwjipNR-DbNh1xw4au9yy%2F02-rally-tabs.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n當引入新頁面元素時會使用上方的進度條作為導引。使用時間差的轉圈動畫來凸顯圓餅圖。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SmqucW2ugbXboWf8SSjVngVtm63_VLxf%2F03-rally-sequencing.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n對話框使用彈跳的方式，以傳達訊息的急迫感。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SrDQ1yFyIyFYWewhvEIIBZ9Mm0S-6G2z%2F04-rally-overshoot.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n> 心得：對於父子頁面漸變展開的動畫提升深度感知這點很認同，但在實作上還沒有真正的實行過，可以思考或和其他程式開發者討論實際在 web 或 app 撰寫時的執行難度。\n\n總結：讀完這篇研究後，對於 Material Design 在系統設計上的應用來說，我覺得是很實用的，畢竟要做系統通常都是要大量顯示資訊，如何有條理讓使用者理解顯示資訊變得很重要。這篇在配色和交互動作的部分是很值得參考的案例。\n\n## 參考資料\n\n* [Material Studies - Rally](https://material.io/design/material-studies/rally.html)","source":"_posts/UXUI/Google-Material-Studies-Rally.md","raw":"---\ntitle: Google Material Studies - Rally\ncategories:\n  - UXUI\n  - Material Design\nthumbnailImage: https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no\nthumbnailImagePosition: left\ncoverImage: https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1MvqIqiMU-07zdfL5gFNeKeg1DrzFHOtj%2Fcasestudies-rally-main.png\ncoverMeta: out\ntags: [UX, UI, Material Design]\ndate: 2019/04/05\nupdated: 2019/04/05\n---\n\nMaterial Guildline 應該很多設計師都閱讀過 N 遍了，但要設計時如何在框架下做到客制這件事應該還是很疑惑。官網上提出了幾個業界的實例分享，這點讓我很有興趣，所以接下來我會一一對這些案例做介紹。因為我上班做的案子比較多是系統類的設計，所以我第一個想介紹比較類似的是 Rally 這個案例。下面內容會一邊介紹，一邊穿插自己在職場上的一些心得或想法。\n\n<!--more-->\n\n# 案例背景\n\nRally 是一個管理財務的 APP，它會追蹤使用者的花費習慣並產生預測和適當的警示通知。Rally 是設計來呈現大量且密集的資訊，讓使用者可管理和研究資料模式。\n\n### 數據性導向之美 (Data-driven aesthetic)\n\nUI 採用暗灰色提高質感，並用亮色系凸顯資料。在資料與背景顏色高對比之下，讓使用者更容易閱讀 APP 內的圖表。\n\n![Rally UI](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F16CNi69TWdOluvYdoeNwd5QK4P5nkE48-%2Fcasestudies-rally-brandattributes.png \"Rally UI\")\n\nUI 設計專注在查看、研究和了解資料。圖表呈現在儀表板上，讓使用者查看花費摘要和單一交易的細節。此 UI 設計透過排版、顏色和形狀的凸顯，讓畫面是密集且直覺的。\n\n> 心得：蠻喜歡這樣的暗色背景搭亮色的配色，但因目前公司的一般使用者還是比較習慣白色背景的配色模式，所以暗色背景的搭配在考慮時間和緊急度下，我自己是只敢用在自己小組內部用的專案上，比較沒有時間上的壓力。\n\n# 產品架構\n\nRally 架構是層級式的，讓使用者透過不同分類查看他們的財務。\n\n內容根據個人財務區分不同的 sections，像是帳戶、預算、帳單。首頁著重在讓使用者前往這些 sections 的導向。\n\n### 導覽列\n\n因為 Rally 專注在呈現和描述不同面向的財務資訊，所以如何讓使用者能輕易的在這些sections 移動是很重要的。Rally 有一個固定位置的導覽列讓使用者能方便的切換 sections。在桌機和平板，Rally 使用的是直列式的導覽列。在手機，則是用橫向標籤的方式。這項的導航模式很理想，雖然它們總是在屏幕上，但佔用的空間非常小。\n\n![Rally 導覽列](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1PIJeS6GJLIExYX9mWOmb7UzWB0-Nl5VB%2Fcasestudies-family-rally.png \"Rally 導覽列\")\n\n在直列式的導覽列中，每個目的地會用一個獨特的 icon 呈現。當 section 被點選的時候，icon 就會變亮且標題會出現在 icon 下方。\n\n![直列式的導覽列](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1-qsgxAELdMrSDPRKV-l-N_2dW5fYeljj%2Fcasestudies-rally-rail.png \"直列式的導覽列\")\n\n在橫向標籤導覽中，當 section 被點選的時候，icon 就會變亮且標題會出現在 icon 右方，其他 icon 將會適當的移動位置。\n\n![橫向標籤導覽](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dHfpA4R1RVHn5zRSxInMllujv_C7pxv7%2Fcasestudies-rally-tabs.png \"橫向標籤導覽\")\n\n> 心得：這邊如果導覽項目數目很少，這樣設計ok。但要注意往後的擴充性，若是 section 的數目增加是否要增加 sub section，手機上方 tab 的空間是否會不夠呈現，這些都是可能會碰到的問題。\n\n# 排版\n\nRally 使用 12 grid system。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1lAQUZTvSoen3matP1gpDJqVpKnZpARy6%2Fcasestudies-rally-grid-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### 視覺層級\n\nRally 使用色彩或紗幕來區分視覺上的層級。\n\n舉例：當使用者滑動下方資料的時候，為確保統計圖固定在上方，使用不同的色彩來區分視覺層級。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dq6I1nDovqvUydVHH5jTeI9VA6ftfz7H%2Frally-flow1-170808-casestudies-rally-elevation-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n舉例：當有 popup 出現時，背景使用紗幕霧化背景。\n\n![霧化背景](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1eBiwYfz1_8oSLrlWN_9uNjA_TGVqRBS2%2Fcasestudies-rally-elevation-scrim.png \"霧化背景\")\n\n> 心得：用色彩和霧化效果來做層級區分我覺得還蠻實用且能提升質感。但在霧化背景的方式，需要考量到開發者是否能配合。若還有捨棄不了 IE 瀏覽器的公司，則會因為裝置的限制而必須要有第二方案來替代霧化的方式，比如說改用暗色且透明度低的樣式。\n\n# 顏色\n\n有時候需要顯示多個圖表在一個螢幕上，且每個圖表包含多個 sections。為了能足夠表達狀態， Rally 的配色採用 1 個主色調加上 5 個配色。這個設計讓系統呈現可讀性高且獨特的信息圖表。\n\n當三個圖表出現在同一個螢幕上，每個圖表使用其中的兩個顏色。\n\n1. Primary Green and Dark Green.\n2. Orange and Yellow.\n3. Purple and Blue.\n\n![配色](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1TnwFyAe31SQDfL21qM9hZ1dcGQVRyB23%2Fcasestudies-rally-color-75percentzoom.png \"配色\")\n\n### 顏色主題\n\n除了 6 色以外， Rally 還有一個針對這 6 個顏色延伸 10 色版的調色盤。如下圖。\n\n* 圓圈形狀代表在此 APP 中有用到的色版\n* \"P\" 代表主色調\n* 其他沒有文字的圓圈則是配色\n\n![顏色主題](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F17gZmwIGdzlDr-Hl2jTu2SSgc_ATBGaPt%2Fcasestudies-rally-color-palettes.png \"顏色主題\")\n\n> 心得：我還沒用過那麼多的配色設計過，因為顏色越多，需要考量的點會更複雜，可能需要找時間嘗試看看。\n\n# 文字與圖示\n\nRally 用兩種字體：Eczar 和 Roboto Condensed。\n\n1. Roboto Condensed：介面預設字體，適合密集的佈局。\n2. Eczar：只用在首要標題和純數字清單，適合呈現數據。\n\n![字體](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1t7i8LPPdmRkpdLV4u-p0oHvlhRTRbEb3%2Fcasestudies-rally-type.png \"字體\")\n\nRally 使用客製化的 icon 來呈現不同的 sections。\n\n1. 所有圖示使用一樣的格線架構確保一致性。\n2. 所有 Rally 圖示\n\n![圖示](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1zqz0w6AEK_D9Kxb8ntWTb8lXJHkGjakk%2Fcasestudies-rally-icons.png \"圖示\")\n\n> 心得：在數據表達的部分使用另一種字體這是一個不錯的點子，可以凸顯出數據的呈現，會想要嘗試看看。圖示的部分，在統一格線架構下設計很合理，但在一般專案時間不足的狀況下，通常我會直接使用 Material Icons ，省去設計圖示這塊。\n\n# 形狀\n\n元件根據大小使用不同的形狀類型，將形狀做分類可以讓螢幕一次放多個元件，分類包含：\n\n1. 小元件 (S)：文字輸入區塊(Filled text fields)。\n2. 中元件 (M)：卡片(Cards)。\n3. 大元件 (L)：數據表格(Data Tables)。\n\n元件都是 0 圓角。\n\n![形狀分類](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1RpTrPB3UprQBcFfZh6ZnI4xNtUEyThIQ%2Frally-shape.png \"形狀分類\")\n\n![形狀元件](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1HuOHmVEu0rKr8Bfes708nHM9osOWiHIm%2Frally-shape-b.png \"形狀元件\")\n\n# 元件\n\n### 卡片和清單\n\n在 overview 頁面使用卡片去呈現多個財務摘要，像是 Accounts 和 Bills。\n\n![卡片](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1gDGHc1gTW-FsOvmmXjZ6i5UF_U9CS0Ga%2Fcasestudies-rally-cards-1.png \"卡片\")\n\n當點選 Accounts，摘要資訊卡片會展開顯示更多細節在清單中。\n\n![清單](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F128elUbInT1Me7Ra3gJGsndRDRq6JbAcn%2Fcasestudies-rally-list.png \"清單\")\n\n### 橫幅、提示bar和對話框\n\n* 橫幅(Banners)：比較不那麼重要的訊息選擇用橫幅的方式呈現，通常會搭配圖示。\n* 提示 bar 和對話框(Snackbars and dialogs)：重要的訊息則是用提示 bar 和對話框呈現，並不會包含圖示。\n\n在平板上的橫幅呈現在導覽列旁。\n\n![橫幅 - 平板](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1X3ShTSv1KbUgazHtrp7wzXApy36TH1na%2Fcasestudies-rally-alerts-tablet.png \"橫幅 - 平板\")\n\n在手機上的橫幅呈現在最上方。\n\n![橫幅 - 手機](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1qcuHjBEJaoYI-_Vel0SlCTr4MXrlO3Ta%2Fcasestudies-rally-alerts-mobile.png \"橫幅 - 手機\")\n\n在桌機上的橫幅則是自己一個直欄位專門呈現。\n\n![橫幅 - 桌機](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1aEZcxrXD6L__739kup3Zzi5x73UFoIiz%2Fcasestudies-rally-alerts-desktop.png \"橫幅 - 桌機\")\n\n重要訊息出現提示 bar 或對話框。\n\n![對話框](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1UGbGapFacfgXBv5ijUiAjwNBKmw2v9yh%2Fcasestudies-rally-dialogs-mobile.png \"對話框\")\n\n![提示 bar](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1ccB2eglPzvAai1YC4QgkxgYlFErDtJFs%2Fcasestudies-rally-snackbar.png \"提示 bar\")\n\n> 心得：沒有將這三個元件一起混用的經驗，頂多用其中的兩個而已，所以他這樣從訊息的重要性來區分用哪種元件的方式很值得參考。\n\n# 交互動作\n\nRally 在登入頁面顯示動畫 logo 增加 APP 的印象。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SdTGjLEmVjxVQfQHUxjrbWEO9GEnbHab%2F01-rally-launch.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n當用戶點開一個帳戶時，畫面會使用從內到外漸變展開的子頁面。點選返回後，則會從外到內漸變縮合回上一頁。加強使用者對深度的感知。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SjV2Eky-4d80UhOL4dm9k-EhG-r8IDm2%2F02-rally-parentchild.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n點選頁籤則是使用左右滑動的漸變動畫。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SkeVD6imJA_MwjipNR-DbNh1xw4au9yy%2F02-rally-tabs.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n當引入新頁面元素時會使用上方的進度條作為導引。使用時間差的轉圈動畫來凸顯圓餅圖。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SmqucW2ugbXboWf8SSjVngVtm63_VLxf%2F03-rally-sequencing.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n對話框使用彈跳的方式，以傳達訊息的急迫感。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SrDQ1yFyIyFYWewhvEIIBZ9Mm0S-6G2z%2F04-rally-overshoot.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n> 心得：對於父子頁面漸變展開的動畫提升深度感知這點很認同，但在實作上還沒有真正的實行過，可以思考或和其他程式開發者討論實際在 web 或 app 撰寫時的執行難度。\n\n總結：讀完這篇研究後，對於 Material Design 在系統設計上的應用來說，我覺得是很實用的，畢竟要做系統通常都是要大量顯示資訊，如何有條理讓使用者理解顯示資訊變得很重要。這篇在配色和交互動作的部分是很值得參考的案例。\n\n## 參考資料\n\n* [Material Studies - Rally](https://material.io/design/material-studies/rally.html)","slug":"UXUI/Google-Material-Studies-Rally","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu74z0020tudhq2eunhqj","content":"<p>Material Guildline 應該很多設計師都閱讀過 N 遍了，但要設計時如何在框架下做到客制這件事應該還是很疑惑。官網上提出了幾個業界的實例分享，這點讓我很有興趣，所以接下來我會一一對這些案例做介紹。因為我上班做的案子比較多是系統類的設計，所以我第一個想介紹比較類似的是 Rally 這個案例。下面內容會一邊介紹，一邊穿插自己在職場上的一些心得或想法。</p>\n<a id=\"more\"></a>\n<h1 id=\"案例背景\"><a href=\"#案例背景\" class=\"headerlink\" title=\"案例背景\"></a>案例背景</h1><p>Rally 是一個管理財務的 APP，它會追蹤使用者的花費習慣並產生預測和適當的警示通知。Rally 是設計來呈現大量且密集的資訊，讓使用者可管理和研究資料模式。</p>\n<h3 id=\"數據性導向之美-Data-driven-aesthetic\"><a href=\"#數據性導向之美-Data-driven-aesthetic\" class=\"headerlink\" title=\"數據性導向之美 (Data-driven aesthetic)\"></a>數據性導向之美 (Data-driven aesthetic)</h3><p>UI 採用暗灰色提高質感，並用亮色系凸顯資料。在資料與背景顏色高對比之下，讓使用者更容易閱讀 APP 內的圖表。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F16CNi69TWdOluvYdoeNwd5QK4P5nkE48-%2Fcasestudies-rally-brandattributes.png\" alt=\"Rally UI\" title=\"Rally UI\"></p>\n<p>UI 設計專注在查看、研究和了解資料。圖表呈現在儀表板上，讓使用者查看花費摘要和單一交易的細節。此 UI 設計透過排版、顏色和形狀的凸顯，讓畫面是密集且直覺的。</p>\n<blockquote>\n<p>心得：蠻喜歡這樣的暗色背景搭亮色的配色，但因目前公司的一般使用者還是比較習慣白色背景的配色模式，所以暗色背景的搭配在考慮時間和緊急度下，我自己是只敢用在自己小組內部用的專案上，比較沒有時間上的壓力。</p>\n</blockquote>\n<h1 id=\"產品架構\"><a href=\"#產品架構\" class=\"headerlink\" title=\"產品架構\"></a>產品架構</h1><p>Rally 架構是層級式的，讓使用者透過不同分類查看他們的財務。</p>\n<p>內容根據個人財務區分不同的 sections，像是帳戶、預算、帳單。首頁著重在讓使用者前往這些 sections 的導向。</p>\n<h3 id=\"導覽列\"><a href=\"#導覽列\" class=\"headerlink\" title=\"導覽列\"></a>導覽列</h3><p>因為 Rally 專注在呈現和描述不同面向的財務資訊，所以如何讓使用者能輕易的在這些sections 移動是很重要的。Rally 有一個固定位置的導覽列讓使用者能方便的切換 sections。在桌機和平板，Rally 使用的是直列式的導覽列。在手機，則是用橫向標籤的方式。這項的導航模式很理想，雖然它們總是在屏幕上，但佔用的空間非常小。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1PIJeS6GJLIExYX9mWOmb7UzWB0-Nl5VB%2Fcasestudies-family-rally.png\" alt=\"Rally 導覽列\" title=\"Rally 導覽列\"></p>\n<p>在直列式的導覽列中，每個目的地會用一個獨特的 icon 呈現。當 section 被點選的時候，icon 就會變亮且標題會出現在 icon 下方。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1-qsgxAELdMrSDPRKV-l-N_2dW5fYeljj%2Fcasestudies-rally-rail.png\" alt=\"直列式的導覽列\" title=\"直列式的導覽列\"></p>\n<p>在橫向標籤導覽中，當 section 被點選的時候，icon 就會變亮且標題會出現在 icon 右方，其他 icon 將會適當的移動位置。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dHfpA4R1RVHn5zRSxInMllujv_C7pxv7%2Fcasestudies-rally-tabs.png\" alt=\"橫向標籤導覽\" title=\"橫向標籤導覽\"></p>\n<blockquote>\n<p>心得：這邊如果導覽項目數目很少，這樣設計ok。但要注意往後的擴充性，若是 section 的數目增加是否要增加 sub section，手機上方 tab 的空間是否會不夠呈現，這些都是可能會碰到的問題。</p>\n</blockquote>\n<h1 id=\"排版\"><a href=\"#排版\" class=\"headerlink\" title=\"排版\"></a>排版</h1><p>Rally 使用 12 grid system。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1lAQUZTvSoen3matP1gpDJqVpKnZpARy6%2Fcasestudies-rally-grid-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"視覺層級\"><a href=\"#視覺層級\" class=\"headerlink\" title=\"視覺層級\"></a>視覺層級</h3><p>Rally 使用色彩或紗幕來區分視覺上的層級。</p>\n<p>舉例：當使用者滑動下方資料的時候，為確保統計圖固定在上方，使用不同的色彩來區分視覺層級。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dq6I1nDovqvUydVHH5jTeI9VA6ftfz7H%2Frally-flow1-170808-casestudies-rally-elevation-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>舉例：當有 popup 出現時，背景使用紗幕霧化背景。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1eBiwYfz1_8oSLrlWN_9uNjA_TGVqRBS2%2Fcasestudies-rally-elevation-scrim.png\" alt=\"霧化背景\" title=\"霧化背景\"></p>\n<blockquote>\n<p>心得：用色彩和霧化效果來做層級區分我覺得還蠻實用且能提升質感。但在霧化背景的方式，需要考量到開發者是否能配合。若還有捨棄不了 IE 瀏覽器的公司，則會因為裝置的限制而必須要有第二方案來替代霧化的方式，比如說改用暗色且透明度低的樣式。</p>\n</blockquote>\n<h1 id=\"顏色\"><a href=\"#顏色\" class=\"headerlink\" title=\"顏色\"></a>顏色</h1><p>有時候需要顯示多個圖表在一個螢幕上，且每個圖表包含多個 sections。為了能足夠表達狀態， Rally 的配色採用 1 個主色調加上 5 個配色。這個設計讓系統呈現可讀性高且獨特的信息圖表。</p>\n<p>當三個圖表出現在同一個螢幕上，每個圖表使用其中的兩個顏色。</p>\n<ol>\n<li>Primary Green and Dark Green.</li>\n<li>Orange and Yellow.</li>\n<li>Purple and Blue.</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1TnwFyAe31SQDfL21qM9hZ1dcGQVRyB23%2Fcasestudies-rally-color-75percentzoom.png\" alt=\"配色\" title=\"配色\"></p>\n<h3 id=\"顏色主題\"><a href=\"#顏色主題\" class=\"headerlink\" title=\"顏色主題\"></a>顏色主題</h3><p>除了 6 色以外， Rally 還有一個針對這 6 個顏色延伸 10 色版的調色盤。如下圖。</p>\n<ul>\n<li>圓圈形狀代表在此 APP 中有用到的色版</li>\n<li>“P” 代表主色調</li>\n<li>其他沒有文字的圓圈則是配色</li>\n</ul>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F17gZmwIGdzlDr-Hl2jTu2SSgc_ATBGaPt%2Fcasestudies-rally-color-palettes.png\" alt=\"顏色主題\" title=\"顏色主題\"></p>\n<blockquote>\n<p>心得：我還沒用過那麼多的配色設計過，因為顏色越多，需要考量的點會更複雜，可能需要找時間嘗試看看。</p>\n</blockquote>\n<h1 id=\"文字與圖示\"><a href=\"#文字與圖示\" class=\"headerlink\" title=\"文字與圖示\"></a>文字與圖示</h1><p>Rally 用兩種字體：Eczar 和 Roboto Condensed。</p>\n<ol>\n<li>Roboto Condensed：介面預設字體，適合密集的佈局。</li>\n<li>Eczar：只用在首要標題和純數字清單，適合呈現數據。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1t7i8LPPdmRkpdLV4u-p0oHvlhRTRbEb3%2Fcasestudies-rally-type.png\" alt=\"字體\" title=\"字體\"></p>\n<p>Rally 使用客製化的 icon 來呈現不同的 sections。</p>\n<ol>\n<li>所有圖示使用一樣的格線架構確保一致性。</li>\n<li>所有 Rally 圖示</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1zqz0w6AEK_D9Kxb8ntWTb8lXJHkGjakk%2Fcasestudies-rally-icons.png\" alt=\"圖示\" title=\"圖示\"></p>\n<blockquote>\n<p>心得：在數據表達的部分使用另一種字體這是一個不錯的點子，可以凸顯出數據的呈現，會想要嘗試看看。圖示的部分，在統一格線架構下設計很合理，但在一般專案時間不足的狀況下，通常我會直接使用 Material Icons ，省去設計圖示這塊。</p>\n</blockquote>\n<h1 id=\"形狀\"><a href=\"#形狀\" class=\"headerlink\" title=\"形狀\"></a>形狀</h1><p>元件根據大小使用不同的形狀類型，將形狀做分類可以讓螢幕一次放多個元件，分類包含：</p>\n<ol>\n<li>小元件 (S)：文字輸入區塊(Filled text fields)。</li>\n<li>中元件 (M)：卡片(Cards)。</li>\n<li>大元件 (L)：數據表格(Data Tables)。</li>\n</ol>\n<p>元件都是 0 圓角。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1RpTrPB3UprQBcFfZh6ZnI4xNtUEyThIQ%2Frally-shape.png\" alt=\"形狀分類\" title=\"形狀分類\"></p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1HuOHmVEu0rKr8Bfes708nHM9osOWiHIm%2Frally-shape-b.png\" alt=\"形狀元件\" title=\"形狀元件\"></p>\n<h1 id=\"元件\"><a href=\"#元件\" class=\"headerlink\" title=\"元件\"></a>元件</h1><h3 id=\"卡片和清單\"><a href=\"#卡片和清單\" class=\"headerlink\" title=\"卡片和清單\"></a>卡片和清單</h3><p>在 overview 頁面使用卡片去呈現多個財務摘要，像是 Accounts 和 Bills。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1gDGHc1gTW-FsOvmmXjZ6i5UF_U9CS0Ga%2Fcasestudies-rally-cards-1.png\" alt=\"卡片\" title=\"卡片\"></p>\n<p>當點選 Accounts，摘要資訊卡片會展開顯示更多細節在清單中。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F128elUbInT1Me7Ra3gJGsndRDRq6JbAcn%2Fcasestudies-rally-list.png\" alt=\"清單\" title=\"清單\"></p>\n<h3 id=\"橫幅、提示bar和對話框\"><a href=\"#橫幅、提示bar和對話框\" class=\"headerlink\" title=\"橫幅、提示bar和對話框\"></a>橫幅、提示bar和對話框</h3><ul>\n<li>橫幅(Banners)：比較不那麼重要的訊息選擇用橫幅的方式呈現，通常會搭配圖示。</li>\n<li>提示 bar 和對話框(Snackbars and dialogs)：重要的訊息則是用提示 bar 和對話框呈現，並不會包含圖示。</li>\n</ul>\n<p>在平板上的橫幅呈現在導覽列旁。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1X3ShTSv1KbUgazHtrp7wzXApy36TH1na%2Fcasestudies-rally-alerts-tablet.png\" alt=\"橫幅 - 平板\" title=\"橫幅 - 平板\"></p>\n<p>在手機上的橫幅呈現在最上方。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1qcuHjBEJaoYI-_Vel0SlCTr4MXrlO3Ta%2Fcasestudies-rally-alerts-mobile.png\" alt=\"橫幅 - 手機\" title=\"橫幅 - 手機\"></p>\n<p>在桌機上的橫幅則是自己一個直欄位專門呈現。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1aEZcxrXD6L__739kup3Zzi5x73UFoIiz%2Fcasestudies-rally-alerts-desktop.png\" alt=\"橫幅 - 桌機\" title=\"橫幅 - 桌機\"></p>\n<p>重要訊息出現提示 bar 或對話框。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1UGbGapFacfgXBv5ijUiAjwNBKmw2v9yh%2Fcasestudies-rally-dialogs-mobile.png\" alt=\"對話框\" title=\"對話框\"></p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1ccB2eglPzvAai1YC4QgkxgYlFErDtJFs%2Fcasestudies-rally-snackbar.png\" alt=\"提示 bar\" title=\"提示 bar\"></p>\n<blockquote>\n<p>心得：沒有將這三個元件一起混用的經驗，頂多用其中的兩個而已，所以他這樣從訊息的重要性來區分用哪種元件的方式很值得參考。</p>\n</blockquote>\n<h1 id=\"交互動作\"><a href=\"#交互動作\" class=\"headerlink\" title=\"交互動作\"></a>交互動作</h1><p>Rally 在登入頁面顯示動畫 logo 增加 APP 的印象。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SdTGjLEmVjxVQfQHUxjrbWEO9GEnbHab%2F01-rally-launch.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>當用戶點開一個帳戶時，畫面會使用從內到外漸變展開的子頁面。點選返回後，則會從外到內漸變縮合回上一頁。加強使用者對深度的感知。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SjV2Eky-4d80UhOL4dm9k-EhG-r8IDm2%2F02-rally-parentchild.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>點選頁籤則是使用左右滑動的漸變動畫。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SkeVD6imJA_MwjipNR-DbNh1xw4au9yy%2F02-rally-tabs.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>當引入新頁面元素時會使用上方的進度條作為導引。使用時間差的轉圈動畫來凸顯圓餅圖。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SmqucW2ugbXboWf8SSjVngVtm63_VLxf%2F03-rally-sequencing.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>對話框使用彈跳的方式，以傳達訊息的急迫感。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SrDQ1yFyIyFYWewhvEIIBZ9Mm0S-6G2z%2F04-rally-overshoot.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<blockquote>\n<p>心得：對於父子頁面漸變展開的動畫提升深度感知這點很認同，但在實作上還沒有真正的實行過，可以思考或和其他程式開發者討論實際在 web 或 app 撰寫時的執行難度。</p>\n</blockquote>\n<p>總結：讀完這篇研究後，對於 Material Design 在系統設計上的應用來說，我覺得是很實用的，畢竟要做系統通常都是要大量顯示資訊，如何有條理讓使用者理解顯示資訊變得很重要。這篇在配色和交互動作的部分是很值得參考的案例。</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://material.io/design/material-studies/rally.html\" target=\"_blank\" rel=\"noopener\">Material Studies - Rally</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no","excerpt":"<p>Material Guildline 應該很多設計師都閱讀過 N 遍了，但要設計時如何在框架下做到客制這件事應該還是很疑惑。官網上提出了幾個業界的實例分享，這點讓我很有興趣，所以接下來我會一一對這些案例做介紹。因為我上班做的案子比較多是系統類的設計，所以我第一個想介紹比較類似的是 Rally 這個案例。下面內容會一邊介紹，一邊穿插自己在職場上的一些心得或想法。</p>","more":"<h1 id=\"案例背景\"><a href=\"#案例背景\" class=\"headerlink\" title=\"案例背景\"></a>案例背景</h1><p>Rally 是一個管理財務的 APP，它會追蹤使用者的花費習慣並產生預測和適當的警示通知。Rally 是設計來呈現大量且密集的資訊，讓使用者可管理和研究資料模式。</p>\n<h3 id=\"數據性導向之美-Data-driven-aesthetic\"><a href=\"#數據性導向之美-Data-driven-aesthetic\" class=\"headerlink\" title=\"數據性導向之美 (Data-driven aesthetic)\"></a>數據性導向之美 (Data-driven aesthetic)</h3><p>UI 採用暗灰色提高質感，並用亮色系凸顯資料。在資料與背景顏色高對比之下，讓使用者更容易閱讀 APP 內的圖表。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F16CNi69TWdOluvYdoeNwd5QK4P5nkE48-%2Fcasestudies-rally-brandattributes.png\" alt=\"Rally UI\" title=\"Rally UI\"></p>\n<p>UI 設計專注在查看、研究和了解資料。圖表呈現在儀表板上，讓使用者查看花費摘要和單一交易的細節。此 UI 設計透過排版、顏色和形狀的凸顯，讓畫面是密集且直覺的。</p>\n<blockquote>\n<p>心得：蠻喜歡這樣的暗色背景搭亮色的配色，但因目前公司的一般使用者還是比較習慣白色背景的配色模式，所以暗色背景的搭配在考慮時間和緊急度下，我自己是只敢用在自己小組內部用的專案上，比較沒有時間上的壓力。</p>\n</blockquote>\n<h1 id=\"產品架構\"><a href=\"#產品架構\" class=\"headerlink\" title=\"產品架構\"></a>產品架構</h1><p>Rally 架構是層級式的，讓使用者透過不同分類查看他們的財務。</p>\n<p>內容根據個人財務區分不同的 sections，像是帳戶、預算、帳單。首頁著重在讓使用者前往這些 sections 的導向。</p>\n<h3 id=\"導覽列\"><a href=\"#導覽列\" class=\"headerlink\" title=\"導覽列\"></a>導覽列</h3><p>因為 Rally 專注在呈現和描述不同面向的財務資訊，所以如何讓使用者能輕易的在這些sections 移動是很重要的。Rally 有一個固定位置的導覽列讓使用者能方便的切換 sections。在桌機和平板，Rally 使用的是直列式的導覽列。在手機，則是用橫向標籤的方式。這項的導航模式很理想，雖然它們總是在屏幕上，但佔用的空間非常小。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1PIJeS6GJLIExYX9mWOmb7UzWB0-Nl5VB%2Fcasestudies-family-rally.png\" alt=\"Rally 導覽列\" title=\"Rally 導覽列\"></p>\n<p>在直列式的導覽列中，每個目的地會用一個獨特的 icon 呈現。當 section 被點選的時候，icon 就會變亮且標題會出現在 icon 下方。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1-qsgxAELdMrSDPRKV-l-N_2dW5fYeljj%2Fcasestudies-rally-rail.png\" alt=\"直列式的導覽列\" title=\"直列式的導覽列\"></p>\n<p>在橫向標籤導覽中，當 section 被點選的時候，icon 就會變亮且標題會出現在 icon 右方，其他 icon 將會適當的移動位置。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dHfpA4R1RVHn5zRSxInMllujv_C7pxv7%2Fcasestudies-rally-tabs.png\" alt=\"橫向標籤導覽\" title=\"橫向標籤導覽\"></p>\n<blockquote>\n<p>心得：這邊如果導覽項目數目很少，這樣設計ok。但要注意往後的擴充性，若是 section 的數目增加是否要增加 sub section，手機上方 tab 的空間是否會不夠呈現，這些都是可能會碰到的問題。</p>\n</blockquote>\n<h1 id=\"排版\"><a href=\"#排版\" class=\"headerlink\" title=\"排版\"></a>排版</h1><p>Rally 使用 12 grid system。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1lAQUZTvSoen3matP1gpDJqVpKnZpARy6%2Fcasestudies-rally-grid-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"視覺層級\"><a href=\"#視覺層級\" class=\"headerlink\" title=\"視覺層級\"></a>視覺層級</h3><p>Rally 使用色彩或紗幕來區分視覺上的層級。</p>\n<p>舉例：當使用者滑動下方資料的時候，為確保統計圖固定在上方，使用不同的色彩來區分視覺層級。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dq6I1nDovqvUydVHH5jTeI9VA6ftfz7H%2Frally-flow1-170808-casestudies-rally-elevation-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>舉例：當有 popup 出現時，背景使用紗幕霧化背景。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1eBiwYfz1_8oSLrlWN_9uNjA_TGVqRBS2%2Fcasestudies-rally-elevation-scrim.png\" alt=\"霧化背景\" title=\"霧化背景\"></p>\n<blockquote>\n<p>心得：用色彩和霧化效果來做層級區分我覺得還蠻實用且能提升質感。但在霧化背景的方式，需要考量到開發者是否能配合。若還有捨棄不了 IE 瀏覽器的公司，則會因為裝置的限制而必須要有第二方案來替代霧化的方式，比如說改用暗色且透明度低的樣式。</p>\n</blockquote>\n<h1 id=\"顏色\"><a href=\"#顏色\" class=\"headerlink\" title=\"顏色\"></a>顏色</h1><p>有時候需要顯示多個圖表在一個螢幕上，且每個圖表包含多個 sections。為了能足夠表達狀態， Rally 的配色採用 1 個主色調加上 5 個配色。這個設計讓系統呈現可讀性高且獨特的信息圖表。</p>\n<p>當三個圖表出現在同一個螢幕上，每個圖表使用其中的兩個顏色。</p>\n<ol>\n<li>Primary Green and Dark Green.</li>\n<li>Orange and Yellow.</li>\n<li>Purple and Blue.</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1TnwFyAe31SQDfL21qM9hZ1dcGQVRyB23%2Fcasestudies-rally-color-75percentzoom.png\" alt=\"配色\" title=\"配色\"></p>\n<h3 id=\"顏色主題\"><a href=\"#顏色主題\" class=\"headerlink\" title=\"顏色主題\"></a>顏色主題</h3><p>除了 6 色以外， Rally 還有一個針對這 6 個顏色延伸 10 色版的調色盤。如下圖。</p>\n<ul>\n<li>圓圈形狀代表在此 APP 中有用到的色版</li>\n<li>“P” 代表主色調</li>\n<li>其他沒有文字的圓圈則是配色</li>\n</ul>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F17gZmwIGdzlDr-Hl2jTu2SSgc_ATBGaPt%2Fcasestudies-rally-color-palettes.png\" alt=\"顏色主題\" title=\"顏色主題\"></p>\n<blockquote>\n<p>心得：我還沒用過那麼多的配色設計過，因為顏色越多，需要考量的點會更複雜，可能需要找時間嘗試看看。</p>\n</blockquote>\n<h1 id=\"文字與圖示\"><a href=\"#文字與圖示\" class=\"headerlink\" title=\"文字與圖示\"></a>文字與圖示</h1><p>Rally 用兩種字體：Eczar 和 Roboto Condensed。</p>\n<ol>\n<li>Roboto Condensed：介面預設字體，適合密集的佈局。</li>\n<li>Eczar：只用在首要標題和純數字清單，適合呈現數據。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1t7i8LPPdmRkpdLV4u-p0oHvlhRTRbEb3%2Fcasestudies-rally-type.png\" alt=\"字體\" title=\"字體\"></p>\n<p>Rally 使用客製化的 icon 來呈現不同的 sections。</p>\n<ol>\n<li>所有圖示使用一樣的格線架構確保一致性。</li>\n<li>所有 Rally 圖示</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1zqz0w6AEK_D9Kxb8ntWTb8lXJHkGjakk%2Fcasestudies-rally-icons.png\" alt=\"圖示\" title=\"圖示\"></p>\n<blockquote>\n<p>心得：在數據表達的部分使用另一種字體這是一個不錯的點子，可以凸顯出數據的呈現，會想要嘗試看看。圖示的部分，在統一格線架構下設計很合理，但在一般專案時間不足的狀況下，通常我會直接使用 Material Icons ，省去設計圖示這塊。</p>\n</blockquote>\n<h1 id=\"形狀\"><a href=\"#形狀\" class=\"headerlink\" title=\"形狀\"></a>形狀</h1><p>元件根據大小使用不同的形狀類型，將形狀做分類可以讓螢幕一次放多個元件，分類包含：</p>\n<ol>\n<li>小元件 (S)：文字輸入區塊(Filled text fields)。</li>\n<li>中元件 (M)：卡片(Cards)。</li>\n<li>大元件 (L)：數據表格(Data Tables)。</li>\n</ol>\n<p>元件都是 0 圓角。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1RpTrPB3UprQBcFfZh6ZnI4xNtUEyThIQ%2Frally-shape.png\" alt=\"形狀分類\" title=\"形狀分類\"></p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1HuOHmVEu0rKr8Bfes708nHM9osOWiHIm%2Frally-shape-b.png\" alt=\"形狀元件\" title=\"形狀元件\"></p>\n<h1 id=\"元件\"><a href=\"#元件\" class=\"headerlink\" title=\"元件\"></a>元件</h1><h3 id=\"卡片和清單\"><a href=\"#卡片和清單\" class=\"headerlink\" title=\"卡片和清單\"></a>卡片和清單</h3><p>在 overview 頁面使用卡片去呈現多個財務摘要，像是 Accounts 和 Bills。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1gDGHc1gTW-FsOvmmXjZ6i5UF_U9CS0Ga%2Fcasestudies-rally-cards-1.png\" alt=\"卡片\" title=\"卡片\"></p>\n<p>當點選 Accounts，摘要資訊卡片會展開顯示更多細節在清單中。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F128elUbInT1Me7Ra3gJGsndRDRq6JbAcn%2Fcasestudies-rally-list.png\" alt=\"清單\" title=\"清單\"></p>\n<h3 id=\"橫幅、提示bar和對話框\"><a href=\"#橫幅、提示bar和對話框\" class=\"headerlink\" title=\"橫幅、提示bar和對話框\"></a>橫幅、提示bar和對話框</h3><ul>\n<li>橫幅(Banners)：比較不那麼重要的訊息選擇用橫幅的方式呈現，通常會搭配圖示。</li>\n<li>提示 bar 和對話框(Snackbars and dialogs)：重要的訊息則是用提示 bar 和對話框呈現，並不會包含圖示。</li>\n</ul>\n<p>在平板上的橫幅呈現在導覽列旁。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1X3ShTSv1KbUgazHtrp7wzXApy36TH1na%2Fcasestudies-rally-alerts-tablet.png\" alt=\"橫幅 - 平板\" title=\"橫幅 - 平板\"></p>\n<p>在手機上的橫幅呈現在最上方。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1qcuHjBEJaoYI-_Vel0SlCTr4MXrlO3Ta%2Fcasestudies-rally-alerts-mobile.png\" alt=\"橫幅 - 手機\" title=\"橫幅 - 手機\"></p>\n<p>在桌機上的橫幅則是自己一個直欄位專門呈現。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1aEZcxrXD6L__739kup3Zzi5x73UFoIiz%2Fcasestudies-rally-alerts-desktop.png\" alt=\"橫幅 - 桌機\" title=\"橫幅 - 桌機\"></p>\n<p>重要訊息出現提示 bar 或對話框。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1UGbGapFacfgXBv5ijUiAjwNBKmw2v9yh%2Fcasestudies-rally-dialogs-mobile.png\" alt=\"對話框\" title=\"對話框\"></p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1ccB2eglPzvAai1YC4QgkxgYlFErDtJFs%2Fcasestudies-rally-snackbar.png\" alt=\"提示 bar\" title=\"提示 bar\"></p>\n<blockquote>\n<p>心得：沒有將這三個元件一起混用的經驗，頂多用其中的兩個而已，所以他這樣從訊息的重要性來區分用哪種元件的方式很值得參考。</p>\n</blockquote>\n<h1 id=\"交互動作\"><a href=\"#交互動作\" class=\"headerlink\" title=\"交互動作\"></a>交互動作</h1><p>Rally 在登入頁面顯示動畫 logo 增加 APP 的印象。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SdTGjLEmVjxVQfQHUxjrbWEO9GEnbHab%2F01-rally-launch.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>當用戶點開一個帳戶時，畫面會使用從內到外漸變展開的子頁面。點選返回後，則會從外到內漸變縮合回上一頁。加強使用者對深度的感知。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SjV2Eky-4d80UhOL4dm9k-EhG-r8IDm2%2F02-rally-parentchild.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>點選頁籤則是使用左右滑動的漸變動畫。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SkeVD6imJA_MwjipNR-DbNh1xw4au9yy%2F02-rally-tabs.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>當引入新頁面元素時會使用上方的進度條作為導引。使用時間差的轉圈動畫來凸顯圓餅圖。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SmqucW2ugbXboWf8SSjVngVtm63_VLxf%2F03-rally-sequencing.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>對話框使用彈跳的方式，以傳達訊息的急迫感。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SrDQ1yFyIyFYWewhvEIIBZ9Mm0S-6G2z%2F04-rally-overshoot.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<blockquote>\n<p>心得：對於父子頁面漸變展開的動畫提升深度感知這點很認同，但在實作上還沒有真正的實行過，可以思考或和其他程式開發者討論實際在 web 或 app 撰寫時的執行難度。</p>\n</blockquote>\n<p>總結：讀完這篇研究後，對於 Material Design 在系統設計上的應用來說，我覺得是很實用的，畢竟要做系統通常都是要大量顯示資訊，如何有條理讓使用者理解顯示資訊變得很重要。這篇在配色和交互動作的部分是很值得參考的案例。</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://material.io/design/material-studies/rally.html\" target=\"_blank\" rel=\"noopener\">Material Studies - Rally</a></li>\n</ul>"},{"title":"Google Material Studies - Reply","thumbnailImage":"https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no","thumbnailImagePosition":"left","coverImage":"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SQ4QjhRgR9OjvjBR80HVXxxMOSg9U7Zs%2Fcasestudies-reply-brandattributes.png","coverMeta":"out","date":"2019-04-30T16:00:00.000Z","updated":"2019-04-30T16:00:00.000Z","_content":"\n上次介紹的 Rally 是關於統計分析型的系統，這次要來看的是偏向應用型的系統 Reply。\n\n<!--more-->\n\n# 案例背景\n\nReply 是一款幫助個人和群組溝通的 APP，其設計理念為提供清晰、易讀、直觀和易用的應用程式。\n\n### 功能性導向之美 (Functional aesthetic)\n\nReply 的品牌精神強調溝通的重要性。因此，設計著重於功能品質，放置許多易用性元素。\n\nReply 的品牌時常伴隨著用戶的操作動作，例如從品牌的 logo 點擊展開導覽列。\n\n> 心得：這種會讓使用者頻繁編輯操作的 APP 也常常出現在公司內部，例如報價單、簽核表單等等的應用程式，所以在許多使用者操作行為下，如何清楚的呈現資訊和導引使用者動作變得非常重要。\n\n# 產品架構\n\nReply 使用類似於其他電子郵件應用程序的產品結構：包含新郵件和存檔郵件的收件箱，以及圍繞在組織和執行與這些郵件相關操作的 UI 。郵件可以加上星星標示、發送、刪除、標記為垃圾郵件，或以使用者自定義方式來整理郵件。\n\n### 專注在使用者任務\n\n由於使用者任務主要涉及內容生產和處理，因此螢幕空間專注於內容呈現而非其他 UI 元素。為確保內容和導航列都有足夠的空間，Reply 會針對桌機、平板、手機裝置使用不同的導航模式。\n\n![Reply 導覽模式](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1XRLqbRWX43Sm4h1u8y04J4O7SKLY1ASs%2Fcasestudies-reply-family.png \"Reply 導覽模式\")\n\n### 抽屜式導覽列\n\n在桌機，Reply 使用標準的抽屜式導覽列。導覽列同時使用 icon 和文字。最上方包含設置、切換帳號和有搭配箭頭的 logo 拿來縮合導覽列。點擊搭配箭頭的 logo，將會縮合成軌道式導覽列。\n\n![Reply 桌機導覽列](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1odXyicfqCiZ-NfE4Oi8iNP4wO-rmEZZ9%2Fcasestudies-reply-productarch.png \"Reply 桌機導覽列\")\n\n### 底部 bar 導覽列\n\n在手機，Reply 使用底部 bar 導覽列。點擊左下角的 Reply icon ，他會從底部展開顯示抽屜式導航列，其中包含設定、切換帳戶頭像等動作。再次點擊 Reply icon 時，導航會關閉，導航列會關閉並返回底部預設的 bar 狀態。\n\n![Reply 手機導覽列](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1OVQU4zWktolBn0pEaT9fu_5xCxGsXzm9%2Fcasestudies-reply-bottomsheet.png \"Reply 手機導覽列\")\n\n### 軌道式導覽列\n\n透過點擊 Reply logo，軌道式導覽列可以展開變成抽屜式導覽列。Logo 旁邊的箭頭表明 Reply logo 是可交互的。\n\n軌道式導覽列非常適合在平板電腦上使用，因為它可以顯示大量的目的地，且佔用很小的空間。當軌道式導覽列被展開時會顯示使用者創建的資料夾，讓用戶讀取資料夾的標題文字。\n\n當收合時，軌道式導覽列不顯示使用者創建的資料夾。因為這些自創的資料夾都使用同個 icon，他們無法用單一 icon 做區別。\n\n![Reply 平板導覽列](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1tr41eJcVoKTnE7rq9vDBpaWUlVLdTlPa%2Fcasestudies-reply-railnav.png \"Reply 平板導覽列\")\n\n> 心得：手機底部的導覽列是我沒嘗試過的設計，因為工作上比較常做 Web 的應用，所以通常會使用上方 bar。但這樣使用下方 bar ，可以讓內容集中在上方，對於大量內容的呈現是很好的選擇。\n\n# 排版\n\nReply 使用 12 grid system。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1HuRM4KXNObz38eqqiQsqUusTWe_iua8E%2Fcasestudies-reply-grid-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### 視覺層級\n\nReply 使用顏色來區分不同的元件。例如，卡片容器是可見的，因為卡片具有白色表面顏色，而應用程式的背景是灰色的。\n\n由於 Reply 有時候會顯示密集的內容，因此將陰影移除會降低視覺的複雜性。並將項目的間距拉小，從而為內容流出更多的空間。\n\n![視覺層級](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1EmDZJ6SLz0CwwbxPiaYXqkTDbt2n_FKI%2Fcasestudies-reply-elevation.png \"視覺層級\")\n\n> 心得：利用小間距和去除陰影來顯示密集的內容，這點我在工作上也常常用到，最近剛做產線人員掃條碼顯示 64 條資料要同時呈現在一個畫面上，光是設計就佔了很重要的角色，畢竟在寫程式之前可以先有個底，才不用花費大量時間在調整版面上。\n\n# 顏色\n\nReply 的顏色主題使用一個主色調(深藍灰色)和一個輔助色(橘色)。\n\n由於輔助色很少用到，因此 Reply 的 UI 通常是單色的，主要使用主色調的深淺變化。這種微妙的顏色主題可以輕鬆閱讀內容而不會分心，並且可以輕鬆看到頭像。\n\n每當使用輔助色的時候，視覺上都會產生明顯的影響。\n\n![顏色主題](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1XUGSUZeLYqhH--JBBHWLkRnJzVmX13oR%2Fcasestudies-reply-color.png \"顏色主題\")\n\n> 心得：這種配色是我平常常用的方式，因為顏色少的話在配色方面比較不容易混亂，相較於上一篇介紹 [Rally](../../../../../2019/04/05/UXUI/Google-Material-Studies-Rally/) 的 6 色，Reply 就是保守派。\n\n# 文字與圖示\n\nReply 使用 Work Sans 作為字體。不同比例的 Work Sans 提供了 Reply 內容所需的種類。透過使用六種不同的權重來呈現內容：Light，Regular，Medium，SemiBold和Bold。\n\n![字體](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1WzYaZo4FsrHq8dgXw-hQ0OViJ56dRDNM%2Freplytypescale.png \"字體\")\n\nReply 的 icon 具有細微的風格，表達品牌也同時專注於 icon 識別與功能。\n\n1. 所有圖示使用一樣的格線架構確保一致性。\n2. 所有 Reply 圖示\n\n![圖示](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1J1sfDmQOyuvwfqAID1GY5d9bO66G5wVm%2Fcasestudies-reply-icons-alt.png \"圖示\")\n\n# 形狀\n\n元件根據大小使用不同的形狀類型，將形狀做分類可以讓螢幕一次放多個元件，分類包含：\n\n1. 小元件 (S)：延伸的 FAB (floating action button)。圓角 50%。\n2. 中元件 (M)：卡片 (Cards)。圓角 0。\n3. 大元件 (L)：底部清單 (Bottom sheets)。圓角 12dp 12dp 0 0。\n\n![形狀分類](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1Zv545CazM0c_SvUuZqnUg6hE7Dv-S3m0%2Freply-shape.png \"形狀分類\")\n\n![形狀元件](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1J8hIuMxjeCb-xIkot0krL8abdBIIIqfw%2Freply-shape-b.png \"形狀元件\")\n\n# 元件\n\n### 浮動動作按鈕 (Floating action button)\n\n在手機上， Reply 在底部嵌入自定義的 FAB (Floating action button)。\n\n![手機自定義的 FAB](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1GhRm29BQNQHyLVPO0q_JdgYN4G82YjUS%2Fcasestudies-reply-nestedfab.png \"手機自定義的 FAB\")\n\n在桌機上， Reply 使用自定義的 FAB 延伸，和抽屜式導覽做搭配。\n\n![桌機自定義的 FAB](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1wNWnttN_BLCzr5bi2w-8VDEbCTV8sh66%2Fcasestudies-reply-extendedfab.png \"桌機自定義的 FAB\")\n\n### 底部 bar, 底部清單\n\n在手機，Reply 使用客制的底部 bar 和動作按鈕。\n\n1. 預設的底部 bar\n2. Reply 的底部 bar 使用客制的 icon, 顏色和形狀。Reply logo 做為選單功能 icon 被包含在元件中。客制形狀的底部 bar 包含浮動動作按鈕。\n\n![底部 bar](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1jTk6oF1ib0k1wIhXnjTLn0kgEZxNznl5%2Fcasestudies-reply-bottombar-compare.png \"底部 bar\")\n\n在手機，底部 bar 是切換導覽和進行動作的主要方式。\n當使用者選取多個進行動作時，底部 bar 會變成內文動作 bar。\n\n![內文動作 bar](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1a-17T_B8F7nlrJc9pJ6opEdFG-cuccmZ%2Fcasestudies-reply-contextualactionbar.png \"內文動作 bar\")\n\n當使用者滑動頁面的時候，底部 bar 會從螢幕消失，只剩下 FAB 按鈕。\n\n![滑動頁面剩下 FAB](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1I1RcG9mNZYJgCPZu9u_wsYBaiHxNIJ8Q%2Fcasestudies-reply-floatingfab.png \"滑動頁面剩下 FAB\")\n\n### 卡片\n\nReply 將郵件呈現在客制的方角卡片上。每張卡片的間距非常小，因為顏色代表每張卡片的邊界(沒有使用任何陰影)。小間距讓更多內容可以呈現在螢幕上。\n\n當卡片往右邊滑時，會出現對郵件標示星號的動作按鈕。\n\n![卡片往右滑](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1FJEijR5c1uTkUcHsUUU0GHLuupehX39-%2Fcasestudies-reply-cards-1.png \"卡片往右滑\")\n\n當卡片往左邊滑時，會出現對郵件刪除的動作按鈕。\n\n![卡片往左滑](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1WZlOkz0ZWCN4BhIWrvM7H4NsvlNxt5OI%2Fcasestudies-reply-cards-2.png \"卡片往左滑\")\n\n### 小標籤 (Chips)\n\nReply 的小標籤 (Chips) 使用客制的文字、顏色和圖像大小。在視覺上和品牌相吻合。\n\n![小標籤](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1bQe04HeiZ4CLLKEVXGs_B-yYd4mc_Ztx%2Fcasestudies-reply-chips-alt.png \"小標籤\")\n\n> 心得：此專案對許多 material components 做客製化的樣式修改，礙於工作要同時做設計和開發的時間限制下，我比較沒有對這方面下過功夫，或許下次我可以從微調一些元件樣式來增加對品牌的塑造。\n\n# 交互動作\n\nReply logo 的動畫其描繪靈感來自捲曲紙張路徑。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1CmJcj6oa4Qwo_i8KkNaruAtMOCNnnpfw%2F01-launch.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\nReply 使用較短的動畫時間來加強動作效率。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1MfIr9GSQ4iAfUNoAtKIUKX0lP6Kxt8kC%2F02-reply-navtransitions.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n插圖動畫在用戶使用的關鍵點出現，例如完成收件夾中每個項目的存檔後，觸發了一個慶祝動畫。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SapnI_EXJwjkvMb87hWWakpTMLIKoxiQ%2F03-reply-inboxzero.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n當使用者將頁面往下拉重新整理時， Reply 的 logo 動畫會出現在上方。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F120IhHIDr-BHTPrTmFnXpEHfsOJEdVsg8%2F04-reply-pulltorefresh.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n> 心得：logo 動畫二次使用在 Refresh 頁面上，我覺得這點非常不錯，除了讓畫面生動起來也可以節省設計時間。\n\n總結：Reply 讓我學到更多對 material component 做更細微設計的靈感，希望之後有機會多做一點有趣的元件設計提升品牌形象。\n\n## 參考資料\n\n* [Material Studies - Reply](https://material.io/design/material-studies/reply.html)","source":"_posts/UXUI/Google-Material-Studies-Reply.md","raw":"---\ntitle: Google Material Studies - Reply\ncategories:\n  - UXUI\n  - Material Design\nthumbnailImage: https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no\nthumbnailImagePosition: left\ncoverImage: https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SQ4QjhRgR9OjvjBR80HVXxxMOSg9U7Zs%2Fcasestudies-reply-brandattributes.png\ncoverMeta: out\ntags: [UX, UI, Material Design]\ndate: 2019/05/01\nupdated: 2019/05/01\n---\n\n上次介紹的 Rally 是關於統計分析型的系統，這次要來看的是偏向應用型的系統 Reply。\n\n<!--more-->\n\n# 案例背景\n\nReply 是一款幫助個人和群組溝通的 APP，其設計理念為提供清晰、易讀、直觀和易用的應用程式。\n\n### 功能性導向之美 (Functional aesthetic)\n\nReply 的品牌精神強調溝通的重要性。因此，設計著重於功能品質，放置許多易用性元素。\n\nReply 的品牌時常伴隨著用戶的操作動作，例如從品牌的 logo 點擊展開導覽列。\n\n> 心得：這種會讓使用者頻繁編輯操作的 APP 也常常出現在公司內部，例如報價單、簽核表單等等的應用程式，所以在許多使用者操作行為下，如何清楚的呈現資訊和導引使用者動作變得非常重要。\n\n# 產品架構\n\nReply 使用類似於其他電子郵件應用程序的產品結構：包含新郵件和存檔郵件的收件箱，以及圍繞在組織和執行與這些郵件相關操作的 UI 。郵件可以加上星星標示、發送、刪除、標記為垃圾郵件，或以使用者自定義方式來整理郵件。\n\n### 專注在使用者任務\n\n由於使用者任務主要涉及內容生產和處理，因此螢幕空間專注於內容呈現而非其他 UI 元素。為確保內容和導航列都有足夠的空間，Reply 會針對桌機、平板、手機裝置使用不同的導航模式。\n\n![Reply 導覽模式](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1XRLqbRWX43Sm4h1u8y04J4O7SKLY1ASs%2Fcasestudies-reply-family.png \"Reply 導覽模式\")\n\n### 抽屜式導覽列\n\n在桌機，Reply 使用標準的抽屜式導覽列。導覽列同時使用 icon 和文字。最上方包含設置、切換帳號和有搭配箭頭的 logo 拿來縮合導覽列。點擊搭配箭頭的 logo，將會縮合成軌道式導覽列。\n\n![Reply 桌機導覽列](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1odXyicfqCiZ-NfE4Oi8iNP4wO-rmEZZ9%2Fcasestudies-reply-productarch.png \"Reply 桌機導覽列\")\n\n### 底部 bar 導覽列\n\n在手機，Reply 使用底部 bar 導覽列。點擊左下角的 Reply icon ，他會從底部展開顯示抽屜式導航列，其中包含設定、切換帳戶頭像等動作。再次點擊 Reply icon 時，導航會關閉，導航列會關閉並返回底部預設的 bar 狀態。\n\n![Reply 手機導覽列](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1OVQU4zWktolBn0pEaT9fu_5xCxGsXzm9%2Fcasestudies-reply-bottomsheet.png \"Reply 手機導覽列\")\n\n### 軌道式導覽列\n\n透過點擊 Reply logo，軌道式導覽列可以展開變成抽屜式導覽列。Logo 旁邊的箭頭表明 Reply logo 是可交互的。\n\n軌道式導覽列非常適合在平板電腦上使用，因為它可以顯示大量的目的地，且佔用很小的空間。當軌道式導覽列被展開時會顯示使用者創建的資料夾，讓用戶讀取資料夾的標題文字。\n\n當收合時，軌道式導覽列不顯示使用者創建的資料夾。因為這些自創的資料夾都使用同個 icon，他們無法用單一 icon 做區別。\n\n![Reply 平板導覽列](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1tr41eJcVoKTnE7rq9vDBpaWUlVLdTlPa%2Fcasestudies-reply-railnav.png \"Reply 平板導覽列\")\n\n> 心得：手機底部的導覽列是我沒嘗試過的設計，因為工作上比較常做 Web 的應用，所以通常會使用上方 bar。但這樣使用下方 bar ，可以讓內容集中在上方，對於大量內容的呈現是很好的選擇。\n\n# 排版\n\nReply 使用 12 grid system。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1HuRM4KXNObz38eqqiQsqUusTWe_iua8E%2Fcasestudies-reply-grid-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### 視覺層級\n\nReply 使用顏色來區分不同的元件。例如，卡片容器是可見的，因為卡片具有白色表面顏色，而應用程式的背景是灰色的。\n\n由於 Reply 有時候會顯示密集的內容，因此將陰影移除會降低視覺的複雜性。並將項目的間距拉小，從而為內容流出更多的空間。\n\n![視覺層級](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1EmDZJ6SLz0CwwbxPiaYXqkTDbt2n_FKI%2Fcasestudies-reply-elevation.png \"視覺層級\")\n\n> 心得：利用小間距和去除陰影來顯示密集的內容，這點我在工作上也常常用到，最近剛做產線人員掃條碼顯示 64 條資料要同時呈現在一個畫面上，光是設計就佔了很重要的角色，畢竟在寫程式之前可以先有個底，才不用花費大量時間在調整版面上。\n\n# 顏色\n\nReply 的顏色主題使用一個主色調(深藍灰色)和一個輔助色(橘色)。\n\n由於輔助色很少用到，因此 Reply 的 UI 通常是單色的，主要使用主色調的深淺變化。這種微妙的顏色主題可以輕鬆閱讀內容而不會分心，並且可以輕鬆看到頭像。\n\n每當使用輔助色的時候，視覺上都會產生明顯的影響。\n\n![顏色主題](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1XUGSUZeLYqhH--JBBHWLkRnJzVmX13oR%2Fcasestudies-reply-color.png \"顏色主題\")\n\n> 心得：這種配色是我平常常用的方式，因為顏色少的話在配色方面比較不容易混亂，相較於上一篇介紹 [Rally](../../../../../2019/04/05/UXUI/Google-Material-Studies-Rally/) 的 6 色，Reply 就是保守派。\n\n# 文字與圖示\n\nReply 使用 Work Sans 作為字體。不同比例的 Work Sans 提供了 Reply 內容所需的種類。透過使用六種不同的權重來呈現內容：Light，Regular，Medium，SemiBold和Bold。\n\n![字體](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1WzYaZo4FsrHq8dgXw-hQ0OViJ56dRDNM%2Freplytypescale.png \"字體\")\n\nReply 的 icon 具有細微的風格，表達品牌也同時專注於 icon 識別與功能。\n\n1. 所有圖示使用一樣的格線架構確保一致性。\n2. 所有 Reply 圖示\n\n![圖示](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1J1sfDmQOyuvwfqAID1GY5d9bO66G5wVm%2Fcasestudies-reply-icons-alt.png \"圖示\")\n\n# 形狀\n\n元件根據大小使用不同的形狀類型，將形狀做分類可以讓螢幕一次放多個元件，分類包含：\n\n1. 小元件 (S)：延伸的 FAB (floating action button)。圓角 50%。\n2. 中元件 (M)：卡片 (Cards)。圓角 0。\n3. 大元件 (L)：底部清單 (Bottom sheets)。圓角 12dp 12dp 0 0。\n\n![形狀分類](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1Zv545CazM0c_SvUuZqnUg6hE7Dv-S3m0%2Freply-shape.png \"形狀分類\")\n\n![形狀元件](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1J8hIuMxjeCb-xIkot0krL8abdBIIIqfw%2Freply-shape-b.png \"形狀元件\")\n\n# 元件\n\n### 浮動動作按鈕 (Floating action button)\n\n在手機上， Reply 在底部嵌入自定義的 FAB (Floating action button)。\n\n![手機自定義的 FAB](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1GhRm29BQNQHyLVPO0q_JdgYN4G82YjUS%2Fcasestudies-reply-nestedfab.png \"手機自定義的 FAB\")\n\n在桌機上， Reply 使用自定義的 FAB 延伸，和抽屜式導覽做搭配。\n\n![桌機自定義的 FAB](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1wNWnttN_BLCzr5bi2w-8VDEbCTV8sh66%2Fcasestudies-reply-extendedfab.png \"桌機自定義的 FAB\")\n\n### 底部 bar, 底部清單\n\n在手機，Reply 使用客制的底部 bar 和動作按鈕。\n\n1. 預設的底部 bar\n2. Reply 的底部 bar 使用客制的 icon, 顏色和形狀。Reply logo 做為選單功能 icon 被包含在元件中。客制形狀的底部 bar 包含浮動動作按鈕。\n\n![底部 bar](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1jTk6oF1ib0k1wIhXnjTLn0kgEZxNznl5%2Fcasestudies-reply-bottombar-compare.png \"底部 bar\")\n\n在手機，底部 bar 是切換導覽和進行動作的主要方式。\n當使用者選取多個進行動作時，底部 bar 會變成內文動作 bar。\n\n![內文動作 bar](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1a-17T_B8F7nlrJc9pJ6opEdFG-cuccmZ%2Fcasestudies-reply-contextualactionbar.png \"內文動作 bar\")\n\n當使用者滑動頁面的時候，底部 bar 會從螢幕消失，只剩下 FAB 按鈕。\n\n![滑動頁面剩下 FAB](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1I1RcG9mNZYJgCPZu9u_wsYBaiHxNIJ8Q%2Fcasestudies-reply-floatingfab.png \"滑動頁面剩下 FAB\")\n\n### 卡片\n\nReply 將郵件呈現在客制的方角卡片上。每張卡片的間距非常小，因為顏色代表每張卡片的邊界(沒有使用任何陰影)。小間距讓更多內容可以呈現在螢幕上。\n\n當卡片往右邊滑時，會出現對郵件標示星號的動作按鈕。\n\n![卡片往右滑](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1FJEijR5c1uTkUcHsUUU0GHLuupehX39-%2Fcasestudies-reply-cards-1.png \"卡片往右滑\")\n\n當卡片往左邊滑時，會出現對郵件刪除的動作按鈕。\n\n![卡片往左滑](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1WZlOkz0ZWCN4BhIWrvM7H4NsvlNxt5OI%2Fcasestudies-reply-cards-2.png \"卡片往左滑\")\n\n### 小標籤 (Chips)\n\nReply 的小標籤 (Chips) 使用客制的文字、顏色和圖像大小。在視覺上和品牌相吻合。\n\n![小標籤](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1bQe04HeiZ4CLLKEVXGs_B-yYd4mc_Ztx%2Fcasestudies-reply-chips-alt.png \"小標籤\")\n\n> 心得：此專案對許多 material components 做客製化的樣式修改，礙於工作要同時做設計和開發的時間限制下，我比較沒有對這方面下過功夫，或許下次我可以從微調一些元件樣式來增加對品牌的塑造。\n\n# 交互動作\n\nReply logo 的動畫其描繪靈感來自捲曲紙張路徑。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1CmJcj6oa4Qwo_i8KkNaruAtMOCNnnpfw%2F01-launch.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\nReply 使用較短的動畫時間來加強動作效率。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1MfIr9GSQ4iAfUNoAtKIUKX0lP6Kxt8kC%2F02-reply-navtransitions.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n插圖動畫在用戶使用的關鍵點出現，例如完成收件夾中每個項目的存檔後，觸發了一個慶祝動畫。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SapnI_EXJwjkvMb87hWWakpTMLIKoxiQ%2F03-reply-inboxzero.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n當使用者將頁面往下拉重新整理時， Reply 的 logo 動畫會出現在上方。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F120IhHIDr-BHTPrTmFnXpEHfsOJEdVsg8%2F04-reply-pulltorefresh.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n> 心得：logo 動畫二次使用在 Refresh 頁面上，我覺得這點非常不錯，除了讓畫面生動起來也可以節省設計時間。\n\n總結：Reply 讓我學到更多對 material component 做更細微設計的靈感，希望之後有機會多做一點有趣的元件設計提升品牌形象。\n\n## 參考資料\n\n* [Material Studies - Reply](https://material.io/design/material-studies/reply.html)","slug":"UXUI/Google-Material-Studies-Reply","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu7500024tudh2j3xqlix","content":"<p>上次介紹的 Rally 是關於統計分析型的系統，這次要來看的是偏向應用型的系統 Reply。</p>\n<a id=\"more\"></a>\n<h1 id=\"案例背景\"><a href=\"#案例背景\" class=\"headerlink\" title=\"案例背景\"></a>案例背景</h1><p>Reply 是一款幫助個人和群組溝通的 APP，其設計理念為提供清晰、易讀、直觀和易用的應用程式。</p>\n<h3 id=\"功能性導向之美-Functional-aesthetic\"><a href=\"#功能性導向之美-Functional-aesthetic\" class=\"headerlink\" title=\"功能性導向之美 (Functional aesthetic)\"></a>功能性導向之美 (Functional aesthetic)</h3><p>Reply 的品牌精神強調溝通的重要性。因此，設計著重於功能品質，放置許多易用性元素。</p>\n<p>Reply 的品牌時常伴隨著用戶的操作動作，例如從品牌的 logo 點擊展開導覽列。</p>\n<blockquote>\n<p>心得：這種會讓使用者頻繁編輯操作的 APP 也常常出現在公司內部，例如報價單、簽核表單等等的應用程式，所以在許多使用者操作行為下，如何清楚的呈現資訊和導引使用者動作變得非常重要。</p>\n</blockquote>\n<h1 id=\"產品架構\"><a href=\"#產品架構\" class=\"headerlink\" title=\"產品架構\"></a>產品架構</h1><p>Reply 使用類似於其他電子郵件應用程序的產品結構：包含新郵件和存檔郵件的收件箱，以及圍繞在組織和執行與這些郵件相關操作的 UI 。郵件可以加上星星標示、發送、刪除、標記為垃圾郵件，或以使用者自定義方式來整理郵件。</p>\n<h3 id=\"專注在使用者任務\"><a href=\"#專注在使用者任務\" class=\"headerlink\" title=\"專注在使用者任務\"></a>專注在使用者任務</h3><p>由於使用者任務主要涉及內容生產和處理，因此螢幕空間專注於內容呈現而非其他 UI 元素。為確保內容和導航列都有足夠的空間，Reply 會針對桌機、平板、手機裝置使用不同的導航模式。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1XRLqbRWX43Sm4h1u8y04J4O7SKLY1ASs%2Fcasestudies-reply-family.png\" alt=\"Reply 導覽模式\" title=\"Reply 導覽模式\"></p>\n<h3 id=\"抽屜式導覽列\"><a href=\"#抽屜式導覽列\" class=\"headerlink\" title=\"抽屜式導覽列\"></a>抽屜式導覽列</h3><p>在桌機，Reply 使用標準的抽屜式導覽列。導覽列同時使用 icon 和文字。最上方包含設置、切換帳號和有搭配箭頭的 logo 拿來縮合導覽列。點擊搭配箭頭的 logo，將會縮合成軌道式導覽列。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1odXyicfqCiZ-NfE4Oi8iNP4wO-rmEZZ9%2Fcasestudies-reply-productarch.png\" alt=\"Reply 桌機導覽列\" title=\"Reply 桌機導覽列\"></p>\n<h3 id=\"底部-bar-導覽列\"><a href=\"#底部-bar-導覽列\" class=\"headerlink\" title=\"底部 bar 導覽列\"></a>底部 bar 導覽列</h3><p>在手機，Reply 使用底部 bar 導覽列。點擊左下角的 Reply icon ，他會從底部展開顯示抽屜式導航列，其中包含設定、切換帳戶頭像等動作。再次點擊 Reply icon 時，導航會關閉，導航列會關閉並返回底部預設的 bar 狀態。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1OVQU4zWktolBn0pEaT9fu_5xCxGsXzm9%2Fcasestudies-reply-bottomsheet.png\" alt=\"Reply 手機導覽列\" title=\"Reply 手機導覽列\"></p>\n<h3 id=\"軌道式導覽列\"><a href=\"#軌道式導覽列\" class=\"headerlink\" title=\"軌道式導覽列\"></a>軌道式導覽列</h3><p>透過點擊 Reply logo，軌道式導覽列可以展開變成抽屜式導覽列。Logo 旁邊的箭頭表明 Reply logo 是可交互的。</p>\n<p>軌道式導覽列非常適合在平板電腦上使用，因為它可以顯示大量的目的地，且佔用很小的空間。當軌道式導覽列被展開時會顯示使用者創建的資料夾，讓用戶讀取資料夾的標題文字。</p>\n<p>當收合時，軌道式導覽列不顯示使用者創建的資料夾。因為這些自創的資料夾都使用同個 icon，他們無法用單一 icon 做區別。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1tr41eJcVoKTnE7rq9vDBpaWUlVLdTlPa%2Fcasestudies-reply-railnav.png\" alt=\"Reply 平板導覽列\" title=\"Reply 平板導覽列\"></p>\n<blockquote>\n<p>心得：手機底部的導覽列是我沒嘗試過的設計，因為工作上比較常做 Web 的應用，所以通常會使用上方 bar。但這樣使用下方 bar ，可以讓內容集中在上方，對於大量內容的呈現是很好的選擇。</p>\n</blockquote>\n<h1 id=\"排版\"><a href=\"#排版\" class=\"headerlink\" title=\"排版\"></a>排版</h1><p>Reply 使用 12 grid system。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1HuRM4KXNObz38eqqiQsqUusTWe_iua8E%2Fcasestudies-reply-grid-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"視覺層級\"><a href=\"#視覺層級\" class=\"headerlink\" title=\"視覺層級\"></a>視覺層級</h3><p>Reply 使用顏色來區分不同的元件。例如，卡片容器是可見的，因為卡片具有白色表面顏色，而應用程式的背景是灰色的。</p>\n<p>由於 Reply 有時候會顯示密集的內容，因此將陰影移除會降低視覺的複雜性。並將項目的間距拉小，從而為內容流出更多的空間。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1EmDZJ6SLz0CwwbxPiaYXqkTDbt2n_FKI%2Fcasestudies-reply-elevation.png\" alt=\"視覺層級\" title=\"視覺層級\"></p>\n<blockquote>\n<p>心得：利用小間距和去除陰影來顯示密集的內容，這點我在工作上也常常用到，最近剛做產線人員掃條碼顯示 64 條資料要同時呈現在一個畫面上，光是設計就佔了很重要的角色，畢竟在寫程式之前可以先有個底，才不用花費大量時間在調整版面上。</p>\n</blockquote>\n<h1 id=\"顏色\"><a href=\"#顏色\" class=\"headerlink\" title=\"顏色\"></a>顏色</h1><p>Reply 的顏色主題使用一個主色調(深藍灰色)和一個輔助色(橘色)。</p>\n<p>由於輔助色很少用到，因此 Reply 的 UI 通常是單色的，主要使用主色調的深淺變化。這種微妙的顏色主題可以輕鬆閱讀內容而不會分心，並且可以輕鬆看到頭像。</p>\n<p>每當使用輔助色的時候，視覺上都會產生明顯的影響。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1XUGSUZeLYqhH--JBBHWLkRnJzVmX13oR%2Fcasestudies-reply-color.png\" alt=\"顏色主題\" title=\"顏色主題\"></p>\n<blockquote>\n<p>心得：這種配色是我平常常用的方式，因為顏色少的話在配色方面比較不容易混亂，相較於上一篇介紹 <a href=\"../../../../../2019/04/05/UXUI/Google-Material-Studies-Rally/\">Rally</a> 的 6 色，Reply 就是保守派。</p>\n</blockquote>\n<h1 id=\"文字與圖示\"><a href=\"#文字與圖示\" class=\"headerlink\" title=\"文字與圖示\"></a>文字與圖示</h1><p>Reply 使用 Work Sans 作為字體。不同比例的 Work Sans 提供了 Reply 內容所需的種類。透過使用六種不同的權重來呈現內容：Light，Regular，Medium，SemiBold和Bold。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1WzYaZo4FsrHq8dgXw-hQ0OViJ56dRDNM%2Freplytypescale.png\" alt=\"字體\" title=\"字體\"></p>\n<p>Reply 的 icon 具有細微的風格，表達品牌也同時專注於 icon 識別與功能。</p>\n<ol>\n<li>所有圖示使用一樣的格線架構確保一致性。</li>\n<li>所有 Reply 圖示</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1J1sfDmQOyuvwfqAID1GY5d9bO66G5wVm%2Fcasestudies-reply-icons-alt.png\" alt=\"圖示\" title=\"圖示\"></p>\n<h1 id=\"形狀\"><a href=\"#形狀\" class=\"headerlink\" title=\"形狀\"></a>形狀</h1><p>元件根據大小使用不同的形狀類型，將形狀做分類可以讓螢幕一次放多個元件，分類包含：</p>\n<ol>\n<li>小元件 (S)：延伸的 FAB (floating action button)。圓角 50%。</li>\n<li>中元件 (M)：卡片 (Cards)。圓角 0。</li>\n<li>大元件 (L)：底部清單 (Bottom sheets)。圓角 12dp 12dp 0 0。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1Zv545CazM0c_SvUuZqnUg6hE7Dv-S3m0%2Freply-shape.png\" alt=\"形狀分類\" title=\"形狀分類\"></p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1J8hIuMxjeCb-xIkot0krL8abdBIIIqfw%2Freply-shape-b.png\" alt=\"形狀元件\" title=\"形狀元件\"></p>\n<h1 id=\"元件\"><a href=\"#元件\" class=\"headerlink\" title=\"元件\"></a>元件</h1><h3 id=\"浮動動作按鈕-Floating-action-button\"><a href=\"#浮動動作按鈕-Floating-action-button\" class=\"headerlink\" title=\"浮動動作按鈕 (Floating action button)\"></a>浮動動作按鈕 (Floating action button)</h3><p>在手機上， Reply 在底部嵌入自定義的 FAB (Floating action button)。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1GhRm29BQNQHyLVPO0q_JdgYN4G82YjUS%2Fcasestudies-reply-nestedfab.png\" alt=\"手機自定義的 FAB\" title=\"手機自定義的 FAB\"></p>\n<p>在桌機上， Reply 使用自定義的 FAB 延伸，和抽屜式導覽做搭配。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1wNWnttN_BLCzr5bi2w-8VDEbCTV8sh66%2Fcasestudies-reply-extendedfab.png\" alt=\"桌機自定義的 FAB\" title=\"桌機自定義的 FAB\"></p>\n<h3 id=\"底部-bar-底部清單\"><a href=\"#底部-bar-底部清單\" class=\"headerlink\" title=\"底部 bar, 底部清單\"></a>底部 bar, 底部清單</h3><p>在手機，Reply 使用客制的底部 bar 和動作按鈕。</p>\n<ol>\n<li>預設的底部 bar</li>\n<li>Reply 的底部 bar 使用客制的 icon, 顏色和形狀。Reply logo 做為選單功能 icon 被包含在元件中。客制形狀的底部 bar 包含浮動動作按鈕。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1jTk6oF1ib0k1wIhXnjTLn0kgEZxNznl5%2Fcasestudies-reply-bottombar-compare.png\" alt=\"底部 bar\" title=\"底部 bar\"></p>\n<p>在手機，底部 bar 是切換導覽和進行動作的主要方式。<br>當使用者選取多個進行動作時，底部 bar 會變成內文動作 bar。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1a-17T_B8F7nlrJc9pJ6opEdFG-cuccmZ%2Fcasestudies-reply-contextualactionbar.png\" alt=\"內文動作 bar\" title=\"內文動作 bar\"></p>\n<p>當使用者滑動頁面的時候，底部 bar 會從螢幕消失，只剩下 FAB 按鈕。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1I1RcG9mNZYJgCPZu9u_wsYBaiHxNIJ8Q%2Fcasestudies-reply-floatingfab.png\" alt=\"滑動頁面剩下 FAB\" title=\"滑動頁面剩下 FAB\"></p>\n<h3 id=\"卡片\"><a href=\"#卡片\" class=\"headerlink\" title=\"卡片\"></a>卡片</h3><p>Reply 將郵件呈現在客制的方角卡片上。每張卡片的間距非常小，因為顏色代表每張卡片的邊界(沒有使用任何陰影)。小間距讓更多內容可以呈現在螢幕上。</p>\n<p>當卡片往右邊滑時，會出現對郵件標示星號的動作按鈕。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1FJEijR5c1uTkUcHsUUU0GHLuupehX39-%2Fcasestudies-reply-cards-1.png\" alt=\"卡片往右滑\" title=\"卡片往右滑\"></p>\n<p>當卡片往左邊滑時，會出現對郵件刪除的動作按鈕。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1WZlOkz0ZWCN4BhIWrvM7H4NsvlNxt5OI%2Fcasestudies-reply-cards-2.png\" alt=\"卡片往左滑\" title=\"卡片往左滑\"></p>\n<h3 id=\"小標籤-Chips\"><a href=\"#小標籤-Chips\" class=\"headerlink\" title=\"小標籤 (Chips)\"></a>小標籤 (Chips)</h3><p>Reply 的小標籤 (Chips) 使用客制的文字、顏色和圖像大小。在視覺上和品牌相吻合。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1bQe04HeiZ4CLLKEVXGs_B-yYd4mc_Ztx%2Fcasestudies-reply-chips-alt.png\" alt=\"小標籤\" title=\"小標籤\"></p>\n<blockquote>\n<p>心得：此專案對許多 material components 做客製化的樣式修改，礙於工作要同時做設計和開發的時間限制下，我比較沒有對這方面下過功夫，或許下次我可以從微調一些元件樣式來增加對品牌的塑造。</p>\n</blockquote>\n<h1 id=\"交互動作\"><a href=\"#交互動作\" class=\"headerlink\" title=\"交互動作\"></a>交互動作</h1><p>Reply logo 的動畫其描繪靈感來自捲曲紙張路徑。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1CmJcj6oa4Qwo_i8KkNaruAtMOCNnnpfw%2F01-launch.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>Reply 使用較短的動畫時間來加強動作效率。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1MfIr9GSQ4iAfUNoAtKIUKX0lP6Kxt8kC%2F02-reply-navtransitions.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>插圖動畫在用戶使用的關鍵點出現，例如完成收件夾中每個項目的存檔後，觸發了一個慶祝動畫。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SapnI_EXJwjkvMb87hWWakpTMLIKoxiQ%2F03-reply-inboxzero.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>當使用者將頁面往下拉重新整理時， Reply 的 logo 動畫會出現在上方。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F120IhHIDr-BHTPrTmFnXpEHfsOJEdVsg8%2F04-reply-pulltorefresh.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<blockquote>\n<p>心得：logo 動畫二次使用在 Refresh 頁面上，我覺得這點非常不錯，除了讓畫面生動起來也可以節省設計時間。</p>\n</blockquote>\n<p>總結：Reply 讓我學到更多對 material component 做更細微設計的靈感，希望之後有機會多做一點有趣的元件設計提升品牌形象。</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://material.io/design/material-studies/reply.html\" target=\"_blank\" rel=\"noopener\">Material Studies - Reply</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no","excerpt":"<p>上次介紹的 Rally 是關於統計分析型的系統，這次要來看的是偏向應用型的系統 Reply。</p>","more":"<h1 id=\"案例背景\"><a href=\"#案例背景\" class=\"headerlink\" title=\"案例背景\"></a>案例背景</h1><p>Reply 是一款幫助個人和群組溝通的 APP，其設計理念為提供清晰、易讀、直觀和易用的應用程式。</p>\n<h3 id=\"功能性導向之美-Functional-aesthetic\"><a href=\"#功能性導向之美-Functional-aesthetic\" class=\"headerlink\" title=\"功能性導向之美 (Functional aesthetic)\"></a>功能性導向之美 (Functional aesthetic)</h3><p>Reply 的品牌精神強調溝通的重要性。因此，設計著重於功能品質，放置許多易用性元素。</p>\n<p>Reply 的品牌時常伴隨著用戶的操作動作，例如從品牌的 logo 點擊展開導覽列。</p>\n<blockquote>\n<p>心得：這種會讓使用者頻繁編輯操作的 APP 也常常出現在公司內部，例如報價單、簽核表單等等的應用程式，所以在許多使用者操作行為下，如何清楚的呈現資訊和導引使用者動作變得非常重要。</p>\n</blockquote>\n<h1 id=\"產品架構\"><a href=\"#產品架構\" class=\"headerlink\" title=\"產品架構\"></a>產品架構</h1><p>Reply 使用類似於其他電子郵件應用程序的產品結構：包含新郵件和存檔郵件的收件箱，以及圍繞在組織和執行與這些郵件相關操作的 UI 。郵件可以加上星星標示、發送、刪除、標記為垃圾郵件，或以使用者自定義方式來整理郵件。</p>\n<h3 id=\"專注在使用者任務\"><a href=\"#專注在使用者任務\" class=\"headerlink\" title=\"專注在使用者任務\"></a>專注在使用者任務</h3><p>由於使用者任務主要涉及內容生產和處理，因此螢幕空間專注於內容呈現而非其他 UI 元素。為確保內容和導航列都有足夠的空間，Reply 會針對桌機、平板、手機裝置使用不同的導航模式。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1XRLqbRWX43Sm4h1u8y04J4O7SKLY1ASs%2Fcasestudies-reply-family.png\" alt=\"Reply 導覽模式\" title=\"Reply 導覽模式\"></p>\n<h3 id=\"抽屜式導覽列\"><a href=\"#抽屜式導覽列\" class=\"headerlink\" title=\"抽屜式導覽列\"></a>抽屜式導覽列</h3><p>在桌機，Reply 使用標準的抽屜式導覽列。導覽列同時使用 icon 和文字。最上方包含設置、切換帳號和有搭配箭頭的 logo 拿來縮合導覽列。點擊搭配箭頭的 logo，將會縮合成軌道式導覽列。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1odXyicfqCiZ-NfE4Oi8iNP4wO-rmEZZ9%2Fcasestudies-reply-productarch.png\" alt=\"Reply 桌機導覽列\" title=\"Reply 桌機導覽列\"></p>\n<h3 id=\"底部-bar-導覽列\"><a href=\"#底部-bar-導覽列\" class=\"headerlink\" title=\"底部 bar 導覽列\"></a>底部 bar 導覽列</h3><p>在手機，Reply 使用底部 bar 導覽列。點擊左下角的 Reply icon ，他會從底部展開顯示抽屜式導航列，其中包含設定、切換帳戶頭像等動作。再次點擊 Reply icon 時，導航會關閉，導航列會關閉並返回底部預設的 bar 狀態。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1OVQU4zWktolBn0pEaT9fu_5xCxGsXzm9%2Fcasestudies-reply-bottomsheet.png\" alt=\"Reply 手機導覽列\" title=\"Reply 手機導覽列\"></p>\n<h3 id=\"軌道式導覽列\"><a href=\"#軌道式導覽列\" class=\"headerlink\" title=\"軌道式導覽列\"></a>軌道式導覽列</h3><p>透過點擊 Reply logo，軌道式導覽列可以展開變成抽屜式導覽列。Logo 旁邊的箭頭表明 Reply logo 是可交互的。</p>\n<p>軌道式導覽列非常適合在平板電腦上使用，因為它可以顯示大量的目的地，且佔用很小的空間。當軌道式導覽列被展開時會顯示使用者創建的資料夾，讓用戶讀取資料夾的標題文字。</p>\n<p>當收合時，軌道式導覽列不顯示使用者創建的資料夾。因為這些自創的資料夾都使用同個 icon，他們無法用單一 icon 做區別。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1tr41eJcVoKTnE7rq9vDBpaWUlVLdTlPa%2Fcasestudies-reply-railnav.png\" alt=\"Reply 平板導覽列\" title=\"Reply 平板導覽列\"></p>\n<blockquote>\n<p>心得：手機底部的導覽列是我沒嘗試過的設計，因為工作上比較常做 Web 的應用，所以通常會使用上方 bar。但這樣使用下方 bar ，可以讓內容集中在上方，對於大量內容的呈現是很好的選擇。</p>\n</blockquote>\n<h1 id=\"排版\"><a href=\"#排版\" class=\"headerlink\" title=\"排版\"></a>排版</h1><p>Reply 使用 12 grid system。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1HuRM4KXNObz38eqqiQsqUusTWe_iua8E%2Fcasestudies-reply-grid-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"視覺層級\"><a href=\"#視覺層級\" class=\"headerlink\" title=\"視覺層級\"></a>視覺層級</h3><p>Reply 使用顏色來區分不同的元件。例如，卡片容器是可見的，因為卡片具有白色表面顏色，而應用程式的背景是灰色的。</p>\n<p>由於 Reply 有時候會顯示密集的內容，因此將陰影移除會降低視覺的複雜性。並將項目的間距拉小，從而為內容流出更多的空間。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1EmDZJ6SLz0CwwbxPiaYXqkTDbt2n_FKI%2Fcasestudies-reply-elevation.png\" alt=\"視覺層級\" title=\"視覺層級\"></p>\n<blockquote>\n<p>心得：利用小間距和去除陰影來顯示密集的內容，這點我在工作上也常常用到，最近剛做產線人員掃條碼顯示 64 條資料要同時呈現在一個畫面上，光是設計就佔了很重要的角色，畢竟在寫程式之前可以先有個底，才不用花費大量時間在調整版面上。</p>\n</blockquote>\n<h1 id=\"顏色\"><a href=\"#顏色\" class=\"headerlink\" title=\"顏色\"></a>顏色</h1><p>Reply 的顏色主題使用一個主色調(深藍灰色)和一個輔助色(橘色)。</p>\n<p>由於輔助色很少用到，因此 Reply 的 UI 通常是單色的，主要使用主色調的深淺變化。這種微妙的顏色主題可以輕鬆閱讀內容而不會分心，並且可以輕鬆看到頭像。</p>\n<p>每當使用輔助色的時候，視覺上都會產生明顯的影響。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1XUGSUZeLYqhH--JBBHWLkRnJzVmX13oR%2Fcasestudies-reply-color.png\" alt=\"顏色主題\" title=\"顏色主題\"></p>\n<blockquote>\n<p>心得：這種配色是我平常常用的方式，因為顏色少的話在配色方面比較不容易混亂，相較於上一篇介紹 <a href=\"../../../../../2019/04/05/UXUI/Google-Material-Studies-Rally/\">Rally</a> 的 6 色，Reply 就是保守派。</p>\n</blockquote>\n<h1 id=\"文字與圖示\"><a href=\"#文字與圖示\" class=\"headerlink\" title=\"文字與圖示\"></a>文字與圖示</h1><p>Reply 使用 Work Sans 作為字體。不同比例的 Work Sans 提供了 Reply 內容所需的種類。透過使用六種不同的權重來呈現內容：Light，Regular，Medium，SemiBold和Bold。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1WzYaZo4FsrHq8dgXw-hQ0OViJ56dRDNM%2Freplytypescale.png\" alt=\"字體\" title=\"字體\"></p>\n<p>Reply 的 icon 具有細微的風格，表達品牌也同時專注於 icon 識別與功能。</p>\n<ol>\n<li>所有圖示使用一樣的格線架構確保一致性。</li>\n<li>所有 Reply 圖示</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1J1sfDmQOyuvwfqAID1GY5d9bO66G5wVm%2Fcasestudies-reply-icons-alt.png\" alt=\"圖示\" title=\"圖示\"></p>\n<h1 id=\"形狀\"><a href=\"#形狀\" class=\"headerlink\" title=\"形狀\"></a>形狀</h1><p>元件根據大小使用不同的形狀類型，將形狀做分類可以讓螢幕一次放多個元件，分類包含：</p>\n<ol>\n<li>小元件 (S)：延伸的 FAB (floating action button)。圓角 50%。</li>\n<li>中元件 (M)：卡片 (Cards)。圓角 0。</li>\n<li>大元件 (L)：底部清單 (Bottom sheets)。圓角 12dp 12dp 0 0。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1Zv545CazM0c_SvUuZqnUg6hE7Dv-S3m0%2Freply-shape.png\" alt=\"形狀分類\" title=\"形狀分類\"></p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1J8hIuMxjeCb-xIkot0krL8abdBIIIqfw%2Freply-shape-b.png\" alt=\"形狀元件\" title=\"形狀元件\"></p>\n<h1 id=\"元件\"><a href=\"#元件\" class=\"headerlink\" title=\"元件\"></a>元件</h1><h3 id=\"浮動動作按鈕-Floating-action-button\"><a href=\"#浮動動作按鈕-Floating-action-button\" class=\"headerlink\" title=\"浮動動作按鈕 (Floating action button)\"></a>浮動動作按鈕 (Floating action button)</h3><p>在手機上， Reply 在底部嵌入自定義的 FAB (Floating action button)。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1GhRm29BQNQHyLVPO0q_JdgYN4G82YjUS%2Fcasestudies-reply-nestedfab.png\" alt=\"手機自定義的 FAB\" title=\"手機自定義的 FAB\"></p>\n<p>在桌機上， Reply 使用自定義的 FAB 延伸，和抽屜式導覽做搭配。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1wNWnttN_BLCzr5bi2w-8VDEbCTV8sh66%2Fcasestudies-reply-extendedfab.png\" alt=\"桌機自定義的 FAB\" title=\"桌機自定義的 FAB\"></p>\n<h3 id=\"底部-bar-底部清單\"><a href=\"#底部-bar-底部清單\" class=\"headerlink\" title=\"底部 bar, 底部清單\"></a>底部 bar, 底部清單</h3><p>在手機，Reply 使用客制的底部 bar 和動作按鈕。</p>\n<ol>\n<li>預設的底部 bar</li>\n<li>Reply 的底部 bar 使用客制的 icon, 顏色和形狀。Reply logo 做為選單功能 icon 被包含在元件中。客制形狀的底部 bar 包含浮動動作按鈕。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1jTk6oF1ib0k1wIhXnjTLn0kgEZxNznl5%2Fcasestudies-reply-bottombar-compare.png\" alt=\"底部 bar\" title=\"底部 bar\"></p>\n<p>在手機，底部 bar 是切換導覽和進行動作的主要方式。<br>當使用者選取多個進行動作時，底部 bar 會變成內文動作 bar。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1a-17T_B8F7nlrJc9pJ6opEdFG-cuccmZ%2Fcasestudies-reply-contextualactionbar.png\" alt=\"內文動作 bar\" title=\"內文動作 bar\"></p>\n<p>當使用者滑動頁面的時候，底部 bar 會從螢幕消失，只剩下 FAB 按鈕。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1I1RcG9mNZYJgCPZu9u_wsYBaiHxNIJ8Q%2Fcasestudies-reply-floatingfab.png\" alt=\"滑動頁面剩下 FAB\" title=\"滑動頁面剩下 FAB\"></p>\n<h3 id=\"卡片\"><a href=\"#卡片\" class=\"headerlink\" title=\"卡片\"></a>卡片</h3><p>Reply 將郵件呈現在客制的方角卡片上。每張卡片的間距非常小，因為顏色代表每張卡片的邊界(沒有使用任何陰影)。小間距讓更多內容可以呈現在螢幕上。</p>\n<p>當卡片往右邊滑時，會出現對郵件標示星號的動作按鈕。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1FJEijR5c1uTkUcHsUUU0GHLuupehX39-%2Fcasestudies-reply-cards-1.png\" alt=\"卡片往右滑\" title=\"卡片往右滑\"></p>\n<p>當卡片往左邊滑時，會出現對郵件刪除的動作按鈕。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1WZlOkz0ZWCN4BhIWrvM7H4NsvlNxt5OI%2Fcasestudies-reply-cards-2.png\" alt=\"卡片往左滑\" title=\"卡片往左滑\"></p>\n<h3 id=\"小標籤-Chips\"><a href=\"#小標籤-Chips\" class=\"headerlink\" title=\"小標籤 (Chips)\"></a>小標籤 (Chips)</h3><p>Reply 的小標籤 (Chips) 使用客制的文字、顏色和圖像大小。在視覺上和品牌相吻合。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1bQe04HeiZ4CLLKEVXGs_B-yYd4mc_Ztx%2Fcasestudies-reply-chips-alt.png\" alt=\"小標籤\" title=\"小標籤\"></p>\n<blockquote>\n<p>心得：此專案對許多 material components 做客製化的樣式修改，礙於工作要同時做設計和開發的時間限制下，我比較沒有對這方面下過功夫，或許下次我可以從微調一些元件樣式來增加對品牌的塑造。</p>\n</blockquote>\n<h1 id=\"交互動作\"><a href=\"#交互動作\" class=\"headerlink\" title=\"交互動作\"></a>交互動作</h1><p>Reply logo 的動畫其描繪靈感來自捲曲紙張路徑。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1CmJcj6oa4Qwo_i8KkNaruAtMOCNnnpfw%2F01-launch.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>Reply 使用較短的動畫時間來加強動作效率。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1MfIr9GSQ4iAfUNoAtKIUKX0lP6Kxt8kC%2F02-reply-navtransitions.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>插圖動畫在用戶使用的關鍵點出現，例如完成收件夾中每個項目的存檔後，觸發了一個慶祝動畫。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SapnI_EXJwjkvMb87hWWakpTMLIKoxiQ%2F03-reply-inboxzero.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<p>當使用者將頁面往下拉重新整理時， Reply 的 logo 動畫會出現在上方。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F120IhHIDr-BHTPrTmFnXpEHfsOJEdVsg8%2F04-reply-pulltorefresh.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<blockquote>\n<p>心得：logo 動畫二次使用在 Refresh 頁面上，我覺得這點非常不錯，除了讓畫面生動起來也可以節省設計時間。</p>\n</blockquote>\n<p>總結：Reply 讓我學到更多對 material component 做更細微設計的靈感，希望之後有機會多做一點有趣的元件設計提升品牌形象。</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://material.io/design/material-studies/reply.html\" target=\"_blank\" rel=\"noopener\">Material Studies - Reply</a></li>\n</ul>"},{"title":"Google Material Studies - Shrine","thumbnailImage":"https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no","thumbnailImagePosition":"left","coverImage":"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1XfN9LumqsUoSt6nDckGhoja4ll8EAmZI%2Fcasestudies-shrine-brandattributes.png","coverMeta":"out","date":"2019-06-06T16:00:00.000Z","updated":"2019-06-06T16:00:00.000Z","_content":"\n這次 Material Design 案例介紹零售業的 APP 設計，相信大家都不陌生，如何呈現大量商品給使用者也是一門學問。\n\n<!--more-->\n\n# 案例背景\n\nShrine APP 是一個線上市場，透過推播標籤 (promoted labels) 來表達生活方式和時尚產品的特色。Shrine 的品牌美學為現代、优雅、精致。Shrine 在展示各品牌和產品背后，有著一致的美學概念。\n\n### 極簡美學\n\nShrine 的極簡主義將使用者體驗著重在產品内容和 APP 互動。作為展示各種產品和品牌核心的统一架構，Shrine 的品牌扮演着重要的角色。\n\n### 視覺主題\n\nShrine 的視覺主題採用去角的剪裁設計，應用在各種組件和元素上。這些元素代表 Shrine logo 的形狀，且為 Shrine 品牌的延伸設計。\n\n![Shrine 去角的剪裁設計](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1KZq-VRhEx9j2HydlT4ZW9H7tR-WoOZAe%2Fcasestudies-shrine-logo-alt.png \"Shrine 去角的剪裁設計\")\n\nShrine 的互動模型是由三個重疊的圖層組成。\n\n1. 最下層為導航和品牌元素\n2. 中間層為主要內容\n3. 最上層為購物車\n\n![Shrine 三個重疊的圖層](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1a-_JDAJTous0ko4miSjAgVwJPHQB2hHe%2Fcasestudies-shrine-elevationchart.png \"Shrine 三個重疊的圖層\")\n\n> 心得：以前做過大量分類的內容網站，如何讓使用者快速找到他要的類別是一門學問。極簡風格的好處是將操作簡化，並專注於呈現產品給使用者。\n\n# 產品架構\n\nShrine 應用程序的資訊架構是由目錄(catalog)結構組成。一個目錄包含各分類資訊，母類別可能包含子類別。Shrine 的母類別將大群組的物品分類，例如：鞋子、配飾、連衣裙，如此一來，使用者可以看到相關的內容。採用目錄結構讓使用者瀏覽有興趣的項目、互相比對不同的產品和查看特定的產品資訊。\n\n### 導覽列\n\nShrine 在桌機、平板和手機上使用不同形式的導覽列。\n手機將導覽列放在最後一個圖層，需要藉由回上頁的元件做返回的動作。\n平板使用頁籤(tabs)的方式導覽。\n桌機使用標準的導覽收納欄位。\n\n![Shrine 導覽列](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1-qYMfjqAbsMb9O-lJNIsaHcKhO_p4O_s%2Fcasestudies-shrine-family.png \"Shrine 導覽列\")\n\n### 項目指標\n\n所有導覽列共用同一個選取狀態模式：當一個項目被選取，項目背後會有一個三角圖樣代表被選取的狀態。項目指標確保使用者知道他們目前所在的類別。\n\n![Shrine 項目指標](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1l0DbKUHyQKvedhajBXcnaVN8UZbn7eSF%2Fcasestudies-shrine-nav.png \"Shrine 項目指標\")\n\n### 購物車\n\n購物車可以在螢幕右下角找到。當物品加入或從購物車移除，購物清單會動態更新並反映變化。\n購物清單可以透過點擊 icon ，展開內容細目，或是帶使用者到購物畫面。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dgcMYf6_2L_xYYriPRcoACs_woD5LIFm%2Fcasestudies-shrine-shoppingcart-1b.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n> 心得：項目指標用圖示的方式標示在分類文字背後，我覺得這個用法蠻大膽的，若是想要增加潮流感的話很適合。但若是在公司企業內部用的軟體可能需要考慮使用者的接受度。\n\n# 排版和顏色\n\nShrine 使用 12 grid system。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1JSMNlunwZaOV3F0t0eSsBqn3EhwN4Idk%2Fcasestudies-shrine-grid-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### 水平格線\n\nShrine 的手機和平板排版採用水平滑動的格線。欄位、間距和邊距都是從左到右，並不是我們一般常用的上到下。\n\n![Shrine 水平格線](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1bzYYXTPp9EKoZ_D98LDkdpmmekDIUAK1%2Fcasestudies-shrine-horizontalimagegrid.png \"Shrine 水平格線\")\n\n### 顏色\n\nShrine 的顏色主題是單色系的，將主色調 Shrine Pink 使用不同亮暗做變化。底層使用 Shrine 的主色調 (Shrine Pink 100)，下方購物車使用次色調(Shrine Pink 50)。主要內容在白色背景並使用深色 Shrine Pink 900 作為文字和圖示的顏色。\n\n![Shrine 色調](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1PqdLRDr8EpuHTdhT9f9HtIzxzGOjecJP%2Fcasestudies-shrine-color-1.png \"Shrine 色調\")\n\n1. Shrine Pink 100 用在 “add to cart” 來凸顯按鈕。\n2. 標籤(chips)外框使用 Shrine Pink 100，用深色的 900 來代表被選取的標籤。\n\n![Shrine Pink](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1ocq8e1RNTZOmpP2MXjRF1rAB4hk9nw4a%2Fcasestudies-shrine-colorcomponents.png \"Shrine Pink\")\n\nShrine 使用圖像處理來表示狀態的變化(例如被選取的狀態)，或是背後的半透明遮罩。客制的圖像是一種加強 Shrine 品牌的方式。\n\n![Shrine 被選取的狀態](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1Vzs31NWpv0YlZ2ejSZl6PEYqofYiNSFM%2Fcasestudies-shrine-color-imagerytreatment-duotone.png \"Shrine 被選取的狀態\")\n\n![Shrine 半透明遮罩](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F176hAMN80PxLeqkcw4zypAG5RZJFEIlq3%2Fcasestudies-shrine-color-imagerytreatment-patternscrim.png \"Shrine 半透明遮罩\")\n\n> 心得：使用水平格線設計我覺得是很大的挑戰，因為目前大宗的使用方向還是垂直為主。不推薦水平格線的設計，除非是遊戲、活動或各分類展示等特殊需求，否則可慮使用者需長期瀏覽的狀態下，水平左右滑動並不方便。\n\n# 文字與圖示\n\nShrine 的文字比例提供各種內容所需。所有比例皆使用 Rubik 作為字體，包含 Rubik Light、Regular和Medium。\n\n![Shrine 字體 Rubik](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1VcsKVTP1QNKoPl52cNCHauFM0_526cdN%2Fshrinetypescale.png \"Shrine 字體 Rubik\")\n\nRubik 是非襯線字體，有著略為的圓角和多種的粗細可選擇。Rubik 是非常適合 Shrine 的字體，因為他是一種清晰、時尚、現代的字體，且他的圓角帶給人溫暖、友善和有趣的感覺。\n\n![Shrine Rubik](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1rec2nbnEXesSPYTicV_qbE6D9jmCuO5h%2Fcasestudies-shrine-type-1.png \"Shrine Rubik\")\n\nShrine 使用 Material Design 預設的 icon 系統。這些 icon 在小尺寸的時候也能保持清晰和俐落。\n\n![Shrine icon](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F15IUNXILSXZmMGcH2q8W_vbS8YlO91vzt%2Fcasestudies-shrine-icons-alt.png \"Shrine icon\")\n\n> 心得：文字選用不同於 Roboto 的圓角字體，營造柔和感是不錯的選擇。\n\n# 形狀和元件\n\n元件的形狀根據他們的大小來分類。形狀分類讓你可一次性設定多個元件尺寸。形狀分類包含：\n\n1. 小元件 (Small components):浮動動作按鈕。角落各切 4dp 斜角。\n2. 中元件 (Medium components):選單。角落各切 8dp 斜角。\n3. 大元件 (Large components):內容區塊。左上角切 24dp 斜角。\n\n![Shrine 元件](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1f_u-uvDtYKjS0LEIevjDCbb1ALeH2Lks%2Fshrine-shape-b.png \"Shrine 元件\")\n\n### 按鈕\n\n1. 文字按鈕：按鈕沒有邊框和陰影。\n\n![Shrine 文字按鈕](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1ZfoWLGKLkJhKTvX0Bfjc19jk_4teiBRF%2Fcasestudies-shrine-textbutton.png \"Shrine 文字按鈕\")\n\n2. 主要按鈕：使用主色調 Shrine Pink 100，無陰影，圓角和細長形狀。\n\n![Shrine 主要按鈕](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dkaLfu-vECfRflUXOQDvYwFVHPmvIo_4%2Fcasestudies-shrine-buttonemphasis.png \"Shrine 主要按鈕\")\n\n### 標籤 Chips\n\nShrine 在產品細節頁面使用可選擇的標籤。這些客制標籤有著圓角的邊線和按鈕做區別。\n\n![Shrine 標籤](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1D0EwzNkf19srLxcQ8jLzRgYddPbDYaRB%2Fcasestudies-shrine-chips.png \"Shrine 標籤\")\n\n### 頁籤\n\nShrine 在桌機和平板使用頁籤當作導覽列。他們使用客制顏色、文字和狀態。\n\n![Shrine 頁籤](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1BkLfpj3qECEoZ41gclPvw1w6NaQNM6jm%2Fcasestudies-shrine-tabs.png \"Shrine 頁籤\")\n\n### 導覽列和背景區塊\n\nShrine 使用客制的導覽抽屜在手機上。他可以透過點擊左上角的返回元件來展開導覽。\nShrine 的導覽抽屜使用客製化的文字、顏色和狀態。置中的文字是另一個客制的特點。\nShrine 的返回元件使用客制的顏色和形狀。背後圖層使用 app 的主色調，前圖層的左上角有一個客制的斜切角。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1o4ts_Rfz0X97TaapdQ-9YON6O3WzE3WZ%2Fcasestudies-shrine-backdrop-1b.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### 圖像列表\n\nShrine 使用編排過的圖像列表來展示內容。編排過的圖像列表穿插使用不同大小（相同比例）的區塊創造有韻律的排版，且非常適合水平瀏覽內容。\n\n編排過的圖像列表對於內容來說非常理想，因為他提升了每個商品的重點和新穎性，讓使用者不會過快的掃描內容。\n\n![Shrine 圖像列表](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1bzYYXTPp9EKoZ_D98LDkdpmmekDIUAK1%2Fcasestudies-shrine-horizontalimagegrid.png \"Shrine 圖像列表\")\n\n### 購物清單\n\nShrine 使用可展開的底部清單讓使用者可以簡單的到達購物車。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F10tATQMRwpM8VtaVZKbVnBv3uzaXVDEMT%2Fcasestudies-shrine-shoppingcart-1b.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n> 心得：對於圖像列表的水平滾動方式我不是很贊同，因為大多數使用者只會對前幾樣商品用比較慢的速度查看，到後面都會變成掃描式的，故意編排成眼睛不易掃瞄商品的方式，只會讓使用者變得不想用，因為他沒辦法快速的查看大量商品做比較。\n\n# 互動\n\nShrine 的互動設計使用增強的淡入、較長的延遲時間來漸進式營造優雅和愉悅的環境。\n\n### 起始畫面\n\nShrine 的產品 icon 動畫透過幾何的形狀變化來表達 logo。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1z58j-BuFmvDzpsnkpzPnpBENPAmy-RWb%2F01-launch.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### icon 動畫\n\n動畫 icon 增加樂趣且引領使用者操作。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1fghiYco9yt2kaHxdvpvvG5H1Rfys8xyi%2F02-icons.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### 漸變得導覽列\n\nShrine 的導覽漸變動畫強調淡出和長時間下達到放鬆和優雅的氣氛。時間延遲用於引起對重要元件的注意，例如購物車和結帳按鈕。在背後圖層使用交錯的淡入淡出來產生關連的效果。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1a5xbi_QBcDBvNwKFyY10vXqAE4oJlSAb%2F03-navigationtransitions.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### 示範\n\n當第一次增加商品到購物車時，一個示範的動畫將展示商品已放置在購物車中。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SlTir4qcIH6gcKn2ZwVzAF5dA20rFtHF%2F04-tutorial.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n> 心得：對於會動的 icon 和示範商品放入購物車這兩個設計很有興趣，若有機會的話會想要嘗試放在專案中嘗試。\n\n總結：Shrine 這個案例除了上述提到的水平滾動設計我不是很贊同外，其他的部分都很值得學習借鏡。是個很不錯的案例，那我們下次見囉～\n\n## 參考資料\n\n* [Material Studies - Shrine](https://material.io/design/material-studies/shrine.html)","source":"_posts/UXUI/Google-Material-Studies-Shrine.md","raw":"---\ntitle: Google Material Studies - Shrine\ncategories:\n  - UXUI\n  - Material Design\nthumbnailImage: https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no\nthumbnailImagePosition: left\ncoverImage: https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1XfN9LumqsUoSt6nDckGhoja4ll8EAmZI%2Fcasestudies-shrine-brandattributes.png\ncoverMeta: out\ntags: [UX, UI, Material Design]\ndate: 2019/06/07\nupdated: 2019/06/07\n---\n\n這次 Material Design 案例介紹零售業的 APP 設計，相信大家都不陌生，如何呈現大量商品給使用者也是一門學問。\n\n<!--more-->\n\n# 案例背景\n\nShrine APP 是一個線上市場，透過推播標籤 (promoted labels) 來表達生活方式和時尚產品的特色。Shrine 的品牌美學為現代、优雅、精致。Shrine 在展示各品牌和產品背后，有著一致的美學概念。\n\n### 極簡美學\n\nShrine 的極簡主義將使用者體驗著重在產品内容和 APP 互動。作為展示各種產品和品牌核心的统一架構，Shrine 的品牌扮演着重要的角色。\n\n### 視覺主題\n\nShrine 的視覺主題採用去角的剪裁設計，應用在各種組件和元素上。這些元素代表 Shrine logo 的形狀，且為 Shrine 品牌的延伸設計。\n\n![Shrine 去角的剪裁設計](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1KZq-VRhEx9j2HydlT4ZW9H7tR-WoOZAe%2Fcasestudies-shrine-logo-alt.png \"Shrine 去角的剪裁設計\")\n\nShrine 的互動模型是由三個重疊的圖層組成。\n\n1. 最下層為導航和品牌元素\n2. 中間層為主要內容\n3. 最上層為購物車\n\n![Shrine 三個重疊的圖層](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1a-_JDAJTous0ko4miSjAgVwJPHQB2hHe%2Fcasestudies-shrine-elevationchart.png \"Shrine 三個重疊的圖層\")\n\n> 心得：以前做過大量分類的內容網站，如何讓使用者快速找到他要的類別是一門學問。極簡風格的好處是將操作簡化，並專注於呈現產品給使用者。\n\n# 產品架構\n\nShrine 應用程序的資訊架構是由目錄(catalog)結構組成。一個目錄包含各分類資訊，母類別可能包含子類別。Shrine 的母類別將大群組的物品分類，例如：鞋子、配飾、連衣裙，如此一來，使用者可以看到相關的內容。採用目錄結構讓使用者瀏覽有興趣的項目、互相比對不同的產品和查看特定的產品資訊。\n\n### 導覽列\n\nShrine 在桌機、平板和手機上使用不同形式的導覽列。\n手機將導覽列放在最後一個圖層，需要藉由回上頁的元件做返回的動作。\n平板使用頁籤(tabs)的方式導覽。\n桌機使用標準的導覽收納欄位。\n\n![Shrine 導覽列](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1-qYMfjqAbsMb9O-lJNIsaHcKhO_p4O_s%2Fcasestudies-shrine-family.png \"Shrine 導覽列\")\n\n### 項目指標\n\n所有導覽列共用同一個選取狀態模式：當一個項目被選取，項目背後會有一個三角圖樣代表被選取的狀態。項目指標確保使用者知道他們目前所在的類別。\n\n![Shrine 項目指標](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1l0DbKUHyQKvedhajBXcnaVN8UZbn7eSF%2Fcasestudies-shrine-nav.png \"Shrine 項目指標\")\n\n### 購物車\n\n購物車可以在螢幕右下角找到。當物品加入或從購物車移除，購物清單會動態更新並反映變化。\n購物清單可以透過點擊 icon ，展開內容細目，或是帶使用者到購物畫面。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dgcMYf6_2L_xYYriPRcoACs_woD5LIFm%2Fcasestudies-shrine-shoppingcart-1b.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n> 心得：項目指標用圖示的方式標示在分類文字背後，我覺得這個用法蠻大膽的，若是想要增加潮流感的話很適合。但若是在公司企業內部用的軟體可能需要考慮使用者的接受度。\n\n# 排版和顏色\n\nShrine 使用 12 grid system。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1JSMNlunwZaOV3F0t0eSsBqn3EhwN4Idk%2Fcasestudies-shrine-grid-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### 水平格線\n\nShrine 的手機和平板排版採用水平滑動的格線。欄位、間距和邊距都是從左到右，並不是我們一般常用的上到下。\n\n![Shrine 水平格線](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1bzYYXTPp9EKoZ_D98LDkdpmmekDIUAK1%2Fcasestudies-shrine-horizontalimagegrid.png \"Shrine 水平格線\")\n\n### 顏色\n\nShrine 的顏色主題是單色系的，將主色調 Shrine Pink 使用不同亮暗做變化。底層使用 Shrine 的主色調 (Shrine Pink 100)，下方購物車使用次色調(Shrine Pink 50)。主要內容在白色背景並使用深色 Shrine Pink 900 作為文字和圖示的顏色。\n\n![Shrine 色調](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1PqdLRDr8EpuHTdhT9f9HtIzxzGOjecJP%2Fcasestudies-shrine-color-1.png \"Shrine 色調\")\n\n1. Shrine Pink 100 用在 “add to cart” 來凸顯按鈕。\n2. 標籤(chips)外框使用 Shrine Pink 100，用深色的 900 來代表被選取的標籤。\n\n![Shrine Pink](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1ocq8e1RNTZOmpP2MXjRF1rAB4hk9nw4a%2Fcasestudies-shrine-colorcomponents.png \"Shrine Pink\")\n\nShrine 使用圖像處理來表示狀態的變化(例如被選取的狀態)，或是背後的半透明遮罩。客制的圖像是一種加強 Shrine 品牌的方式。\n\n![Shrine 被選取的狀態](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1Vzs31NWpv0YlZ2ejSZl6PEYqofYiNSFM%2Fcasestudies-shrine-color-imagerytreatment-duotone.png \"Shrine 被選取的狀態\")\n\n![Shrine 半透明遮罩](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F176hAMN80PxLeqkcw4zypAG5RZJFEIlq3%2Fcasestudies-shrine-color-imagerytreatment-patternscrim.png \"Shrine 半透明遮罩\")\n\n> 心得：使用水平格線設計我覺得是很大的挑戰，因為目前大宗的使用方向還是垂直為主。不推薦水平格線的設計，除非是遊戲、活動或各分類展示等特殊需求，否則可慮使用者需長期瀏覽的狀態下，水平左右滑動並不方便。\n\n# 文字與圖示\n\nShrine 的文字比例提供各種內容所需。所有比例皆使用 Rubik 作為字體，包含 Rubik Light、Regular和Medium。\n\n![Shrine 字體 Rubik](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1VcsKVTP1QNKoPl52cNCHauFM0_526cdN%2Fshrinetypescale.png \"Shrine 字體 Rubik\")\n\nRubik 是非襯線字體，有著略為的圓角和多種的粗細可選擇。Rubik 是非常適合 Shrine 的字體，因為他是一種清晰、時尚、現代的字體，且他的圓角帶給人溫暖、友善和有趣的感覺。\n\n![Shrine Rubik](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1rec2nbnEXesSPYTicV_qbE6D9jmCuO5h%2Fcasestudies-shrine-type-1.png \"Shrine Rubik\")\n\nShrine 使用 Material Design 預設的 icon 系統。這些 icon 在小尺寸的時候也能保持清晰和俐落。\n\n![Shrine icon](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F15IUNXILSXZmMGcH2q8W_vbS8YlO91vzt%2Fcasestudies-shrine-icons-alt.png \"Shrine icon\")\n\n> 心得：文字選用不同於 Roboto 的圓角字體，營造柔和感是不錯的選擇。\n\n# 形狀和元件\n\n元件的形狀根據他們的大小來分類。形狀分類讓你可一次性設定多個元件尺寸。形狀分類包含：\n\n1. 小元件 (Small components):浮動動作按鈕。角落各切 4dp 斜角。\n2. 中元件 (Medium components):選單。角落各切 8dp 斜角。\n3. 大元件 (Large components):內容區塊。左上角切 24dp 斜角。\n\n![Shrine 元件](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1f_u-uvDtYKjS0LEIevjDCbb1ALeH2Lks%2Fshrine-shape-b.png \"Shrine 元件\")\n\n### 按鈕\n\n1. 文字按鈕：按鈕沒有邊框和陰影。\n\n![Shrine 文字按鈕](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1ZfoWLGKLkJhKTvX0Bfjc19jk_4teiBRF%2Fcasestudies-shrine-textbutton.png \"Shrine 文字按鈕\")\n\n2. 主要按鈕：使用主色調 Shrine Pink 100，無陰影，圓角和細長形狀。\n\n![Shrine 主要按鈕](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dkaLfu-vECfRflUXOQDvYwFVHPmvIo_4%2Fcasestudies-shrine-buttonemphasis.png \"Shrine 主要按鈕\")\n\n### 標籤 Chips\n\nShrine 在產品細節頁面使用可選擇的標籤。這些客制標籤有著圓角的邊線和按鈕做區別。\n\n![Shrine 標籤](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1D0EwzNkf19srLxcQ8jLzRgYddPbDYaRB%2Fcasestudies-shrine-chips.png \"Shrine 標籤\")\n\n### 頁籤\n\nShrine 在桌機和平板使用頁籤當作導覽列。他們使用客制顏色、文字和狀態。\n\n![Shrine 頁籤](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1BkLfpj3qECEoZ41gclPvw1w6NaQNM6jm%2Fcasestudies-shrine-tabs.png \"Shrine 頁籤\")\n\n### 導覽列和背景區塊\n\nShrine 使用客制的導覽抽屜在手機上。他可以透過點擊左上角的返回元件來展開導覽。\nShrine 的導覽抽屜使用客製化的文字、顏色和狀態。置中的文字是另一個客制的特點。\nShrine 的返回元件使用客制的顏色和形狀。背後圖層使用 app 的主色調，前圖層的左上角有一個客制的斜切角。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1o4ts_Rfz0X97TaapdQ-9YON6O3WzE3WZ%2Fcasestudies-shrine-backdrop-1b.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### 圖像列表\n\nShrine 使用編排過的圖像列表來展示內容。編排過的圖像列表穿插使用不同大小（相同比例）的區塊創造有韻律的排版，且非常適合水平瀏覽內容。\n\n編排過的圖像列表對於內容來說非常理想，因為他提升了每個商品的重點和新穎性，讓使用者不會過快的掃描內容。\n\n![Shrine 圖像列表](https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1bzYYXTPp9EKoZ_D98LDkdpmmekDIUAK1%2Fcasestudies-shrine-horizontalimagegrid.png \"Shrine 圖像列表\")\n\n### 購物清單\n\nShrine 使用可展開的底部清單讓使用者可以簡單的到達購物車。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F10tATQMRwpM8VtaVZKbVnBv3uzaXVDEMT%2Fcasestudies-shrine-shoppingcart-1b.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n> 心得：對於圖像列表的水平滾動方式我不是很贊同，因為大多數使用者只會對前幾樣商品用比較慢的速度查看，到後面都會變成掃描式的，故意編排成眼睛不易掃瞄商品的方式，只會讓使用者變得不想用，因為他沒辦法快速的查看大量商品做比較。\n\n# 互動\n\nShrine 的互動設計使用增強的淡入、較長的延遲時間來漸進式營造優雅和愉悅的環境。\n\n### 起始畫面\n\nShrine 的產品 icon 動畫透過幾何的形狀變化來表達 logo。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1z58j-BuFmvDzpsnkpzPnpBENPAmy-RWb%2F01-launch.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### icon 動畫\n\n動畫 icon 增加樂趣且引領使用者操作。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1fghiYco9yt2kaHxdvpvvG5H1Rfys8xyi%2F02-icons.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### 漸變得導覽列\n\nShrine 的導覽漸變動畫強調淡出和長時間下達到放鬆和優雅的氣氛。時間延遲用於引起對重要元件的注意，例如購物車和結帳按鈕。在背後圖層使用交錯的淡入淡出來產生關連的效果。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1a5xbi_QBcDBvNwKFyY10vXqAE4oJlSAb%2F03-navigationtransitions.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### 示範\n\n當第一次增加商品到購物車時，一個示範的動畫將展示商品已放置在購物車中。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SlTir4qcIH6gcKn2ZwVzAF5dA20rFtHF%2F04-tutorial.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n> 心得：對於會動的 icon 和示範商品放入購物車這兩個設計很有興趣，若有機會的話會想要嘗試放在專案中嘗試。\n\n總結：Shrine 這個案例除了上述提到的水平滾動設計我不是很贊同外，其他的部分都很值得學習借鏡。是個很不錯的案例，那我們下次見囉～\n\n## 參考資料\n\n* [Material Studies - Shrine](https://material.io/design/material-studies/shrine.html)","slug":"UXUI/Google-Material-Studies-Shrine","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu7520027tudhfxynp6y8","content":"<p>這次 Material Design 案例介紹零售業的 APP 設計，相信大家都不陌生，如何呈現大量商品給使用者也是一門學問。</p>\n<a id=\"more\"></a>\n<h1 id=\"案例背景\"><a href=\"#案例背景\" class=\"headerlink\" title=\"案例背景\"></a>案例背景</h1><p>Shrine APP 是一個線上市場，透過推播標籤 (promoted labels) 來表達生活方式和時尚產品的特色。Shrine 的品牌美學為現代、优雅、精致。Shrine 在展示各品牌和產品背后，有著一致的美學概念。</p>\n<h3 id=\"極簡美學\"><a href=\"#極簡美學\" class=\"headerlink\" title=\"極簡美學\"></a>極簡美學</h3><p>Shrine 的極簡主義將使用者體驗著重在產品内容和 APP 互動。作為展示各種產品和品牌核心的统一架構，Shrine 的品牌扮演着重要的角色。</p>\n<h3 id=\"視覺主題\"><a href=\"#視覺主題\" class=\"headerlink\" title=\"視覺主題\"></a>視覺主題</h3><p>Shrine 的視覺主題採用去角的剪裁設計，應用在各種組件和元素上。這些元素代表 Shrine logo 的形狀，且為 Shrine 品牌的延伸設計。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1KZq-VRhEx9j2HydlT4ZW9H7tR-WoOZAe%2Fcasestudies-shrine-logo-alt.png\" alt=\"Shrine 去角的剪裁設計\" title=\"Shrine 去角的剪裁設計\"></p>\n<p>Shrine 的互動模型是由三個重疊的圖層組成。</p>\n<ol>\n<li>最下層為導航和品牌元素</li>\n<li>中間層為主要內容</li>\n<li>最上層為購物車</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1a-_JDAJTous0ko4miSjAgVwJPHQB2hHe%2Fcasestudies-shrine-elevationchart.png\" alt=\"Shrine 三個重疊的圖層\" title=\"Shrine 三個重疊的圖層\"></p>\n<blockquote>\n<p>心得：以前做過大量分類的內容網站，如何讓使用者快速找到他要的類別是一門學問。極簡風格的好處是將操作簡化，並專注於呈現產品給使用者。</p>\n</blockquote>\n<h1 id=\"產品架構\"><a href=\"#產品架構\" class=\"headerlink\" title=\"產品架構\"></a>產品架構</h1><p>Shrine 應用程序的資訊架構是由目錄(catalog)結構組成。一個目錄包含各分類資訊，母類別可能包含子類別。Shrine 的母類別將大群組的物品分類，例如：鞋子、配飾、連衣裙，如此一來，使用者可以看到相關的內容。採用目錄結構讓使用者瀏覽有興趣的項目、互相比對不同的產品和查看特定的產品資訊。</p>\n<h3 id=\"導覽列\"><a href=\"#導覽列\" class=\"headerlink\" title=\"導覽列\"></a>導覽列</h3><p>Shrine 在桌機、平板和手機上使用不同形式的導覽列。<br>手機將導覽列放在最後一個圖層，需要藉由回上頁的元件做返回的動作。<br>平板使用頁籤(tabs)的方式導覽。<br>桌機使用標準的導覽收納欄位。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1-qYMfjqAbsMb9O-lJNIsaHcKhO_p4O_s%2Fcasestudies-shrine-family.png\" alt=\"Shrine 導覽列\" title=\"Shrine 導覽列\"></p>\n<h3 id=\"項目指標\"><a href=\"#項目指標\" class=\"headerlink\" title=\"項目指標\"></a>項目指標</h3><p>所有導覽列共用同一個選取狀態模式：當一個項目被選取，項目背後會有一個三角圖樣代表被選取的狀態。項目指標確保使用者知道他們目前所在的類別。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1l0DbKUHyQKvedhajBXcnaVN8UZbn7eSF%2Fcasestudies-shrine-nav.png\" alt=\"Shrine 項目指標\" title=\"Shrine 項目指標\"></p>\n<h3 id=\"購物車\"><a href=\"#購物車\" class=\"headerlink\" title=\"購物車\"></a>購物車</h3><p>購物車可以在螢幕右下角找到。當物品加入或從購物車移除，購物清單會動態更新並反映變化。<br>購物清單可以透過點擊 icon ，展開內容細目，或是帶使用者到購物畫面。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dgcMYf6_2L_xYYriPRcoACs_woD5LIFm%2Fcasestudies-shrine-shoppingcart-1b.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<blockquote>\n<p>心得：項目指標用圖示的方式標示在分類文字背後，我覺得這個用法蠻大膽的，若是想要增加潮流感的話很適合。但若是在公司企業內部用的軟體可能需要考慮使用者的接受度。</p>\n</blockquote>\n<h1 id=\"排版和顏色\"><a href=\"#排版和顏色\" class=\"headerlink\" title=\"排版和顏色\"></a>排版和顏色</h1><p>Shrine 使用 12 grid system。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1JSMNlunwZaOV3F0t0eSsBqn3EhwN4Idk%2Fcasestudies-shrine-grid-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"水平格線\"><a href=\"#水平格線\" class=\"headerlink\" title=\"水平格線\"></a>水平格線</h3><p>Shrine 的手機和平板排版採用水平滑動的格線。欄位、間距和邊距都是從左到右，並不是我們一般常用的上到下。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1bzYYXTPp9EKoZ_D98LDkdpmmekDIUAK1%2Fcasestudies-shrine-horizontalimagegrid.png\" alt=\"Shrine 水平格線\" title=\"Shrine 水平格線\"></p>\n<h3 id=\"顏色\"><a href=\"#顏色\" class=\"headerlink\" title=\"顏色\"></a>顏色</h3><p>Shrine 的顏色主題是單色系的，將主色調 Shrine Pink 使用不同亮暗做變化。底層使用 Shrine 的主色調 (Shrine Pink 100)，下方購物車使用次色調(Shrine Pink 50)。主要內容在白色背景並使用深色 Shrine Pink 900 作為文字和圖示的顏色。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1PqdLRDr8EpuHTdhT9f9HtIzxzGOjecJP%2Fcasestudies-shrine-color-1.png\" alt=\"Shrine 色調\" title=\"Shrine 色調\"></p>\n<ol>\n<li>Shrine Pink 100 用在 “add to cart” 來凸顯按鈕。</li>\n<li>標籤(chips)外框使用 Shrine Pink 100，用深色的 900 來代表被選取的標籤。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1ocq8e1RNTZOmpP2MXjRF1rAB4hk9nw4a%2Fcasestudies-shrine-colorcomponents.png\" alt=\"Shrine Pink\" title=\"Shrine Pink\"></p>\n<p>Shrine 使用圖像處理來表示狀態的變化(例如被選取的狀態)，或是背後的半透明遮罩。客制的圖像是一種加強 Shrine 品牌的方式。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1Vzs31NWpv0YlZ2ejSZl6PEYqofYiNSFM%2Fcasestudies-shrine-color-imagerytreatment-duotone.png\" alt=\"Shrine 被選取的狀態\" title=\"Shrine 被選取的狀態\"></p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F176hAMN80PxLeqkcw4zypAG5RZJFEIlq3%2Fcasestudies-shrine-color-imagerytreatment-patternscrim.png\" alt=\"Shrine 半透明遮罩\" title=\"Shrine 半透明遮罩\"></p>\n<blockquote>\n<p>心得：使用水平格線設計我覺得是很大的挑戰，因為目前大宗的使用方向還是垂直為主。不推薦水平格線的設計，除非是遊戲、活動或各分類展示等特殊需求，否則可慮使用者需長期瀏覽的狀態下，水平左右滑動並不方便。</p>\n</blockquote>\n<h1 id=\"文字與圖示\"><a href=\"#文字與圖示\" class=\"headerlink\" title=\"文字與圖示\"></a>文字與圖示</h1><p>Shrine 的文字比例提供各種內容所需。所有比例皆使用 Rubik 作為字體，包含 Rubik Light、Regular和Medium。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1VcsKVTP1QNKoPl52cNCHauFM0_526cdN%2Fshrinetypescale.png\" alt=\"Shrine 字體 Rubik\" title=\"Shrine 字體 Rubik\"></p>\n<p>Rubik 是非襯線字體，有著略為的圓角和多種的粗細可選擇。Rubik 是非常適合 Shrine 的字體，因為他是一種清晰、時尚、現代的字體，且他的圓角帶給人溫暖、友善和有趣的感覺。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1rec2nbnEXesSPYTicV_qbE6D9jmCuO5h%2Fcasestudies-shrine-type-1.png\" alt=\"Shrine Rubik\" title=\"Shrine Rubik\"></p>\n<p>Shrine 使用 Material Design 預設的 icon 系統。這些 icon 在小尺寸的時候也能保持清晰和俐落。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F15IUNXILSXZmMGcH2q8W_vbS8YlO91vzt%2Fcasestudies-shrine-icons-alt.png\" alt=\"Shrine icon\" title=\"Shrine icon\"></p>\n<blockquote>\n<p>心得：文字選用不同於 Roboto 的圓角字體，營造柔和感是不錯的選擇。</p>\n</blockquote>\n<h1 id=\"形狀和元件\"><a href=\"#形狀和元件\" class=\"headerlink\" title=\"形狀和元件\"></a>形狀和元件</h1><p>元件的形狀根據他們的大小來分類。形狀分類讓你可一次性設定多個元件尺寸。形狀分類包含：</p>\n<ol>\n<li>小元件 (Small components):浮動動作按鈕。角落各切 4dp 斜角。</li>\n<li>中元件 (Medium components):選單。角落各切 8dp 斜角。</li>\n<li>大元件 (Large components):內容區塊。左上角切 24dp 斜角。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1f_u-uvDtYKjS0LEIevjDCbb1ALeH2Lks%2Fshrine-shape-b.png\" alt=\"Shrine 元件\" title=\"Shrine 元件\"></p>\n<h3 id=\"按鈕\"><a href=\"#按鈕\" class=\"headerlink\" title=\"按鈕\"></a>按鈕</h3><ol>\n<li>文字按鈕：按鈕沒有邊框和陰影。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1ZfoWLGKLkJhKTvX0Bfjc19jk_4teiBRF%2Fcasestudies-shrine-textbutton.png\" alt=\"Shrine 文字按鈕\" title=\"Shrine 文字按鈕\"></p>\n<ol>\n<li>主要按鈕：使用主色調 Shrine Pink 100，無陰影，圓角和細長形狀。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dkaLfu-vECfRflUXOQDvYwFVHPmvIo_4%2Fcasestudies-shrine-buttonemphasis.png\" alt=\"Shrine 主要按鈕\" title=\"Shrine 主要按鈕\"></p>\n<h3 id=\"標籤-Chips\"><a href=\"#標籤-Chips\" class=\"headerlink\" title=\"標籤 Chips\"></a>標籤 Chips</h3><p>Shrine 在產品細節頁面使用可選擇的標籤。這些客制標籤有著圓角的邊線和按鈕做區別。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1D0EwzNkf19srLxcQ8jLzRgYddPbDYaRB%2Fcasestudies-shrine-chips.png\" alt=\"Shrine 標籤\" title=\"Shrine 標籤\"></p>\n<h3 id=\"頁籤\"><a href=\"#頁籤\" class=\"headerlink\" title=\"頁籤\"></a>頁籤</h3><p>Shrine 在桌機和平板使用頁籤當作導覽列。他們使用客制顏色、文字和狀態。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1BkLfpj3qECEoZ41gclPvw1w6NaQNM6jm%2Fcasestudies-shrine-tabs.png\" alt=\"Shrine 頁籤\" title=\"Shrine 頁籤\"></p>\n<h3 id=\"導覽列和背景區塊\"><a href=\"#導覽列和背景區塊\" class=\"headerlink\" title=\"導覽列和背景區塊\"></a>導覽列和背景區塊</h3><p>Shrine 使用客制的導覽抽屜在手機上。他可以透過點擊左上角的返回元件來展開導覽。<br>Shrine 的導覽抽屜使用客製化的文字、顏色和狀態。置中的文字是另一個客制的特點。<br>Shrine 的返回元件使用客制的顏色和形狀。背後圖層使用 app 的主色調，前圖層的左上角有一個客制的斜切角。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1o4ts_Rfz0X97TaapdQ-9YON6O3WzE3WZ%2Fcasestudies-shrine-backdrop-1b.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"圖像列表\"><a href=\"#圖像列表\" class=\"headerlink\" title=\"圖像列表\"></a>圖像列表</h3><p>Shrine 使用編排過的圖像列表來展示內容。編排過的圖像列表穿插使用不同大小（相同比例）的區塊創造有韻律的排版，且非常適合水平瀏覽內容。</p>\n<p>編排過的圖像列表對於內容來說非常理想，因為他提升了每個商品的重點和新穎性，讓使用者不會過快的掃描內容。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1bzYYXTPp9EKoZ_D98LDkdpmmekDIUAK1%2Fcasestudies-shrine-horizontalimagegrid.png\" alt=\"Shrine 圖像列表\" title=\"Shrine 圖像列表\"></p>\n<h3 id=\"購物清單\"><a href=\"#購物清單\" class=\"headerlink\" title=\"購物清單\"></a>購物清單</h3><p>Shrine 使用可展開的底部清單讓使用者可以簡單的到達購物車。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F10tATQMRwpM8VtaVZKbVnBv3uzaXVDEMT%2Fcasestudies-shrine-shoppingcart-1b.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<blockquote>\n<p>心得：對於圖像列表的水平滾動方式我不是很贊同，因為大多數使用者只會對前幾樣商品用比較慢的速度查看，到後面都會變成掃描式的，故意編排成眼睛不易掃瞄商品的方式，只會讓使用者變得不想用，因為他沒辦法快速的查看大量商品做比較。</p>\n</blockquote>\n<h1 id=\"互動\"><a href=\"#互動\" class=\"headerlink\" title=\"互動\"></a>互動</h1><p>Shrine 的互動設計使用增強的淡入、較長的延遲時間來漸進式營造優雅和愉悅的環境。</p>\n<h3 id=\"起始畫面\"><a href=\"#起始畫面\" class=\"headerlink\" title=\"起始畫面\"></a>起始畫面</h3><p>Shrine 的產品 icon 動畫透過幾何的形狀變化來表達 logo。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1z58j-BuFmvDzpsnkpzPnpBENPAmy-RWb%2F01-launch.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"icon-動畫\"><a href=\"#icon-動畫\" class=\"headerlink\" title=\"icon 動畫\"></a>icon 動畫</h3><p>動畫 icon 增加樂趣且引領使用者操作。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1fghiYco9yt2kaHxdvpvvG5H1Rfys8xyi%2F02-icons.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"漸變得導覽列\"><a href=\"#漸變得導覽列\" class=\"headerlink\" title=\"漸變得導覽列\"></a>漸變得導覽列</h3><p>Shrine 的導覽漸變動畫強調淡出和長時間下達到放鬆和優雅的氣氛。時間延遲用於引起對重要元件的注意，例如購物車和結帳按鈕。在背後圖層使用交錯的淡入淡出來產生關連的效果。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1a5xbi_QBcDBvNwKFyY10vXqAE4oJlSAb%2F03-navigationtransitions.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"示範\"><a href=\"#示範\" class=\"headerlink\" title=\"示範\"></a>示範</h3><p>當第一次增加商品到購物車時，一個示範的動畫將展示商品已放置在購物車中。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SlTir4qcIH6gcKn2ZwVzAF5dA20rFtHF%2F04-tutorial.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<blockquote>\n<p>心得：對於會動的 icon 和示範商品放入購物車這兩個設計很有興趣，若有機會的話會想要嘗試放在專案中嘗試。</p>\n</blockquote>\n<p>總結：Shrine 這個案例除了上述提到的水平滾動設計我不是很贊同外，其他的部分都很值得學習借鏡。是個很不錯的案例，那我們下次見囉～</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://material.io/design/material-studies/shrine.html\" target=\"_blank\" rel=\"noopener\">Material Studies - Shrine</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no","excerpt":"<p>這次 Material Design 案例介紹零售業的 APP 設計，相信大家都不陌生，如何呈現大量商品給使用者也是一門學問。</p>","more":"<h1 id=\"案例背景\"><a href=\"#案例背景\" class=\"headerlink\" title=\"案例背景\"></a>案例背景</h1><p>Shrine APP 是一個線上市場，透過推播標籤 (promoted labels) 來表達生活方式和時尚產品的特色。Shrine 的品牌美學為現代、优雅、精致。Shrine 在展示各品牌和產品背后，有著一致的美學概念。</p>\n<h3 id=\"極簡美學\"><a href=\"#極簡美學\" class=\"headerlink\" title=\"極簡美學\"></a>極簡美學</h3><p>Shrine 的極簡主義將使用者體驗著重在產品内容和 APP 互動。作為展示各種產品和品牌核心的统一架構，Shrine 的品牌扮演着重要的角色。</p>\n<h3 id=\"視覺主題\"><a href=\"#視覺主題\" class=\"headerlink\" title=\"視覺主題\"></a>視覺主題</h3><p>Shrine 的視覺主題採用去角的剪裁設計，應用在各種組件和元素上。這些元素代表 Shrine logo 的形狀，且為 Shrine 品牌的延伸設計。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1KZq-VRhEx9j2HydlT4ZW9H7tR-WoOZAe%2Fcasestudies-shrine-logo-alt.png\" alt=\"Shrine 去角的剪裁設計\" title=\"Shrine 去角的剪裁設計\"></p>\n<p>Shrine 的互動模型是由三個重疊的圖層組成。</p>\n<ol>\n<li>最下層為導航和品牌元素</li>\n<li>中間層為主要內容</li>\n<li>最上層為購物車</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1a-_JDAJTous0ko4miSjAgVwJPHQB2hHe%2Fcasestudies-shrine-elevationchart.png\" alt=\"Shrine 三個重疊的圖層\" title=\"Shrine 三個重疊的圖層\"></p>\n<blockquote>\n<p>心得：以前做過大量分類的內容網站，如何讓使用者快速找到他要的類別是一門學問。極簡風格的好處是將操作簡化，並專注於呈現產品給使用者。</p>\n</blockquote>\n<h1 id=\"產品架構\"><a href=\"#產品架構\" class=\"headerlink\" title=\"產品架構\"></a>產品架構</h1><p>Shrine 應用程序的資訊架構是由目錄(catalog)結構組成。一個目錄包含各分類資訊，母類別可能包含子類別。Shrine 的母類別將大群組的物品分類，例如：鞋子、配飾、連衣裙，如此一來，使用者可以看到相關的內容。採用目錄結構讓使用者瀏覽有興趣的項目、互相比對不同的產品和查看特定的產品資訊。</p>\n<h3 id=\"導覽列\"><a href=\"#導覽列\" class=\"headerlink\" title=\"導覽列\"></a>導覽列</h3><p>Shrine 在桌機、平板和手機上使用不同形式的導覽列。<br>手機將導覽列放在最後一個圖層，需要藉由回上頁的元件做返回的動作。<br>平板使用頁籤(tabs)的方式導覽。<br>桌機使用標準的導覽收納欄位。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1-qYMfjqAbsMb9O-lJNIsaHcKhO_p4O_s%2Fcasestudies-shrine-family.png\" alt=\"Shrine 導覽列\" title=\"Shrine 導覽列\"></p>\n<h3 id=\"項目指標\"><a href=\"#項目指標\" class=\"headerlink\" title=\"項目指標\"></a>項目指標</h3><p>所有導覽列共用同一個選取狀態模式：當一個項目被選取，項目背後會有一個三角圖樣代表被選取的狀態。項目指標確保使用者知道他們目前所在的類別。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1l0DbKUHyQKvedhajBXcnaVN8UZbn7eSF%2Fcasestudies-shrine-nav.png\" alt=\"Shrine 項目指標\" title=\"Shrine 項目指標\"></p>\n<h3 id=\"購物車\"><a href=\"#購物車\" class=\"headerlink\" title=\"購物車\"></a>購物車</h3><p>購物車可以在螢幕右下角找到。當物品加入或從購物車移除，購物清單會動態更新並反映變化。<br>購物清單可以透過點擊 icon ，展開內容細目，或是帶使用者到購物畫面。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dgcMYf6_2L_xYYriPRcoACs_woD5LIFm%2Fcasestudies-shrine-shoppingcart-1b.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<blockquote>\n<p>心得：項目指標用圖示的方式標示在分類文字背後，我覺得這個用法蠻大膽的，若是想要增加潮流感的話很適合。但若是在公司企業內部用的軟體可能需要考慮使用者的接受度。</p>\n</blockquote>\n<h1 id=\"排版和顏色\"><a href=\"#排版和顏色\" class=\"headerlink\" title=\"排版和顏色\"></a>排版和顏色</h1><p>Shrine 使用 12 grid system。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1JSMNlunwZaOV3F0t0eSsBqn3EhwN4Idk%2Fcasestudies-shrine-grid-1a.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"水平格線\"><a href=\"#水平格線\" class=\"headerlink\" title=\"水平格線\"></a>水平格線</h3><p>Shrine 的手機和平板排版採用水平滑動的格線。欄位、間距和邊距都是從左到右，並不是我們一般常用的上到下。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1bzYYXTPp9EKoZ_D98LDkdpmmekDIUAK1%2Fcasestudies-shrine-horizontalimagegrid.png\" alt=\"Shrine 水平格線\" title=\"Shrine 水平格線\"></p>\n<h3 id=\"顏色\"><a href=\"#顏色\" class=\"headerlink\" title=\"顏色\"></a>顏色</h3><p>Shrine 的顏色主題是單色系的，將主色調 Shrine Pink 使用不同亮暗做變化。底層使用 Shrine 的主色調 (Shrine Pink 100)，下方購物車使用次色調(Shrine Pink 50)。主要內容在白色背景並使用深色 Shrine Pink 900 作為文字和圖示的顏色。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1PqdLRDr8EpuHTdhT9f9HtIzxzGOjecJP%2Fcasestudies-shrine-color-1.png\" alt=\"Shrine 色調\" title=\"Shrine 色調\"></p>\n<ol>\n<li>Shrine Pink 100 用在 “add to cart” 來凸顯按鈕。</li>\n<li>標籤(chips)外框使用 Shrine Pink 100，用深色的 900 來代表被選取的標籤。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1ocq8e1RNTZOmpP2MXjRF1rAB4hk9nw4a%2Fcasestudies-shrine-colorcomponents.png\" alt=\"Shrine Pink\" title=\"Shrine Pink\"></p>\n<p>Shrine 使用圖像處理來表示狀態的變化(例如被選取的狀態)，或是背後的半透明遮罩。客制的圖像是一種加強 Shrine 品牌的方式。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1Vzs31NWpv0YlZ2ejSZl6PEYqofYiNSFM%2Fcasestudies-shrine-color-imagerytreatment-duotone.png\" alt=\"Shrine 被選取的狀態\" title=\"Shrine 被選取的狀態\"></p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F176hAMN80PxLeqkcw4zypAG5RZJFEIlq3%2Fcasestudies-shrine-color-imagerytreatment-patternscrim.png\" alt=\"Shrine 半透明遮罩\" title=\"Shrine 半透明遮罩\"></p>\n<blockquote>\n<p>心得：使用水平格線設計我覺得是很大的挑戰，因為目前大宗的使用方向還是垂直為主。不推薦水平格線的設計，除非是遊戲、活動或各分類展示等特殊需求，否則可慮使用者需長期瀏覽的狀態下，水平左右滑動並不方便。</p>\n</blockquote>\n<h1 id=\"文字與圖示\"><a href=\"#文字與圖示\" class=\"headerlink\" title=\"文字與圖示\"></a>文字與圖示</h1><p>Shrine 的文字比例提供各種內容所需。所有比例皆使用 Rubik 作為字體，包含 Rubik Light、Regular和Medium。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1VcsKVTP1QNKoPl52cNCHauFM0_526cdN%2Fshrinetypescale.png\" alt=\"Shrine 字體 Rubik\" title=\"Shrine 字體 Rubik\"></p>\n<p>Rubik 是非襯線字體，有著略為的圓角和多種的粗細可選擇。Rubik 是非常適合 Shrine 的字體，因為他是一種清晰、時尚、現代的字體，且他的圓角帶給人溫暖、友善和有趣的感覺。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1rec2nbnEXesSPYTicV_qbE6D9jmCuO5h%2Fcasestudies-shrine-type-1.png\" alt=\"Shrine Rubik\" title=\"Shrine Rubik\"></p>\n<p>Shrine 使用 Material Design 預設的 icon 系統。這些 icon 在小尺寸的時候也能保持清晰和俐落。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F15IUNXILSXZmMGcH2q8W_vbS8YlO91vzt%2Fcasestudies-shrine-icons-alt.png\" alt=\"Shrine icon\" title=\"Shrine icon\"></p>\n<blockquote>\n<p>心得：文字選用不同於 Roboto 的圓角字體，營造柔和感是不錯的選擇。</p>\n</blockquote>\n<h1 id=\"形狀和元件\"><a href=\"#形狀和元件\" class=\"headerlink\" title=\"形狀和元件\"></a>形狀和元件</h1><p>元件的形狀根據他們的大小來分類。形狀分類讓你可一次性設定多個元件尺寸。形狀分類包含：</p>\n<ol>\n<li>小元件 (Small components):浮動動作按鈕。角落各切 4dp 斜角。</li>\n<li>中元件 (Medium components):選單。角落各切 8dp 斜角。</li>\n<li>大元件 (Large components):內容區塊。左上角切 24dp 斜角。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1f_u-uvDtYKjS0LEIevjDCbb1ALeH2Lks%2Fshrine-shape-b.png\" alt=\"Shrine 元件\" title=\"Shrine 元件\"></p>\n<h3 id=\"按鈕\"><a href=\"#按鈕\" class=\"headerlink\" title=\"按鈕\"></a>按鈕</h3><ol>\n<li>文字按鈕：按鈕沒有邊框和陰影。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1ZfoWLGKLkJhKTvX0Bfjc19jk_4teiBRF%2Fcasestudies-shrine-textbutton.png\" alt=\"Shrine 文字按鈕\" title=\"Shrine 文字按鈕\"></p>\n<ol>\n<li>主要按鈕：使用主色調 Shrine Pink 100，無陰影，圓角和細長形狀。</li>\n</ol>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1dkaLfu-vECfRflUXOQDvYwFVHPmvIo_4%2Fcasestudies-shrine-buttonemphasis.png\" alt=\"Shrine 主要按鈕\" title=\"Shrine 主要按鈕\"></p>\n<h3 id=\"標籤-Chips\"><a href=\"#標籤-Chips\" class=\"headerlink\" title=\"標籤 Chips\"></a>標籤 Chips</h3><p>Shrine 在產品細節頁面使用可選擇的標籤。這些客制標籤有著圓角的邊線和按鈕做區別。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1D0EwzNkf19srLxcQ8jLzRgYddPbDYaRB%2Fcasestudies-shrine-chips.png\" alt=\"Shrine 標籤\" title=\"Shrine 標籤\"></p>\n<h3 id=\"頁籤\"><a href=\"#頁籤\" class=\"headerlink\" title=\"頁籤\"></a>頁籤</h3><p>Shrine 在桌機和平板使用頁籤當作導覽列。他們使用客制顏色、文字和狀態。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1BkLfpj3qECEoZ41gclPvw1w6NaQNM6jm%2Fcasestudies-shrine-tabs.png\" alt=\"Shrine 頁籤\" title=\"Shrine 頁籤\"></p>\n<h3 id=\"導覽列和背景區塊\"><a href=\"#導覽列和背景區塊\" class=\"headerlink\" title=\"導覽列和背景區塊\"></a>導覽列和背景區塊</h3><p>Shrine 使用客制的導覽抽屜在手機上。他可以透過點擊左上角的返回元件來展開導覽。<br>Shrine 的導覽抽屜使用客製化的文字、顏色和狀態。置中的文字是另一個客制的特點。<br>Shrine 的返回元件使用客制的顏色和形狀。背後圖層使用 app 的主色調，前圖層的左上角有一個客制的斜切角。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1o4ts_Rfz0X97TaapdQ-9YON6O3WzE3WZ%2Fcasestudies-shrine-backdrop-1b.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"圖像列表\"><a href=\"#圖像列表\" class=\"headerlink\" title=\"圖像列表\"></a>圖像列表</h3><p>Shrine 使用編排過的圖像列表來展示內容。編排過的圖像列表穿插使用不同大小（相同比例）的區塊創造有韻律的排版，且非常適合水平瀏覽內容。</p>\n<p>編排過的圖像列表對於內容來說非常理想，因為他提升了每個商品的重點和新穎性，讓使用者不會過快的掃描內容。</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1bzYYXTPp9EKoZ_D98LDkdpmmekDIUAK1%2Fcasestudies-shrine-horizontalimagegrid.png\" alt=\"Shrine 圖像列表\" title=\"Shrine 圖像列表\"></p>\n<h3 id=\"購物清單\"><a href=\"#購物清單\" class=\"headerlink\" title=\"購物清單\"></a>購物清單</h3><p>Shrine 使用可展開的底部清單讓使用者可以簡單的到達購物車。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F10tATQMRwpM8VtaVZKbVnBv3uzaXVDEMT%2Fcasestudies-shrine-shoppingcart-1b.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<blockquote>\n<p>心得：對於圖像列表的水平滾動方式我不是很贊同，因為大多數使用者只會對前幾樣商品用比較慢的速度查看，到後面都會變成掃描式的，故意編排成眼睛不易掃瞄商品的方式，只會讓使用者變得不想用，因為他沒辦法快速的查看大量商品做比較。</p>\n</blockquote>\n<h1 id=\"互動\"><a href=\"#互動\" class=\"headerlink\" title=\"互動\"></a>互動</h1><p>Shrine 的互動設計使用增強的淡入、較長的延遲時間來漸進式營造優雅和愉悅的環境。</p>\n<h3 id=\"起始畫面\"><a href=\"#起始畫面\" class=\"headerlink\" title=\"起始畫面\"></a>起始畫面</h3><p>Shrine 的產品 icon 動畫透過幾何的形狀變化來表達 logo。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1z58j-BuFmvDzpsnkpzPnpBENPAmy-RWb%2F01-launch.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"icon-動畫\"><a href=\"#icon-動畫\" class=\"headerlink\" title=\"icon 動畫\"></a>icon 動畫</h3><p>動畫 icon 增加樂趣且引領使用者操作。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1fghiYco9yt2kaHxdvpvvG5H1Rfys8xyi%2F02-icons.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"漸變得導覽列\"><a href=\"#漸變得導覽列\" class=\"headerlink\" title=\"漸變得導覽列\"></a>漸變得導覽列</h3><p>Shrine 的導覽漸變動畫強調淡出和長時間下達到放鬆和優雅的氣氛。時間延遲用於引起對重要元件的注意，例如購物車和結帳按鈕。在背後圖層使用交錯的淡入淡出來產生關連的效果。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1a5xbi_QBcDBvNwKFyY10vXqAE4oJlSAb%2F03-navigationtransitions.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"示範\"><a href=\"#示範\" class=\"headerlink\" title=\"示範\"></a>示範</h3><p>當第一次增加商品到購物車時，一個示範的動畫將展示商品已放置在購物車中。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1SlTir4qcIH6gcKn2ZwVzAF5dA20rFtHF%2F04-tutorial.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<blockquote>\n<p>心得：對於會動的 icon 和示範商品放入購物車這兩個設計很有興趣，若有機會的話會想要嘗試放在專案中嘗試。</p>\n</blockquote>\n<p>總結：Shrine 這個案例除了上述提到的水平滾動設計我不是很贊同外，其他的部分都很值得學習借鏡。是個很不錯的案例，那我們下次見囉～</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://material.io/design/material-studies/shrine.html\" target=\"_blank\" rel=\"noopener\">Material Studies - Shrine</a></li>\n</ul>"},{"title":"Use git extention in VScode, goodbye sourcetree","thumbnailImage":"https://code.visualstudio.com/assets/favicon.ico","thumbnailImagePosition":"left","coverImage":"https://nickjanetakis.com/assets/blog/cards/my-favorite-vscode-extensions-0a601796807e75dea485f00ded76da1ab2279c3d85364335b715c1918691650f.jpg","coverMeta":"out","date":"2019-11-22T16:00:00.000Z","updated":"2019-11-22T16:00:00.000Z","_content":"\n因為 sourcetree 在公司內網些時候會一直跳出輸入 AD 帳密的視窗，前陣子因為換了密碼，結果舊密碼被記住，結果每用一次 sourcetree 就會被鎖一次帳號，真是冤望啊！後來索性就決定刪掉 sourcetree ，想說如果全部都在 vscode 一次解決就完美了～所以就開始我的 vscode extention 探索之旅。\n\n<!--more-->\n\n首先，得先理出哪些 sourcetree 的功能是我常用的，並找到相對應的 vscode extention 。想要的功能如下：\n\n1. 資料夾整理專案功能：因為不可能記住 repo 名稱對應的專案，所以若能像 sourcetree 有分資料夾的功能，就能快速找到專案對應的 repo。\n\n2. Git Stash 功能：能暫存程式碼片段在本機。隨時可調用。\n\n3. Git Graph 功能: 能看清楚每個 branch 的 commit 圖形化介面。\n\n接著，我們就來看是哪些 vscode extention 吧~\n\n# Project Manager\n\n[Project Manager](https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager) 能用它做資料夾整理專案的功能，而且他在 vscode 還可以做 open in new window 的動作\b，整合開啟程式片段的功能感覺超方便！\n\n![Project Manager](https://github.com/alefragnani/vscode-project-manager/raw/master/images/vscode-project-manager-side-bar.gif)\n\n# Git Stash\n\n[Git Stash](https://marketplace.visualstudio.com/items?itemName=arturock.gitstash) 能用它做 git stash 的相關動作，而且他整合在 vscode 的 git 頁籤中，不會像 gitLens 跑到另一個頁籤，我覺得整合的很好，操作又簡潔。\n\n![Git Stash](https://raw.githubusercontent.com/arturock/vscode-gitstash/master/resources/docs/screencast.gif)\n\n\n# Git Graph\n\n[Git Graph](https://marketplace.visualstudio.com/items?itemName=mhutchie.git-graph) 能用它看到 git 圖形，也可以透過滑鼠右鍵做 branch 切換、加 tag、cherry pick 等動作，最重要的是他也整合在 git 頁籤中，所以就可以把 git 功能就統一在 vscode 原始 git 頁籤中，整個融合在 vscode 介面中，再也不用另外開 sourcetree 了！\n\n![Git Graph](https://github.com/mhutchie/vscode-git-graph/raw/master/resources/demo.gif)\n\n透過以上三個 vscode extention ，就能永遠跟 sourcetree 說 goodbye 了～\n","source":"_posts/VScode/Use-git-extention-in-VScode-goodbye-sourcetree.md","raw":"---\ntitle: 'Use git extention in VScode, goodbye sourcetree'\ncategories:\n  - VScode\nthumbnailImage: https://code.visualstudio.com/assets/favicon.ico\nthumbnailImagePosition: left\ncoverImage: https://nickjanetakis.com/assets/blog/cards/my-favorite-vscode-extensions-0a601796807e75dea485f00ded76da1ab2279c3d85364335b715c1918691650f.jpg\ncoverMeta: out\ntags: [Git, VScode]\ndate: 2019/11/23\nupdated: 2019/11/23\n---\n\n因為 sourcetree 在公司內網些時候會一直跳出輸入 AD 帳密的視窗，前陣子因為換了密碼，結果舊密碼被記住，結果每用一次 sourcetree 就會被鎖一次帳號，真是冤望啊！後來索性就決定刪掉 sourcetree ，想說如果全部都在 vscode 一次解決就完美了～所以就開始我的 vscode extention 探索之旅。\n\n<!--more-->\n\n首先，得先理出哪些 sourcetree 的功能是我常用的，並找到相對應的 vscode extention 。想要的功能如下：\n\n1. 資料夾整理專案功能：因為不可能記住 repo 名稱對應的專案，所以若能像 sourcetree 有分資料夾的功能，就能快速找到專案對應的 repo。\n\n2. Git Stash 功能：能暫存程式碼片段在本機。隨時可調用。\n\n3. Git Graph 功能: 能看清楚每個 branch 的 commit 圖形化介面。\n\n接著，我們就來看是哪些 vscode extention 吧~\n\n# Project Manager\n\n[Project Manager](https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager) 能用它做資料夾整理專案的功能，而且他在 vscode 還可以做 open in new window 的動作\b，整合開啟程式片段的功能感覺超方便！\n\n![Project Manager](https://github.com/alefragnani/vscode-project-manager/raw/master/images/vscode-project-manager-side-bar.gif)\n\n# Git Stash\n\n[Git Stash](https://marketplace.visualstudio.com/items?itemName=arturock.gitstash) 能用它做 git stash 的相關動作，而且他整合在 vscode 的 git 頁籤中，不會像 gitLens 跑到另一個頁籤，我覺得整合的很好，操作又簡潔。\n\n![Git Stash](https://raw.githubusercontent.com/arturock/vscode-gitstash/master/resources/docs/screencast.gif)\n\n\n# Git Graph\n\n[Git Graph](https://marketplace.visualstudio.com/items?itemName=mhutchie.git-graph) 能用它看到 git 圖形，也可以透過滑鼠右鍵做 branch 切換、加 tag、cherry pick 等動作，最重要的是他也整合在 git 頁籤中，所以就可以把 git 功能就統一在 vscode 原始 git 頁籤中，整個融合在 vscode 介面中，再也不用另外開 sourcetree 了！\n\n![Git Graph](https://github.com/mhutchie/vscode-git-graph/raw/master/resources/demo.gif)\n\n透過以上三個 vscode extention ，就能永遠跟 sourcetree 說 goodbye 了～\n","slug":"VScode/Use-git-extention-in-VScode-goodbye-sourcetree","published":1,"_id":"ck3bbu753002btudheqqw753x","comments":1,"layout":"post","photos":[],"link":"","content":"<p>因為 sourcetree 在公司內網些時候會一直跳出輸入 AD 帳密的視窗，前陣子因為換了密碼，結果舊密碼被記住，結果每用一次 sourcetree 就會被鎖一次帳號，真是冤望啊！後來索性就決定刪掉 sourcetree ，想說如果全部都在 vscode 一次解決就完美了～所以就開始我的 vscode extention 探索之旅。</p>\n<a id=\"more\"></a>\n<p>首先，得先理出哪些 sourcetree 的功能是我常用的，並找到相對應的 vscode extention 。想要的功能如下：</p>\n<ol>\n<li><p>資料夾整理專案功能：因為不可能記住 repo 名稱對應的專案，所以若能像 sourcetree 有分資料夾的功能，就能快速找到專案對應的 repo。</p>\n</li>\n<li><p>Git Stash 功能：能暫存程式碼片段在本機。隨時可調用。</p>\n</li>\n<li><p>Git Graph 功能: 能看清楚每個 branch 的 commit 圖形化介面。</p>\n</li>\n</ol>\n<p>接著，我們就來看是哪些 vscode extention 吧~</p>\n<h1 id=\"Project-Manager\"><a href=\"#Project-Manager\" class=\"headerlink\" title=\"Project Manager\"></a>Project Manager</h1><p><a href=\"https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager\" target=\"_blank\" rel=\"noopener\">Project Manager</a> 能用它做資料夾整理專案的功能，而且他在 vscode 還可以做 open in new window 的動作\b，整合開啟程式片段的功能感覺超方便！</p>\n<p><img src=\"https://github.com/alefragnani/vscode-project-manager/raw/master/images/vscode-project-manager-side-bar.gif\" alt=\"Project Manager\"></p>\n<h1 id=\"Git-Stash\"><a href=\"#Git-Stash\" class=\"headerlink\" title=\"Git Stash\"></a>Git Stash</h1><p><a href=\"https://marketplace.visualstudio.com/items?itemName=arturock.gitstash\" target=\"_blank\" rel=\"noopener\">Git Stash</a> 能用它做 git stash 的相關動作，而且他整合在 vscode 的 git 頁籤中，不會像 gitLens 跑到另一個頁籤，我覺得整合的很好，操作又簡潔。</p>\n<p><img src=\"https://raw.githubusercontent.com/arturock/vscode-gitstash/master/resources/docs/screencast.gif\" alt=\"Git Stash\"></p>\n<h1 id=\"Git-Graph\"><a href=\"#Git-Graph\" class=\"headerlink\" title=\"Git Graph\"></a>Git Graph</h1><p><a href=\"https://marketplace.visualstudio.com/items?itemName=mhutchie.git-graph\" target=\"_blank\" rel=\"noopener\">Git Graph</a> 能用它看到 git 圖形，也可以透過滑鼠右鍵做 branch 切換、加 tag、cherry pick 等動作，最重要的是他也整合在 git 頁籤中，所以就可以把 git 功能就統一在 vscode 原始 git 頁籤中，整個融合在 vscode 介面中，再也不用另外開 sourcetree 了！</p>\n<p><img src=\"https://github.com/mhutchie/vscode-git-graph/raw/master/resources/demo.gif\" alt=\"Git Graph\"></p>\n<p>透過以上三個 vscode extention ，就能永遠跟 sourcetree 說 goodbye 了～</p>\n","site":{"data":{}},"thumbnailImageUrl":"https://code.visualstudio.com/assets/favicon.ico","excerpt":"<p>因為 sourcetree 在公司內網些時候會一直跳出輸入 AD 帳密的視窗，前陣子因為換了密碼，結果舊密碼被記住，結果每用一次 sourcetree 就會被鎖一次帳號，真是冤望啊！後來索性就決定刪掉 sourcetree ，想說如果全部都在 vscode 一次解決就完美了～所以就開始我的 vscode extention 探索之旅。</p>","more":"<p>首先，得先理出哪些 sourcetree 的功能是我常用的，並找到相對應的 vscode extention 。想要的功能如下：</p>\n<ol>\n<li><p>資料夾整理專案功能：因為不可能記住 repo 名稱對應的專案，所以若能像 sourcetree 有分資料夾的功能，就能快速找到專案對應的 repo。</p>\n</li>\n<li><p>Git Stash 功能：能暫存程式碼片段在本機。隨時可調用。</p>\n</li>\n<li><p>Git Graph 功能: 能看清楚每個 branch 的 commit 圖形化介面。</p>\n</li>\n</ol>\n<p>接著，我們就來看是哪些 vscode extention 吧~</p>\n<h1 id=\"Project-Manager\"><a href=\"#Project-Manager\" class=\"headerlink\" title=\"Project Manager\"></a>Project Manager</h1><p><a href=\"https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager\" target=\"_blank\" rel=\"noopener\">Project Manager</a> 能用它做資料夾整理專案的功能，而且他在 vscode 還可以做 open in new window 的動作\b，整合開啟程式片段的功能感覺超方便！</p>\n<p><img src=\"https://github.com/alefragnani/vscode-project-manager/raw/master/images/vscode-project-manager-side-bar.gif\" alt=\"Project Manager\"></p>\n<h1 id=\"Git-Stash\"><a href=\"#Git-Stash\" class=\"headerlink\" title=\"Git Stash\"></a>Git Stash</h1><p><a href=\"https://marketplace.visualstudio.com/items?itemName=arturock.gitstash\" target=\"_blank\" rel=\"noopener\">Git Stash</a> 能用它做 git stash 的相關動作，而且他整合在 vscode 的 git 頁籤中，不會像 gitLens 跑到另一個頁籤，我覺得整合的很好，操作又簡潔。</p>\n<p><img src=\"https://raw.githubusercontent.com/arturock/vscode-gitstash/master/resources/docs/screencast.gif\" alt=\"Git Stash\"></p>\n<h1 id=\"Git-Graph\"><a href=\"#Git-Graph\" class=\"headerlink\" title=\"Git Graph\"></a>Git Graph</h1><p><a href=\"https://marketplace.visualstudio.com/items?itemName=mhutchie.git-graph\" target=\"_blank\" rel=\"noopener\">Git Graph</a> 能用它看到 git 圖形，也可以透過滑鼠右鍵做 branch 切換、加 tag、cherry pick 等動作，最重要的是他也整合在 git 頁籤中，所以就可以把 git 功能就統一在 vscode 原始 git 頁籤中，整個融合在 vscode 介面中，再也不用另外開 sourcetree 了！</p>\n<p><img src=\"https://github.com/mhutchie/vscode-git-graph/raw/master/resources/demo.gif\" alt=\"Git Graph\"></p>\n<p>透過以上三個 vscode extention ，就能永遠跟 sourcetree 說 goodbye 了～</p>"},{"title":"Google Material Theming - Workflow Tools","thumbnailImage":"https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no","thumbnailImagePosition":"left","coverImage":"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1Hfurrx3NHOuac_WreNWxG-2qdKjliIx_%2Fintro-illo-metaphor.png","coverMeta":"out","date":"2019-02-28T16:00:00.000Z","updated":"2019-02-28T16:00:00.000Z","_content":"\n之前我有寫過一篇[我的 Design Workflow](/2018/09/13/UXUI/UX-UI-Workflow-Tool-in-2018/)，主要使用 `Sketch` 設計、 `XD` 做 prototype ，並利用 `Abstract` 做版控。 Material Design 官方也有一套 Workflow 並有配套的 Tools，今天就帶大家來一探究竟 Material 的 Workflow Tools。\n\n<!--more-->\n\n## Material Theming\n\n在介紹 Tool 前我們先來看看 `Material Theming` 是什麼？ Material Theming 就是將 Material Design 系統性的做客制，能更好地突出品牌識別效果。那如何將客制系統化呢？Tools 就佔了很重要的地位，我們來看看下列幾個系統化的工具吧。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1b7zteqiB7LCxy1R_NQwQZZ3_c8JqLE7T%2Ftheming-overview-applyingtheming.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### Material Theme Editor\n\n`Material Theme Editor` 我第一次看就嚇到了！怎麼會有這麼好用的共用元件工具。Material Theme Editor 透過在 Sketch 安裝 plugin，自動生成共用 Material Design Library，且透過此 plugin 還可以快速改變整個 Library 的 style ，像是圓角、配色組合、文字樣式等等。突然覺得我自己之前做的共用 Material Design Library 好手工喔ORZ～超喜歡這個很有彈性的 Tool 設計，我考慮下個新專案開始將 Material Theme Editor 生成的 Library 加入使用行列，到時候心有餘力再分享一篇使用心得囉～\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-tools%2Fassets%2F1U9gJolER8kqyFS1QzU7qhCRa7KRgebPb%2Ftheme-editor-sitecrop-hero-final.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### Color Tool\n\n配色工具的網站外面比比皆是。但是此 Color Tool 主要是在 Material 的指導原則下自動生成配色，在使用者選擇主色調後，經過演算挑出系統化的配色。我覺得這對設計師來說也節省了更多時間，不用再自己查相近色、互補色等，程式會自動為你配出適合的顏色。我下個新專案等不急要來 try try 看了~ XD\n\n![Color Tool](https://lh3.googleusercontent.com/5Ip9FQt2c2JtXLPPXOgai8VCRRRr0qqtgmNqfpkrrrlBuGp1sncZznYZGc36duWsII70lShboiE2QbpN8vr5EzGa3-jAYV6xpzyx8177CrHiBjgvVv6KCmtac_w26TZL4vTUMvDe71-fX4A5y_fIMszYyjYqrP3TztfoydN9Uhnw5em2ahPQ5D3Bh3dPVrV7B511Vb68ea0annnJHlavVc-nrEUxhTBwMKVCB_kuSRB_qpxeOaaVCdgrVsTB6CLAgzqUQ2vG22E6PYCGhFVK3rJ1CSzZiqvpAETfKExUea13-DLb8U1Tzgj4B1MDIGdo0YmKWoetXtHbxBoUpv0qxbYMd3HX2STODN_wkZB1AlSdYayr6hq8OFVEOuomuBZ2l700WA4bOH63yQptUoMpjZQCuhN4G7DGX2ch_yTjkgpvyDYoQlqHJHJbo_S3yu-WjTKGB72dRg9L12Q4102lsteagt9cAY2oClVRZ23dHIw5eERBphsQnO9i5dLdE0PxFQ7qL6cP3Ifidbvpw0bM2oKTGIOdtkptScaceuj-OzdJB8ahlHqDmY6Iw_1dqKrSZ6Dpkxd65ueOM8fnaJQ2OUdb-ky4Z-meu8wbDYcAihdF6Qp2pwy8xwUXQ2yp3wpG4GTc2qQjfqikyCmigAdtJegPDUEcxZVs=w2206-h1192-no \"Color Tool\")\n\n### Gallery\n\n之前有用過 `Zeplin` 分享設計量測 prototype 給 developer，但因為要付費就不想用了。現在很多設計工具都可以線上分享 prototype ， sketch、XD 都可以。Google 也自己開發了一套 gallery 的功能可以線上分享 prototype ，他除了可以觀察每個設計元件的 spec 和評語外，還可以設定螢幕要鎖定成手機、平板、桌電等尺寸，重點是他免費而且無空間限制，更多 Gallery 用法可參考[連結](https://material.io/tools/gallery/about.html#more-tips-on-using-gallery)。最近剛好有案子前端需要多人協同合作就拿來放在 Gallery，我覺得意外好用，只是就一定要有 google 的帳號才能看 Gallery 有點不合理，希望他以後改成只要有 email 就能加入 share 中。\n\n![Gallery](https://cdn-images-1.medium.com/max/1200/1*IsLM8aDdA9MZCD7T_x8FjA.gif \"Gallery\")\n\n\n目前我個人是非常看好這幾個 Material Tools 的，希望新專案能慢慢加入使用，讓 Design & Developer Workflow 更流暢。\n\n\n## 參考資料\n\n* [Material Theming](https://material.io/design/material-theming/#)\n* [Material Theme Editor](https://material.io/tools/theme-editor/)\n* [Material Design Color Tool](https://material.io/tools/color/#!/?view.left=0&view.right=0&primary.color=6002ee)\n* [Google Gallery](https://gallery.io)\n* [More tips on using Gallery](https://material.io/tools/gallery/about.html#more-tips-on-using-gallery)\n* [First week of using Google Gallery + Sketch](https://medium.com/sketch-app-sources/first-week-of-using-google-gallery-sketch-c97dd94c8676)","source":"_posts/UXUI/Google-Material-Theming-Workflow-Tools.md","raw":"---\ntitle: Google Material Theming - Workflow Tools\ncategories:\n  - UXUI\n  - Material Design\nthumbnailImage: https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no\nthumbnailImagePosition: left\ncoverImage: https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1Hfurrx3NHOuac_WreNWxG-2qdKjliIx_%2Fintro-illo-metaphor.png\ncoverMeta: out\ntags: [Sketch, UX, UI, Material Design]\ndate: 2019/03/01\nupdated: 2019/03/01\n---\n\n之前我有寫過一篇[我的 Design Workflow](/2018/09/13/UXUI/UX-UI-Workflow-Tool-in-2018/)，主要使用 `Sketch` 設計、 `XD` 做 prototype ，並利用 `Abstract` 做版控。 Material Design 官方也有一套 Workflow 並有配套的 Tools，今天就帶大家來一探究竟 Material 的 Workflow Tools。\n\n<!--more-->\n\n## Material Theming\n\n在介紹 Tool 前我們先來看看 `Material Theming` 是什麼？ Material Theming 就是將 Material Design 系統性的做客制，能更好地突出品牌識別效果。那如何將客制系統化呢？Tools 就佔了很重要的地位，我們來看看下列幾個系統化的工具吧。\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1b7zteqiB7LCxy1R_NQwQZZ3_c8JqLE7T%2Ftheming-overview-applyingtheming.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### Material Theme Editor\n\n`Material Theme Editor` 我第一次看就嚇到了！怎麼會有這麼好用的共用元件工具。Material Theme Editor 透過在 Sketch 安裝 plugin，自動生成共用 Material Design Library，且透過此 plugin 還可以快速改變整個 Library 的 style ，像是圓角、配色組合、文字樣式等等。突然覺得我自己之前做的共用 Material Design Library 好手工喔ORZ～超喜歡這個很有彈性的 Tool 設計，我考慮下個新專案開始將 Material Theme Editor 生成的 Library 加入使用行列，到時候心有餘力再分享一篇使用心得囉～\n\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-tools%2Fassets%2F1U9gJolER8kqyFS1QzU7qhCRa7KRgebPb%2Ftheme-editor-sitecrop-hero-final.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n### Color Tool\n\n配色工具的網站外面比比皆是。但是此 Color Tool 主要是在 Material 的指導原則下自動生成配色，在使用者選擇主色調後，經過演算挑出系統化的配色。我覺得這對設計師來說也節省了更多時間，不用再自己查相近色、互補色等，程式會自動為你配出適合的顏色。我下個新專案等不急要來 try try 看了~ XD\n\n![Color Tool](https://lh3.googleusercontent.com/5Ip9FQt2c2JtXLPPXOgai8VCRRRr0qqtgmNqfpkrrrlBuGp1sncZznYZGc36duWsII70lShboiE2QbpN8vr5EzGa3-jAYV6xpzyx8177CrHiBjgvVv6KCmtac_w26TZL4vTUMvDe71-fX4A5y_fIMszYyjYqrP3TztfoydN9Uhnw5em2ahPQ5D3Bh3dPVrV7B511Vb68ea0annnJHlavVc-nrEUxhTBwMKVCB_kuSRB_qpxeOaaVCdgrVsTB6CLAgzqUQ2vG22E6PYCGhFVK3rJ1CSzZiqvpAETfKExUea13-DLb8U1Tzgj4B1MDIGdo0YmKWoetXtHbxBoUpv0qxbYMd3HX2STODN_wkZB1AlSdYayr6hq8OFVEOuomuBZ2l700WA4bOH63yQptUoMpjZQCuhN4G7DGX2ch_yTjkgpvyDYoQlqHJHJbo_S3yu-WjTKGB72dRg9L12Q4102lsteagt9cAY2oClVRZ23dHIw5eERBphsQnO9i5dLdE0PxFQ7qL6cP3Ifidbvpw0bM2oKTGIOdtkptScaceuj-OzdJB8ahlHqDmY6Iw_1dqKrSZ6Dpkxd65ueOM8fnaJQ2OUdb-ky4Z-meu8wbDYcAihdF6Qp2pwy8xwUXQ2yp3wpG4GTc2qQjfqikyCmigAdtJegPDUEcxZVs=w2206-h1192-no \"Color Tool\")\n\n### Gallery\n\n之前有用過 `Zeplin` 分享設計量測 prototype 給 developer，但因為要付費就不想用了。現在很多設計工具都可以線上分享 prototype ， sketch、XD 都可以。Google 也自己開發了一套 gallery 的功能可以線上分享 prototype ，他除了可以觀察每個設計元件的 spec 和評語外，還可以設定螢幕要鎖定成手機、平板、桌電等尺寸，重點是他免費而且無空間限制，更多 Gallery 用法可參考[連結](https://material.io/tools/gallery/about.html#more-tips-on-using-gallery)。最近剛好有案子前端需要多人協同合作就拿來放在 Gallery，我覺得意外好用，只是就一定要有 google 的帳號才能看 Gallery 有點不合理，希望他以後改成只要有 email 就能加入 share 中。\n\n![Gallery](https://cdn-images-1.medium.com/max/1200/1*IsLM8aDdA9MZCD7T_x8FjA.gif \"Gallery\")\n\n\n目前我個人是非常看好這幾個 Material Tools 的，希望新專案能慢慢加入使用，讓 Design & Developer Workflow 更流暢。\n\n\n## 參考資料\n\n* [Material Theming](https://material.io/design/material-theming/#)\n* [Material Theme Editor](https://material.io/tools/theme-editor/)\n* [Material Design Color Tool](https://material.io/tools/color/#!/?view.left=0&view.right=0&primary.color=6002ee)\n* [Google Gallery](https://gallery.io)\n* [More tips on using Gallery](https://material.io/tools/gallery/about.html#more-tips-on-using-gallery)\n* [First week of using Google Gallery + Sketch](https://medium.com/sketch-app-sources/first-week-of-using-google-gallery-sketch-c97dd94c8676)","slug":"UXUI/Google-Material-Theming-Workflow-Tools","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu754002dtudhseyp24ok","content":"<p>之前我有寫過一篇<a href=\"/2018/09/13/UXUI/UX-UI-Workflow-Tool-in-2018/\">我的 Design Workflow</a>，主要使用 <code>Sketch</code> 設計、 <code>XD</code> 做 prototype ，並利用 <code>Abstract</code> 做版控。 Material Design 官方也有一套 Workflow 並有配套的 Tools，今天就帶大家來一探究竟 Material 的 Workflow Tools。</p>\n<a id=\"more\"></a>\n<h2 id=\"Material-Theming\"><a href=\"#Material-Theming\" class=\"headerlink\" title=\"Material Theming\"></a>Material Theming</h2><p>在介紹 Tool 前我們先來看看 <code>Material Theming</code> 是什麼？ Material Theming 就是將 Material Design 系統性的做客制，能更好地突出品牌識別效果。那如何將客制系統化呢？Tools 就佔了很重要的地位，我們來看看下列幾個系統化的工具吧。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1b7zteqiB7LCxy1R_NQwQZZ3_c8JqLE7T%2Ftheming-overview-applyingtheming.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"Material-Theme-Editor\"><a href=\"#Material-Theme-Editor\" class=\"headerlink\" title=\"Material Theme Editor\"></a>Material Theme Editor</h3><p><code>Material Theme Editor</code> 我第一次看就嚇到了！怎麼會有這麼好用的共用元件工具。Material Theme Editor 透過在 Sketch 安裝 plugin，自動生成共用 Material Design Library，且透過此 plugin 還可以快速改變整個 Library 的 style ，像是圓角、配色組合、文字樣式等等。突然覺得我自己之前做的共用 Material Design Library 好手工喔ORZ～超喜歡這個很有彈性的 Tool 設計，我考慮下個新專案開始將 Material Theme Editor 生成的 Library 加入使用行列，到時候心有餘力再分享一篇使用心得囉～</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-tools%2Fassets%2F1U9gJolER8kqyFS1QzU7qhCRa7KRgebPb%2Ftheme-editor-sitecrop-hero-final.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"Color-Tool\"><a href=\"#Color-Tool\" class=\"headerlink\" title=\"Color Tool\"></a>Color Tool</h3><p>配色工具的網站外面比比皆是。但是此 Color Tool 主要是在 Material 的指導原則下自動生成配色，在使用者選擇主色調後，經過演算挑出系統化的配色。我覺得這對設計師來說也節省了更多時間，不用再自己查相近色、互補色等，程式會自動為你配出適合的顏色。我下個新專案等不急要來 try try 看了~ XD</p>\n<p><img src=\"https://lh3.googleusercontent.com/5Ip9FQt2c2JtXLPPXOgai8VCRRRr0qqtgmNqfpkrrrlBuGp1sncZznYZGc36duWsII70lShboiE2QbpN8vr5EzGa3-jAYV6xpzyx8177CrHiBjgvVv6KCmtac_w26TZL4vTUMvDe71-fX4A5y_fIMszYyjYqrP3TztfoydN9Uhnw5em2ahPQ5D3Bh3dPVrV7B511Vb68ea0annnJHlavVc-nrEUxhTBwMKVCB_kuSRB_qpxeOaaVCdgrVsTB6CLAgzqUQ2vG22E6PYCGhFVK3rJ1CSzZiqvpAETfKExUea13-DLb8U1Tzgj4B1MDIGdo0YmKWoetXtHbxBoUpv0qxbYMd3HX2STODN_wkZB1AlSdYayr6hq8OFVEOuomuBZ2l700WA4bOH63yQptUoMpjZQCuhN4G7DGX2ch_yTjkgpvyDYoQlqHJHJbo_S3yu-WjTKGB72dRg9L12Q4102lsteagt9cAY2oClVRZ23dHIw5eERBphsQnO9i5dLdE0PxFQ7qL6cP3Ifidbvpw0bM2oKTGIOdtkptScaceuj-OzdJB8ahlHqDmY6Iw_1dqKrSZ6Dpkxd65ueOM8fnaJQ2OUdb-ky4Z-meu8wbDYcAihdF6Qp2pwy8xwUXQ2yp3wpG4GTc2qQjfqikyCmigAdtJegPDUEcxZVs=w2206-h1192-no\" alt=\"Color Tool\" title=\"Color Tool\"></p>\n<h3 id=\"Gallery\"><a href=\"#Gallery\" class=\"headerlink\" title=\"Gallery\"></a>Gallery</h3><p>之前有用過 <code>Zeplin</code> 分享設計量測 prototype 給 developer，但因為要付費就不想用了。現在很多設計工具都可以線上分享 prototype ， sketch、XD 都可以。Google 也自己開發了一套 gallery 的功能可以線上分享 prototype ，他除了可以觀察每個設計元件的 spec 和評語外，還可以設定螢幕要鎖定成手機、平板、桌電等尺寸，重點是他免費而且無空間限制，更多 Gallery 用法可參考<a href=\"https://material.io/tools/gallery/about.html#more-tips-on-using-gallery\" target=\"_blank\" rel=\"noopener\">連結</a>。最近剛好有案子前端需要多人協同合作就拿來放在 Gallery，我覺得意外好用，只是就一定要有 google 的帳號才能看 Gallery 有點不合理，希望他以後改成只要有 email 就能加入 share 中。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1200/1*IsLM8aDdA9MZCD7T_x8FjA.gif\" alt=\"Gallery\" title=\"Gallery\"></p>\n<p>目前我個人是非常看好這幾個 Material Tools 的，希望新專案能慢慢加入使用，讓 Design &amp; Developer Workflow 更流暢。</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://material.io/design/material-theming/#\" target=\"_blank\" rel=\"noopener\">Material Theming</a></li>\n<li><a href=\"https://material.io/tools/theme-editor/\" target=\"_blank\" rel=\"noopener\">Material Theme Editor</a></li>\n<li><a href=\"https://material.io/tools/color/#!/?view.left=0&amp;view.right=0&amp;primary.color=6002ee\" target=\"_blank\" rel=\"noopener\">Material Design Color Tool</a></li>\n<li><a href=\"https://gallery.io\" target=\"_blank\" rel=\"noopener\">Google Gallery</a></li>\n<li><a href=\"https://material.io/tools/gallery/about.html#more-tips-on-using-gallery\" target=\"_blank\" rel=\"noopener\">More tips on using Gallery</a></li>\n<li><a href=\"https://medium.com/sketch-app-sources/first-week-of-using-google-gallery-sketch-c97dd94c8676\" target=\"_blank\" rel=\"noopener\">First week of using Google Gallery + Sketch</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/NmeFZOUv61q1keVwsDGU-SYe54WbcTGUaBK4MUv2qpnOZUeBmoIQnctDY2i30Xg9Piub1aUE1hhv_YZkN6aeZ0OeEiFqYy4nQix_M2k6M5Zn1uy6_0BDfTzuD0YfrlezhMtIGlKoVprSIU8jy4204KOqm7k4QJL31RCgQZ6ruuJMX-Ad84Uoyr-4LqIjRdDKG63wsyVnef7GFtHTFFyAcwRfD0D0hqZfDL6X5xZ0IomCU1mnvbPi3kWvWJzFbhypokNRRLGiTRxemhwQmV1IltU_lmZ7S6pdwwsz8GaVW7T7WTXImkmvePksormq21WQJgFdgWndEQDMPoCtQZLarnSNMaHynca_Wi-33a1VAI78aI0jIIXKP7RYmh7JRVY9Mobf2qBFOGFkd64E7uBatZ5VZ8GHwqXWazRZ-I4pFF_medM8ecpPLRTar-KY01iKGMu3zYZ2Z9xMO_AI0x3ibI7XAR71_8hquDpzvUGffIOXqvX5r3H49xYpWMCpPpwfT7NYd3k1W24ncV6TLWE_9cj5pRsY1qCHeqdn2HfkRLBGY0czDFb5J47OwXn0vBzNOuYtWbLGauqZ-sUVSTeO15j2A9gMm3BR0ZmiFb7c1azsyO4n-_-0GCHvJckr4-iRRg7GocwbYjZZdsTlDGvf0bHXkAmhFhWY=s225-no","excerpt":"<p>之前我有寫過一篇<a href=\"/2018/09/13/UXUI/UX-UI-Workflow-Tool-in-2018/\">我的 Design Workflow</a>，主要使用 <code>Sketch</code> 設計、 <code>XD</code> 做 prototype ，並利用 <code>Abstract</code> 做版控。 Material Design 官方也有一套 Workflow 並有配套的 Tools，今天就帶大家來一探究竟 Material 的 Workflow Tools。</p>","more":"<h2 id=\"Material-Theming\"><a href=\"#Material-Theming\" class=\"headerlink\" title=\"Material Theming\"></a>Material Theming</h2><p>在介紹 Tool 前我們先來看看 <code>Material Theming</code> 是什麼？ Material Theming 就是將 Material Design 系統性的做客制，能更好地突出品牌識別效果。那如何將客制系統化呢？Tools 就佔了很重要的地位，我們來看看下列幾個系統化的工具吧。</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F1b7zteqiB7LCxy1R_NQwQZZ3_c8JqLE7T%2Ftheming-overview-applyingtheming.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"Material-Theme-Editor\"><a href=\"#Material-Theme-Editor\" class=\"headerlink\" title=\"Material Theme Editor\"></a>Material Theme Editor</h3><p><code>Material Theme Editor</code> 我第一次看就嚇到了！怎麼會有這麼好用的共用元件工具。Material Theme Editor 透過在 Sketch 安裝 plugin，自動生成共用 Material Design Library，且透過此 plugin 還可以快速改變整個 Library 的 style ，像是圓角、配色組合、文字樣式等等。突然覺得我自己之前做的共用 Material Design Library 好手工喔ORZ～超喜歡這個很有彈性的 Tool 設計，我考慮下個新專案開始將 Material Theme Editor 生成的 Library 加入使用行列，到時候心有餘力再分享一篇使用心得囉～</p>\n<video src=\"https://storage.googleapis.com/spec-host-backup/mio-tools%2Fassets%2F1U9gJolER8kqyFS1QzU7qhCRa7KRgebPb%2Ftheme-editor-sitecrop-hero-final.mp4\" autoplay loop style=\"max-width: 100%; display: block; margin-left: auto; margin-right: auto;\">your browser does not support the video tag</video>\n\n<h3 id=\"Color-Tool\"><a href=\"#Color-Tool\" class=\"headerlink\" title=\"Color Tool\"></a>Color Tool</h3><p>配色工具的網站外面比比皆是。但是此 Color Tool 主要是在 Material 的指導原則下自動生成配色，在使用者選擇主色調後，經過演算挑出系統化的配色。我覺得這對設計師來說也節省了更多時間，不用再自己查相近色、互補色等，程式會自動為你配出適合的顏色。我下個新專案等不急要來 try try 看了~ XD</p>\n<p><img src=\"https://lh3.googleusercontent.com/5Ip9FQt2c2JtXLPPXOgai8VCRRRr0qqtgmNqfpkrrrlBuGp1sncZznYZGc36duWsII70lShboiE2QbpN8vr5EzGa3-jAYV6xpzyx8177CrHiBjgvVv6KCmtac_w26TZL4vTUMvDe71-fX4A5y_fIMszYyjYqrP3TztfoydN9Uhnw5em2ahPQ5D3Bh3dPVrV7B511Vb68ea0annnJHlavVc-nrEUxhTBwMKVCB_kuSRB_qpxeOaaVCdgrVsTB6CLAgzqUQ2vG22E6PYCGhFVK3rJ1CSzZiqvpAETfKExUea13-DLb8U1Tzgj4B1MDIGdo0YmKWoetXtHbxBoUpv0qxbYMd3HX2STODN_wkZB1AlSdYayr6hq8OFVEOuomuBZ2l700WA4bOH63yQptUoMpjZQCuhN4G7DGX2ch_yTjkgpvyDYoQlqHJHJbo_S3yu-WjTKGB72dRg9L12Q4102lsteagt9cAY2oClVRZ23dHIw5eERBphsQnO9i5dLdE0PxFQ7qL6cP3Ifidbvpw0bM2oKTGIOdtkptScaceuj-OzdJB8ahlHqDmY6Iw_1dqKrSZ6Dpkxd65ueOM8fnaJQ2OUdb-ky4Z-meu8wbDYcAihdF6Qp2pwy8xwUXQ2yp3wpG4GTc2qQjfqikyCmigAdtJegPDUEcxZVs=w2206-h1192-no\" alt=\"Color Tool\" title=\"Color Tool\"></p>\n<h3 id=\"Gallery\"><a href=\"#Gallery\" class=\"headerlink\" title=\"Gallery\"></a>Gallery</h3><p>之前有用過 <code>Zeplin</code> 分享設計量測 prototype 給 developer，但因為要付費就不想用了。現在很多設計工具都可以線上分享 prototype ， sketch、XD 都可以。Google 也自己開發了一套 gallery 的功能可以線上分享 prototype ，他除了可以觀察每個設計元件的 spec 和評語外，還可以設定螢幕要鎖定成手機、平板、桌電等尺寸，重點是他免費而且無空間限制，更多 Gallery 用法可參考<a href=\"https://material.io/tools/gallery/about.html#more-tips-on-using-gallery\" target=\"_blank\" rel=\"noopener\">連結</a>。最近剛好有案子前端需要多人協同合作就拿來放在 Gallery，我覺得意外好用，只是就一定要有 google 的帳號才能看 Gallery 有點不合理，希望他以後改成只要有 email 就能加入 share 中。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1200/1*IsLM8aDdA9MZCD7T_x8FjA.gif\" alt=\"Gallery\" title=\"Gallery\"></p>\n<p>目前我個人是非常看好這幾個 Material Tools 的，希望新專案能慢慢加入使用，讓 Design &amp; Developer Workflow 更流暢。</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://material.io/design/material-theming/#\" target=\"_blank\" rel=\"noopener\">Material Theming</a></li>\n<li><a href=\"https://material.io/tools/theme-editor/\" target=\"_blank\" rel=\"noopener\">Material Theme Editor</a></li>\n<li><a href=\"https://material.io/tools/color/#!/?view.left=0&amp;view.right=0&amp;primary.color=6002ee\" target=\"_blank\" rel=\"noopener\">Material Design Color Tool</a></li>\n<li><a href=\"https://gallery.io\" target=\"_blank\" rel=\"noopener\">Google Gallery</a></li>\n<li><a href=\"https://material.io/tools/gallery/about.html#more-tips-on-using-gallery\" target=\"_blank\" rel=\"noopener\">More tips on using Gallery</a></li>\n<li><a href=\"https://medium.com/sketch-app-sources/first-week-of-using-google-gallery-sketch-c97dd94c8676\" target=\"_blank\" rel=\"noopener\">First week of using Google Gallery + Sketch</a></li>\n</ul>"},{"title":"UX/UI Workflow Tool in 2018","thumbnailImage":"https://lh3.googleusercontent.com/15TevdlU0UA0DHjDXR8IFLjUteZ4XGxRObDpCwsIumenN6CLFYQFRcoJnS_6xYGMmbUFHxpqlXp25FcRXorD83F2vgEoldt2orwKDe1_QGMpNRhvu0KtXQ1KxuXUV7GTUSCOn4GXJMj8lCETJtDBXcyl6bi_snLs80aQJu-mSbdzJ-Bj3D_0DpmVrnfS_KyUD7I-RnQZ5FOzarAYJmXYpwjBXGZkGNc1CtiSJ1OAQPCXFsOIj0Wnw8Bpq8z0ysUDOZXt6ZWoC74yspZm10_zGEUyjm5axY0SDCxxwPcdJ_GIhoz90_L9wqRjz1NLVOBgPsDmQwWKzCd4o-M-VgjflYccFA45jcNEr5vV5Pce3JKqX9gJFIL-qVW9J5Y_qjMBZdOr7M3YWveJeo8daOKrF1CIGuInKckICK5-K4h52V_CpV_1jEPEDRfI5OGnX4AfFPnntVRmP3y8raD5ajnxgnFAj3bVmaC4XSDO9ZLJd-soMaaTqa-URYTv4WjGJZGpM-XP2MYrMVyQyafCzc90XKuxo3stdk7qL9-Hua-AQi5S5iVLacJz8LSTRqGcy8vXu_vIG8YHLOCAQAQO3pXJxcwu33BlttXskTLk-b8j2MvYr1OM25EW35MThuYOQNimlGLn7P7f5sphQiTt-aNT0mj-HrD_xE05=s250-no","thumbnailImagePosition":"left","coverImage":"https://lh3.googleusercontent.com/Ht5ducjpGZIxCwrhATVndjvHuH_-Kz2Tl3a4r071v7j_GHdCDyo5D5myiDer5DZwdhCDWb0ZSgwdusqZsgc3q2GXPXv3I_CGwluVHNyiieve2YsRUy9_-xuJONWJJZ4Fd4gxZAqXh8J57Q811ITlBRHUuA6UJQeM_9cQ52vpmFWXIgM3NBlV0_QcBebviTM6XT3EHucC0Wv4LFpCYffHzM_Aftc_YTG7QVrG5wtBg0ebGhMggyMme6j1kRuxdOI_nvoFpTYxHr58P68R5rcSdXxVXZ0FeYpKaNkmkZ7rNhsL_z3iWI7CxjbSPJD5USGFSS88OdSfp34p9dysnyk8-FJN3COPgxcZh0krE_Yn_pUhAObBn5nWC6WdZzTFCcTHhY4GDsYlsO2OsizYSscRoqCfUaZ_byBLYop2mr4-I2NsOwVTHVMCa3XLZ-bKoEei_GDNuBeSOs6s03lLVgN0-BPnXhqQkRRVSTvg74D1cu65nlDdMEe__a_H8PJxRuxo7kIzuZS2gP7vjwiKkd2bYR705P6P8mWVJf0RTDED3uTtM3it9yvTOa77wiJJtr5Y0h75S5ZrcclHDu6t9WcyFB3yrLuPBNPuieuy10HMhHXBqZqQRX8tyPZaQwNiANFgBQQ1MYs_jXPXnrj5y5-GneVm30LkL5UE=w1024-h683-no","coverMeta":"out","date":"2018-09-12T16:00:00.000Z","updated":"2018-09-12T16:00:00.000Z","_content":"\n這篇要和大家分享平時設計 UX/UI 的時候我會用到的工具。以及在一堆爆炸的工作量中，要怎麼運用工具存活下來的故事 XD 。那我們就趕快開始吧。\n\n<!--more-->\n\n這邊主要先介紹平常會用到的 Tool “粗略簡介”，中間會附註其他類似的工具，最後說明我的設計工作流。比較技術性的使用方式要等後續再慢慢出一些專門的文章。\n\n***\n## Abstract\n\n![Abstract](https://lh3.googleusercontent.com/B9jMSu2y8oF5JWE25zqlLeLdnXeFKu8VlAQGjGo7E-naFUVL0Q_svrwfEJc4wfyFGn_YGv7jdo2A8nL_qK2W0_7cy-8rMJZnc3PGERoQ7Yh8yRnxLFw28LW6u_1tqhGYH7cf9nIA5ymIS0-wMQB4jnZ07RdOUVrwhdSMvYhOfdPbs-lBESJPdIfRMA1uJgZt9-moEUPEAHwGV5H9EjDRgACHqJYSj3AVLL05WR3wxW1L0tC2R1bLCH5qfpAwVmD6jiBkwrs1rJEIHYBEMYWT5jPnXTzL1_GF4wo7QRR2hSrucL_88HEz0HPMhl_erd3NbQMykciPwCt9qleYapfcPhFb0IUndhW0YNWZaStiT-e1qK1gqYOtfi7NBuvzX8V9fvT3IyGUXA1R_TZcB0tdYNVe_xFogGYlWFmcs4Kf-M03ffDmIwBe-wAl2FXR2T3dAk0kyBngWTDVgCT7bHzpIeJUQ0wXOgd3G5ULCpnSwGmb-QgXssU3zfGnQPyCZz1YJ4j60m3XXc3D63gcMvVJtec3TzQrhm9z32LeSvtH3xLXftaCJvpu4OAt8qIPN3ccjQZvHVB_wFTcC327qTH8fZzDXc2_76PjyOM5mnRSzYTZWcmyemJiTJZECdSCsCXFh0tAltqbpSlAo5h5lXV7eA6VXf3GJOVf=w1000-h648-no \"Abstract\")\n\n[Abstract](https://www.goabstract.com/) 是針對 Sketch 的版本控制工具。\n\n> “One place to version, manage, and collaborate on your Sketch files.” \n\n就如同使用 git 一般，所有的修改異動都會以 commit 的方式在雲端。再也不用像以往使用 adobe 系列狂複製做檔案備份的動作，使用 Abstract 就可以隨時查看要的版本，設計師再也不用害怕老闆說：“還是第一個版本好”(ＱＱ～心在淌血)。如果多人修改也可以開不同的分支(branch)，最後將確認的版本 merge 到 Master 即可。這簡直是設計師的救星啊～太多專案真的記不清之前做了什麼事，人也是會老的啊～(誤)\n\n> 其他類似的工具：[Plant](https://plantapp.io/), [Kactus](https://kactus.io/)，網路上也有蠻多比較文章，可參考[這篇](https://blog.prototypr.io/abstract-vs-kactus-vs-plant-a-guide-of-version-control-solutions-for-sketch-7da0a8ab5105)\n\n***\n## Sketch\n\n![Sketch](https://lh3.googleusercontent.com/p8yHNZixT2X4KUTqi9yWP37AOStxEdS76FbW7-zGuPezghV337s75z3sUnxU-hqp9Nla_daY9xJMdc7fvGZ1QyiRBdI-Lk_FtvL6N_dIW9Szg__ZILi8MxIHzHtHMUe_8A2ICXIswUVtQlg0id5pP5IN6zoiw6uN10jKR_yofIwlH1Gy7GSlwR1Cwxlr3r-FcvvVg2FTZ5U1oUW-HD013ja9hGRhDhW2dkq0B5TiMtSEiNtWGx1oxIZ6YebTtMguiG2JEfur0Kd0Soerl-1DtKrWUmiwWhTYyU4CCWATsgqWLz1WSIi0AZmCCuOEZpELDpiq7McO3U_hUhdltH8ciGSf53BsLnsAi6VDP6w56Y_RhP7JkptmTRytB6_JrwQr34ZBfPlGvtwj9b7egeZ0q76srWyHVzNK_92T4wRFTzztlIeCluignUWrz5ObBOZiVrfHJpJ2DlVyz9NpMPYj_tJY-XTB7QqC8w0Guznx9-GxMcAEkFesDYULzWxQKSt-gKECfrEFJhmtPzPUm7Rf1Y9Fm6zjddvhz3lyYyEbZK8kHzpUTCUDAlDxU2upuEVbIv5-BGpyNsrOMG8Ivb1T87fpy7FLuMcz8Z67hwwh-jav9DqNI9_jpqwNuNeImgehSmeA_5CJ_n-4IUQkYnk-LTACH8P-U77n=w1024-h612-no \"Sketch\")\n\n[Sketch](https://www.sketchapp.com/) 設計 UI 的工具，我想他的大名鼎鼎幾乎每位介面設計師都聽過吧。其實我第一次接觸他的契機是因為我需要 “加快” 我的產出速度，為什麼這樣說呢？是設計師的話一定用過 Adobe 的 Illustrator, Photoshop，假設要你設計一個簡單的聯絡人清單介面，用 Adobe 系列做是非常手工的一件事情。但透過 Sketch 大量的外部 plugin 支援，只要引用幾個簡單的 plugin ，就可以快速產出假的聯絡人名稱、假照片、固定的間距(padding)。除此之外，還可以透過 plugin 輸出 spec 給工程師參考，再也不用自己拼命測量、打色碼，告訴工程師要怎麼切版了。為了要在團隊裡同時支撐大量專案的設計，如何在同樣高品質下，提升速度才是能讓自己存活的關鍵。\n\n> 其他類似的工具：[Adobe XD](https://www.adobe.com/tw/products/xd.html)\n\n***\n## Adobe XD\n\n![Adobe XD](https://lh3.googleusercontent.com/oN9oos92ac2EMe_33VCHYJKZpxFT0fE2NwTPMj5LQtPwN0pSFK5VXjktls7Xod7-K4XbRE2ZUXQQ_t6x3Omxl6lKZp3mM8Lpge8YHfHuWTAkodiDHD7zuzGRLm9vfDGzQQLBTehvt1-1hWByIHf8X33vXqer0DQcz-PqYkh_vJ3O4yTbY-XaZGJCY_39VkCUgVD_tMDNMqwK8mkUv_RDFEHK_WHoVrwXYYgvmSS21jTkb8pZdn4XKESnnASPVfodGiSAnPZjVOE_2XBdNMNhbQgXZN7QJMxseCB_erd1NYNb-k3Fox2WG9pxjfj-0zmYB3f1coj1aV9khiz4rlJmGQGjvz2ghfe94OR_gg0rIi4XYfrTKzIW1EjdbzrgHwAxJwyJbVGg_8ZMEd8hYGBYWMeN8p2rCinI9ixu44uZyCUT9hFsFgCmSHgivJhavxdNoPzSwqyMUVTDWccQCaR55IjmKYVtDKhpGmo8jFtxgrRW06ASGP-HCPeFFWcL9x4Ud33O7xugtcGG1GfFivnxD1ZC___vARwrfffz1-M8eTFDrDKAsh4G2bnWmFj4WN4HPHllpcDo4lsx4mjN2KG2aP4mPpJalHdYTxGU_RQkeBxRxP3q7JOtnMTcl8tTwEKhXWl_LJNfkO-70M190n8PFJFtG6J7Laqt=w720-h520-no \"Adobe XD\")\n\n誒～～等等，剛剛不是說你是用 Sketch，[Adobe XD](https://www.adobe.com/tw/products/xd.html) 是相似的工具，那你相似的工具怎麼一次就用了兩款了呢？你以為我這麼愛搞死自己啊～還不是因為兩者的出發利基點不同，各有優缺點，所以只好截長補短囉。用 Sketch 主要還是因為有版控的關係，畢竟是以存活為優先啊。而 XD 的優勢呢主要是在他的 prototype ，可以很直覺的拉一拉，就可以輸出 URL 提供 user 使用測試，不用寫程式也可以先收集反饋，不然等到寫好程式又被打槍設計就會進入輪迴地獄了。但近期 XD 和 Sketch 兩者的功能越來越相像， Sketch 新增了 prototype 功能(但還有些小 bug)，而 XD 也在著手開發 plugin 生態，這兩個目前還是不分軒輊。目前本人還是偏向可搭版控功能的 Sketch 為主，而 XD 為輔的狀態。\n\n> 其他類似的工具：[inVision](https://www.invisionapp.com/)，inVision 除了可以線上做 prototype 之外，還主打模擬過場互動動畫，這款做動畫的威力可說是相當強大，有可能未來會強勢殺出。但目前主要是追求速度的提升，製作互動動畫的部分就沒多重琢磨，可能往後比較有空閒的時間再多加研究。\n\n***\n## 設計工作流\n\n我的設計流程大約是這樣的：\n\n1. 接到需求\n2. 打開版控軟體 Abstract 創立新專案 (既有舊專案則同步檔案至最新)\n3. 用 Abstract 開 new branch\n4. 從 Abstract branch 打開 Sketch 設計 UI\n5. 設計一段落，建立 commit 上 Abstract\n6. 從 Sketch 檔案輸出靜態圖片\n7. 使用 Adobe XD 建立 prototype\n8. 輸出 prototype 網址給使用者測試\n9. 得到使用者回饋後，再決定 Abstract 是否要 merge 此 branch 到 Master 或是繼續新增 commit。最差的可能是全部被打槍，只好從 Master 再另開 branch 來做。\n\n上面的步驟依據使用者回饋多寡做多次的循環至 OK 為止。\n\n以上是我到目前為止採用的 design workflow，提供給大家參考。之後會寫一系列關於 UX, UI 的工具使用技巧或介紹大咖的 design pattern 如何幫助我有效率的產出，敬請期待～","source":"_posts/UXUI/UX-UI-Workflow-Tool-in-2018.md","raw":"---\ntitle: UX/UI Workflow Tool in 2018\ncategories:\n  - UXUI\nthumbnailImage: https://lh3.googleusercontent.com/15TevdlU0UA0DHjDXR8IFLjUteZ4XGxRObDpCwsIumenN6CLFYQFRcoJnS_6xYGMmbUFHxpqlXp25FcRXorD83F2vgEoldt2orwKDe1_QGMpNRhvu0KtXQ1KxuXUV7GTUSCOn4GXJMj8lCETJtDBXcyl6bi_snLs80aQJu-mSbdzJ-Bj3D_0DpmVrnfS_KyUD7I-RnQZ5FOzarAYJmXYpwjBXGZkGNc1CtiSJ1OAQPCXFsOIj0Wnw8Bpq8z0ysUDOZXt6ZWoC74yspZm10_zGEUyjm5axY0SDCxxwPcdJ_GIhoz90_L9wqRjz1NLVOBgPsDmQwWKzCd4o-M-VgjflYccFA45jcNEr5vV5Pce3JKqX9gJFIL-qVW9J5Y_qjMBZdOr7M3YWveJeo8daOKrF1CIGuInKckICK5-K4h52V_CpV_1jEPEDRfI5OGnX4AfFPnntVRmP3y8raD5ajnxgnFAj3bVmaC4XSDO9ZLJd-soMaaTqa-URYTv4WjGJZGpM-XP2MYrMVyQyafCzc90XKuxo3stdk7qL9-Hua-AQi5S5iVLacJz8LSTRqGcy8vXu_vIG8YHLOCAQAQO3pXJxcwu33BlttXskTLk-b8j2MvYr1OM25EW35MThuYOQNimlGLn7P7f5sphQiTt-aNT0mj-HrD_xE05=s250-no\nthumbnailImagePosition: left\ncoverImage: https://lh3.googleusercontent.com/Ht5ducjpGZIxCwrhATVndjvHuH_-Kz2Tl3a4r071v7j_GHdCDyo5D5myiDer5DZwdhCDWb0ZSgwdusqZsgc3q2GXPXv3I_CGwluVHNyiieve2YsRUy9_-xuJONWJJZ4Fd4gxZAqXh8J57Q811ITlBRHUuA6UJQeM_9cQ52vpmFWXIgM3NBlV0_QcBebviTM6XT3EHucC0Wv4LFpCYffHzM_Aftc_YTG7QVrG5wtBg0ebGhMggyMme6j1kRuxdOI_nvoFpTYxHr58P68R5rcSdXxVXZ0FeYpKaNkmkZ7rNhsL_z3iWI7CxjbSPJD5USGFSS88OdSfp34p9dysnyk8-FJN3COPgxcZh0krE_Yn_pUhAObBn5nWC6WdZzTFCcTHhY4GDsYlsO2OsizYSscRoqCfUaZ_byBLYop2mr4-I2NsOwVTHVMCa3XLZ-bKoEei_GDNuBeSOs6s03lLVgN0-BPnXhqQkRRVSTvg74D1cu65nlDdMEe__a_H8PJxRuxo7kIzuZS2gP7vjwiKkd2bYR705P6P8mWVJf0RTDED3uTtM3it9yvTOa77wiJJtr5Y0h75S5ZrcclHDu6t9WcyFB3yrLuPBNPuieuy10HMhHXBqZqQRX8tyPZaQwNiANFgBQQ1MYs_jXPXnrj5y5-GneVm30LkL5UE=w1024-h683-no\ncoverMeta: out\ntags: [Sketch, Abstract, Adobe XD, UX, UI]\ndate: 2018/09/13\nupdated: 2018/09/13\n---\n\n這篇要和大家分享平時設計 UX/UI 的時候我會用到的工具。以及在一堆爆炸的工作量中，要怎麼運用工具存活下來的故事 XD 。那我們就趕快開始吧。\n\n<!--more-->\n\n這邊主要先介紹平常會用到的 Tool “粗略簡介”，中間會附註其他類似的工具，最後說明我的設計工作流。比較技術性的使用方式要等後續再慢慢出一些專門的文章。\n\n***\n## Abstract\n\n![Abstract](https://lh3.googleusercontent.com/B9jMSu2y8oF5JWE25zqlLeLdnXeFKu8VlAQGjGo7E-naFUVL0Q_svrwfEJc4wfyFGn_YGv7jdo2A8nL_qK2W0_7cy-8rMJZnc3PGERoQ7Yh8yRnxLFw28LW6u_1tqhGYH7cf9nIA5ymIS0-wMQB4jnZ07RdOUVrwhdSMvYhOfdPbs-lBESJPdIfRMA1uJgZt9-moEUPEAHwGV5H9EjDRgACHqJYSj3AVLL05WR3wxW1L0tC2R1bLCH5qfpAwVmD6jiBkwrs1rJEIHYBEMYWT5jPnXTzL1_GF4wo7QRR2hSrucL_88HEz0HPMhl_erd3NbQMykciPwCt9qleYapfcPhFb0IUndhW0YNWZaStiT-e1qK1gqYOtfi7NBuvzX8V9fvT3IyGUXA1R_TZcB0tdYNVe_xFogGYlWFmcs4Kf-M03ffDmIwBe-wAl2FXR2T3dAk0kyBngWTDVgCT7bHzpIeJUQ0wXOgd3G5ULCpnSwGmb-QgXssU3zfGnQPyCZz1YJ4j60m3XXc3D63gcMvVJtec3TzQrhm9z32LeSvtH3xLXftaCJvpu4OAt8qIPN3ccjQZvHVB_wFTcC327qTH8fZzDXc2_76PjyOM5mnRSzYTZWcmyemJiTJZECdSCsCXFh0tAltqbpSlAo5h5lXV7eA6VXf3GJOVf=w1000-h648-no \"Abstract\")\n\n[Abstract](https://www.goabstract.com/) 是針對 Sketch 的版本控制工具。\n\n> “One place to version, manage, and collaborate on your Sketch files.” \n\n就如同使用 git 一般，所有的修改異動都會以 commit 的方式在雲端。再也不用像以往使用 adobe 系列狂複製做檔案備份的動作，使用 Abstract 就可以隨時查看要的版本，設計師再也不用害怕老闆說：“還是第一個版本好”(ＱＱ～心在淌血)。如果多人修改也可以開不同的分支(branch)，最後將確認的版本 merge 到 Master 即可。這簡直是設計師的救星啊～太多專案真的記不清之前做了什麼事，人也是會老的啊～(誤)\n\n> 其他類似的工具：[Plant](https://plantapp.io/), [Kactus](https://kactus.io/)，網路上也有蠻多比較文章，可參考[這篇](https://blog.prototypr.io/abstract-vs-kactus-vs-plant-a-guide-of-version-control-solutions-for-sketch-7da0a8ab5105)\n\n***\n## Sketch\n\n![Sketch](https://lh3.googleusercontent.com/p8yHNZixT2X4KUTqi9yWP37AOStxEdS76FbW7-zGuPezghV337s75z3sUnxU-hqp9Nla_daY9xJMdc7fvGZ1QyiRBdI-Lk_FtvL6N_dIW9Szg__ZILi8MxIHzHtHMUe_8A2ICXIswUVtQlg0id5pP5IN6zoiw6uN10jKR_yofIwlH1Gy7GSlwR1Cwxlr3r-FcvvVg2FTZ5U1oUW-HD013ja9hGRhDhW2dkq0B5TiMtSEiNtWGx1oxIZ6YebTtMguiG2JEfur0Kd0Soerl-1DtKrWUmiwWhTYyU4CCWATsgqWLz1WSIi0AZmCCuOEZpELDpiq7McO3U_hUhdltH8ciGSf53BsLnsAi6VDP6w56Y_RhP7JkptmTRytB6_JrwQr34ZBfPlGvtwj9b7egeZ0q76srWyHVzNK_92T4wRFTzztlIeCluignUWrz5ObBOZiVrfHJpJ2DlVyz9NpMPYj_tJY-XTB7QqC8w0Guznx9-GxMcAEkFesDYULzWxQKSt-gKECfrEFJhmtPzPUm7Rf1Y9Fm6zjddvhz3lyYyEbZK8kHzpUTCUDAlDxU2upuEVbIv5-BGpyNsrOMG8Ivb1T87fpy7FLuMcz8Z67hwwh-jav9DqNI9_jpqwNuNeImgehSmeA_5CJ_n-4IUQkYnk-LTACH8P-U77n=w1024-h612-no \"Sketch\")\n\n[Sketch](https://www.sketchapp.com/) 設計 UI 的工具，我想他的大名鼎鼎幾乎每位介面設計師都聽過吧。其實我第一次接觸他的契機是因為我需要 “加快” 我的產出速度，為什麼這樣說呢？是設計師的話一定用過 Adobe 的 Illustrator, Photoshop，假設要你設計一個簡單的聯絡人清單介面，用 Adobe 系列做是非常手工的一件事情。但透過 Sketch 大量的外部 plugin 支援，只要引用幾個簡單的 plugin ，就可以快速產出假的聯絡人名稱、假照片、固定的間距(padding)。除此之外，還可以透過 plugin 輸出 spec 給工程師參考，再也不用自己拼命測量、打色碼，告訴工程師要怎麼切版了。為了要在團隊裡同時支撐大量專案的設計，如何在同樣高品質下，提升速度才是能讓自己存活的關鍵。\n\n> 其他類似的工具：[Adobe XD](https://www.adobe.com/tw/products/xd.html)\n\n***\n## Adobe XD\n\n![Adobe XD](https://lh3.googleusercontent.com/oN9oos92ac2EMe_33VCHYJKZpxFT0fE2NwTPMj5LQtPwN0pSFK5VXjktls7Xod7-K4XbRE2ZUXQQ_t6x3Omxl6lKZp3mM8Lpge8YHfHuWTAkodiDHD7zuzGRLm9vfDGzQQLBTehvt1-1hWByIHf8X33vXqer0DQcz-PqYkh_vJ3O4yTbY-XaZGJCY_39VkCUgVD_tMDNMqwK8mkUv_RDFEHK_WHoVrwXYYgvmSS21jTkb8pZdn4XKESnnASPVfodGiSAnPZjVOE_2XBdNMNhbQgXZN7QJMxseCB_erd1NYNb-k3Fox2WG9pxjfj-0zmYB3f1coj1aV9khiz4rlJmGQGjvz2ghfe94OR_gg0rIi4XYfrTKzIW1EjdbzrgHwAxJwyJbVGg_8ZMEd8hYGBYWMeN8p2rCinI9ixu44uZyCUT9hFsFgCmSHgivJhavxdNoPzSwqyMUVTDWccQCaR55IjmKYVtDKhpGmo8jFtxgrRW06ASGP-HCPeFFWcL9x4Ud33O7xugtcGG1GfFivnxD1ZC___vARwrfffz1-M8eTFDrDKAsh4G2bnWmFj4WN4HPHllpcDo4lsx4mjN2KG2aP4mPpJalHdYTxGU_RQkeBxRxP3q7JOtnMTcl8tTwEKhXWl_LJNfkO-70M190n8PFJFtG6J7Laqt=w720-h520-no \"Adobe XD\")\n\n誒～～等等，剛剛不是說你是用 Sketch，[Adobe XD](https://www.adobe.com/tw/products/xd.html) 是相似的工具，那你相似的工具怎麼一次就用了兩款了呢？你以為我這麼愛搞死自己啊～還不是因為兩者的出發利基點不同，各有優缺點，所以只好截長補短囉。用 Sketch 主要還是因為有版控的關係，畢竟是以存活為優先啊。而 XD 的優勢呢主要是在他的 prototype ，可以很直覺的拉一拉，就可以輸出 URL 提供 user 使用測試，不用寫程式也可以先收集反饋，不然等到寫好程式又被打槍設計就會進入輪迴地獄了。但近期 XD 和 Sketch 兩者的功能越來越相像， Sketch 新增了 prototype 功能(但還有些小 bug)，而 XD 也在著手開發 plugin 生態，這兩個目前還是不分軒輊。目前本人還是偏向可搭版控功能的 Sketch 為主，而 XD 為輔的狀態。\n\n> 其他類似的工具：[inVision](https://www.invisionapp.com/)，inVision 除了可以線上做 prototype 之外，還主打模擬過場互動動畫，這款做動畫的威力可說是相當強大，有可能未來會強勢殺出。但目前主要是追求速度的提升，製作互動動畫的部分就沒多重琢磨，可能往後比較有空閒的時間再多加研究。\n\n***\n## 設計工作流\n\n我的設計流程大約是這樣的：\n\n1. 接到需求\n2. 打開版控軟體 Abstract 創立新專案 (既有舊專案則同步檔案至最新)\n3. 用 Abstract 開 new branch\n4. 從 Abstract branch 打開 Sketch 設計 UI\n5. 設計一段落，建立 commit 上 Abstract\n6. 從 Sketch 檔案輸出靜態圖片\n7. 使用 Adobe XD 建立 prototype\n8. 輸出 prototype 網址給使用者測試\n9. 得到使用者回饋後，再決定 Abstract 是否要 merge 此 branch 到 Master 或是繼續新增 commit。最差的可能是全部被打槍，只好從 Master 再另開 branch 來做。\n\n上面的步驟依據使用者回饋多寡做多次的循環至 OK 為止。\n\n以上是我到目前為止採用的 design workflow，提供給大家參考。之後會寫一系列關於 UX, UI 的工具使用技巧或介紹大咖的 design pattern 如何幫助我有效率的產出，敬請期待～","slug":"UXUI/UX-UI-Workflow-Tool-in-2018","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu755002htudhyy2hz8a5","content":"<p>這篇要和大家分享平時設計 UX/UI 的時候我會用到的工具。以及在一堆爆炸的工作量中，要怎麼運用工具存活下來的故事 XD 。那我們就趕快開始吧。</p>\n<a id=\"more\"></a>\n<p>這邊主要先介紹平常會用到的 Tool “粗略簡介”，中間會附註其他類似的工具，最後說明我的設計工作流。比較技術性的使用方式要等後續再慢慢出一些專門的文章。</p>\n<hr>\n<h2 id=\"Abstract\"><a href=\"#Abstract\" class=\"headerlink\" title=\"Abstract\"></a>Abstract</h2><p><img src=\"https://lh3.googleusercontent.com/B9jMSu2y8oF5JWE25zqlLeLdnXeFKu8VlAQGjGo7E-naFUVL0Q_svrwfEJc4wfyFGn_YGv7jdo2A8nL_qK2W0_7cy-8rMJZnc3PGERoQ7Yh8yRnxLFw28LW6u_1tqhGYH7cf9nIA5ymIS0-wMQB4jnZ07RdOUVrwhdSMvYhOfdPbs-lBESJPdIfRMA1uJgZt9-moEUPEAHwGV5H9EjDRgACHqJYSj3AVLL05WR3wxW1L0tC2R1bLCH5qfpAwVmD6jiBkwrs1rJEIHYBEMYWT5jPnXTzL1_GF4wo7QRR2hSrucL_88HEz0HPMhl_erd3NbQMykciPwCt9qleYapfcPhFb0IUndhW0YNWZaStiT-e1qK1gqYOtfi7NBuvzX8V9fvT3IyGUXA1R_TZcB0tdYNVe_xFogGYlWFmcs4Kf-M03ffDmIwBe-wAl2FXR2T3dAk0kyBngWTDVgCT7bHzpIeJUQ0wXOgd3G5ULCpnSwGmb-QgXssU3zfGnQPyCZz1YJ4j60m3XXc3D63gcMvVJtec3TzQrhm9z32LeSvtH3xLXftaCJvpu4OAt8qIPN3ccjQZvHVB_wFTcC327qTH8fZzDXc2_76PjyOM5mnRSzYTZWcmyemJiTJZECdSCsCXFh0tAltqbpSlAo5h5lXV7eA6VXf3GJOVf=w1000-h648-no\" alt=\"Abstract\" title=\"Abstract\"></p>\n<p><a href=\"https://www.goabstract.com/\" target=\"_blank\" rel=\"noopener\">Abstract</a> 是針對 Sketch 的版本控制工具。</p>\n<blockquote>\n<p>“One place to version, manage, and collaborate on your Sketch files.” </p>\n</blockquote>\n<p>就如同使用 git 一般，所有的修改異動都會以 commit 的方式在雲端。再也不用像以往使用 adobe 系列狂複製做檔案備份的動作，使用 Abstract 就可以隨時查看要的版本，設計師再也不用害怕老闆說：“還是第一個版本好”(ＱＱ～心在淌血)。如果多人修改也可以開不同的分支(branch)，最後將確認的版本 merge 到 Master 即可。這簡直是設計師的救星啊～太多專案真的記不清之前做了什麼事，人也是會老的啊～(誤)</p>\n<blockquote>\n<p>其他類似的工具：<a href=\"https://plantapp.io/\" target=\"_blank\" rel=\"noopener\">Plant</a>, <a href=\"https://kactus.io/\" target=\"_blank\" rel=\"noopener\">Kactus</a>，網路上也有蠻多比較文章，可參考<a href=\"https://blog.prototypr.io/abstract-vs-kactus-vs-plant-a-guide-of-version-control-solutions-for-sketch-7da0a8ab5105\" target=\"_blank\" rel=\"noopener\">這篇</a></p>\n</blockquote>\n<hr>\n<h2 id=\"Sketch\"><a href=\"#Sketch\" class=\"headerlink\" title=\"Sketch\"></a>Sketch</h2><p><img src=\"https://lh3.googleusercontent.com/p8yHNZixT2X4KUTqi9yWP37AOStxEdS76FbW7-zGuPezghV337s75z3sUnxU-hqp9Nla_daY9xJMdc7fvGZ1QyiRBdI-Lk_FtvL6N_dIW9Szg__ZILi8MxIHzHtHMUe_8A2ICXIswUVtQlg0id5pP5IN6zoiw6uN10jKR_yofIwlH1Gy7GSlwR1Cwxlr3r-FcvvVg2FTZ5U1oUW-HD013ja9hGRhDhW2dkq0B5TiMtSEiNtWGx1oxIZ6YebTtMguiG2JEfur0Kd0Soerl-1DtKrWUmiwWhTYyU4CCWATsgqWLz1WSIi0AZmCCuOEZpELDpiq7McO3U_hUhdltH8ciGSf53BsLnsAi6VDP6w56Y_RhP7JkptmTRytB6_JrwQr34ZBfPlGvtwj9b7egeZ0q76srWyHVzNK_92T4wRFTzztlIeCluignUWrz5ObBOZiVrfHJpJ2DlVyz9NpMPYj_tJY-XTB7QqC8w0Guznx9-GxMcAEkFesDYULzWxQKSt-gKECfrEFJhmtPzPUm7Rf1Y9Fm6zjddvhz3lyYyEbZK8kHzpUTCUDAlDxU2upuEVbIv5-BGpyNsrOMG8Ivb1T87fpy7FLuMcz8Z67hwwh-jav9DqNI9_jpqwNuNeImgehSmeA_5CJ_n-4IUQkYnk-LTACH8P-U77n=w1024-h612-no\" alt=\"Sketch\" title=\"Sketch\"></p>\n<p><a href=\"https://www.sketchapp.com/\" target=\"_blank\" rel=\"noopener\">Sketch</a> 設計 UI 的工具，我想他的大名鼎鼎幾乎每位介面設計師都聽過吧。其實我第一次接觸他的契機是因為我需要 “加快” 我的產出速度，為什麼這樣說呢？是設計師的話一定用過 Adobe 的 Illustrator, Photoshop，假設要你設計一個簡單的聯絡人清單介面，用 Adobe 系列做是非常手工的一件事情。但透過 Sketch 大量的外部 plugin 支援，只要引用幾個簡單的 plugin ，就可以快速產出假的聯絡人名稱、假照片、固定的間距(padding)。除此之外，還可以透過 plugin 輸出 spec 給工程師參考，再也不用自己拼命測量、打色碼，告訴工程師要怎麼切版了。為了要在團隊裡同時支撐大量專案的設計，如何在同樣高品質下，提升速度才是能讓自己存活的關鍵。</p>\n<blockquote>\n<p>其他類似的工具：<a href=\"https://www.adobe.com/tw/products/xd.html\" target=\"_blank\" rel=\"noopener\">Adobe XD</a></p>\n</blockquote>\n<hr>\n<h2 id=\"Adobe-XD\"><a href=\"#Adobe-XD\" class=\"headerlink\" title=\"Adobe XD\"></a>Adobe XD</h2><p><img src=\"https://lh3.googleusercontent.com/oN9oos92ac2EMe_33VCHYJKZpxFT0fE2NwTPMj5LQtPwN0pSFK5VXjktls7Xod7-K4XbRE2ZUXQQ_t6x3Omxl6lKZp3mM8Lpge8YHfHuWTAkodiDHD7zuzGRLm9vfDGzQQLBTehvt1-1hWByIHf8X33vXqer0DQcz-PqYkh_vJ3O4yTbY-XaZGJCY_39VkCUgVD_tMDNMqwK8mkUv_RDFEHK_WHoVrwXYYgvmSS21jTkb8pZdn4XKESnnASPVfodGiSAnPZjVOE_2XBdNMNhbQgXZN7QJMxseCB_erd1NYNb-k3Fox2WG9pxjfj-0zmYB3f1coj1aV9khiz4rlJmGQGjvz2ghfe94OR_gg0rIi4XYfrTKzIW1EjdbzrgHwAxJwyJbVGg_8ZMEd8hYGBYWMeN8p2rCinI9ixu44uZyCUT9hFsFgCmSHgivJhavxdNoPzSwqyMUVTDWccQCaR55IjmKYVtDKhpGmo8jFtxgrRW06ASGP-HCPeFFWcL9x4Ud33O7xugtcGG1GfFivnxD1ZC___vARwrfffz1-M8eTFDrDKAsh4G2bnWmFj4WN4HPHllpcDo4lsx4mjN2KG2aP4mPpJalHdYTxGU_RQkeBxRxP3q7JOtnMTcl8tTwEKhXWl_LJNfkO-70M190n8PFJFtG6J7Laqt=w720-h520-no\" alt=\"Adobe XD\" title=\"Adobe XD\"></p>\n<p>誒～～等等，剛剛不是說你是用 Sketch，<a href=\"https://www.adobe.com/tw/products/xd.html\" target=\"_blank\" rel=\"noopener\">Adobe XD</a> 是相似的工具，那你相似的工具怎麼一次就用了兩款了呢？你以為我這麼愛搞死自己啊～還不是因為兩者的出發利基點不同，各有優缺點，所以只好截長補短囉。用 Sketch 主要還是因為有版控的關係，畢竟是以存活為優先啊。而 XD 的優勢呢主要是在他的 prototype ，可以很直覺的拉一拉，就可以輸出 URL 提供 user 使用測試，不用寫程式也可以先收集反饋，不然等到寫好程式又被打槍設計就會進入輪迴地獄了。但近期 XD 和 Sketch 兩者的功能越來越相像， Sketch 新增了 prototype 功能(但還有些小 bug)，而 XD 也在著手開發 plugin 生態，這兩個目前還是不分軒輊。目前本人還是偏向可搭版控功能的 Sketch 為主，而 XD 為輔的狀態。</p>\n<blockquote>\n<p>其他類似的工具：<a href=\"https://www.invisionapp.com/\" target=\"_blank\" rel=\"noopener\">inVision</a>，inVision 除了可以線上做 prototype 之外，還主打模擬過場互動動畫，這款做動畫的威力可說是相當強大，有可能未來會強勢殺出。但目前主要是追求速度的提升，製作互動動畫的部分就沒多重琢磨，可能往後比較有空閒的時間再多加研究。</p>\n</blockquote>\n<hr>\n<h2 id=\"設計工作流\"><a href=\"#設計工作流\" class=\"headerlink\" title=\"設計工作流\"></a>設計工作流</h2><p>我的設計流程大約是這樣的：</p>\n<ol>\n<li>接到需求</li>\n<li>打開版控軟體 Abstract 創立新專案 (既有舊專案則同步檔案至最新)</li>\n<li>用 Abstract 開 new branch</li>\n<li>從 Abstract branch 打開 Sketch 設計 UI</li>\n<li>設計一段落，建立 commit 上 Abstract</li>\n<li>從 Sketch 檔案輸出靜態圖片</li>\n<li>使用 Adobe XD 建立 prototype</li>\n<li>輸出 prototype 網址給使用者測試</li>\n<li>得到使用者回饋後，再決定 Abstract 是否要 merge 此 branch 到 Master 或是繼續新增 commit。最差的可能是全部被打槍，只好從 Master 再另開 branch 來做。</li>\n</ol>\n<p>上面的步驟依據使用者回饋多寡做多次的循環至 OK 為止。</p>\n<p>以上是我到目前為止採用的 design workflow，提供給大家參考。之後會寫一系列關於 UX, UI 的工具使用技巧或介紹大咖的 design pattern 如何幫助我有效率的產出，敬請期待～</p>\n","site":{"data":{}},"thumbnailImageUrl":"https://lh3.googleusercontent.com/15TevdlU0UA0DHjDXR8IFLjUteZ4XGxRObDpCwsIumenN6CLFYQFRcoJnS_6xYGMmbUFHxpqlXp25FcRXorD83F2vgEoldt2orwKDe1_QGMpNRhvu0KtXQ1KxuXUV7GTUSCOn4GXJMj8lCETJtDBXcyl6bi_snLs80aQJu-mSbdzJ-Bj3D_0DpmVrnfS_KyUD7I-RnQZ5FOzarAYJmXYpwjBXGZkGNc1CtiSJ1OAQPCXFsOIj0Wnw8Bpq8z0ysUDOZXt6ZWoC74yspZm10_zGEUyjm5axY0SDCxxwPcdJ_GIhoz90_L9wqRjz1NLVOBgPsDmQwWKzCd4o-M-VgjflYccFA45jcNEr5vV5Pce3JKqX9gJFIL-qVW9J5Y_qjMBZdOr7M3YWveJeo8daOKrF1CIGuInKckICK5-K4h52V_CpV_1jEPEDRfI5OGnX4AfFPnntVRmP3y8raD5ajnxgnFAj3bVmaC4XSDO9ZLJd-soMaaTqa-URYTv4WjGJZGpM-XP2MYrMVyQyafCzc90XKuxo3stdk7qL9-Hua-AQi5S5iVLacJz8LSTRqGcy8vXu_vIG8YHLOCAQAQO3pXJxcwu33BlttXskTLk-b8j2MvYr1OM25EW35MThuYOQNimlGLn7P7f5sphQiTt-aNT0mj-HrD_xE05=s250-no","excerpt":"<p>這篇要和大家分享平時設計 UX/UI 的時候我會用到的工具。以及在一堆爆炸的工作量中，要怎麼運用工具存活下來的故事 XD 。那我們就趕快開始吧。</p>","more":"<p>這邊主要先介紹平常會用到的 Tool “粗略簡介”，中間會附註其他類似的工具，最後說明我的設計工作流。比較技術性的使用方式要等後續再慢慢出一些專門的文章。</p>\n<hr>\n<h2 id=\"Abstract\"><a href=\"#Abstract\" class=\"headerlink\" title=\"Abstract\"></a>Abstract</h2><p><img src=\"https://lh3.googleusercontent.com/B9jMSu2y8oF5JWE25zqlLeLdnXeFKu8VlAQGjGo7E-naFUVL0Q_svrwfEJc4wfyFGn_YGv7jdo2A8nL_qK2W0_7cy-8rMJZnc3PGERoQ7Yh8yRnxLFw28LW6u_1tqhGYH7cf9nIA5ymIS0-wMQB4jnZ07RdOUVrwhdSMvYhOfdPbs-lBESJPdIfRMA1uJgZt9-moEUPEAHwGV5H9EjDRgACHqJYSj3AVLL05WR3wxW1L0tC2R1bLCH5qfpAwVmD6jiBkwrs1rJEIHYBEMYWT5jPnXTzL1_GF4wo7QRR2hSrucL_88HEz0HPMhl_erd3NbQMykciPwCt9qleYapfcPhFb0IUndhW0YNWZaStiT-e1qK1gqYOtfi7NBuvzX8V9fvT3IyGUXA1R_TZcB0tdYNVe_xFogGYlWFmcs4Kf-M03ffDmIwBe-wAl2FXR2T3dAk0kyBngWTDVgCT7bHzpIeJUQ0wXOgd3G5ULCpnSwGmb-QgXssU3zfGnQPyCZz1YJ4j60m3XXc3D63gcMvVJtec3TzQrhm9z32LeSvtH3xLXftaCJvpu4OAt8qIPN3ccjQZvHVB_wFTcC327qTH8fZzDXc2_76PjyOM5mnRSzYTZWcmyemJiTJZECdSCsCXFh0tAltqbpSlAo5h5lXV7eA6VXf3GJOVf=w1000-h648-no\" alt=\"Abstract\" title=\"Abstract\"></p>\n<p><a href=\"https://www.goabstract.com/\" target=\"_blank\" rel=\"noopener\">Abstract</a> 是針對 Sketch 的版本控制工具。</p>\n<blockquote>\n<p>“One place to version, manage, and collaborate on your Sketch files.” </p>\n</blockquote>\n<p>就如同使用 git 一般，所有的修改異動都會以 commit 的方式在雲端。再也不用像以往使用 adobe 系列狂複製做檔案備份的動作，使用 Abstract 就可以隨時查看要的版本，設計師再也不用害怕老闆說：“還是第一個版本好”(ＱＱ～心在淌血)。如果多人修改也可以開不同的分支(branch)，最後將確認的版本 merge 到 Master 即可。這簡直是設計師的救星啊～太多專案真的記不清之前做了什麼事，人也是會老的啊～(誤)</p>\n<blockquote>\n<p>其他類似的工具：<a href=\"https://plantapp.io/\" target=\"_blank\" rel=\"noopener\">Plant</a>, <a href=\"https://kactus.io/\" target=\"_blank\" rel=\"noopener\">Kactus</a>，網路上也有蠻多比較文章，可參考<a href=\"https://blog.prototypr.io/abstract-vs-kactus-vs-plant-a-guide-of-version-control-solutions-for-sketch-7da0a8ab5105\" target=\"_blank\" rel=\"noopener\">這篇</a></p>\n</blockquote>\n<hr>\n<h2 id=\"Sketch\"><a href=\"#Sketch\" class=\"headerlink\" title=\"Sketch\"></a>Sketch</h2><p><img src=\"https://lh3.googleusercontent.com/p8yHNZixT2X4KUTqi9yWP37AOStxEdS76FbW7-zGuPezghV337s75z3sUnxU-hqp9Nla_daY9xJMdc7fvGZ1QyiRBdI-Lk_FtvL6N_dIW9Szg__ZILi8MxIHzHtHMUe_8A2ICXIswUVtQlg0id5pP5IN6zoiw6uN10jKR_yofIwlH1Gy7GSlwR1Cwxlr3r-FcvvVg2FTZ5U1oUW-HD013ja9hGRhDhW2dkq0B5TiMtSEiNtWGx1oxIZ6YebTtMguiG2JEfur0Kd0Soerl-1DtKrWUmiwWhTYyU4CCWATsgqWLz1WSIi0AZmCCuOEZpELDpiq7McO3U_hUhdltH8ciGSf53BsLnsAi6VDP6w56Y_RhP7JkptmTRytB6_JrwQr34ZBfPlGvtwj9b7egeZ0q76srWyHVzNK_92T4wRFTzztlIeCluignUWrz5ObBOZiVrfHJpJ2DlVyz9NpMPYj_tJY-XTB7QqC8w0Guznx9-GxMcAEkFesDYULzWxQKSt-gKECfrEFJhmtPzPUm7Rf1Y9Fm6zjddvhz3lyYyEbZK8kHzpUTCUDAlDxU2upuEVbIv5-BGpyNsrOMG8Ivb1T87fpy7FLuMcz8Z67hwwh-jav9DqNI9_jpqwNuNeImgehSmeA_5CJ_n-4IUQkYnk-LTACH8P-U77n=w1024-h612-no\" alt=\"Sketch\" title=\"Sketch\"></p>\n<p><a href=\"https://www.sketchapp.com/\" target=\"_blank\" rel=\"noopener\">Sketch</a> 設計 UI 的工具，我想他的大名鼎鼎幾乎每位介面設計師都聽過吧。其實我第一次接觸他的契機是因為我需要 “加快” 我的產出速度，為什麼這樣說呢？是設計師的話一定用過 Adobe 的 Illustrator, Photoshop，假設要你設計一個簡單的聯絡人清單介面，用 Adobe 系列做是非常手工的一件事情。但透過 Sketch 大量的外部 plugin 支援，只要引用幾個簡單的 plugin ，就可以快速產出假的聯絡人名稱、假照片、固定的間距(padding)。除此之外，還可以透過 plugin 輸出 spec 給工程師參考，再也不用自己拼命測量、打色碼，告訴工程師要怎麼切版了。為了要在團隊裡同時支撐大量專案的設計，如何在同樣高品質下，提升速度才是能讓自己存活的關鍵。</p>\n<blockquote>\n<p>其他類似的工具：<a href=\"https://www.adobe.com/tw/products/xd.html\" target=\"_blank\" rel=\"noopener\">Adobe XD</a></p>\n</blockquote>\n<hr>\n<h2 id=\"Adobe-XD\"><a href=\"#Adobe-XD\" class=\"headerlink\" title=\"Adobe XD\"></a>Adobe XD</h2><p><img src=\"https://lh3.googleusercontent.com/oN9oos92ac2EMe_33VCHYJKZpxFT0fE2NwTPMj5LQtPwN0pSFK5VXjktls7Xod7-K4XbRE2ZUXQQ_t6x3Omxl6lKZp3mM8Lpge8YHfHuWTAkodiDHD7zuzGRLm9vfDGzQQLBTehvt1-1hWByIHf8X33vXqer0DQcz-PqYkh_vJ3O4yTbY-XaZGJCY_39VkCUgVD_tMDNMqwK8mkUv_RDFEHK_WHoVrwXYYgvmSS21jTkb8pZdn4XKESnnASPVfodGiSAnPZjVOE_2XBdNMNhbQgXZN7QJMxseCB_erd1NYNb-k3Fox2WG9pxjfj-0zmYB3f1coj1aV9khiz4rlJmGQGjvz2ghfe94OR_gg0rIi4XYfrTKzIW1EjdbzrgHwAxJwyJbVGg_8ZMEd8hYGBYWMeN8p2rCinI9ixu44uZyCUT9hFsFgCmSHgivJhavxdNoPzSwqyMUVTDWccQCaR55IjmKYVtDKhpGmo8jFtxgrRW06ASGP-HCPeFFWcL9x4Ud33O7xugtcGG1GfFivnxD1ZC___vARwrfffz1-M8eTFDrDKAsh4G2bnWmFj4WN4HPHllpcDo4lsx4mjN2KG2aP4mPpJalHdYTxGU_RQkeBxRxP3q7JOtnMTcl8tTwEKhXWl_LJNfkO-70M190n8PFJFtG6J7Laqt=w720-h520-no\" alt=\"Adobe XD\" title=\"Adobe XD\"></p>\n<p>誒～～等等，剛剛不是說你是用 Sketch，<a href=\"https://www.adobe.com/tw/products/xd.html\" target=\"_blank\" rel=\"noopener\">Adobe XD</a> 是相似的工具，那你相似的工具怎麼一次就用了兩款了呢？你以為我這麼愛搞死自己啊～還不是因為兩者的出發利基點不同，各有優缺點，所以只好截長補短囉。用 Sketch 主要還是因為有版控的關係，畢竟是以存活為優先啊。而 XD 的優勢呢主要是在他的 prototype ，可以很直覺的拉一拉，就可以輸出 URL 提供 user 使用測試，不用寫程式也可以先收集反饋，不然等到寫好程式又被打槍設計就會進入輪迴地獄了。但近期 XD 和 Sketch 兩者的功能越來越相像， Sketch 新增了 prototype 功能(但還有些小 bug)，而 XD 也在著手開發 plugin 生態，這兩個目前還是不分軒輊。目前本人還是偏向可搭版控功能的 Sketch 為主，而 XD 為輔的狀態。</p>\n<blockquote>\n<p>其他類似的工具：<a href=\"https://www.invisionapp.com/\" target=\"_blank\" rel=\"noopener\">inVision</a>，inVision 除了可以線上做 prototype 之外，還主打模擬過場互動動畫，這款做動畫的威力可說是相當強大，有可能未來會強勢殺出。但目前主要是追求速度的提升，製作互動動畫的部分就沒多重琢磨，可能往後比較有空閒的時間再多加研究。</p>\n</blockquote>\n<hr>\n<h2 id=\"設計工作流\"><a href=\"#設計工作流\" class=\"headerlink\" title=\"設計工作流\"></a>設計工作流</h2><p>我的設計流程大約是這樣的：</p>\n<ol>\n<li>接到需求</li>\n<li>打開版控軟體 Abstract 創立新專案 (既有舊專案則同步檔案至最新)</li>\n<li>用 Abstract 開 new branch</li>\n<li>從 Abstract branch 打開 Sketch 設計 UI</li>\n<li>設計一段落，建立 commit 上 Abstract</li>\n<li>從 Sketch 檔案輸出靜態圖片</li>\n<li>使用 Adobe XD 建立 prototype</li>\n<li>輸出 prototype 網址給使用者測試</li>\n<li>得到使用者回饋後，再決定 Abstract 是否要 merge 此 branch 到 Master 或是繼續新增 commit。最差的可能是全部被打槍，只好從 Master 再另開 branch 來做。</li>\n</ol>\n<p>上面的步驟依據使用者回饋多寡做多次的循環至 OK 為止。</p>\n<p>以上是我到目前為止採用的 design workflow，提供給大家參考。之後會寫一系列關於 UX, UI 的工具使用技巧或介紹大咖的 design pattern 如何幫助我有效率的產出，敬請期待～</p>"},{"title":"Webpack 3 Tutorial - HTML Webpack Plugin","thumbnailImage":"https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667","thumbnailImagePosition":"left","coverImage":"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png","coverMeta":"out","date":"2017-06-29T16:00:00.000Z","updated":"2017-06-29T16:00:00.000Z","_content":"\n此篇介紹使用 `HTML Webpack Plugin`，他可以自動生成 `html` 並將 `app.bundle.js` 自動加在 `html` 結尾處。\n<!--more-->\n\n## 安裝 `HTML Webpack Plugin`\n\n```npm\nnpm i -D html-webpack-plugin\n```\n\n## 設定 `webpack.config.js`\n\n```js\nvar HtmlWebpackPlugin = require('html-webpack-plugin'); // 引入 html-webpack-plugin\nvar path = require('path');\n\nmodule.exports = {\nentry: './src/app.js',\noutput: {\n\n  path: path.resolve(__dirname, 'dist'),\n  // the target directory for all output files\n  // must be an absolute path (use the Node.js path module)\n\n  filename: 'app.bundle.js'\n  // the filename template for entry chunks\n\n},\n\nplugins: [new HtmlWebpackPlugin()] // 使用 html-webpack-plugin\n\n}\n```\n\n## 自動生成 `html`\n\n執行\n\n```npm\nnpm run dev\n```\n\n或\n\n```npm\nnpm run prod\n```\n\n就可以看到 `dist` 內生成 `index.html` 囉～\n\n![dist 內生成 index.html](https://lh3.googleusercontent.com/xNq0I-e-92Umpmt2g-040igJwmjMz2eJVLlR1Jd_XkQxLexKuwZvU_nEblxQqB0p7QYT0h2itGoxPKcceHmgBv5GKuq_nBkMq3l6NKkmT0VqEHOMW4GPQYaiT4zqpcLN087QDlaBPawib0kGZjeBLg27UKsunJXDnQy1eDki7ZnZF9v0di0HjzyDfk7u2WKJxjOqXiSr3VpQ_cdjzvdJKMq6P98zrElSPtLqPXbnHghl7knD7l3iAWF_F_m6By0cry24yO06sMowOQgB-4HsWXs0c8R5DP5jsuBh-iSBpsWRZzrlxOSUhzgfY1ZTXlrP9aU1pnh0suleU4RZBmJSp87i_1VXRmrGoNOsuDDB83HXshrWQ-sWoBdxYRouKh3FjmH0j3ybSAdkBWD5-OYp2d6zqT1f0uXzO2VwnalgNlCe3c_BQAqxSh58SWh2NoMsOIm2o2LMJY5-sNsdxgLW6yWBC04s7uveApgKJHxtY3skp_dkbc2xKCoWcDM4Qfy_s9dvTxMfIL6J7RwJrHePbnV4dxBFKhZzaNf44kQS6-v1piVWw1IrL143BZ_qp5HbhgFXgkkWuie5ufplKW9d-Q0SU6MQDGo_QYvX4DzPEoahbmVgl7rjISCm0OpSlkos6LYURLBUG0evIgmvYfXvFbBBk3NaMNsm=w1024-h698-no \"dist/index.html\")\n\n## 撰寫 html templates\n\n如果想要客製化自己的 `html` 模板要怎麼辦呢？\n我個人是喜歡用 `pug` 來寫，\n不過 `HTML Webpack Plugin` 有內建模板使用方式，\n所以就先示範內建的使用方式囉～\n\n1. 修改 `webpack.config.js`\n\n```js\nmodule.exports = {\n  ...\n  plugins: [\n    new HtmlWebpackPlugin({\n      title: 'Custom template', // 客製化的 html 標題\n      template: './src/index.html' // 模板的位置\n    })\n  ]\n  ...\n}\n```\n\n2. 建立 `html` 模板\n\n在 `src` 資料夾新增 `index.html`，\n`<%= htmlWebpackPlugin.options.title %>` 到時候會被 `webpack.config.js` 內設定的標題取代掉喔。\n\n```html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\"/>\n    <title><%= htmlWebpackPlugin.options.title %></title>\n  </head>\n  <body>\n  </body>\n</html>\n```\n\n3. 自動產生客製化 `html`\n\n執行\n\n```npm\nnpm run dev\n```\n\n或\n\n```npm\nnpm run prod\n```\n\n就可以看到 `dist` 內新生成的 `index.html` 囉～\n\n![dist 內新客製化 index.html](https://lh3.googleusercontent.com/dN0CFoLrFDBJPh0Qo8ODyyrMX1X8jxp13wcSshPdGKN1KWm9B43d1Qd0j89dH9lui0dYlbGb-iXdN4i5X8aF8ZqzQQ5gZ1YH5u8HZjnYh-4vndY0780cXO1iTQ-fa9550Lx3HhZXevd6Bl_ALGJtG3yRG_sRaGN88hYeQp_EIDGvdfX9v5LAtjl-D5FFclMvtkiJUeN48j3wtHuxbjnGIHvfOmQU_jeuHu_pUG6XzhvXuPZfaYqxCs0d3Xm6MQnS2SiraFGIyjAwVSUdWQhSlMQ3UcmukP4jC0ejasLPyy15AudhXv6TPykskMl_UDUsFKJs1sy2PRKrXvjbNWVRy4tt0qHkONgnBpghrQk8K6ydBhmidFUKUD3sGYchmtf01ae97I_x4046FXCHHnZltkl1whLohF1XXoPI2jkfKeaD0PgHDylMrkIdnmWBh_mWwX5lc3NE9aNmDDy3WNqOvcCyfId1QOH4A_gYMdDmG0LaubRcvTVDll5pjpBnULXGzYb7zcZNLzV1TIQq4-ccuk3MMtXNLC3TfvShup2SlHSmuHTrcnQlMzEuD3bo-x1VPwPphD_fm_TrSQzImnyRUIX3u8SXs3zEdAeAJtty8XI1KC-QKlh9p3LopZj_9bByi77FnGtXRTZaU1TSomjhBG_g1e1DOtxd=w1024-h698-no \"dist/index.html\")\n\n今天的實作檔案在[github](https://github.com/Annilla/webpack_practice/tree/v1.1.0) 。等前面幾篇基礎的介紹完，之後會介紹 `pug` 怎麼跟 `HTML Webpack Plugin` 做結合，敬請期待。\n\n## 參考資料\n\n* [HTML Webpack Plugin](https://github.com/jantimon/html-webpack-plugin)\n* [Webpack HtmlWebpackPlugin](https://webpack.js.org/plugins/html-webpack-plugin/)\n","source":"_posts/Webpack/Webpack-3-Tutorial-HTML-Webpack-Plugin.md","raw":"---\ntitle: Webpack 3 Tutorial - HTML Webpack Plugin\ncategories:\n  - Webpack\nthumbnailImage: https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667\nthumbnailImagePosition: left\ncoverImage: https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png\ncoverMeta: out\ntags: [Webpack]\ndate: 2017/06/30\nupdated: 2017/06/30\n---\n\n此篇介紹使用 `HTML Webpack Plugin`，他可以自動生成 `html` 並將 `app.bundle.js` 自動加在 `html` 結尾處。\n<!--more-->\n\n## 安裝 `HTML Webpack Plugin`\n\n```npm\nnpm i -D html-webpack-plugin\n```\n\n## 設定 `webpack.config.js`\n\n```js\nvar HtmlWebpackPlugin = require('html-webpack-plugin'); // 引入 html-webpack-plugin\nvar path = require('path');\n\nmodule.exports = {\nentry: './src/app.js',\noutput: {\n\n  path: path.resolve(__dirname, 'dist'),\n  // the target directory for all output files\n  // must be an absolute path (use the Node.js path module)\n\n  filename: 'app.bundle.js'\n  // the filename template for entry chunks\n\n},\n\nplugins: [new HtmlWebpackPlugin()] // 使用 html-webpack-plugin\n\n}\n```\n\n## 自動生成 `html`\n\n執行\n\n```npm\nnpm run dev\n```\n\n或\n\n```npm\nnpm run prod\n```\n\n就可以看到 `dist` 內生成 `index.html` 囉～\n\n![dist 內生成 index.html](https://lh3.googleusercontent.com/xNq0I-e-92Umpmt2g-040igJwmjMz2eJVLlR1Jd_XkQxLexKuwZvU_nEblxQqB0p7QYT0h2itGoxPKcceHmgBv5GKuq_nBkMq3l6NKkmT0VqEHOMW4GPQYaiT4zqpcLN087QDlaBPawib0kGZjeBLg27UKsunJXDnQy1eDki7ZnZF9v0di0HjzyDfk7u2WKJxjOqXiSr3VpQ_cdjzvdJKMq6P98zrElSPtLqPXbnHghl7knD7l3iAWF_F_m6By0cry24yO06sMowOQgB-4HsWXs0c8R5DP5jsuBh-iSBpsWRZzrlxOSUhzgfY1ZTXlrP9aU1pnh0suleU4RZBmJSp87i_1VXRmrGoNOsuDDB83HXshrWQ-sWoBdxYRouKh3FjmH0j3ybSAdkBWD5-OYp2d6zqT1f0uXzO2VwnalgNlCe3c_BQAqxSh58SWh2NoMsOIm2o2LMJY5-sNsdxgLW6yWBC04s7uveApgKJHxtY3skp_dkbc2xKCoWcDM4Qfy_s9dvTxMfIL6J7RwJrHePbnV4dxBFKhZzaNf44kQS6-v1piVWw1IrL143BZ_qp5HbhgFXgkkWuie5ufplKW9d-Q0SU6MQDGo_QYvX4DzPEoahbmVgl7rjISCm0OpSlkos6LYURLBUG0evIgmvYfXvFbBBk3NaMNsm=w1024-h698-no \"dist/index.html\")\n\n## 撰寫 html templates\n\n如果想要客製化自己的 `html` 模板要怎麼辦呢？\n我個人是喜歡用 `pug` 來寫，\n不過 `HTML Webpack Plugin` 有內建模板使用方式，\n所以就先示範內建的使用方式囉～\n\n1. 修改 `webpack.config.js`\n\n```js\nmodule.exports = {\n  ...\n  plugins: [\n    new HtmlWebpackPlugin({\n      title: 'Custom template', // 客製化的 html 標題\n      template: './src/index.html' // 模板的位置\n    })\n  ]\n  ...\n}\n```\n\n2. 建立 `html` 模板\n\n在 `src` 資料夾新增 `index.html`，\n`<%= htmlWebpackPlugin.options.title %>` 到時候會被 `webpack.config.js` 內設定的標題取代掉喔。\n\n```html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\"/>\n    <title><%= htmlWebpackPlugin.options.title %></title>\n  </head>\n  <body>\n  </body>\n</html>\n```\n\n3. 自動產生客製化 `html`\n\n執行\n\n```npm\nnpm run dev\n```\n\n或\n\n```npm\nnpm run prod\n```\n\n就可以看到 `dist` 內新生成的 `index.html` 囉～\n\n![dist 內新客製化 index.html](https://lh3.googleusercontent.com/dN0CFoLrFDBJPh0Qo8ODyyrMX1X8jxp13wcSshPdGKN1KWm9B43d1Qd0j89dH9lui0dYlbGb-iXdN4i5X8aF8ZqzQQ5gZ1YH5u8HZjnYh-4vndY0780cXO1iTQ-fa9550Lx3HhZXevd6Bl_ALGJtG3yRG_sRaGN88hYeQp_EIDGvdfX9v5LAtjl-D5FFclMvtkiJUeN48j3wtHuxbjnGIHvfOmQU_jeuHu_pUG6XzhvXuPZfaYqxCs0d3Xm6MQnS2SiraFGIyjAwVSUdWQhSlMQ3UcmukP4jC0ejasLPyy15AudhXv6TPykskMl_UDUsFKJs1sy2PRKrXvjbNWVRy4tt0qHkONgnBpghrQk8K6ydBhmidFUKUD3sGYchmtf01ae97I_x4046FXCHHnZltkl1whLohF1XXoPI2jkfKeaD0PgHDylMrkIdnmWBh_mWwX5lc3NE9aNmDDy3WNqOvcCyfId1QOH4A_gYMdDmG0LaubRcvTVDll5pjpBnULXGzYb7zcZNLzV1TIQq4-ccuk3MMtXNLC3TfvShup2SlHSmuHTrcnQlMzEuD3bo-x1VPwPphD_fm_TrSQzImnyRUIX3u8SXs3zEdAeAJtty8XI1KC-QKlh9p3LopZj_9bByi77FnGtXRTZaU1TSomjhBG_g1e1DOtxd=w1024-h698-no \"dist/index.html\")\n\n今天的實作檔案在[github](https://github.com/Annilla/webpack_practice/tree/v1.1.0) 。等前面幾篇基礎的介紹完，之後會介紹 `pug` 怎麼跟 `HTML Webpack Plugin` 做結合，敬請期待。\n\n## 參考資料\n\n* [HTML Webpack Plugin](https://github.com/jantimon/html-webpack-plugin)\n* [Webpack HtmlWebpackPlugin](https://webpack.js.org/plugins/html-webpack-plugin/)\n","slug":"Webpack/Webpack-3-Tutorial-HTML-Webpack-Plugin","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu756002ktudhduwxi9hf","content":"<p>此篇介紹使用 <code>HTML Webpack Plugin</code>，他可以自動生成 <code>html</code> 並將 <code>app.bundle.js</code> 自動加在 <code>html</code> 結尾處。<br><a id=\"more\"></a></p>\n<h2 id=\"安裝-HTML-Webpack-Plugin\"><a href=\"#安裝-HTML-Webpack-Plugin\" class=\"headerlink\" title=\"安裝 HTML Webpack Plugin\"></a>安裝 <code>HTML Webpack Plugin</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D html-webpack-plugin</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-webpack-config-js\"><a href=\"#設定-webpack-config-js\" class=\"headerlink\" title=\"設定 webpack.config.js\"></a>設定 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>); <span class=\"comment\">// 引入 html-webpack-plugin</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">entry: <span class=\"string\">'./src/app.js'</span>,</span><br><span class=\"line\">output: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">  <span class=\"comment\">// the target directory for all output files</span></span><br><span class=\"line\">  <span class=\"comment\">// must be an absolute path (use the Node.js path module)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  filename: <span class=\"string\">'app.bundle.js'</span></span><br><span class=\"line\">  <span class=\"comment\">// the filename template for entry chunks</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">plugins: [<span class=\"keyword\">new</span> HtmlWebpackPlugin()] <span class=\"comment\">// 使用 html-webpack-plugin</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"自動生成-html\"><a href=\"#自動生成-html\" class=\"headerlink\" title=\"自動生成 html\"></a>自動生成 <code>html</code></h2><p>執行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n<p>或</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<p>就可以看到 <code>dist</code> 內生成 <code>index.html</code> 囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/xNq0I-e-92Umpmt2g-040igJwmjMz2eJVLlR1Jd_XkQxLexKuwZvU_nEblxQqB0p7QYT0h2itGoxPKcceHmgBv5GKuq_nBkMq3l6NKkmT0VqEHOMW4GPQYaiT4zqpcLN087QDlaBPawib0kGZjeBLg27UKsunJXDnQy1eDki7ZnZF9v0di0HjzyDfk7u2WKJxjOqXiSr3VpQ_cdjzvdJKMq6P98zrElSPtLqPXbnHghl7knD7l3iAWF_F_m6By0cry24yO06sMowOQgB-4HsWXs0c8R5DP5jsuBh-iSBpsWRZzrlxOSUhzgfY1ZTXlrP9aU1pnh0suleU4RZBmJSp87i_1VXRmrGoNOsuDDB83HXshrWQ-sWoBdxYRouKh3FjmH0j3ybSAdkBWD5-OYp2d6zqT1f0uXzO2VwnalgNlCe3c_BQAqxSh58SWh2NoMsOIm2o2LMJY5-sNsdxgLW6yWBC04s7uveApgKJHxtY3skp_dkbc2xKCoWcDM4Qfy_s9dvTxMfIL6J7RwJrHePbnV4dxBFKhZzaNf44kQS6-v1piVWw1IrL143BZ_qp5HbhgFXgkkWuie5ufplKW9d-Q0SU6MQDGo_QYvX4DzPEoahbmVgl7rjISCm0OpSlkos6LYURLBUG0evIgmvYfXvFbBBk3NaMNsm=w1024-h698-no\" alt=\"dist 內生成 index.html\" title=\"dist/index.html\"></p>\n<h2 id=\"撰寫-html-templates\"><a href=\"#撰寫-html-templates\" class=\"headerlink\" title=\"撰寫 html templates\"></a>撰寫 html templates</h2><p>如果想要客製化自己的 <code>html</code> 模板要怎麼辦呢？<br>我個人是喜歡用 <code>pug</code> 來寫，<br>不過 <code>HTML Webpack Plugin</code> 有內建模板使用方式，<br>所以就先示範內建的使用方式囉～</p>\n<ol>\n<li>修改 <code>webpack.config.js</code></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      title: <span class=\"string\">'Custom template'</span>, <span class=\"comment\">// 客製化的 html 標題</span></span><br><span class=\"line\">      template: <span class=\"string\">'./src/index.html'</span> <span class=\"comment\">// 模板的位置</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>建立 <code>html</code> 模板</li>\n</ol>\n<p>在 <code>src</code> 資料夾新增 <code>index.html</code>，<br><code>&lt;%= htmlWebpackPlugin.options.title %&gt;</code> 到時候會被 <code>webpack.config.js</code> 內設定的標題取代掉喔。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=utf-8\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">htmlWebpackPlugin.options.title</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol>\n<li>自動產生客製化 <code>html</code></li>\n</ol>\n<p>執行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n<p>或</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<p>就可以看到 <code>dist</code> 內新生成的 <code>index.html</code> 囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/dN0CFoLrFDBJPh0Qo8ODyyrMX1X8jxp13wcSshPdGKN1KWm9B43d1Qd0j89dH9lui0dYlbGb-iXdN4i5X8aF8ZqzQQ5gZ1YH5u8HZjnYh-4vndY0780cXO1iTQ-fa9550Lx3HhZXevd6Bl_ALGJtG3yRG_sRaGN88hYeQp_EIDGvdfX9v5LAtjl-D5FFclMvtkiJUeN48j3wtHuxbjnGIHvfOmQU_jeuHu_pUG6XzhvXuPZfaYqxCs0d3Xm6MQnS2SiraFGIyjAwVSUdWQhSlMQ3UcmukP4jC0ejasLPyy15AudhXv6TPykskMl_UDUsFKJs1sy2PRKrXvjbNWVRy4tt0qHkONgnBpghrQk8K6ydBhmidFUKUD3sGYchmtf01ae97I_x4046FXCHHnZltkl1whLohF1XXoPI2jkfKeaD0PgHDylMrkIdnmWBh_mWwX5lc3NE9aNmDDy3WNqOvcCyfId1QOH4A_gYMdDmG0LaubRcvTVDll5pjpBnULXGzYb7zcZNLzV1TIQq4-ccuk3MMtXNLC3TfvShup2SlHSmuHTrcnQlMzEuD3bo-x1VPwPphD_fm_TrSQzImnyRUIX3u8SXs3zEdAeAJtty8XI1KC-QKlh9p3LopZj_9bByi77FnGtXRTZaU1TSomjhBG_g1e1DOtxd=w1024-h698-no\" alt=\"dist 內新客製化 index.html\" title=\"dist/index.html\"></p>\n<p>今天的實作檔案在<a href=\"https://github.com/Annilla/webpack_practice/tree/v1.1.0\" target=\"_blank\" rel=\"noopener\">github</a> 。等前面幾篇基礎的介紹完，之後會介紹 <code>pug</code> 怎麼跟 <code>HTML Webpack Plugin</code> 做結合，敬請期待。</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://github.com/jantimon/html-webpack-plugin\" target=\"_blank\" rel=\"noopener\">HTML Webpack Plugin</a></li>\n<li><a href=\"https://webpack.js.org/plugins/html-webpack-plugin/\" target=\"_blank\" rel=\"noopener\">Webpack HtmlWebpackPlugin</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667","excerpt":"<p>此篇介紹使用 <code>HTML Webpack Plugin</code>，他可以自動生成 <code>html</code> 並將 <code>app.bundle.js</code> 自動加在 <code>html</code> 結尾處。<br>","more":"</p>\n<h2 id=\"安裝-HTML-Webpack-Plugin\"><a href=\"#安裝-HTML-Webpack-Plugin\" class=\"headerlink\" title=\"安裝 HTML Webpack Plugin\"></a>安裝 <code>HTML Webpack Plugin</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D html-webpack-plugin</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-webpack-config-js\"><a href=\"#設定-webpack-config-js\" class=\"headerlink\" title=\"設定 webpack.config.js\"></a>設定 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>); <span class=\"comment\">// 引入 html-webpack-plugin</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">entry: <span class=\"string\">'./src/app.js'</span>,</span><br><span class=\"line\">output: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">  <span class=\"comment\">// the target directory for all output files</span></span><br><span class=\"line\">  <span class=\"comment\">// must be an absolute path (use the Node.js path module)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  filename: <span class=\"string\">'app.bundle.js'</span></span><br><span class=\"line\">  <span class=\"comment\">// the filename template for entry chunks</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">plugins: [<span class=\"keyword\">new</span> HtmlWebpackPlugin()] <span class=\"comment\">// 使用 html-webpack-plugin</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"自動生成-html\"><a href=\"#自動生成-html\" class=\"headerlink\" title=\"自動生成 html\"></a>自動生成 <code>html</code></h2><p>執行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n<p>或</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<p>就可以看到 <code>dist</code> 內生成 <code>index.html</code> 囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/xNq0I-e-92Umpmt2g-040igJwmjMz2eJVLlR1Jd_XkQxLexKuwZvU_nEblxQqB0p7QYT0h2itGoxPKcceHmgBv5GKuq_nBkMq3l6NKkmT0VqEHOMW4GPQYaiT4zqpcLN087QDlaBPawib0kGZjeBLg27UKsunJXDnQy1eDki7ZnZF9v0di0HjzyDfk7u2WKJxjOqXiSr3VpQ_cdjzvdJKMq6P98zrElSPtLqPXbnHghl7knD7l3iAWF_F_m6By0cry24yO06sMowOQgB-4HsWXs0c8R5DP5jsuBh-iSBpsWRZzrlxOSUhzgfY1ZTXlrP9aU1pnh0suleU4RZBmJSp87i_1VXRmrGoNOsuDDB83HXshrWQ-sWoBdxYRouKh3FjmH0j3ybSAdkBWD5-OYp2d6zqT1f0uXzO2VwnalgNlCe3c_BQAqxSh58SWh2NoMsOIm2o2LMJY5-sNsdxgLW6yWBC04s7uveApgKJHxtY3skp_dkbc2xKCoWcDM4Qfy_s9dvTxMfIL6J7RwJrHePbnV4dxBFKhZzaNf44kQS6-v1piVWw1IrL143BZ_qp5HbhgFXgkkWuie5ufplKW9d-Q0SU6MQDGo_QYvX4DzPEoahbmVgl7rjISCm0OpSlkos6LYURLBUG0evIgmvYfXvFbBBk3NaMNsm=w1024-h698-no\" alt=\"dist 內生成 index.html\" title=\"dist/index.html\"></p>\n<h2 id=\"撰寫-html-templates\"><a href=\"#撰寫-html-templates\" class=\"headerlink\" title=\"撰寫 html templates\"></a>撰寫 html templates</h2><p>如果想要客製化自己的 <code>html</code> 模板要怎麼辦呢？<br>我個人是喜歡用 <code>pug</code> 來寫，<br>不過 <code>HTML Webpack Plugin</code> 有內建模板使用方式，<br>所以就先示範內建的使用方式囉～</p>\n<ol>\n<li>修改 <code>webpack.config.js</code></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      title: <span class=\"string\">'Custom template'</span>, <span class=\"comment\">// 客製化的 html 標題</span></span><br><span class=\"line\">      template: <span class=\"string\">'./src/index.html'</span> <span class=\"comment\">// 模板的位置</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>建立 <code>html</code> 模板</li>\n</ol>\n<p>在 <code>src</code> 資料夾新增 <code>index.html</code>，<br><code>&lt;%= htmlWebpackPlugin.options.title %&gt;</code> 到時候會被 <code>webpack.config.js</code> 內設定的標題取代掉喔。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=utf-8\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">htmlWebpackPlugin.options.title</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol>\n<li>自動產生客製化 <code>html</code></li>\n</ol>\n<p>執行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n<p>或</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<p>就可以看到 <code>dist</code> 內新生成的 <code>index.html</code> 囉～</p>\n<p><img src=\"https://lh3.googleusercontent.com/dN0CFoLrFDBJPh0Qo8ODyyrMX1X8jxp13wcSshPdGKN1KWm9B43d1Qd0j89dH9lui0dYlbGb-iXdN4i5X8aF8ZqzQQ5gZ1YH5u8HZjnYh-4vndY0780cXO1iTQ-fa9550Lx3HhZXevd6Bl_ALGJtG3yRG_sRaGN88hYeQp_EIDGvdfX9v5LAtjl-D5FFclMvtkiJUeN48j3wtHuxbjnGIHvfOmQU_jeuHu_pUG6XzhvXuPZfaYqxCs0d3Xm6MQnS2SiraFGIyjAwVSUdWQhSlMQ3UcmukP4jC0ejasLPyy15AudhXv6TPykskMl_UDUsFKJs1sy2PRKrXvjbNWVRy4tt0qHkONgnBpghrQk8K6ydBhmidFUKUD3sGYchmtf01ae97I_x4046FXCHHnZltkl1whLohF1XXoPI2jkfKeaD0PgHDylMrkIdnmWBh_mWwX5lc3NE9aNmDDy3WNqOvcCyfId1QOH4A_gYMdDmG0LaubRcvTVDll5pjpBnULXGzYb7zcZNLzV1TIQq4-ccuk3MMtXNLC3TfvShup2SlHSmuHTrcnQlMzEuD3bo-x1VPwPphD_fm_TrSQzImnyRUIX3u8SXs3zEdAeAJtty8XI1KC-QKlh9p3LopZj_9bByi77FnGtXRTZaU1TSomjhBG_g1e1DOtxd=w1024-h698-no\" alt=\"dist 內新客製化 index.html\" title=\"dist/index.html\"></p>\n<p>今天的實作檔案在<a href=\"https://github.com/Annilla/webpack_practice/tree/v1.1.0\" target=\"_blank\" rel=\"noopener\">github</a> 。等前面幾篇基礎的介紹完，之後會介紹 <code>pug</code> 怎麼跟 <code>HTML Webpack Plugin</code> 做結合，敬請期待。</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://github.com/jantimon/html-webpack-plugin\" target=\"_blank\" rel=\"noopener\">HTML Webpack Plugin</a></li>\n<li><a href=\"https://webpack.js.org/plugins/html-webpack-plugin/\" target=\"_blank\" rel=\"noopener\">Webpack HtmlWebpackPlugin</a></li>\n</ul>"},{"title":"Webpack 3 Tutorial - Installation and Config","thumbnailImage":"https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667","thumbnailImagePosition":"left","coverImage":"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png","coverMeta":"out","date":"2017-06-13T16:00:00.000Z","updated":"2017-06-29T16:00:00.000Z","_content":"\n# 什麼是 Webpack ?\n\n`Webpack` 是針對所有前端程式的管理整合工具。工程師編寫程式模組（`html`, `css`, `js`, `sass`, `pug`, `babel`, ... etc.），使用 `webpack` 打包輸出靜態資產（assets）,配合`Babel`, `ES6`使用，可以寫出乾淨可復用的代碼，做到更好的前端程式管理。這一篇先示範基礎安裝和設定基本描述檔。\n<!--more-->\n\n## 安裝環境\n\n1. 安裝 [Node.js](https://nodejs.org/en/)\n\n2. 開一個專案資料夾，建置 `npm` 專案\n\n```npm\nnpm init\n```\n設定 package.json\n\n```js\n{\n  \"name\": \"Your Project Name\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Webpack project.\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\n  },\n  \"author\": \"Your Name\",\n  \"license\": \"ISC\",\n}\n```\n\n3. 安裝開發端套件 Webpack\n安裝全域(global)\n\n```npm\nnpm -g i webpack\n```\n> 只有第一次使用`webpack`需要安裝全域，裝過一次之後就可以不用再安裝global\n\n專案開發端安裝套件\n\n```npm\nnpm i -D webpack\n```\n\n## 組織專案架構\n\n在專案建立 src 和 dist 資料夾。\n\n* src: 工程師寫的程式放這裡。\n* dist: `webpack` 自動打包出來的檔案會放這裡。\n* src/app.js: 建立一支 `js` 檔案，等會要來測試 `webpack` 自動打包的功能用。\n\napp.js 內可以隨意寫 console 來測試\n\n```js\nconsole.log('Hello World!');\n```\n\n## 設定描述檔\n\n1. 在專案下新增`webpack.config.js`檔案。\n\n```js\nmodule.exports = {\n  entry: './src/app.js',\n  output: {\n    filename: './dist/app.bundle.js'\n  },\n}\n```\n\n* entry: 開始執行打包的入口\n* output: 輸出結果設定\n  - filename: 輸出結果的名稱\n\n2. 修改`package.json`檔案 `scripts`\n\n```js\n{\n  ...\n  \"scripts\": {\n    \"dev\": \"webpack -d --watch\",\n    \"prod\": \"webpack -p\"\n  },\n  ...\n}\n```\n\n* -d: 開發模式輸出，不會 minify js\n* --watch: 監聽程式碼修改，支援即時輸出\n* -p: 產品模式輸出，會 minify js\n\n## 執行 webpack 打包測試\n\n1. 執行`package.json`內`script`設定的 dev\n\n```npm\nnpm run dev\n```\n\n- 結果：會在 `dist` 資料夾內產`app.bundle.js`，沒有 minify\n\n2. 執行`package.json`內`script`設定的 prod\n\n```npm\nnpm run prod\n```\n\n- 結果：會在 `dist` 資料夾內產`app.bundle.js`，有 minify\n\n基本 webpack 練習完成囉～實際操作影片可觀賞 Ihatetomatoes 大大的 YOUTUBE 教學[Webpack 2 Tutorial - Installation and Config](https://www.youtube.com/watch?v=JdGnYNtuEtE&index=1&list=PLkEZWD8wbltnRp6nRR8kv97RbpcUdNawY)，感謝觀看 :)\n\n> 更新：2017/06/30 Webpack 版本更新到 3 囉 ！所以直接測試 3，發現無痛接軌沒問題，實作在 [github](https://github.com/Annilla/webpack_practice/tree/v1.0.0)，之後就直接都用 3 版實作囉。\n\n## 參考資料\n\n* [Webpack 2 入門教程](https://llp0574.github.io/2016/11/29/getting-started-with-webpack2/)\n* [Webpack 2 Tutorial - Installation and Config](https://www.youtube.com/watch?v=JdGnYNtuEtE&index=1&list=PLkEZWD8wbltnRp6nRR8kv97RbpcUdNawY)\n","source":"_posts/Webpack/Webpack-3-Tutorial-Installation-and-Config.md","raw":"---\ntitle: Webpack 3 Tutorial - Installation and Config\ncategories:\n  - Webpack\nthumbnailImage: https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667\nthumbnailImagePosition: left\ncoverImage: https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png\ncoverMeta: out\ntags: [Webpack]\ndate: 2017/06/14\nupdated: 2017/06/30\n---\n\n# 什麼是 Webpack ?\n\n`Webpack` 是針對所有前端程式的管理整合工具。工程師編寫程式模組（`html`, `css`, `js`, `sass`, `pug`, `babel`, ... etc.），使用 `webpack` 打包輸出靜態資產（assets）,配合`Babel`, `ES6`使用，可以寫出乾淨可復用的代碼，做到更好的前端程式管理。這一篇先示範基礎安裝和設定基本描述檔。\n<!--more-->\n\n## 安裝環境\n\n1. 安裝 [Node.js](https://nodejs.org/en/)\n\n2. 開一個專案資料夾，建置 `npm` 專案\n\n```npm\nnpm init\n```\n設定 package.json\n\n```js\n{\n  \"name\": \"Your Project Name\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Webpack project.\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\n  },\n  \"author\": \"Your Name\",\n  \"license\": \"ISC\",\n}\n```\n\n3. 安裝開發端套件 Webpack\n安裝全域(global)\n\n```npm\nnpm -g i webpack\n```\n> 只有第一次使用`webpack`需要安裝全域，裝過一次之後就可以不用再安裝global\n\n專案開發端安裝套件\n\n```npm\nnpm i -D webpack\n```\n\n## 組織專案架構\n\n在專案建立 src 和 dist 資料夾。\n\n* src: 工程師寫的程式放這裡。\n* dist: `webpack` 自動打包出來的檔案會放這裡。\n* src/app.js: 建立一支 `js` 檔案，等會要來測試 `webpack` 自動打包的功能用。\n\napp.js 內可以隨意寫 console 來測試\n\n```js\nconsole.log('Hello World!');\n```\n\n## 設定描述檔\n\n1. 在專案下新增`webpack.config.js`檔案。\n\n```js\nmodule.exports = {\n  entry: './src/app.js',\n  output: {\n    filename: './dist/app.bundle.js'\n  },\n}\n```\n\n* entry: 開始執行打包的入口\n* output: 輸出結果設定\n  - filename: 輸出結果的名稱\n\n2. 修改`package.json`檔案 `scripts`\n\n```js\n{\n  ...\n  \"scripts\": {\n    \"dev\": \"webpack -d --watch\",\n    \"prod\": \"webpack -p\"\n  },\n  ...\n}\n```\n\n* -d: 開發模式輸出，不會 minify js\n* --watch: 監聽程式碼修改，支援即時輸出\n* -p: 產品模式輸出，會 minify js\n\n## 執行 webpack 打包測試\n\n1. 執行`package.json`內`script`設定的 dev\n\n```npm\nnpm run dev\n```\n\n- 結果：會在 `dist` 資料夾內產`app.bundle.js`，沒有 minify\n\n2. 執行`package.json`內`script`設定的 prod\n\n```npm\nnpm run prod\n```\n\n- 結果：會在 `dist` 資料夾內產`app.bundle.js`，有 minify\n\n基本 webpack 練習完成囉～實際操作影片可觀賞 Ihatetomatoes 大大的 YOUTUBE 教學[Webpack 2 Tutorial - Installation and Config](https://www.youtube.com/watch?v=JdGnYNtuEtE&index=1&list=PLkEZWD8wbltnRp6nRR8kv97RbpcUdNawY)，感謝觀看 :)\n\n> 更新：2017/06/30 Webpack 版本更新到 3 囉 ！所以直接測試 3，發現無痛接軌沒問題，實作在 [github](https://github.com/Annilla/webpack_practice/tree/v1.0.0)，之後就直接都用 3 版實作囉。\n\n## 參考資料\n\n* [Webpack 2 入門教程](https://llp0574.github.io/2016/11/29/getting-started-with-webpack2/)\n* [Webpack 2 Tutorial - Installation and Config](https://www.youtube.com/watch?v=JdGnYNtuEtE&index=1&list=PLkEZWD8wbltnRp6nRR8kv97RbpcUdNawY)\n","slug":"Webpack/Webpack-3-Tutorial-Installation-and-Config","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu757002ntudhslugkv4s","content":"<h1 id=\"什麼是-Webpack\"><a href=\"#什麼是-Webpack\" class=\"headerlink\" title=\"什麼是 Webpack ?\"></a>什麼是 Webpack ?</h1><p><code>Webpack</code> 是針對所有前端程式的管理整合工具。工程師編寫程式模組（<code>html</code>, <code>css</code>, <code>js</code>, <code>sass</code>, <code>pug</code>, <code>babel</code>, … etc.），使用 <code>webpack</code> 打包輸出靜態資產（assets）,配合<code>Babel</code>, <code>ES6</code>使用，可以寫出乾淨可復用的代碼，做到更好的前端程式管理。這一篇先示範基礎安裝和設定基本描述檔。<br><a id=\"more\"></a></p>\n<h2 id=\"安裝環境\"><a href=\"#安裝環境\" class=\"headerlink\" title=\"安裝環境\"></a>安裝環境</h2><ol>\n<li><p>安裝 <a href=\"https://nodejs.org/en/\" target=\"_blank\" rel=\"noopener\">Node.js</a></p>\n</li>\n<li><p>開一個專案資料夾，建置 <code>npm</code> 專案</p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init</span><br></pre></td></tr></table></figure>\n<p>設定 package.json</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Your Project Name\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"version\"</span>: <span class=\"string\">\"1.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"description\"</span>: <span class=\"string\">\"Webpack project.\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"main\"</span>: <span class=\"string\">\"index.js\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"test\"</span>: <span class=\"string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">\"author\"</span>: <span class=\"string\">\"Your Name\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"license\"</span>: <span class=\"string\">\"ISC\"</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>安裝開發端套件 Webpack<br>安裝全域(global)</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm -g i webpack</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>只有第一次使用<code>webpack</code>需要安裝全域，裝過一次之後就可以不用再安裝global</p>\n</blockquote>\n<p>專案開發端安裝套件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D webpack</span><br></pre></td></tr></table></figure>\n<h2 id=\"組織專案架構\"><a href=\"#組織專案架構\" class=\"headerlink\" title=\"組織專案架構\"></a>組織專案架構</h2><p>在專案建立 src 和 dist 資料夾。</p>\n<ul>\n<li>src: 工程師寫的程式放這裡。</li>\n<li>dist: <code>webpack</code> 自動打包出來的檔案會放這裡。</li>\n<li>src/app.js: 建立一支 <code>js</code> 檔案，等會要來測試 <code>webpack</code> 自動打包的功能用。</li>\n</ul>\n<p>app.js 內可以隨意寫 console 來測試</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello World!'</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定描述檔\"><a href=\"#設定描述檔\" class=\"headerlink\" title=\"設定描述檔\"></a>設定描述檔</h2><ol>\n<li>在專案下新增<code>webpack.config.js</code>檔案。</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/app.js'</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: <span class=\"string\">'./dist/app.bundle.js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>entry: 開始執行打包的入口</li>\n<li>output: 輸出結果設定<ul>\n<li>filename: 輸出結果的名稱</li>\n</ul>\n</li>\n</ul>\n<ol>\n<li>修改<code>package.json</code>檔案 <code>scripts</code></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"dev\"</span>: <span class=\"string\">\"webpack -d --watch\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"prod\"</span>: <span class=\"string\">\"webpack -p\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>-d: 開發模式輸出，不會 minify js</li>\n<li>–watch: 監聽程式碼修改，支援即時輸出</li>\n<li>-p: 產品模式輸出，會 minify js</li>\n</ul>\n<h2 id=\"執行-webpack-打包測試\"><a href=\"#執行-webpack-打包測試\" class=\"headerlink\" title=\"執行 webpack 打包測試\"></a>執行 webpack 打包測試</h2><ol>\n<li>執行<code>package.json</code>內<code>script</code>設定的 dev</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n<ul>\n<li>結果：會在 <code>dist</code> 資料夾內產<code>app.bundle.js</code>，沒有 minify</li>\n</ul>\n<ol>\n<li>執行<code>package.json</code>內<code>script</code>設定的 prod</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<ul>\n<li>結果：會在 <code>dist</code> 資料夾內產<code>app.bundle.js</code>，有 minify</li>\n</ul>\n<p>基本 webpack 練習完成囉～實際操作影片可觀賞 Ihatetomatoes 大大的 YOUTUBE 教學<a href=\"https://www.youtube.com/watch?v=JdGnYNtuEtE&amp;index=1&amp;list=PLkEZWD8wbltnRp6nRR8kv97RbpcUdNawY\" target=\"_blank\" rel=\"noopener\">Webpack 2 Tutorial - Installation and Config</a>，感謝觀看 :)</p>\n<blockquote>\n<p>更新：2017/06/30 Webpack 版本更新到 3 囉 ！所以直接測試 3，發現無痛接軌沒問題，實作在 <a href=\"https://github.com/Annilla/webpack_practice/tree/v1.0.0\" target=\"_blank\" rel=\"noopener\">github</a>，之後就直接都用 3 版實作囉。</p>\n</blockquote>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://llp0574.github.io/2016/11/29/getting-started-with-webpack2/\" target=\"_blank\" rel=\"noopener\">Webpack 2 入門教程</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=JdGnYNtuEtE&amp;index=1&amp;list=PLkEZWD8wbltnRp6nRR8kv97RbpcUdNawY\" target=\"_blank\" rel=\"noopener\">Webpack 2 Tutorial - Installation and Config</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667","excerpt":"<h1 id=\"什麼是-Webpack\"><a href=\"#什麼是-Webpack\" class=\"headerlink\" title=\"什麼是 Webpack ?\"></a>什麼是 Webpack ?</h1><p><code>Webpack</code> 是針對所有前端程式的管理整合工具。工程師編寫程式模組（<code>html</code>, <code>css</code>, <code>js</code>, <code>sass</code>, <code>pug</code>, <code>babel</code>, … etc.），使用 <code>webpack</code> 打包輸出靜態資產（assets）,配合<code>Babel</code>, <code>ES6</code>使用，可以寫出乾淨可復用的代碼，做到更好的前端程式管理。這一篇先示範基礎安裝和設定基本描述檔。<br>","more":"</p>\n<h2 id=\"安裝環境\"><a href=\"#安裝環境\" class=\"headerlink\" title=\"安裝環境\"></a>安裝環境</h2><ol>\n<li><p>安裝 <a href=\"https://nodejs.org/en/\" target=\"_blank\" rel=\"noopener\">Node.js</a></p>\n</li>\n<li><p>開一個專案資料夾，建置 <code>npm</code> 專案</p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init</span><br></pre></td></tr></table></figure>\n<p>設定 package.json</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Your Project Name\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"version\"</span>: <span class=\"string\">\"1.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"description\"</span>: <span class=\"string\">\"Webpack project.\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"main\"</span>: <span class=\"string\">\"index.js\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"test\"</span>: <span class=\"string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">\"author\"</span>: <span class=\"string\">\"Your Name\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"license\"</span>: <span class=\"string\">\"ISC\"</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>安裝開發端套件 Webpack<br>安裝全域(global)</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm -g i webpack</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>只有第一次使用<code>webpack</code>需要安裝全域，裝過一次之後就可以不用再安裝global</p>\n</blockquote>\n<p>專案開發端安裝套件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D webpack</span><br></pre></td></tr></table></figure>\n<h2 id=\"組織專案架構\"><a href=\"#組織專案架構\" class=\"headerlink\" title=\"組織專案架構\"></a>組織專案架構</h2><p>在專案建立 src 和 dist 資料夾。</p>\n<ul>\n<li>src: 工程師寫的程式放這裡。</li>\n<li>dist: <code>webpack</code> 自動打包出來的檔案會放這裡。</li>\n<li>src/app.js: 建立一支 <code>js</code> 檔案，等會要來測試 <code>webpack</code> 自動打包的功能用。</li>\n</ul>\n<p>app.js 內可以隨意寫 console 來測試</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello World!'</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定描述檔\"><a href=\"#設定描述檔\" class=\"headerlink\" title=\"設定描述檔\"></a>設定描述檔</h2><ol>\n<li>在專案下新增<code>webpack.config.js</code>檔案。</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/app.js'</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: <span class=\"string\">'./dist/app.bundle.js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>entry: 開始執行打包的入口</li>\n<li>output: 輸出結果設定<ul>\n<li>filename: 輸出結果的名稱</li>\n</ul>\n</li>\n</ul>\n<ol>\n<li>修改<code>package.json</code>檔案 <code>scripts</code></li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"dev\"</span>: <span class=\"string\">\"webpack -d --watch\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"prod\"</span>: <span class=\"string\">\"webpack -p\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>-d: 開發模式輸出，不會 minify js</li>\n<li>–watch: 監聽程式碼修改，支援即時輸出</li>\n<li>-p: 產品模式輸出，會 minify js</li>\n</ul>\n<h2 id=\"執行-webpack-打包測試\"><a href=\"#執行-webpack-打包測試\" class=\"headerlink\" title=\"執行 webpack 打包測試\"></a>執行 webpack 打包測試</h2><ol>\n<li>執行<code>package.json</code>內<code>script</code>設定的 dev</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n<ul>\n<li>結果：會在 <code>dist</code> 資料夾內產<code>app.bundle.js</code>，沒有 minify</li>\n</ul>\n<ol>\n<li>執行<code>package.json</code>內<code>script</code>設定的 prod</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<ul>\n<li>結果：會在 <code>dist</code> 資料夾內產<code>app.bundle.js</code>，有 minify</li>\n</ul>\n<p>基本 webpack 練習完成囉～實際操作影片可觀賞 Ihatetomatoes 大大的 YOUTUBE 教學<a href=\"https://www.youtube.com/watch?v=JdGnYNtuEtE&amp;index=1&amp;list=PLkEZWD8wbltnRp6nRR8kv97RbpcUdNawY\" target=\"_blank\" rel=\"noopener\">Webpack 2 Tutorial - Installation and Config</a>，感謝觀看 :)</p>\n<blockquote>\n<p>更新：2017/06/30 Webpack 版本更新到 3 囉 ！所以直接測試 3，發現無痛接軌沒問題，實作在 <a href=\"https://github.com/Annilla/webpack_practice/tree/v1.0.0\" target=\"_blank\" rel=\"noopener\">github</a>，之後就直接都用 3 版實作囉。</p>\n</blockquote>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://llp0574.github.io/2016/11/29/getting-started-with-webpack2/\" target=\"_blank\" rel=\"noopener\">Webpack 2 入門教程</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=JdGnYNtuEtE&amp;index=1&amp;list=PLkEZWD8wbltnRp6nRR8kv97RbpcUdNawY\" target=\"_blank\" rel=\"noopener\">Webpack 2 Tutorial - Installation and Config</a></li>\n</ul>"},{"title":"Webpack 3 Tutorial - Webpack Dev Server","thumbnailImage":"https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667","thumbnailImagePosition":"left","coverImage":"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png","coverMeta":"out","date":"2017-09-01T16:00:00.000Z","updated":"2017-09-01T16:00:00.000Z","_content":"\n此篇介紹如何加入並使用 `webpack-dev-server`，並展示 `Hot Reload` 功能。\n<!--more-->\n\n## 安裝 `webpack-dev-server`\n\n```npm\nnpm i -D webpack-dev-server\n```\n\n## 設定 `webpack.config.js`\n\n```js\nmodule.exports = {\n  ......\n  devServer: {\n    contentBase: path.join(__dirname, \"dist\"), // 從哪裡提供內容\n    port: 9000 // http://localhost:9000\n  },\n  ......\n};\n```\n\n## 設定 `package.json`\n\n```js\n{\n  ......\n  \"scripts\": {\n    \"dev\": \"webpack-dev-server --open\",\n    ......\n  },\n  ......\n}\n```\n\n* --open: 自動開啟預設瀏覽器\n\n執行 `npm` 指令\n```npm\nnpm run dev\n```\n\n就會自動開啟瀏覽器看到預覽的畫面囉！\n\n![執行 npm run dev](https://lh3.googleusercontent.com/HnOhEhOGSinuEBswiyrJIX8iZ1Czq0EWpKZTRk-BE3mIM50Jri0t-zxbikMgvR4QBDbdM2fNjOeDhhz_4r4VPKxg2XiWMvgI3SBXgmd-d3N_d614PmJT0sKQ5ceBzkbzIlDNgI7GnWwqyTu-H6ZS_4X1Uuz-waQu8e5P2RC29snSMCqLNX5u8GGBJ2JVfS7kTMTfdkAfDnqa09uGuBocmq3Map-Fw8BdArobD_UBU_2cXFb3jMUzPWh0Ze_WUe3PZTcP_8srjAbxV3qu1S_O6GWH5BXT3-tOD9khFUhfcEUo5POBzep225XQr7_kfPeXGDC0dKftE821ZMkerSh994xOMi8pFkkX9BZBnO1zLZQOyJcVjIavFFSGbIBlFO-PQkYT4dA5pOuj9_PVAmmO3UXsbZEcozoqiNuI95lUdAsJ6zw_uJg7khL8iUUkXOo61jHqsOw7l9McIG5O5Vrwq-945YYTYlwSfGmdSzB7ruOMWC9_geJveziVfxV167JqBiONuAAFPgTF9D-1BF3_efshXRPOs35A9HG4GcllYarb-uRbCBF1GMNlQ8I-xPala9qsomjEqcbk5iLAiQ9ZAVYx57B32XqooBBUUX16EucFLvatq2XoZn-7hxep2ucS6DOsjJBMSa5Ys3wq_ioGy5B0pWxPL9Jt=w1024-h681-no \"dist/index.html\")\n\n疑？內容的文字怎麼好像被切掉了。我們趕緊來試試看修改 `css` 的部分，順便看看  `Hot Reload` 的威力吧～\n\n> 關於實時加載（Live Reload）和熱加載（Hot Reload）的區別在於:實時加載應用更新時需要刷新當前頁面，可以看到明顯的全局刷新效果;而熱加載基本上看不出刷新的效果，類似於局部刷新。\n\n## 測試 `Hot Reload`\n\n修改 `src/app.scss`，把字體變形的樣式註解掉\n\n```css\nbody {\n    background-color: yellowgreen;\n    h1 {\n        color: green;\n        // transform: scale(1.5);\n    }\n}\n```\n\n結果 `webpack-dev-server` 就幫我們即時打包並刷新瀏覽器頁面，所以我們就可以專心的寫code，畫面就會即時的自動更新囉，是不是超方便的啊？\n\n![Hot Reload](https://lh3.googleusercontent.com/dd1uIE9abHa17DxC19VyS2ejCk-ZLVe5y3PCnUu2HubhUCPvkwyjcUBPm70yP-eqtpsS6n7vJyeH4MjVviE4mCXJ6lwUVDeUUJ6w4pTKBQEWwtLEqa8Seojv2FPPHs70DJxZsZF9_8g2sURtQdUxFBG7H1zy6yd-fLbPB4LUi6Gw2Un9HZ0yrLx6s-8wgp8539AOi8gtlNJDZaoEpRkeEMbmTX4LWe67rKKCVGHFplKxl_u_zYWIVQU94yS1nwgSGgcNK5ZX2sVFUZ2bXc04D2GcC3JREt9WlmvdjGe4Fgs7-ohZgDyi2MJTw16HEhvEa3Yl-n0osdmvF_2cRv8oDbOPqwNL9TFgEdkmv3o9omQhmMg7rBT4_LkRC9vm0i8L-Cisr9eu7Js69IQUUqCkiMz1ZQWw_YIEVk20NbaIKZQRJZAAOnq1_h0N7vR5vnOMgaTWJ5KaucE1sieklCmkci0lLjIutitLXhtGNWYm0R0BKPlgiu8dAPlbfnNB95ReX4QI7bsMHm6tuPSVLkPpWddqMcChszAV6x_9KSieqz8CGlaOhuoAb2yRgR8ZW3oP9PfNT4rPBSx3eiuNalPFBX4xyBNGvMqfUJjioJRTc7F9pGsI-qBeJocby_CFAjY-OnKze75-NRfprp-iZL7dbE3X6o-FelJX=w1024-h681-no \"dist/index.html\")\n\n今天的範例程式檔[github](https://github.com/Annilla/webpack_practice/tree/v1.3.0)，感謝收看。\n\n## 參考資料\n\n* [Use Webpack Dev Server](https://webpack.js.org/guides/development/#using-webpack-dev-server)\n\n* [Webpack Dev Server Configuration](https://webpack.js.org/configuration/dev-server/)\n\n* [React Native 热加载（Hot Reload）原理简介](http://www.jianshu.com/p/1fa6e9c0799f)","source":"_posts/Webpack/Webpack-3-Tutorial-Webpack-Dev-Server.md","raw":"---\ntitle: Webpack 3 Tutorial - Webpack Dev Server\ncategories:\n  - Webpack\nthumbnailImage: https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667\nthumbnailImagePosition: left\ncoverImage: https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png\ncoverMeta: out\ntags: [Webpack]\ndate: 2017/09/02\nupdated: 2017/09/02\n---\n\n此篇介紹如何加入並使用 `webpack-dev-server`，並展示 `Hot Reload` 功能。\n<!--more-->\n\n## 安裝 `webpack-dev-server`\n\n```npm\nnpm i -D webpack-dev-server\n```\n\n## 設定 `webpack.config.js`\n\n```js\nmodule.exports = {\n  ......\n  devServer: {\n    contentBase: path.join(__dirname, \"dist\"), // 從哪裡提供內容\n    port: 9000 // http://localhost:9000\n  },\n  ......\n};\n```\n\n## 設定 `package.json`\n\n```js\n{\n  ......\n  \"scripts\": {\n    \"dev\": \"webpack-dev-server --open\",\n    ......\n  },\n  ......\n}\n```\n\n* --open: 自動開啟預設瀏覽器\n\n執行 `npm` 指令\n```npm\nnpm run dev\n```\n\n就會自動開啟瀏覽器看到預覽的畫面囉！\n\n![執行 npm run dev](https://lh3.googleusercontent.com/HnOhEhOGSinuEBswiyrJIX8iZ1Czq0EWpKZTRk-BE3mIM50Jri0t-zxbikMgvR4QBDbdM2fNjOeDhhz_4r4VPKxg2XiWMvgI3SBXgmd-d3N_d614PmJT0sKQ5ceBzkbzIlDNgI7GnWwqyTu-H6ZS_4X1Uuz-waQu8e5P2RC29snSMCqLNX5u8GGBJ2JVfS7kTMTfdkAfDnqa09uGuBocmq3Map-Fw8BdArobD_UBU_2cXFb3jMUzPWh0Ze_WUe3PZTcP_8srjAbxV3qu1S_O6GWH5BXT3-tOD9khFUhfcEUo5POBzep225XQr7_kfPeXGDC0dKftE821ZMkerSh994xOMi8pFkkX9BZBnO1zLZQOyJcVjIavFFSGbIBlFO-PQkYT4dA5pOuj9_PVAmmO3UXsbZEcozoqiNuI95lUdAsJ6zw_uJg7khL8iUUkXOo61jHqsOw7l9McIG5O5Vrwq-945YYTYlwSfGmdSzB7ruOMWC9_geJveziVfxV167JqBiONuAAFPgTF9D-1BF3_efshXRPOs35A9HG4GcllYarb-uRbCBF1GMNlQ8I-xPala9qsomjEqcbk5iLAiQ9ZAVYx57B32XqooBBUUX16EucFLvatq2XoZn-7hxep2ucS6DOsjJBMSa5Ys3wq_ioGy5B0pWxPL9Jt=w1024-h681-no \"dist/index.html\")\n\n疑？內容的文字怎麼好像被切掉了。我們趕緊來試試看修改 `css` 的部分，順便看看  `Hot Reload` 的威力吧～\n\n> 關於實時加載（Live Reload）和熱加載（Hot Reload）的區別在於:實時加載應用更新時需要刷新當前頁面，可以看到明顯的全局刷新效果;而熱加載基本上看不出刷新的效果，類似於局部刷新。\n\n## 測試 `Hot Reload`\n\n修改 `src/app.scss`，把字體變形的樣式註解掉\n\n```css\nbody {\n    background-color: yellowgreen;\n    h1 {\n        color: green;\n        // transform: scale(1.5);\n    }\n}\n```\n\n結果 `webpack-dev-server` 就幫我們即時打包並刷新瀏覽器頁面，所以我們就可以專心的寫code，畫面就會即時的自動更新囉，是不是超方便的啊？\n\n![Hot Reload](https://lh3.googleusercontent.com/dd1uIE9abHa17DxC19VyS2ejCk-ZLVe5y3PCnUu2HubhUCPvkwyjcUBPm70yP-eqtpsS6n7vJyeH4MjVviE4mCXJ6lwUVDeUUJ6w4pTKBQEWwtLEqa8Seojv2FPPHs70DJxZsZF9_8g2sURtQdUxFBG7H1zy6yd-fLbPB4LUi6Gw2Un9HZ0yrLx6s-8wgp8539AOi8gtlNJDZaoEpRkeEMbmTX4LWe67rKKCVGHFplKxl_u_zYWIVQU94yS1nwgSGgcNK5ZX2sVFUZ2bXc04D2GcC3JREt9WlmvdjGe4Fgs7-ohZgDyi2MJTw16HEhvEa3Yl-n0osdmvF_2cRv8oDbOPqwNL9TFgEdkmv3o9omQhmMg7rBT4_LkRC9vm0i8L-Cisr9eu7Js69IQUUqCkiMz1ZQWw_YIEVk20NbaIKZQRJZAAOnq1_h0N7vR5vnOMgaTWJ5KaucE1sieklCmkci0lLjIutitLXhtGNWYm0R0BKPlgiu8dAPlbfnNB95ReX4QI7bsMHm6tuPSVLkPpWddqMcChszAV6x_9KSieqz8CGlaOhuoAb2yRgR8ZW3oP9PfNT4rPBSx3eiuNalPFBX4xyBNGvMqfUJjioJRTc7F9pGsI-qBeJocby_CFAjY-OnKze75-NRfprp-iZL7dbE3X6o-FelJX=w1024-h681-no \"dist/index.html\")\n\n今天的範例程式檔[github](https://github.com/Annilla/webpack_practice/tree/v1.3.0)，感謝收看。\n\n## 參考資料\n\n* [Use Webpack Dev Server](https://webpack.js.org/guides/development/#using-webpack-dev-server)\n\n* [Webpack Dev Server Configuration](https://webpack.js.org/configuration/dev-server/)\n\n* [React Native 热加载（Hot Reload）原理简介](http://www.jianshu.com/p/1fa6e9c0799f)","slug":"Webpack/Webpack-3-Tutorial-Webpack-Dev-Server","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu758002ptudhc5uz3c81","content":"<p>此篇介紹如何加入並使用 <code>webpack-dev-server</code>，並展示 <code>Hot Reload</code> 功能。<br><a id=\"more\"></a></p>\n<h2 id=\"安裝-webpack-dev-server\"><a href=\"#安裝-webpack-dev-server\" class=\"headerlink\" title=\"安裝 webpack-dev-server\"></a>安裝 <code>webpack-dev-server</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D webpack-dev-server</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-webpack-config-js\"><a href=\"#設定-webpack-config-js\" class=\"headerlink\" title=\"設定 webpack.config.js\"></a>設定 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    contentBase: path.join(__dirname, <span class=\"string\">\"dist\"</span>), <span class=\"comment\">// 從哪裡提供內容</span></span><br><span class=\"line\">    port: <span class=\"number\">9000</span> <span class=\"comment\">// http://localhost:9000</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-package-json\"><a href=\"#設定-package-json\" class=\"headerlink\" title=\"設定 package.json\"></a>設定 <code>package.json</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"dev\"</span>: <span class=\"string\">\"webpack-dev-server --open\"</span>,</span><br><span class=\"line\">    ......</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>–open: 自動開啟預設瀏覽器</li>\n</ul>\n<p>執行 <code>npm</code> 指令<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure></p>\n<p>就會自動開啟瀏覽器看到預覽的畫面囉！</p>\n<p><img src=\"https://lh3.googleusercontent.com/HnOhEhOGSinuEBswiyrJIX8iZ1Czq0EWpKZTRk-BE3mIM50Jri0t-zxbikMgvR4QBDbdM2fNjOeDhhz_4r4VPKxg2XiWMvgI3SBXgmd-d3N_d614PmJT0sKQ5ceBzkbzIlDNgI7GnWwqyTu-H6ZS_4X1Uuz-waQu8e5P2RC29snSMCqLNX5u8GGBJ2JVfS7kTMTfdkAfDnqa09uGuBocmq3Map-Fw8BdArobD_UBU_2cXFb3jMUzPWh0Ze_WUe3PZTcP_8srjAbxV3qu1S_O6GWH5BXT3-tOD9khFUhfcEUo5POBzep225XQr7_kfPeXGDC0dKftE821ZMkerSh994xOMi8pFkkX9BZBnO1zLZQOyJcVjIavFFSGbIBlFO-PQkYT4dA5pOuj9_PVAmmO3UXsbZEcozoqiNuI95lUdAsJ6zw_uJg7khL8iUUkXOo61jHqsOw7l9McIG5O5Vrwq-945YYTYlwSfGmdSzB7ruOMWC9_geJveziVfxV167JqBiONuAAFPgTF9D-1BF3_efshXRPOs35A9HG4GcllYarb-uRbCBF1GMNlQ8I-xPala9qsomjEqcbk5iLAiQ9ZAVYx57B32XqooBBUUX16EucFLvatq2XoZn-7hxep2ucS6DOsjJBMSa5Ys3wq_ioGy5B0pWxPL9Jt=w1024-h681-no\" alt=\"執行 npm run dev\" title=\"dist/index.html\"></p>\n<p>疑？內容的文字怎麼好像被切掉了。我們趕緊來試試看修改 <code>css</code> 的部分，順便看看  <code>Hot Reload</code> 的威力吧～</p>\n<blockquote>\n<p>關於實時加載（Live Reload）和熱加載（Hot Reload）的區別在於:實時加載應用更新時需要刷新當前頁面，可以看到明顯的全局刷新效果;而熱加載基本上看不出刷新的效果，類似於局部刷新。</p>\n</blockquote>\n<h2 id=\"測試-Hot-Reload\"><a href=\"#測試-Hot-Reload\" class=\"headerlink\" title=\"測試 Hot Reload\"></a>測試 <code>Hot Reload</code></h2><p>修改 <code>src/app.scss</code>，把字體變形的樣式註解掉</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: yellowgreen;</span><br><span class=\"line\">    h1 &#123;</span><br><span class=\"line\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-tag\">green</span>;</span><br><span class=\"line\">        // transform: scale(1.5);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>結果 <code>webpack-dev-server</code> 就幫我們即時打包並刷新瀏覽器頁面，所以我們就可以專心的寫code，畫面就會即時的自動更新囉，是不是超方便的啊？</p>\n<p><img src=\"https://lh3.googleusercontent.com/dd1uIE9abHa17DxC19VyS2ejCk-ZLVe5y3PCnUu2HubhUCPvkwyjcUBPm70yP-eqtpsS6n7vJyeH4MjVviE4mCXJ6lwUVDeUUJ6w4pTKBQEWwtLEqa8Seojv2FPPHs70DJxZsZF9_8g2sURtQdUxFBG7H1zy6yd-fLbPB4LUi6Gw2Un9HZ0yrLx6s-8wgp8539AOi8gtlNJDZaoEpRkeEMbmTX4LWe67rKKCVGHFplKxl_u_zYWIVQU94yS1nwgSGgcNK5ZX2sVFUZ2bXc04D2GcC3JREt9WlmvdjGe4Fgs7-ohZgDyi2MJTw16HEhvEa3Yl-n0osdmvF_2cRv8oDbOPqwNL9TFgEdkmv3o9omQhmMg7rBT4_LkRC9vm0i8L-Cisr9eu7Js69IQUUqCkiMz1ZQWw_YIEVk20NbaIKZQRJZAAOnq1_h0N7vR5vnOMgaTWJ5KaucE1sieklCmkci0lLjIutitLXhtGNWYm0R0BKPlgiu8dAPlbfnNB95ReX4QI7bsMHm6tuPSVLkPpWddqMcChszAV6x_9KSieqz8CGlaOhuoAb2yRgR8ZW3oP9PfNT4rPBSx3eiuNalPFBX4xyBNGvMqfUJjioJRTc7F9pGsI-qBeJocby_CFAjY-OnKze75-NRfprp-iZL7dbE3X6o-FelJX=w1024-h681-no\" alt=\"Hot Reload\" title=\"dist/index.html\"></p>\n<p>今天的範例程式檔<a href=\"https://github.com/Annilla/webpack_practice/tree/v1.3.0\" target=\"_blank\" rel=\"noopener\">github</a>，感謝收看。</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><p><a href=\"https://webpack.js.org/guides/development/#using-webpack-dev-server\" target=\"_blank\" rel=\"noopener\">Use Webpack Dev Server</a></p>\n</li>\n<li><p><a href=\"https://webpack.js.org/configuration/dev-server/\" target=\"_blank\" rel=\"noopener\">Webpack Dev Server Configuration</a></p>\n</li>\n<li><p><a href=\"http://www.jianshu.com/p/1fa6e9c0799f\" target=\"_blank\" rel=\"noopener\">React Native 热加载（Hot Reload）原理简介</a></p>\n</li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667","excerpt":"<p>此篇介紹如何加入並使用 <code>webpack-dev-server</code>，並展示 <code>Hot Reload</code> 功能。<br>","more":"</p>\n<h2 id=\"安裝-webpack-dev-server\"><a href=\"#安裝-webpack-dev-server\" class=\"headerlink\" title=\"安裝 webpack-dev-server\"></a>安裝 <code>webpack-dev-server</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D webpack-dev-server</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-webpack-config-js\"><a href=\"#設定-webpack-config-js\" class=\"headerlink\" title=\"設定 webpack.config.js\"></a>設定 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    contentBase: path.join(__dirname, <span class=\"string\">\"dist\"</span>), <span class=\"comment\">// 從哪裡提供內容</span></span><br><span class=\"line\">    port: <span class=\"number\">9000</span> <span class=\"comment\">// http://localhost:9000</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-package-json\"><a href=\"#設定-package-json\" class=\"headerlink\" title=\"設定 package.json\"></a>設定 <code>package.json</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"dev\"</span>: <span class=\"string\">\"webpack-dev-server --open\"</span>,</span><br><span class=\"line\">    ......</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>–open: 自動開啟預設瀏覽器</li>\n</ul>\n<p>執行 <code>npm</code> 指令<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure></p>\n<p>就會自動開啟瀏覽器看到預覽的畫面囉！</p>\n<p><img src=\"https://lh3.googleusercontent.com/HnOhEhOGSinuEBswiyrJIX8iZ1Czq0EWpKZTRk-BE3mIM50Jri0t-zxbikMgvR4QBDbdM2fNjOeDhhz_4r4VPKxg2XiWMvgI3SBXgmd-d3N_d614PmJT0sKQ5ceBzkbzIlDNgI7GnWwqyTu-H6ZS_4X1Uuz-waQu8e5P2RC29snSMCqLNX5u8GGBJ2JVfS7kTMTfdkAfDnqa09uGuBocmq3Map-Fw8BdArobD_UBU_2cXFb3jMUzPWh0Ze_WUe3PZTcP_8srjAbxV3qu1S_O6GWH5BXT3-tOD9khFUhfcEUo5POBzep225XQr7_kfPeXGDC0dKftE821ZMkerSh994xOMi8pFkkX9BZBnO1zLZQOyJcVjIavFFSGbIBlFO-PQkYT4dA5pOuj9_PVAmmO3UXsbZEcozoqiNuI95lUdAsJ6zw_uJg7khL8iUUkXOo61jHqsOw7l9McIG5O5Vrwq-945YYTYlwSfGmdSzB7ruOMWC9_geJveziVfxV167JqBiONuAAFPgTF9D-1BF3_efshXRPOs35A9HG4GcllYarb-uRbCBF1GMNlQ8I-xPala9qsomjEqcbk5iLAiQ9ZAVYx57B32XqooBBUUX16EucFLvatq2XoZn-7hxep2ucS6DOsjJBMSa5Ys3wq_ioGy5B0pWxPL9Jt=w1024-h681-no\" alt=\"執行 npm run dev\" title=\"dist/index.html\"></p>\n<p>疑？內容的文字怎麼好像被切掉了。我們趕緊來試試看修改 <code>css</code> 的部分，順便看看  <code>Hot Reload</code> 的威力吧～</p>\n<blockquote>\n<p>關於實時加載（Live Reload）和熱加載（Hot Reload）的區別在於:實時加載應用更新時需要刷新當前頁面，可以看到明顯的全局刷新效果;而熱加載基本上看不出刷新的效果，類似於局部刷新。</p>\n</blockquote>\n<h2 id=\"測試-Hot-Reload\"><a href=\"#測試-Hot-Reload\" class=\"headerlink\" title=\"測試 Hot Reload\"></a>測試 <code>Hot Reload</code></h2><p>修改 <code>src/app.scss</code>，把字體變形的樣式註解掉</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: yellowgreen;</span><br><span class=\"line\">    h1 &#123;</span><br><span class=\"line\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-tag\">green</span>;</span><br><span class=\"line\">        // transform: scale(1.5);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>結果 <code>webpack-dev-server</code> 就幫我們即時打包並刷新瀏覽器頁面，所以我們就可以專心的寫code，畫面就會即時的自動更新囉，是不是超方便的啊？</p>\n<p><img src=\"https://lh3.googleusercontent.com/dd1uIE9abHa17DxC19VyS2ejCk-ZLVe5y3PCnUu2HubhUCPvkwyjcUBPm70yP-eqtpsS6n7vJyeH4MjVviE4mCXJ6lwUVDeUUJ6w4pTKBQEWwtLEqa8Seojv2FPPHs70DJxZsZF9_8g2sURtQdUxFBG7H1zy6yd-fLbPB4LUi6Gw2Un9HZ0yrLx6s-8wgp8539AOi8gtlNJDZaoEpRkeEMbmTX4LWe67rKKCVGHFplKxl_u_zYWIVQU94yS1nwgSGgcNK5ZX2sVFUZ2bXc04D2GcC3JREt9WlmvdjGe4Fgs7-ohZgDyi2MJTw16HEhvEa3Yl-n0osdmvF_2cRv8oDbOPqwNL9TFgEdkmv3o9omQhmMg7rBT4_LkRC9vm0i8L-Cisr9eu7Js69IQUUqCkiMz1ZQWw_YIEVk20NbaIKZQRJZAAOnq1_h0N7vR5vnOMgaTWJ5KaucE1sieklCmkci0lLjIutitLXhtGNWYm0R0BKPlgiu8dAPlbfnNB95ReX4QI7bsMHm6tuPSVLkPpWddqMcChszAV6x_9KSieqz8CGlaOhuoAb2yRgR8ZW3oP9PfNT4rPBSx3eiuNalPFBX4xyBNGvMqfUJjioJRTc7F9pGsI-qBeJocby_CFAjY-OnKze75-NRfprp-iZL7dbE3X6o-FelJX=w1024-h681-no\" alt=\"Hot Reload\" title=\"dist/index.html\"></p>\n<p>今天的範例程式檔<a href=\"https://github.com/Annilla/webpack_practice/tree/v1.3.0\" target=\"_blank\" rel=\"noopener\">github</a>，感謝收看。</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><p><a href=\"https://webpack.js.org/guides/development/#using-webpack-dev-server\" target=\"_blank\" rel=\"noopener\">Use Webpack Dev Server</a></p>\n</li>\n<li><p><a href=\"https://webpack.js.org/configuration/dev-server/\" target=\"_blank\" rel=\"noopener\">Webpack Dev Server Configuration</a></p>\n</li>\n<li><p><a href=\"http://www.jianshu.com/p/1fa6e9c0799f\" target=\"_blank\" rel=\"noopener\">React Native 热加载（Hot Reload）原理简介</a></p>\n</li>\n</ul>"},{"title":"Webpack 3 Tutorial - add Babel loader to write js use ES6","thumbnailImage":"https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667","thumbnailImagePosition":"left","coverImage":"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png","coverMeta":"out","date":"2017-09-30T16:00:00.000Z","updated":"2017-09-30T16:00:00.000Z","_content":"\n此篇介紹如何加入並使用 `babel-loader`，並使用 `ES6` 語法測試撰寫 `js`。\n<!--more-->\n\n## 安裝 `babel-loader`\n\n```npm\nnpm i -D babel-loader babel-core babel-preset-env\n```\n\n## 設定 `webpack.config.js`\n\n```js\n......\n\nmodule.exports = {\n  ......\n  module: {\n    rules: [\n      ......\n      {\n        test: /\\.js$/,\n        exclude: /(node_modules)/, // 打包時排除 node_modules 資料夾\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: ['env'] // 使用 babel-preset-env\n          }\n        }\n      }\n    ]\n  },\n  ......\n}\n```\n\n> 注意：此範例把 `Babel` 設定直接寫在 `webpack.config.js`，若 `options` 設定較複雜的話，可另外寫在 `.babelrc` 檔案中，參考[Babel官網](https://babeljs.io/docs/setup/#installation)。\n\n## 測試 `ES6` 語法\n\n新增檔案 `./src/js/es6.js`，撰寫程式如下：\n  \n```js\nexport default class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  static distance(a, b) {\n    const dx = a.x - b.x;\n    const dy = a.y - b.y;\n\n    return Math.sqrt(dx*dx + dy*dy);\n  }\n}\n```\n\n將剛剛寫的程式 `import` 到 `app.js`。\n\n```js\n......\n\nimport Point from './js/es6'\n\n// Test for ES6\n// https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Classes\nconst p1 = new Point(5, 5);\nconst p2 = new Point(10, 10);\n\nconsole.log(`Test ES6 Distance: ${Point.distance(p1, p2)}`);\n```\n\n執行 `npm run dev`，就可以看到 `console` 出現計算後的兩點長度囉。\n\n![執行 npm run dev 後畫面](https://lh3.googleusercontent.com/5S_HyO4HXOk9lkTzktk7Nbv93MPlzlh-NwBtwVLHeRStleqxkbU32GXOlJMb6S-jyRLu22Sficg3jtn2PhmUbA_1BxVKqMhLWXHs8mZDRS-dxA9haBSgCzGi4I1xAODh8qeWbPpCgJCSXIEki7h18ADIx_cotpCTD6vqUt8q8xPQoKqCYqufERPzQXwZVYO-GXwUmb7edUGFUi-iCUi9dwqdwPyOpQMmy42bVioArD7DV536i66AOfgYFo1LWQFh3EOVYa3eufssJJaZ_C-e31Xsv2vOrxYiZXCngeL9ZiFm6TOYbyDBIWn6DsFNEmQFHILVoiSCYnURTbZEAAL_5OyVG5dSsc7FpV26p_F9yUPofNay_JbZzDRMuQ870u2c7eBwy5Im9nRLC4ItKnEssvS2ylDWt5NPA3NZV5EFsx9LTR4DFGdQbLj1GIh5fmLdWQXv0AsU-AB2tuaB1mgxzRmkVWUDiPff2OXl2CXHsF2UeJTFtrxKPX9fHblEiO30NXZYjDhcsw_v1JGx9TtGF4QmPCkC3H5aeXyUvpUBnAVXpMmXhrH9FkXZIhaIXl7mdaiEEQR_7nwkhnVzZdSVL0EJq7TfUlQHz5HeRTjEjYfaU0mf7CNgt_KM3o0ReospKxGdl2Ml1hPfTv56QFuyNAl1NKfZiRvw=w1024-h589-no \"dist/index.html\")\n\n更多 `babel-preset-env` 的配置選項可參考[官網](http://babeljs.io/docs/plugins/preset-env/#top)，有空也可以來試試 ES7 的 `async`, `await` 喔，我們下次見！\n\n範例 [Github](https://github.com/Annilla/webpack_practice/tree/v1.4.0)\n\n## 參考資料\n\n* [Babel-loader](https://webpack.js.org/loaders/babel-loader/)\n* [Babel](https://babeljs.io/)\n* [ES6 Classes](https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Classes)\n* [babel-preset-env](http://babeljs.io/docs/plugins/preset-env/#top)\n","source":"_posts/Webpack/Webpack-3-Tutorial-add-Babel-loader-to-write-js-use-ES6.md","raw":"---\ntitle: Webpack 3 Tutorial - add Babel loader to write js use ES6\ncategories:\n  - Webpack\nthumbnailImage: https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667\nthumbnailImagePosition: left\ncoverImage: https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png\ncoverMeta: out\ntags: [Webpack]\ndate: 2017/10/01\nupdated: 2017/10/01\n---\n\n此篇介紹如何加入並使用 `babel-loader`，並使用 `ES6` 語法測試撰寫 `js`。\n<!--more-->\n\n## 安裝 `babel-loader`\n\n```npm\nnpm i -D babel-loader babel-core babel-preset-env\n```\n\n## 設定 `webpack.config.js`\n\n```js\n......\n\nmodule.exports = {\n  ......\n  module: {\n    rules: [\n      ......\n      {\n        test: /\\.js$/,\n        exclude: /(node_modules)/, // 打包時排除 node_modules 資料夾\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: ['env'] // 使用 babel-preset-env\n          }\n        }\n      }\n    ]\n  },\n  ......\n}\n```\n\n> 注意：此範例把 `Babel` 設定直接寫在 `webpack.config.js`，若 `options` 設定較複雜的話，可另外寫在 `.babelrc` 檔案中，參考[Babel官網](https://babeljs.io/docs/setup/#installation)。\n\n## 測試 `ES6` 語法\n\n新增檔案 `./src/js/es6.js`，撰寫程式如下：\n  \n```js\nexport default class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  static distance(a, b) {\n    const dx = a.x - b.x;\n    const dy = a.y - b.y;\n\n    return Math.sqrt(dx*dx + dy*dy);\n  }\n}\n```\n\n將剛剛寫的程式 `import` 到 `app.js`。\n\n```js\n......\n\nimport Point from './js/es6'\n\n// Test for ES6\n// https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Classes\nconst p1 = new Point(5, 5);\nconst p2 = new Point(10, 10);\n\nconsole.log(`Test ES6 Distance: ${Point.distance(p1, p2)}`);\n```\n\n執行 `npm run dev`，就可以看到 `console` 出現計算後的兩點長度囉。\n\n![執行 npm run dev 後畫面](https://lh3.googleusercontent.com/5S_HyO4HXOk9lkTzktk7Nbv93MPlzlh-NwBtwVLHeRStleqxkbU32GXOlJMb6S-jyRLu22Sficg3jtn2PhmUbA_1BxVKqMhLWXHs8mZDRS-dxA9haBSgCzGi4I1xAODh8qeWbPpCgJCSXIEki7h18ADIx_cotpCTD6vqUt8q8xPQoKqCYqufERPzQXwZVYO-GXwUmb7edUGFUi-iCUi9dwqdwPyOpQMmy42bVioArD7DV536i66AOfgYFo1LWQFh3EOVYa3eufssJJaZ_C-e31Xsv2vOrxYiZXCngeL9ZiFm6TOYbyDBIWn6DsFNEmQFHILVoiSCYnURTbZEAAL_5OyVG5dSsc7FpV26p_F9yUPofNay_JbZzDRMuQ870u2c7eBwy5Im9nRLC4ItKnEssvS2ylDWt5NPA3NZV5EFsx9LTR4DFGdQbLj1GIh5fmLdWQXv0AsU-AB2tuaB1mgxzRmkVWUDiPff2OXl2CXHsF2UeJTFtrxKPX9fHblEiO30NXZYjDhcsw_v1JGx9TtGF4QmPCkC3H5aeXyUvpUBnAVXpMmXhrH9FkXZIhaIXl7mdaiEEQR_7nwkhnVzZdSVL0EJq7TfUlQHz5HeRTjEjYfaU0mf7CNgt_KM3o0ReospKxGdl2Ml1hPfTv56QFuyNAl1NKfZiRvw=w1024-h589-no \"dist/index.html\")\n\n更多 `babel-preset-env` 的配置選項可參考[官網](http://babeljs.io/docs/plugins/preset-env/#top)，有空也可以來試試 ES7 的 `async`, `await` 喔，我們下次見！\n\n範例 [Github](https://github.com/Annilla/webpack_practice/tree/v1.4.0)\n\n## 參考資料\n\n* [Babel-loader](https://webpack.js.org/loaders/babel-loader/)\n* [Babel](https://babeljs.io/)\n* [ES6 Classes](https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Classes)\n* [babel-preset-env](http://babeljs.io/docs/plugins/preset-env/#top)\n","slug":"Webpack/Webpack-3-Tutorial-add-Babel-loader-to-write-js-use-ES6","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu759002ttudho00be87w","content":"<p>此篇介紹如何加入並使用 <code>babel-loader</code>，並使用 <code>ES6</code> 語法測試撰寫 <code>js</code>。<br><a id=\"more\"></a></p>\n<h2 id=\"安裝-babel-loader\"><a href=\"#安裝-babel-loader\" class=\"headerlink\" title=\"安裝 babel-loader\"></a>安裝 <code>babel-loader</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D babel-loader babel-core babel-preset-env</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-webpack-config-js\"><a href=\"#設定-webpack-config-js\" class=\"headerlink\" title=\"設定 webpack.config.js\"></a>設定 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      ......</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/(node_modules)/</span>, <span class=\"comment\">// 打包時排除 node_modules 資料夾</span></span><br><span class=\"line\">        use: &#123;</span><br><span class=\"line\">          loader: <span class=\"string\">'babel-loader'</span>,</span><br><span class=\"line\">          options: &#123;</span><br><span class=\"line\">            presets: [<span class=\"string\">'env'</span>] <span class=\"comment\">// 使用 babel-preset-env</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>注意：此範例把 <code>Babel</code> 設定直接寫在 <code>webpack.config.js</code>，若 <code>options</code> 設定較複雜的話，可另外寫在 <code>.babelrc</code> 檔案中，參考<a href=\"https://babeljs.io/docs/setup/#installation\" target=\"_blank\" rel=\"noopener\">Babel官網</a>。</p>\n</blockquote>\n<h2 id=\"測試-ES6-語法\"><a href=\"#測試-ES6-語法\" class=\"headerlink\" title=\"測試 ES6 語法\"></a>測試 <code>ES6</code> 語法</h2><p>新增檔案 <code>./src/js/es6.js</code>，撰寫程式如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(x, y) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.x = x;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.y = y;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> distance(a, b) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> dx = a.x - b.x;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> dy = a.y - b.y;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.sqrt(dx*dx + dy*dy);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>將剛剛寫的程式 <code>import</code> 到 <code>app.js</code>。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> Point <span class=\"keyword\">from</span> <span class=\"string\">'./js/es6'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Test for ES6</span></span><br><span class=\"line\"><span class=\"comment\">// https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Classes</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> p1 = <span class=\"keyword\">new</span> Point(<span class=\"number\">5</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> p2 = <span class=\"keyword\">new</span> Point(<span class=\"number\">10</span>, <span class=\"number\">10</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`Test ES6 Distance: <span class=\"subst\">$&#123;Point.distance(p1, p2)&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>\n<p>執行 <code>npm run dev</code>，就可以看到 <code>console</code> 出現計算後的兩點長度囉。</p>\n<p><img src=\"https://lh3.googleusercontent.com/5S_HyO4HXOk9lkTzktk7Nbv93MPlzlh-NwBtwVLHeRStleqxkbU32GXOlJMb6S-jyRLu22Sficg3jtn2PhmUbA_1BxVKqMhLWXHs8mZDRS-dxA9haBSgCzGi4I1xAODh8qeWbPpCgJCSXIEki7h18ADIx_cotpCTD6vqUt8q8xPQoKqCYqufERPzQXwZVYO-GXwUmb7edUGFUi-iCUi9dwqdwPyOpQMmy42bVioArD7DV536i66AOfgYFo1LWQFh3EOVYa3eufssJJaZ_C-e31Xsv2vOrxYiZXCngeL9ZiFm6TOYbyDBIWn6DsFNEmQFHILVoiSCYnURTbZEAAL_5OyVG5dSsc7FpV26p_F9yUPofNay_JbZzDRMuQ870u2c7eBwy5Im9nRLC4ItKnEssvS2ylDWt5NPA3NZV5EFsx9LTR4DFGdQbLj1GIh5fmLdWQXv0AsU-AB2tuaB1mgxzRmkVWUDiPff2OXl2CXHsF2UeJTFtrxKPX9fHblEiO30NXZYjDhcsw_v1JGx9TtGF4QmPCkC3H5aeXyUvpUBnAVXpMmXhrH9FkXZIhaIXl7mdaiEEQR_7nwkhnVzZdSVL0EJq7TfUlQHz5HeRTjEjYfaU0mf7CNgt_KM3o0ReospKxGdl2Ml1hPfTv56QFuyNAl1NKfZiRvw=w1024-h589-no\" alt=\"執行 npm run dev 後畫面\" title=\"dist/index.html\"></p>\n<p>更多 <code>babel-preset-env</code> 的配置選項可參考<a href=\"http://babeljs.io/docs/plugins/preset-env/#top\" target=\"_blank\" rel=\"noopener\">官網</a>，有空也可以來試試 ES7 的 <code>async</code>, <code>await</code> 喔，我們下次見！</p>\n<p>範例 <a href=\"https://github.com/Annilla/webpack_practice/tree/v1.4.0\" target=\"_blank\" rel=\"noopener\">Github</a></p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://webpack.js.org/loaders/babel-loader/\" target=\"_blank\" rel=\"noopener\">Babel-loader</a></li>\n<li><a href=\"https://babeljs.io/\" target=\"_blank\" rel=\"noopener\">Babel</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Classes\" target=\"_blank\" rel=\"noopener\">ES6 Classes</a></li>\n<li><a href=\"http://babeljs.io/docs/plugins/preset-env/#top\" target=\"_blank\" rel=\"noopener\">babel-preset-env</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667","excerpt":"<p>此篇介紹如何加入並使用 <code>babel-loader</code>，並使用 <code>ES6</code> 語法測試撰寫 <code>js</code>。<br>","more":"</p>\n<h2 id=\"安裝-babel-loader\"><a href=\"#安裝-babel-loader\" class=\"headerlink\" title=\"安裝 babel-loader\"></a>安裝 <code>babel-loader</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D babel-loader babel-core babel-preset-env</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-webpack-config-js\"><a href=\"#設定-webpack-config-js\" class=\"headerlink\" title=\"設定 webpack.config.js\"></a>設定 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      ......</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/(node_modules)/</span>, <span class=\"comment\">// 打包時排除 node_modules 資料夾</span></span><br><span class=\"line\">        use: &#123;</span><br><span class=\"line\">          loader: <span class=\"string\">'babel-loader'</span>,</span><br><span class=\"line\">          options: &#123;</span><br><span class=\"line\">            presets: [<span class=\"string\">'env'</span>] <span class=\"comment\">// 使用 babel-preset-env</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>注意：此範例把 <code>Babel</code> 設定直接寫在 <code>webpack.config.js</code>，若 <code>options</code> 設定較複雜的話，可另外寫在 <code>.babelrc</code> 檔案中，參考<a href=\"https://babeljs.io/docs/setup/#installation\" target=\"_blank\" rel=\"noopener\">Babel官網</a>。</p>\n</blockquote>\n<h2 id=\"測試-ES6-語法\"><a href=\"#測試-ES6-語法\" class=\"headerlink\" title=\"測試 ES6 語法\"></a>測試 <code>ES6</code> 語法</h2><p>新增檔案 <code>./src/js/es6.js</code>，撰寫程式如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(x, y) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.x = x;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.y = y;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> distance(a, b) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> dx = a.x - b.x;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> dy = a.y - b.y;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.sqrt(dx*dx + dy*dy);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>將剛剛寫的程式 <code>import</code> 到 <code>app.js</code>。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> Point <span class=\"keyword\">from</span> <span class=\"string\">'./js/es6'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Test for ES6</span></span><br><span class=\"line\"><span class=\"comment\">// https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Classes</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> p1 = <span class=\"keyword\">new</span> Point(<span class=\"number\">5</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> p2 = <span class=\"keyword\">new</span> Point(<span class=\"number\">10</span>, <span class=\"number\">10</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`Test ES6 Distance: <span class=\"subst\">$&#123;Point.distance(p1, p2)&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>\n<p>執行 <code>npm run dev</code>，就可以看到 <code>console</code> 出現計算後的兩點長度囉。</p>\n<p><img src=\"https://lh3.googleusercontent.com/5S_HyO4HXOk9lkTzktk7Nbv93MPlzlh-NwBtwVLHeRStleqxkbU32GXOlJMb6S-jyRLu22Sficg3jtn2PhmUbA_1BxVKqMhLWXHs8mZDRS-dxA9haBSgCzGi4I1xAODh8qeWbPpCgJCSXIEki7h18ADIx_cotpCTD6vqUt8q8xPQoKqCYqufERPzQXwZVYO-GXwUmb7edUGFUi-iCUi9dwqdwPyOpQMmy42bVioArD7DV536i66AOfgYFo1LWQFh3EOVYa3eufssJJaZ_C-e31Xsv2vOrxYiZXCngeL9ZiFm6TOYbyDBIWn6DsFNEmQFHILVoiSCYnURTbZEAAL_5OyVG5dSsc7FpV26p_F9yUPofNay_JbZzDRMuQ870u2c7eBwy5Im9nRLC4ItKnEssvS2ylDWt5NPA3NZV5EFsx9LTR4DFGdQbLj1GIh5fmLdWQXv0AsU-AB2tuaB1mgxzRmkVWUDiPff2OXl2CXHsF2UeJTFtrxKPX9fHblEiO30NXZYjDhcsw_v1JGx9TtGF4QmPCkC3H5aeXyUvpUBnAVXpMmXhrH9FkXZIhaIXl7mdaiEEQR_7nwkhnVzZdSVL0EJq7TfUlQHz5HeRTjEjYfaU0mf7CNgt_KM3o0ReospKxGdl2Ml1hPfTv56QFuyNAl1NKfZiRvw=w1024-h589-no\" alt=\"執行 npm run dev 後畫面\" title=\"dist/index.html\"></p>\n<p>更多 <code>babel-preset-env</code> 的配置選項可參考<a href=\"http://babeljs.io/docs/plugins/preset-env/#top\" target=\"_blank\" rel=\"noopener\">官網</a>，有空也可以來試試 ES7 的 <code>async</code>, <code>await</code> 喔，我們下次見！</p>\n<p>範例 <a href=\"https://github.com/Annilla/webpack_practice/tree/v1.4.0\" target=\"_blank\" rel=\"noopener\">Github</a></p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://webpack.js.org/loaders/babel-loader/\" target=\"_blank\" rel=\"noopener\">Babel-loader</a></li>\n<li><a href=\"https://babeljs.io/\" target=\"_blank\" rel=\"noopener\">Babel</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Classes\" target=\"_blank\" rel=\"noopener\">ES6 Classes</a></li>\n<li><a href=\"http://babeljs.io/docs/plugins/preset-env/#top\" target=\"_blank\" rel=\"noopener\">babel-preset-env</a></li>\n</ul>"},{"title":"Webpack 3 Tutorial - add PUG templates to write html","thumbnailImage":"https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667","thumbnailImagePosition":"left","coverImage":"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png","coverMeta":"out","date":"2017-10-31T16:00:00.000Z","updated":"2017-10-31T16:00:00.000Z","_content":"\n此篇介紹如何加入並使用 `pug-loader`，並使用 `PUG` 語法測試撰寫 `html`。\n<!--more-->\n\n## 安裝 `pug-loader`\n\n```npm\nnpm i -D pug pug-loader\n```\n\n## 設定 `webpack.config.js`\n\n```js\n......\n\nmodule.exports = {\n  ......\n  module: {\n    rules: [\n      ......\n      {\n        test: /\\.pug$/,\n        use: 'pug-loader'\n      }\n    ]\n  },\n  ......\n}\n```\n\n## 撰寫 `index.pug`\n\n接著我們嘗試把 `index.html` 改檔名為 `index.pug`，並把內容換成以下 `Pug` 範例。\n\n```pug\ndoctype html\nhtml(lang=\"en\")\n  head\n    title= pageTitle\n    script(type='text/javascript').\n      if (foo) bar(1 + 5)\n  body\n    h1 Pug - node template engine\n    #container.col\n      if youAreUsingPug\n        p You are amazing\n      else\n        p Get on it!\n      p.\n        Pug is a terse and simple templating language with a\n        strong focus on performance and powerful features.\n```\n\n接著記得把 `webpack.config.js` plugin 中的 `HtmlWebpackPlugin` 設定換成現在新的 `Pug` 檔案。\n\n```js\nmodule.exports = {\n  ......\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './src/index.pug'\n    }),\n    ......\n  ]\n}\n```\n\n執行 `npm run dev`，就可以看到 `Pug` 執行出來的畫面囉。\n\n![執行 npm run dev 後畫面](https://lh3.googleusercontent.com/ILdQlP6Ekw_RZLu3Hlh-vBHo3eAQ7sOgrkzx3T8TkIUfXKZjIlIefXg3RJ8y7wjKMOXWJibvVcW6YHlbrH_Ghh9Qk-zQUW-UGFt4YknvAAiCdENz8LR4TmFj6mvPUHl61brc84jARXc8gx0X24_qflJCFDnkhCM0Bkz1YuWzfB4CB3gVYPSve92ODhPklozp6-ZMvtaZTYg34GV50TG77K_aytRjhvaW-qwV3Dmkylxh5inXr85q9-KYhniQxUI9CjY_nSX6AQayCp6bBb0lUK79a5jhiT_J4Tzj-oV9vRzizdFqsasgtI9uZmdZTCViPlnpT_tXbfQpcYOtHx5ZDn--tQLJBIMNCcQHxJdsp0QKx8zmztaNMEbotx8QMXvT6EIiQFyYeBdk4EovN-PRvlGF-LzZyQflr_WrPYtYrSbUsTEF6VryD-pdKQ9nMQ-wPDBa0iAN50uSUZM_J9xc3Jj1ohJ7mzjPEozlxDBtD3v3e1mIobjXG_zAIYE58gs-0A2-44X06UZc7jL1A84-J2HsS7IOPGvJ7tvK2EVy8C2xpYs3x7SSYQpuNwMrM7-SbsxMQVDyulq3rhdc1XuuQVEZ_atkkHIKh2Zm_7i_CS30axkjZSxbEYckQY6O4oLHtSHOnd5XWRHgh38lO4xLVOtZzgurUcfL=w1024-h612-no \"dist/index.pug\")\n\n今天的範例 [Github](https://github.com/Annilla/webpack_practice/tree/v1.5.0) 在此，下次見～\n\n## 參考資料\n\n* [pug-loader](https://github.com/pugjs/pug-loader)\n* [Pug](https://github.com/pugjs/pug)","source":"_posts/Webpack/Webpack-3-Tutorial-add-PUG-templates-to-write-html.md","raw":"---\ntitle: Webpack 3 Tutorial - add PUG templates to write html\ncategories:\n  - Webpack\nthumbnailImage: https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667\nthumbnailImagePosition: left\ncoverImage: https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png\ncoverMeta: out\ntags: [Webpack]\ndate: 2017/11/01\nupdated: 2017/11/01\n---\n\n此篇介紹如何加入並使用 `pug-loader`，並使用 `PUG` 語法測試撰寫 `html`。\n<!--more-->\n\n## 安裝 `pug-loader`\n\n```npm\nnpm i -D pug pug-loader\n```\n\n## 設定 `webpack.config.js`\n\n```js\n......\n\nmodule.exports = {\n  ......\n  module: {\n    rules: [\n      ......\n      {\n        test: /\\.pug$/,\n        use: 'pug-loader'\n      }\n    ]\n  },\n  ......\n}\n```\n\n## 撰寫 `index.pug`\n\n接著我們嘗試把 `index.html` 改檔名為 `index.pug`，並把內容換成以下 `Pug` 範例。\n\n```pug\ndoctype html\nhtml(lang=\"en\")\n  head\n    title= pageTitle\n    script(type='text/javascript').\n      if (foo) bar(1 + 5)\n  body\n    h1 Pug - node template engine\n    #container.col\n      if youAreUsingPug\n        p You are amazing\n      else\n        p Get on it!\n      p.\n        Pug is a terse and simple templating language with a\n        strong focus on performance and powerful features.\n```\n\n接著記得把 `webpack.config.js` plugin 中的 `HtmlWebpackPlugin` 設定換成現在新的 `Pug` 檔案。\n\n```js\nmodule.exports = {\n  ......\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './src/index.pug'\n    }),\n    ......\n  ]\n}\n```\n\n執行 `npm run dev`，就可以看到 `Pug` 執行出來的畫面囉。\n\n![執行 npm run dev 後畫面](https://lh3.googleusercontent.com/ILdQlP6Ekw_RZLu3Hlh-vBHo3eAQ7sOgrkzx3T8TkIUfXKZjIlIefXg3RJ8y7wjKMOXWJibvVcW6YHlbrH_Ghh9Qk-zQUW-UGFt4YknvAAiCdENz8LR4TmFj6mvPUHl61brc84jARXc8gx0X24_qflJCFDnkhCM0Bkz1YuWzfB4CB3gVYPSve92ODhPklozp6-ZMvtaZTYg34GV50TG77K_aytRjhvaW-qwV3Dmkylxh5inXr85q9-KYhniQxUI9CjY_nSX6AQayCp6bBb0lUK79a5jhiT_J4Tzj-oV9vRzizdFqsasgtI9uZmdZTCViPlnpT_tXbfQpcYOtHx5ZDn--tQLJBIMNCcQHxJdsp0QKx8zmztaNMEbotx8QMXvT6EIiQFyYeBdk4EovN-PRvlGF-LzZyQflr_WrPYtYrSbUsTEF6VryD-pdKQ9nMQ-wPDBa0iAN50uSUZM_J9xc3Jj1ohJ7mzjPEozlxDBtD3v3e1mIobjXG_zAIYE58gs-0A2-44X06UZc7jL1A84-J2HsS7IOPGvJ7tvK2EVy8C2xpYs3x7SSYQpuNwMrM7-SbsxMQVDyulq3rhdc1XuuQVEZ_atkkHIKh2Zm_7i_CS30axkjZSxbEYckQY6O4oLHtSHOnd5XWRHgh38lO4xLVOtZzgurUcfL=w1024-h612-no \"dist/index.pug\")\n\n今天的範例 [Github](https://github.com/Annilla/webpack_practice/tree/v1.5.0) 在此，下次見～\n\n## 參考資料\n\n* [pug-loader](https://github.com/pugjs/pug-loader)\n* [Pug](https://github.com/pugjs/pug)","slug":"Webpack/Webpack-3-Tutorial-add-PUG-templates-to-write-html","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu75a002xtudh7dhilvfl","content":"<p>此篇介紹如何加入並使用 <code>pug-loader</code>，並使用 <code>PUG</code> 語法測試撰寫 <code>html</code>。<br><a id=\"more\"></a></p>\n<h2 id=\"安裝-pug-loader\"><a href=\"#安裝-pug-loader\" class=\"headerlink\" title=\"安裝 pug-loader\"></a>安裝 <code>pug-loader</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D pug pug-loader</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-webpack-config-js\"><a href=\"#設定-webpack-config-js\" class=\"headerlink\" title=\"設定 webpack.config.js\"></a>設定 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      ......</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.pug$/</span>,</span><br><span class=\"line\">        use: <span class=\"string\">'pug-loader'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"撰寫-index-pug\"><a href=\"#撰寫-index-pug\" class=\"headerlink\" title=\"撰寫 index.pug\"></a>撰寫 <code>index.pug</code></h2><p>接著我們嘗試把 <code>index.html</code> 改檔名為 <code>index.pug</code>，並把內容換成以下 <code>Pug</code> 範例。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">doctype html</span><br><span class=\"line\">html(lang=&quot;en&quot;)</span><br><span class=\"line\">  head</span><br><span class=\"line\">    title= pageTitle</span><br><span class=\"line\">    script(type=&apos;text/javascript&apos;).</span><br><span class=\"line\">      if (foo) bar(1 + 5)</span><br><span class=\"line\">  body</span><br><span class=\"line\">    h1 Pug - node template engine</span><br><span class=\"line\">    #container.col</span><br><span class=\"line\">      if youAreUsingPug</span><br><span class=\"line\">        p You are amazing</span><br><span class=\"line\">      else</span><br><span class=\"line\">        p Get on it!</span><br><span class=\"line\">      p.</span><br><span class=\"line\">        Pug is a terse and simple templating language with a</span><br><span class=\"line\">        strong focus on performance and powerful features.</span><br></pre></td></tr></table></figure>\n<p>接著記得把 <code>webpack.config.js</code> plugin 中的 <code>HtmlWebpackPlugin</code> 設定換成現在新的 <code>Pug</code> 檔案。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      template: <span class=\"string\">'./src/index.pug'</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    ......</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>執行 <code>npm run dev</code>，就可以看到 <code>Pug</code> 執行出來的畫面囉。</p>\n<p><img src=\"https://lh3.googleusercontent.com/ILdQlP6Ekw_RZLu3Hlh-vBHo3eAQ7sOgrkzx3T8TkIUfXKZjIlIefXg3RJ8y7wjKMOXWJibvVcW6YHlbrH_Ghh9Qk-zQUW-UGFt4YknvAAiCdENz8LR4TmFj6mvPUHl61brc84jARXc8gx0X24_qflJCFDnkhCM0Bkz1YuWzfB4CB3gVYPSve92ODhPklozp6-ZMvtaZTYg34GV50TG77K_aytRjhvaW-qwV3Dmkylxh5inXr85q9-KYhniQxUI9CjY_nSX6AQayCp6bBb0lUK79a5jhiT_J4Tzj-oV9vRzizdFqsasgtI9uZmdZTCViPlnpT_tXbfQpcYOtHx5ZDn--tQLJBIMNCcQHxJdsp0QKx8zmztaNMEbotx8QMXvT6EIiQFyYeBdk4EovN-PRvlGF-LzZyQflr_WrPYtYrSbUsTEF6VryD-pdKQ9nMQ-wPDBa0iAN50uSUZM_J9xc3Jj1ohJ7mzjPEozlxDBtD3v3e1mIobjXG_zAIYE58gs-0A2-44X06UZc7jL1A84-J2HsS7IOPGvJ7tvK2EVy8C2xpYs3x7SSYQpuNwMrM7-SbsxMQVDyulq3rhdc1XuuQVEZ_atkkHIKh2Zm_7i_CS30axkjZSxbEYckQY6O4oLHtSHOnd5XWRHgh38lO4xLVOtZzgurUcfL=w1024-h612-no\" alt=\"執行 npm run dev 後畫面\" title=\"dist/index.pug\"></p>\n<p>今天的範例 <a href=\"https://github.com/Annilla/webpack_practice/tree/v1.5.0\" target=\"_blank\" rel=\"noopener\">Github</a> 在此，下次見～</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://github.com/pugjs/pug-loader\" target=\"_blank\" rel=\"noopener\">pug-loader</a></li>\n<li><a href=\"https://github.com/pugjs/pug\" target=\"_blank\" rel=\"noopener\">Pug</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667","excerpt":"<p>此篇介紹如何加入並使用 <code>pug-loader</code>，並使用 <code>PUG</code> 語法測試撰寫 <code>html</code>。<br>","more":"</p>\n<h2 id=\"安裝-pug-loader\"><a href=\"#安裝-pug-loader\" class=\"headerlink\" title=\"安裝 pug-loader\"></a>安裝 <code>pug-loader</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D pug pug-loader</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-webpack-config-js\"><a href=\"#設定-webpack-config-js\" class=\"headerlink\" title=\"設定 webpack.config.js\"></a>設定 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      ......</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.pug$/</span>,</span><br><span class=\"line\">        use: <span class=\"string\">'pug-loader'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"撰寫-index-pug\"><a href=\"#撰寫-index-pug\" class=\"headerlink\" title=\"撰寫 index.pug\"></a>撰寫 <code>index.pug</code></h2><p>接著我們嘗試把 <code>index.html</code> 改檔名為 <code>index.pug</code>，並把內容換成以下 <code>Pug</code> 範例。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">doctype html</span><br><span class=\"line\">html(lang=&quot;en&quot;)</span><br><span class=\"line\">  head</span><br><span class=\"line\">    title= pageTitle</span><br><span class=\"line\">    script(type=&apos;text/javascript&apos;).</span><br><span class=\"line\">      if (foo) bar(1 + 5)</span><br><span class=\"line\">  body</span><br><span class=\"line\">    h1 Pug - node template engine</span><br><span class=\"line\">    #container.col</span><br><span class=\"line\">      if youAreUsingPug</span><br><span class=\"line\">        p You are amazing</span><br><span class=\"line\">      else</span><br><span class=\"line\">        p Get on it!</span><br><span class=\"line\">      p.</span><br><span class=\"line\">        Pug is a terse and simple templating language with a</span><br><span class=\"line\">        strong focus on performance and powerful features.</span><br></pre></td></tr></table></figure>\n<p>接著記得把 <code>webpack.config.js</code> plugin 中的 <code>HtmlWebpackPlugin</code> 設定換成現在新的 <code>Pug</code> 檔案。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      template: <span class=\"string\">'./src/index.pug'</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    ......</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>執行 <code>npm run dev</code>，就可以看到 <code>Pug</code> 執行出來的畫面囉。</p>\n<p><img src=\"https://lh3.googleusercontent.com/ILdQlP6Ekw_RZLu3Hlh-vBHo3eAQ7sOgrkzx3T8TkIUfXKZjIlIefXg3RJ8y7wjKMOXWJibvVcW6YHlbrH_Ghh9Qk-zQUW-UGFt4YknvAAiCdENz8LR4TmFj6mvPUHl61brc84jARXc8gx0X24_qflJCFDnkhCM0Bkz1YuWzfB4CB3gVYPSve92ODhPklozp6-ZMvtaZTYg34GV50TG77K_aytRjhvaW-qwV3Dmkylxh5inXr85q9-KYhniQxUI9CjY_nSX6AQayCp6bBb0lUK79a5jhiT_J4Tzj-oV9vRzizdFqsasgtI9uZmdZTCViPlnpT_tXbfQpcYOtHx5ZDn--tQLJBIMNCcQHxJdsp0QKx8zmztaNMEbotx8QMXvT6EIiQFyYeBdk4EovN-PRvlGF-LzZyQflr_WrPYtYrSbUsTEF6VryD-pdKQ9nMQ-wPDBa0iAN50uSUZM_J9xc3Jj1ohJ7mzjPEozlxDBtD3v3e1mIobjXG_zAIYE58gs-0A2-44X06UZc7jL1A84-J2HsS7IOPGvJ7tvK2EVy8C2xpYs3x7SSYQpuNwMrM7-SbsxMQVDyulq3rhdc1XuuQVEZ_atkkHIKh2Zm_7i_CS30axkjZSxbEYckQY6O4oLHtSHOnd5XWRHgh38lO4xLVOtZzgurUcfL=w1024-h612-no\" alt=\"執行 npm run dev 後畫面\" title=\"dist/index.pug\"></p>\n<p>今天的範例 <a href=\"https://github.com/Annilla/webpack_practice/tree/v1.5.0\" target=\"_blank\" rel=\"noopener\">Github</a> 在此，下次見～</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://github.com/pugjs/pug-loader\" target=\"_blank\" rel=\"noopener\">pug-loader</a></li>\n<li><a href=\"https://github.com/pugjs/pug\" target=\"_blank\" rel=\"noopener\">Pug</a></li>\n</ul>"},{"title":"Webpack 3 Tutorial - Style, CSS, Sass and Postcss loaders","thumbnailImage":"https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667","thumbnailImagePosition":"left","coverImage":"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png","coverMeta":"out","date":"2017-07-31T16:00:00.000Z","updated":"2017-07-31T16:00:00.000Z","_content":"\n此篇介紹如何將 `CSS` 、 `SASS` 引入 `Webpack` 專案中，並使用 `postcss` 的 `autoprefixer` 自動將 `CSS` 加入相對的瀏覽器前綴。\n<!--more-->\n\n## 安裝 `css-loader` `style-loader`\n\n```npm\nnpm i -D css-loader\n```\n\n```npm\nnpm i -D style-loader\n```\n\n## 設定 `webpack.config.js`\n\n```js\nmodule.exports = {\n  ......\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [ 'style-loader', 'css-loader' ]\n      }\n    ]\n  },\n  ......\n};\n```\n\n## 測試 `CSS`\n\n1. 在 `src` 資料夾創建一隻 `app.css`\n\n```css\nbody {\n  background-color: yellowgreen;\n}\n```\n\n2. 將 `app.css` 引入 `app.js` 中\n\n在 `app.js` 加入\n\n```js\nrequire('./app.css');\n```\n\n3. 執行 `webpack` 打包\n\n```npm\nnpm run prod\n```\n\n執行完打開 `dist` 資料夾 `index.html` 就可以看到我們更改的草綠色背景囉！\n\n![網頁更改成草綠色背景囉](https://lh3.googleusercontent.com/Yud96AyoVHTNk3AoQLHcsrj3QGZe6u-IV-qlmk49isZQDtDdwi9R5SrU2Yp8nx839a45eZLrD5UxXIfoGtPAKJFJHf6yChSVv2NjV0CX5Jf-6Cob9_R4Ym28v9Y7Y96ihj1hWTC8MY0U7p03o_juLIhQEOWaOpYbVkfYLPSEAIqMrj6keOv2rml5PYdFjoq5vokc_xLkCis3o3Oz8RHdYqueX9N3KMVNGjJTbE9a0SwJg94H6Lzg803ARceJKTzuUiGKmH-0_ibiflMAxKKuOBOhGraH3VtiMNv9RYtzaudsdTrAfMVmpXtM1_HPiK8ZMoYCQlW_x2ewHuhWbE1tGNBeNlHbCcqPsLb8ZZRGEWdE9BHmnMakyKZax_EwSYUUYudPPRXd9BQTGtToM8elBoIMD07HuHZ1pr_UxKFlabSjmUXZIF-BcdpptH8CuU9C-lgD41pO1eF__8mVie_tVyMVP0lq0fpBtT0JxwMElHaUhXLDRUns-261ZANHPD4DU2jOMmRf8JV4hXdgGDITv9LvQps-WNqTEPXr6E9DIwr7kpD_yxsJ9eCcfCmM52QbkhClMU9Kds1Ps4t5QWQ-E49LMs8hNBLG_y6zTGHT01-ssMgsj7Aqvf9OTju8y7159z6S6Ld3x2X-BH2rjqItCsgU79hUIMG0=w1024-h616-no \"dist/index.html\")\n\n到這裡我們完成引入 `CSS` 的動作，接下來要來試試引入 `SASS`。\n\n## 安裝 `sass-loader`\n\n```npm\nnpm i sass-loader node-sass webpack -D\n```\n\n## 修改 `webpack.config.js`\n\n```js\nmodule.exports = {\n  ......\n  module: {\n    rules: [\n      {\n        test: /\\.css|scss$/,\n        use: [ 'style-loader', 'css-loader', 'sass-loader' ]\n      }\n    ]\n  },\n  ......\n};\n```\n\n## 測試 `SASS`\n\n1. 在 `src` 資料夾將 `app.css` 修改成 `app.scss`\n\n```css\nbody {\n  background-color: yellowgreen;\n  h1 {\n    color: green;\n  }\n}\n```\n\n2. 在 `src` 資料夾修改 `index.html`\n\n```html\n<body>\n  <h1> Test SASS Loader</h1>\n</body>\n```\n\n3. 將 `app.scss` 引入 `app.js` 中\n\n```js\nrequire('./app.scss');\n```\n\n4. 執行 `webpack` 打包\n\n```npm\nnpm run prod\n```\n\n執行完打開 `dist` 資料夾 `index.html` 就可以看到我們更改的標題顏色囉！\n\n![網頁更改標題顏色](https://lh3.googleusercontent.com/esJm0PM-vvgr8BgLGh2mbvPKhQ2pFMMqhi74QE_2aUnd13kOesjp17hImNoFQ-JTjAHRg2oxKYsbHqKRKPeXl0g8qqfZzE5YHyKvH7hUb7TUvqN_6BSrH5tbuinT8OzcQoCAit6kwSjgjbgiEs7lxLi5ERDTt4G1X0UhtDANV5UjNhDupDYtgDxEa9SLn-wJIgHaVQ9gFJ0zpEPzxx050LgEmR2KU_fTcPV2stWSpBOcP33j_cUZ1RGVyXRpwOyjrviTsr5-zzfZbJBVBsgdyzL9S6tlzD-gPOtuebIGQJ1bzaMYgU11mTylzE9QkUF1Tisffxya1zb9OIv__DPesB33FIwWVrtq5ql1rr-7q7e2AUdTbBxFqQhlzzb1YmSht4lRUOV_g2p6LYzRp5bqNb37clADys_NOxhmar3PjutbShblwfoeGzkBt_qd46JXn_6XlfcbIHVGeyjZAhaTJVoeVt-5xkVMKuAu6qgnP7AAWh1eMSgCjoWwFqHtSB3iTnoZMHqD6zr3ZGqVR2GzWh3Rv0--2t8VbuMUaAAuPzjR98uy6DS9KZiKHOCknhtOUnU-cIKP9PVZh9m1q8Y89G97FvV_LTgdycx_h4GmL09yc2ntJSGLWD7n73jGt3SzTZaf8AVo0T-bKBHBztjCjANZoKw5tf9g=w1024-h616-no \"dist/index.html\")\n\n`SASS` 引入完成！！大家有發現網頁上的 `css` 怎麼都是跑到 `head` 裡面啦？接下來要教怎麼輸出成一隻 `css` 用 `link` 的方式引入到頁面上。\n\n## 安裝 `ExtractTextWebpackPlugin`\n\n```npm\nnpm i -D extract-text-webpack-plugin\n```\n\n## 修改 `webpack.config.js`\n\n```js\nconst ExtractTextPlugin = require(\"extract-text-webpack-plugin\");\n......\nmodule.exports = {\n  ......\n  module: {\n    rules: [\n      {\n        test: /\\.css|scss$/,\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          //resolve-url-loader may be chained before sass-loader if necessary\n          use: ['css-loader', 'sass-loader']\n        })\n      }\n    ]\n  },\n  plugins: [\n    ......\n    new ExtractTextPlugin({\n      filename: 'app.css',\n      disable: false,\n      allChunks: true\n    })\n  ]\n};\n```\n\n* 執行 `webpack` 打包\n\n```npm\nnpm run prod\n```\n\n執行完打開 `dist` 資料夾 `index.html` 就可以看到 `app.css` 在 `head` 裡面囉！\n\n每次因為不同瀏覽器寫前綴語是不是超麻煩的啊？接下來要來引入 `postcss` 的 `autoprefixer` ，透過設定 browserlist 讓 Webpack 自動做完這些事情呦。\n\n## 安裝 `postcss-loader`\n\n```npm\nnpm i -D  postcss-loader\n```\n\n## 新增 `postcss.config.js`\n\n```js\nmodule.exports = {\n  plugins: {\n    'autoprefixer': {}\n  }\n}\n```\n\n## 在 `package.json` 設定 `browserslist`\n\n```js\n{\n  ......\n  \"browserslist\": [\n    \"Explorer 11\",\n    \"> 1%\",\n    \"last 2 versions\",\n    \"not ie <= 10\"\n  ]\n}\n```\n\n## 修改 `webpack.config.js`\n\n```js\nmodule.exports = {\n  ......\n  module: {\n    rules: [\n      {\n        test: /\\.css|scss$/,\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          //resolve-url-loader may be chained before sass-loader if necessary\n          use: ['css-loader', 'postcss-loader', 'sass-loader']\n        })\n      }\n    ]\n  }\n  ......\n};\n```\n\n## 測試 `postcss`\n\n1. 修改 `app.scss` 檔案\n\n```css\nbody {\n    background-color: yellowgreen;\n    h1 {\n        color: green;\n        transform: scale(1.5);\n    }\n}\n```\n\n2. 執行 `Webpack` 打包\n\n```npm\nnpm run prod\n```\n\n打開 `dist/app.css` 就可以看到下面自動加入前綴語的 `css` 囉～\n\n```css\nbody{background-color:#9acd32}body h1{color:green;-webkit-transform:scale(1.5);-ms-transform:scale(1.5);transform:scale(1.5)}\n```\n\n今天的實作檔案整理在此[github](https://github.com/Annilla/webpack_practice/tree/v1.2.0)，謝謝收看。\n\n## 參考資料\n\n* [Webpack css-loader](https://webpack.js.org/loaders/css-loader/#components/sidebar/sidebar.jsx)\n* [Webpack style-loader](https://webpack.js.org/loaders/style-loader/#components/sidebar/sidebar.jsx)\n* [Webpack sass-loader](https://webpack.js.org/loaders/sass-loader/#components/sidebar/sidebar.jsx)\n* [Webpack ExtractTextWebpackPlugin](https://webpack.js.org/plugins/extract-text-webpack-plugin/#components/sidebar/sidebar.jsx)\n* [Webpack postcss-loader](https://webpack.js.org/loaders/postcss-loader/#components/sidebar/sidebar.jsx)\n* [Browserslist](https://github.com/ai/browserslist)\n","source":"_posts/Webpack/Webpack-3-Tutorial-Style-CSS-and-Sass-loaders.md","raw":"---\ntitle: 'Webpack 3 Tutorial - Style, CSS, Sass and Postcss loaders'\ncategories:\n  - Webpack\nthumbnailImage: https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667\nthumbnailImagePosition: left\ncoverImage: https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png\ncoverMeta: out\ntags: [Webpack]\ndate: 2017/08/01\nupdated: 2017/08/01\n---\n\n此篇介紹如何將 `CSS` 、 `SASS` 引入 `Webpack` 專案中，並使用 `postcss` 的 `autoprefixer` 自動將 `CSS` 加入相對的瀏覽器前綴。\n<!--more-->\n\n## 安裝 `css-loader` `style-loader`\n\n```npm\nnpm i -D css-loader\n```\n\n```npm\nnpm i -D style-loader\n```\n\n## 設定 `webpack.config.js`\n\n```js\nmodule.exports = {\n  ......\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [ 'style-loader', 'css-loader' ]\n      }\n    ]\n  },\n  ......\n};\n```\n\n## 測試 `CSS`\n\n1. 在 `src` 資料夾創建一隻 `app.css`\n\n```css\nbody {\n  background-color: yellowgreen;\n}\n```\n\n2. 將 `app.css` 引入 `app.js` 中\n\n在 `app.js` 加入\n\n```js\nrequire('./app.css');\n```\n\n3. 執行 `webpack` 打包\n\n```npm\nnpm run prod\n```\n\n執行完打開 `dist` 資料夾 `index.html` 就可以看到我們更改的草綠色背景囉！\n\n![網頁更改成草綠色背景囉](https://lh3.googleusercontent.com/Yud96AyoVHTNk3AoQLHcsrj3QGZe6u-IV-qlmk49isZQDtDdwi9R5SrU2Yp8nx839a45eZLrD5UxXIfoGtPAKJFJHf6yChSVv2NjV0CX5Jf-6Cob9_R4Ym28v9Y7Y96ihj1hWTC8MY0U7p03o_juLIhQEOWaOpYbVkfYLPSEAIqMrj6keOv2rml5PYdFjoq5vokc_xLkCis3o3Oz8RHdYqueX9N3KMVNGjJTbE9a0SwJg94H6Lzg803ARceJKTzuUiGKmH-0_ibiflMAxKKuOBOhGraH3VtiMNv9RYtzaudsdTrAfMVmpXtM1_HPiK8ZMoYCQlW_x2ewHuhWbE1tGNBeNlHbCcqPsLb8ZZRGEWdE9BHmnMakyKZax_EwSYUUYudPPRXd9BQTGtToM8elBoIMD07HuHZ1pr_UxKFlabSjmUXZIF-BcdpptH8CuU9C-lgD41pO1eF__8mVie_tVyMVP0lq0fpBtT0JxwMElHaUhXLDRUns-261ZANHPD4DU2jOMmRf8JV4hXdgGDITv9LvQps-WNqTEPXr6E9DIwr7kpD_yxsJ9eCcfCmM52QbkhClMU9Kds1Ps4t5QWQ-E49LMs8hNBLG_y6zTGHT01-ssMgsj7Aqvf9OTju8y7159z6S6Ld3x2X-BH2rjqItCsgU79hUIMG0=w1024-h616-no \"dist/index.html\")\n\n到這裡我們完成引入 `CSS` 的動作，接下來要來試試引入 `SASS`。\n\n## 安裝 `sass-loader`\n\n```npm\nnpm i sass-loader node-sass webpack -D\n```\n\n## 修改 `webpack.config.js`\n\n```js\nmodule.exports = {\n  ......\n  module: {\n    rules: [\n      {\n        test: /\\.css|scss$/,\n        use: [ 'style-loader', 'css-loader', 'sass-loader' ]\n      }\n    ]\n  },\n  ......\n};\n```\n\n## 測試 `SASS`\n\n1. 在 `src` 資料夾將 `app.css` 修改成 `app.scss`\n\n```css\nbody {\n  background-color: yellowgreen;\n  h1 {\n    color: green;\n  }\n}\n```\n\n2. 在 `src` 資料夾修改 `index.html`\n\n```html\n<body>\n  <h1> Test SASS Loader</h1>\n</body>\n```\n\n3. 將 `app.scss` 引入 `app.js` 中\n\n```js\nrequire('./app.scss');\n```\n\n4. 執行 `webpack` 打包\n\n```npm\nnpm run prod\n```\n\n執行完打開 `dist` 資料夾 `index.html` 就可以看到我們更改的標題顏色囉！\n\n![網頁更改標題顏色](https://lh3.googleusercontent.com/esJm0PM-vvgr8BgLGh2mbvPKhQ2pFMMqhi74QE_2aUnd13kOesjp17hImNoFQ-JTjAHRg2oxKYsbHqKRKPeXl0g8qqfZzE5YHyKvH7hUb7TUvqN_6BSrH5tbuinT8OzcQoCAit6kwSjgjbgiEs7lxLi5ERDTt4G1X0UhtDANV5UjNhDupDYtgDxEa9SLn-wJIgHaVQ9gFJ0zpEPzxx050LgEmR2KU_fTcPV2stWSpBOcP33j_cUZ1RGVyXRpwOyjrviTsr5-zzfZbJBVBsgdyzL9S6tlzD-gPOtuebIGQJ1bzaMYgU11mTylzE9QkUF1Tisffxya1zb9OIv__DPesB33FIwWVrtq5ql1rr-7q7e2AUdTbBxFqQhlzzb1YmSht4lRUOV_g2p6LYzRp5bqNb37clADys_NOxhmar3PjutbShblwfoeGzkBt_qd46JXn_6XlfcbIHVGeyjZAhaTJVoeVt-5xkVMKuAu6qgnP7AAWh1eMSgCjoWwFqHtSB3iTnoZMHqD6zr3ZGqVR2GzWh3Rv0--2t8VbuMUaAAuPzjR98uy6DS9KZiKHOCknhtOUnU-cIKP9PVZh9m1q8Y89G97FvV_LTgdycx_h4GmL09yc2ntJSGLWD7n73jGt3SzTZaf8AVo0T-bKBHBztjCjANZoKw5tf9g=w1024-h616-no \"dist/index.html\")\n\n`SASS` 引入完成！！大家有發現網頁上的 `css` 怎麼都是跑到 `head` 裡面啦？接下來要教怎麼輸出成一隻 `css` 用 `link` 的方式引入到頁面上。\n\n## 安裝 `ExtractTextWebpackPlugin`\n\n```npm\nnpm i -D extract-text-webpack-plugin\n```\n\n## 修改 `webpack.config.js`\n\n```js\nconst ExtractTextPlugin = require(\"extract-text-webpack-plugin\");\n......\nmodule.exports = {\n  ......\n  module: {\n    rules: [\n      {\n        test: /\\.css|scss$/,\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          //resolve-url-loader may be chained before sass-loader if necessary\n          use: ['css-loader', 'sass-loader']\n        })\n      }\n    ]\n  },\n  plugins: [\n    ......\n    new ExtractTextPlugin({\n      filename: 'app.css',\n      disable: false,\n      allChunks: true\n    })\n  ]\n};\n```\n\n* 執行 `webpack` 打包\n\n```npm\nnpm run prod\n```\n\n執行完打開 `dist` 資料夾 `index.html` 就可以看到 `app.css` 在 `head` 裡面囉！\n\n每次因為不同瀏覽器寫前綴語是不是超麻煩的啊？接下來要來引入 `postcss` 的 `autoprefixer` ，透過設定 browserlist 讓 Webpack 自動做完這些事情呦。\n\n## 安裝 `postcss-loader`\n\n```npm\nnpm i -D  postcss-loader\n```\n\n## 新增 `postcss.config.js`\n\n```js\nmodule.exports = {\n  plugins: {\n    'autoprefixer': {}\n  }\n}\n```\n\n## 在 `package.json` 設定 `browserslist`\n\n```js\n{\n  ......\n  \"browserslist\": [\n    \"Explorer 11\",\n    \"> 1%\",\n    \"last 2 versions\",\n    \"not ie <= 10\"\n  ]\n}\n```\n\n## 修改 `webpack.config.js`\n\n```js\nmodule.exports = {\n  ......\n  module: {\n    rules: [\n      {\n        test: /\\.css|scss$/,\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          //resolve-url-loader may be chained before sass-loader if necessary\n          use: ['css-loader', 'postcss-loader', 'sass-loader']\n        })\n      }\n    ]\n  }\n  ......\n};\n```\n\n## 測試 `postcss`\n\n1. 修改 `app.scss` 檔案\n\n```css\nbody {\n    background-color: yellowgreen;\n    h1 {\n        color: green;\n        transform: scale(1.5);\n    }\n}\n```\n\n2. 執行 `Webpack` 打包\n\n```npm\nnpm run prod\n```\n\n打開 `dist/app.css` 就可以看到下面自動加入前綴語的 `css` 囉～\n\n```css\nbody{background-color:#9acd32}body h1{color:green;-webkit-transform:scale(1.5);-ms-transform:scale(1.5);transform:scale(1.5)}\n```\n\n今天的實作檔案整理在此[github](https://github.com/Annilla/webpack_practice/tree/v1.2.0)，謝謝收看。\n\n## 參考資料\n\n* [Webpack css-loader](https://webpack.js.org/loaders/css-loader/#components/sidebar/sidebar.jsx)\n* [Webpack style-loader](https://webpack.js.org/loaders/style-loader/#components/sidebar/sidebar.jsx)\n* [Webpack sass-loader](https://webpack.js.org/loaders/sass-loader/#components/sidebar/sidebar.jsx)\n* [Webpack ExtractTextWebpackPlugin](https://webpack.js.org/plugins/extract-text-webpack-plugin/#components/sidebar/sidebar.jsx)\n* [Webpack postcss-loader](https://webpack.js.org/loaders/postcss-loader/#components/sidebar/sidebar.jsx)\n* [Browserslist](https://github.com/ai/browserslist)\n","slug":"Webpack/Webpack-3-Tutorial-Style-CSS-and-Sass-loaders","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"ck3bbu75c0031tudh497sshrw","content":"<p>此篇介紹如何將 <code>CSS</code> 、 <code>SASS</code> 引入 <code>Webpack</code> 專案中，並使用 <code>postcss</code> 的 <code>autoprefixer</code> 自動將 <code>CSS</code> 加入相對的瀏覽器前綴。<br><a id=\"more\"></a></p>\n<h2 id=\"安裝-css-loader-style-loader\"><a href=\"#安裝-css-loader-style-loader\" class=\"headerlink\" title=\"安裝 css-loader style-loader\"></a>安裝 <code>css-loader</code> <code>style-loader</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D css-loader</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D style-loader</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-webpack-config-js\"><a href=\"#設定-webpack-config-js\" class=\"headerlink\" title=\"設定 webpack.config.js\"></a>設定 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: [ <span class=\"string\">'style-loader'</span>, <span class=\"string\">'css-loader'</span> ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"測試-CSS\"><a href=\"#測試-CSS\" class=\"headerlink\" title=\"測試 CSS\"></a>測試 <code>CSS</code></h2><ol>\n<li>在 <code>src</code> 資料夾創建一隻 <code>app.css</code></li>\n</ol>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: yellowgreen;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>將 <code>app.css</code> 引入 <code>app.js</code> 中</li>\n</ol>\n<p>在 <code>app.js</code> 加入</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./app.css'</span>);</span><br></pre></td></tr></table></figure>\n<ol>\n<li>執行 <code>webpack</code> 打包</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<p>執行完打開 <code>dist</code> 資料夾 <code>index.html</code> 就可以看到我們更改的草綠色背景囉！</p>\n<p><img src=\"https://lh3.googleusercontent.com/Yud96AyoVHTNk3AoQLHcsrj3QGZe6u-IV-qlmk49isZQDtDdwi9R5SrU2Yp8nx839a45eZLrD5UxXIfoGtPAKJFJHf6yChSVv2NjV0CX5Jf-6Cob9_R4Ym28v9Y7Y96ihj1hWTC8MY0U7p03o_juLIhQEOWaOpYbVkfYLPSEAIqMrj6keOv2rml5PYdFjoq5vokc_xLkCis3o3Oz8RHdYqueX9N3KMVNGjJTbE9a0SwJg94H6Lzg803ARceJKTzuUiGKmH-0_ibiflMAxKKuOBOhGraH3VtiMNv9RYtzaudsdTrAfMVmpXtM1_HPiK8ZMoYCQlW_x2ewHuhWbE1tGNBeNlHbCcqPsLb8ZZRGEWdE9BHmnMakyKZax_EwSYUUYudPPRXd9BQTGtToM8elBoIMD07HuHZ1pr_UxKFlabSjmUXZIF-BcdpptH8CuU9C-lgD41pO1eF__8mVie_tVyMVP0lq0fpBtT0JxwMElHaUhXLDRUns-261ZANHPD4DU2jOMmRf8JV4hXdgGDITv9LvQps-WNqTEPXr6E9DIwr7kpD_yxsJ9eCcfCmM52QbkhClMU9Kds1Ps4t5QWQ-E49LMs8hNBLG_y6zTGHT01-ssMgsj7Aqvf9OTju8y7159z6S6Ld3x2X-BH2rjqItCsgU79hUIMG0=w1024-h616-no\" alt=\"網頁更改成草綠色背景囉\" title=\"dist/index.html\"></p>\n<p>到這裡我們完成引入 <code>CSS</code> 的動作，接下來要來試試引入 <code>SASS</code>。</p>\n<h2 id=\"安裝-sass-loader\"><a href=\"#安裝-sass-loader\" class=\"headerlink\" title=\"安裝 sass-loader\"></a>安裝 <code>sass-loader</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i sass-loader node-sass webpack -D</span><br></pre></td></tr></table></figure>\n<h2 id=\"修改-webpack-config-js\"><a href=\"#修改-webpack-config-js\" class=\"headerlink\" title=\"修改 webpack.config.js\"></a>修改 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css|scss$/</span>,</span><br><span class=\"line\">        use: [ <span class=\"string\">'style-loader'</span>, <span class=\"string\">'css-loader'</span>, <span class=\"string\">'sass-loader'</span> ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"測試-SASS\"><a href=\"#測試-SASS\" class=\"headerlink\" title=\"測試 SASS\"></a>測試 <code>SASS</code></h2><ol>\n<li>在 <code>src</code> 資料夾將 <code>app.css</code> 修改成 <code>app.scss</code></li>\n</ol>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: yellowgreen;</span><br><span class=\"line\">  h1 &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">color</span>: <span class=\"selector-tag\">green</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>在 <code>src</code> 資料夾修改 <code>index.html</code></li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span> Test SASS Loader<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol>\n<li>將 <code>app.scss</code> 引入 <code>app.js</code> 中</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./app.scss'</span>);</span><br></pre></td></tr></table></figure>\n<ol>\n<li>執行 <code>webpack</code> 打包</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<p>執行完打開 <code>dist</code> 資料夾 <code>index.html</code> 就可以看到我們更改的標題顏色囉！</p>\n<p><img src=\"https://lh3.googleusercontent.com/esJm0PM-vvgr8BgLGh2mbvPKhQ2pFMMqhi74QE_2aUnd13kOesjp17hImNoFQ-JTjAHRg2oxKYsbHqKRKPeXl0g8qqfZzE5YHyKvH7hUb7TUvqN_6BSrH5tbuinT8OzcQoCAit6kwSjgjbgiEs7lxLi5ERDTt4G1X0UhtDANV5UjNhDupDYtgDxEa9SLn-wJIgHaVQ9gFJ0zpEPzxx050LgEmR2KU_fTcPV2stWSpBOcP33j_cUZ1RGVyXRpwOyjrviTsr5-zzfZbJBVBsgdyzL9S6tlzD-gPOtuebIGQJ1bzaMYgU11mTylzE9QkUF1Tisffxya1zb9OIv__DPesB33FIwWVrtq5ql1rr-7q7e2AUdTbBxFqQhlzzb1YmSht4lRUOV_g2p6LYzRp5bqNb37clADys_NOxhmar3PjutbShblwfoeGzkBt_qd46JXn_6XlfcbIHVGeyjZAhaTJVoeVt-5xkVMKuAu6qgnP7AAWh1eMSgCjoWwFqHtSB3iTnoZMHqD6zr3ZGqVR2GzWh3Rv0--2t8VbuMUaAAuPzjR98uy6DS9KZiKHOCknhtOUnU-cIKP9PVZh9m1q8Y89G97FvV_LTgdycx_h4GmL09yc2ntJSGLWD7n73jGt3SzTZaf8AVo0T-bKBHBztjCjANZoKw5tf9g=w1024-h616-no\" alt=\"網頁更改標題顏色\" title=\"dist/index.html\"></p>\n<p><code>SASS</code> 引入完成！！大家有發現網頁上的 <code>css</code> 怎麼都是跑到 <code>head</code> 裡面啦？接下來要教怎麼輸出成一隻 <code>css</code> 用 <code>link</code> 的方式引入到頁面上。</p>\n<h2 id=\"安裝-ExtractTextWebpackPlugin\"><a href=\"#安裝-ExtractTextWebpackPlugin\" class=\"headerlink\" title=\"安裝 ExtractTextWebpackPlugin\"></a>安裝 <code>ExtractTextWebpackPlugin</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D extract-text-webpack-plugin</span><br></pre></td></tr></table></figure>\n<h2 id=\"修改-webpack-config-js-1\"><a href=\"#修改-webpack-config-js-1\" class=\"headerlink\" title=\"修改 webpack.config.js\"></a>修改 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">\"extract-text-webpack-plugin\"</span>);</span><br><span class=\"line\">......</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css|scss$/</span>,</span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          <span class=\"comment\">//resolve-url-loader may be chained before sass-loader if necessary</span></span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>, <span class=\"string\">'sass-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    ......</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'app.css'</span>,</span><br><span class=\"line\">      disable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      allChunks: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>執行 <code>webpack</code> 打包</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<p>執行完打開 <code>dist</code> 資料夾 <code>index.html</code> 就可以看到 <code>app.css</code> 在 <code>head</code> 裡面囉！</p>\n<p>每次因為不同瀏覽器寫前綴語是不是超麻煩的啊？接下來要來引入 <code>postcss</code> 的 <code>autoprefixer</code> ，透過設定 browserlist 讓 Webpack 自動做完這些事情呦。</p>\n<h2 id=\"安裝-postcss-loader\"><a href=\"#安裝-postcss-loader\" class=\"headerlink\" title=\"安裝 postcss-loader\"></a>安裝 <code>postcss-loader</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D  postcss-loader</span><br></pre></td></tr></table></figure>\n<h2 id=\"新增-postcss-config-js\"><a href=\"#新增-postcss-config-js\" class=\"headerlink\" title=\"新增 postcss.config.js\"></a>新增 <code>postcss.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  plugins: &#123;</span><br><span class=\"line\">    <span class=\"string\">'autoprefixer'</span>: &#123;&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"在-package-json-設定-browserslist\"><a href=\"#在-package-json-設定-browserslist\" class=\"headerlink\" title=\"在 package.json 設定 browserslist\"></a>在 <code>package.json</code> 設定 <code>browserslist</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"string\">\"browserslist\"</span>: [</span><br><span class=\"line\">    <span class=\"string\">\"Explorer 11\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"&gt; 1%\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"last 2 versions\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"not ie &lt;= 10\"</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"修改-webpack-config-js-2\"><a href=\"#修改-webpack-config-js-2\" class=\"headerlink\" title=\"修改 webpack.config.js\"></a>修改 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css|scss$/</span>,</span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          <span class=\"comment\">//resolve-url-loader may be chained before sass-loader if necessary</span></span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>, <span class=\"string\">'postcss-loader'</span>, <span class=\"string\">'sass-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"測試-postcss\"><a href=\"#測試-postcss\" class=\"headerlink\" title=\"測試 postcss\"></a>測試 <code>postcss</code></h2><ol>\n<li>修改 <code>app.scss</code> 檔案</li>\n</ol>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: yellowgreen;</span><br><span class=\"line\">    h1 &#123;</span><br><span class=\"line\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-tag\">green</span>;</span><br><span class=\"line\">        <span class=\"selector-tag\">transform</span>: <span class=\"selector-tag\">scale</span>(1<span class=\"selector-class\">.5</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>執行 <code>Webpack</code> 打包</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<p>打開 <code>dist/app.css</code> 就可以看到下面自動加入前綴語的 <code>css</code> 囉～</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span>&#123;<span class=\"attribute\">background-color</span>:<span class=\"number\">#9acd32</span>&#125;<span class=\"selector-tag\">body</span> <span class=\"selector-tag\">h1</span>&#123;<span class=\"attribute\">color</span>:green;<span class=\"attribute\">-webkit-transform</span>:<span class=\"built_in\">scale</span>(1.5);<span class=\"attribute\">-ms-transform</span>:<span class=\"built_in\">scale</span>(1.5);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(1.5)&#125;</span><br></pre></td></tr></table></figure>\n<p>今天的實作檔案整理在此<a href=\"https://github.com/Annilla/webpack_practice/tree/v1.2.0\" target=\"_blank\" rel=\"noopener\">github</a>，謝謝收看。</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://webpack.js.org/loaders/css-loader/#components/sidebar/sidebar.jsx\" target=\"_blank\" rel=\"noopener\">Webpack css-loader</a></li>\n<li><a href=\"https://webpack.js.org/loaders/style-loader/#components/sidebar/sidebar.jsx\" target=\"_blank\" rel=\"noopener\">Webpack style-loader</a></li>\n<li><a href=\"https://webpack.js.org/loaders/sass-loader/#components/sidebar/sidebar.jsx\" target=\"_blank\" rel=\"noopener\">Webpack sass-loader</a></li>\n<li><a href=\"https://webpack.js.org/plugins/extract-text-webpack-plugin/#components/sidebar/sidebar.jsx\" target=\"_blank\" rel=\"noopener\">Webpack ExtractTextWebpackPlugin</a></li>\n<li><a href=\"https://webpack.js.org/loaders/postcss-loader/#components/sidebar/sidebar.jsx\" target=\"_blank\" rel=\"noopener\">Webpack postcss-loader</a></li>\n<li><a href=\"https://github.com/ai/browserslist\" target=\"_blank\" rel=\"noopener\">Browserslist</a></li>\n</ul>\n","site":{"data":{}},"thumbnailImageUrl":"https://camo.githubusercontent.com/d18f4a7a64244f703efcb322bf298dcb4ca38856/68747470733a2f2f7765627061636b2e6a732e6f72672f6173736574732f69636f6e2d7371756172652d6269672e737667","excerpt":"<p>此篇介紹如何將 <code>CSS</code> 、 <code>SASS</code> 引入 <code>Webpack</code> 專案中，並使用 <code>postcss</code> 的 <code>autoprefixer</code> 自動將 <code>CSS</code> 加入相對的瀏覽器前綴。<br>","more":"</p>\n<h2 id=\"安裝-css-loader-style-loader\"><a href=\"#安裝-css-loader-style-loader\" class=\"headerlink\" title=\"安裝 css-loader style-loader\"></a>安裝 <code>css-loader</code> <code>style-loader</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D css-loader</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D style-loader</span><br></pre></td></tr></table></figure>\n<h2 id=\"設定-webpack-config-js\"><a href=\"#設定-webpack-config-js\" class=\"headerlink\" title=\"設定 webpack.config.js\"></a>設定 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: [ <span class=\"string\">'style-loader'</span>, <span class=\"string\">'css-loader'</span> ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"測試-CSS\"><a href=\"#測試-CSS\" class=\"headerlink\" title=\"測試 CSS\"></a>測試 <code>CSS</code></h2><ol>\n<li>在 <code>src</code> 資料夾創建一隻 <code>app.css</code></li>\n</ol>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: yellowgreen;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>將 <code>app.css</code> 引入 <code>app.js</code> 中</li>\n</ol>\n<p>在 <code>app.js</code> 加入</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./app.css'</span>);</span><br></pre></td></tr></table></figure>\n<ol>\n<li>執行 <code>webpack</code> 打包</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<p>執行完打開 <code>dist</code> 資料夾 <code>index.html</code> 就可以看到我們更改的草綠色背景囉！</p>\n<p><img src=\"https://lh3.googleusercontent.com/Yud96AyoVHTNk3AoQLHcsrj3QGZe6u-IV-qlmk49isZQDtDdwi9R5SrU2Yp8nx839a45eZLrD5UxXIfoGtPAKJFJHf6yChSVv2NjV0CX5Jf-6Cob9_R4Ym28v9Y7Y96ihj1hWTC8MY0U7p03o_juLIhQEOWaOpYbVkfYLPSEAIqMrj6keOv2rml5PYdFjoq5vokc_xLkCis3o3Oz8RHdYqueX9N3KMVNGjJTbE9a0SwJg94H6Lzg803ARceJKTzuUiGKmH-0_ibiflMAxKKuOBOhGraH3VtiMNv9RYtzaudsdTrAfMVmpXtM1_HPiK8ZMoYCQlW_x2ewHuhWbE1tGNBeNlHbCcqPsLb8ZZRGEWdE9BHmnMakyKZax_EwSYUUYudPPRXd9BQTGtToM8elBoIMD07HuHZ1pr_UxKFlabSjmUXZIF-BcdpptH8CuU9C-lgD41pO1eF__8mVie_tVyMVP0lq0fpBtT0JxwMElHaUhXLDRUns-261ZANHPD4DU2jOMmRf8JV4hXdgGDITv9LvQps-WNqTEPXr6E9DIwr7kpD_yxsJ9eCcfCmM52QbkhClMU9Kds1Ps4t5QWQ-E49LMs8hNBLG_y6zTGHT01-ssMgsj7Aqvf9OTju8y7159z6S6Ld3x2X-BH2rjqItCsgU79hUIMG0=w1024-h616-no\" alt=\"網頁更改成草綠色背景囉\" title=\"dist/index.html\"></p>\n<p>到這裡我們完成引入 <code>CSS</code> 的動作，接下來要來試試引入 <code>SASS</code>。</p>\n<h2 id=\"安裝-sass-loader\"><a href=\"#安裝-sass-loader\" class=\"headerlink\" title=\"安裝 sass-loader\"></a>安裝 <code>sass-loader</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i sass-loader node-sass webpack -D</span><br></pre></td></tr></table></figure>\n<h2 id=\"修改-webpack-config-js\"><a href=\"#修改-webpack-config-js\" class=\"headerlink\" title=\"修改 webpack.config.js\"></a>修改 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css|scss$/</span>,</span><br><span class=\"line\">        use: [ <span class=\"string\">'style-loader'</span>, <span class=\"string\">'css-loader'</span>, <span class=\"string\">'sass-loader'</span> ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"測試-SASS\"><a href=\"#測試-SASS\" class=\"headerlink\" title=\"測試 SASS\"></a>測試 <code>SASS</code></h2><ol>\n<li>在 <code>src</code> 資料夾將 <code>app.css</code> 修改成 <code>app.scss</code></li>\n</ol>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: yellowgreen;</span><br><span class=\"line\">  h1 &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">color</span>: <span class=\"selector-tag\">green</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>在 <code>src</code> 資料夾修改 <code>index.html</code></li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span> Test SASS Loader<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol>\n<li>將 <code>app.scss</code> 引入 <code>app.js</code> 中</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'./app.scss'</span>);</span><br></pre></td></tr></table></figure>\n<ol>\n<li>執行 <code>webpack</code> 打包</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<p>執行完打開 <code>dist</code> 資料夾 <code>index.html</code> 就可以看到我們更改的標題顏色囉！</p>\n<p><img src=\"https://lh3.googleusercontent.com/esJm0PM-vvgr8BgLGh2mbvPKhQ2pFMMqhi74QE_2aUnd13kOesjp17hImNoFQ-JTjAHRg2oxKYsbHqKRKPeXl0g8qqfZzE5YHyKvH7hUb7TUvqN_6BSrH5tbuinT8OzcQoCAit6kwSjgjbgiEs7lxLi5ERDTt4G1X0UhtDANV5UjNhDupDYtgDxEa9SLn-wJIgHaVQ9gFJ0zpEPzxx050LgEmR2KU_fTcPV2stWSpBOcP33j_cUZ1RGVyXRpwOyjrviTsr5-zzfZbJBVBsgdyzL9S6tlzD-gPOtuebIGQJ1bzaMYgU11mTylzE9QkUF1Tisffxya1zb9OIv__DPesB33FIwWVrtq5ql1rr-7q7e2AUdTbBxFqQhlzzb1YmSht4lRUOV_g2p6LYzRp5bqNb37clADys_NOxhmar3PjutbShblwfoeGzkBt_qd46JXn_6XlfcbIHVGeyjZAhaTJVoeVt-5xkVMKuAu6qgnP7AAWh1eMSgCjoWwFqHtSB3iTnoZMHqD6zr3ZGqVR2GzWh3Rv0--2t8VbuMUaAAuPzjR98uy6DS9KZiKHOCknhtOUnU-cIKP9PVZh9m1q8Y89G97FvV_LTgdycx_h4GmL09yc2ntJSGLWD7n73jGt3SzTZaf8AVo0T-bKBHBztjCjANZoKw5tf9g=w1024-h616-no\" alt=\"網頁更改標題顏色\" title=\"dist/index.html\"></p>\n<p><code>SASS</code> 引入完成！！大家有發現網頁上的 <code>css</code> 怎麼都是跑到 <code>head</code> 裡面啦？接下來要教怎麼輸出成一隻 <code>css</code> 用 <code>link</code> 的方式引入到頁面上。</p>\n<h2 id=\"安裝-ExtractTextWebpackPlugin\"><a href=\"#安裝-ExtractTextWebpackPlugin\" class=\"headerlink\" title=\"安裝 ExtractTextWebpackPlugin\"></a>安裝 <code>ExtractTextWebpackPlugin</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D extract-text-webpack-plugin</span><br></pre></td></tr></table></figure>\n<h2 id=\"修改-webpack-config-js-1\"><a href=\"#修改-webpack-config-js-1\" class=\"headerlink\" title=\"修改 webpack.config.js\"></a>修改 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">\"extract-text-webpack-plugin\"</span>);</span><br><span class=\"line\">......</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css|scss$/</span>,</span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          <span class=\"comment\">//resolve-url-loader may be chained before sass-loader if necessary</span></span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>, <span class=\"string\">'sass-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    ......</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'app.css'</span>,</span><br><span class=\"line\">      disable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      allChunks: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>執行 <code>webpack</code> 打包</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<p>執行完打開 <code>dist</code> 資料夾 <code>index.html</code> 就可以看到 <code>app.css</code> 在 <code>head</code> 裡面囉！</p>\n<p>每次因為不同瀏覽器寫前綴語是不是超麻煩的啊？接下來要來引入 <code>postcss</code> 的 <code>autoprefixer</code> ，透過設定 browserlist 讓 Webpack 自動做完這些事情呦。</p>\n<h2 id=\"安裝-postcss-loader\"><a href=\"#安裝-postcss-loader\" class=\"headerlink\" title=\"安裝 postcss-loader\"></a>安裝 <code>postcss-loader</code></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D  postcss-loader</span><br></pre></td></tr></table></figure>\n<h2 id=\"新增-postcss-config-js\"><a href=\"#新增-postcss-config-js\" class=\"headerlink\" title=\"新增 postcss.config.js\"></a>新增 <code>postcss.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  plugins: &#123;</span><br><span class=\"line\">    <span class=\"string\">'autoprefixer'</span>: &#123;&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"在-package-json-設定-browserslist\"><a href=\"#在-package-json-設定-browserslist\" class=\"headerlink\" title=\"在 package.json 設定 browserslist\"></a>在 <code>package.json</code> 設定 <code>browserslist</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"string\">\"browserslist\"</span>: [</span><br><span class=\"line\">    <span class=\"string\">\"Explorer 11\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"&gt; 1%\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"last 2 versions\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"not ie &lt;= 10\"</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"修改-webpack-config-js-2\"><a href=\"#修改-webpack-config-js-2\" class=\"headerlink\" title=\"修改 webpack.config.js\"></a>修改 <code>webpack.config.js</code></h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css|scss$/</span>,</span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          <span class=\"comment\">//resolve-url-loader may be chained before sass-loader if necessary</span></span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>, <span class=\"string\">'postcss-loader'</span>, <span class=\"string\">'sass-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ......</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"測試-postcss\"><a href=\"#測試-postcss\" class=\"headerlink\" title=\"測試 postcss\"></a>測試 <code>postcss</code></h2><ol>\n<li>修改 <code>app.scss</code> 檔案</li>\n</ol>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: yellowgreen;</span><br><span class=\"line\">    h1 &#123;</span><br><span class=\"line\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-tag\">green</span>;</span><br><span class=\"line\">        <span class=\"selector-tag\">transform</span>: <span class=\"selector-tag\">scale</span>(1<span class=\"selector-class\">.5</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>執行 <code>Webpack</code> 打包</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run prod</span><br></pre></td></tr></table></figure>\n<p>打開 <code>dist/app.css</code> 就可以看到下面自動加入前綴語的 <code>css</code> 囉～</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span>&#123;<span class=\"attribute\">background-color</span>:<span class=\"number\">#9acd32</span>&#125;<span class=\"selector-tag\">body</span> <span class=\"selector-tag\">h1</span>&#123;<span class=\"attribute\">color</span>:green;<span class=\"attribute\">-webkit-transform</span>:<span class=\"built_in\">scale</span>(1.5);<span class=\"attribute\">-ms-transform</span>:<span class=\"built_in\">scale</span>(1.5);<span class=\"attribute\">transform</span>:<span class=\"built_in\">scale</span>(1.5)&#125;</span><br></pre></td></tr></table></figure>\n<p>今天的實作檔案整理在此<a href=\"https://github.com/Annilla/webpack_practice/tree/v1.2.0\" target=\"_blank\" rel=\"noopener\">github</a>，謝謝收看。</p>\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://webpack.js.org/loaders/css-loader/#components/sidebar/sidebar.jsx\" target=\"_blank\" rel=\"noopener\">Webpack css-loader</a></li>\n<li><a href=\"https://webpack.js.org/loaders/style-loader/#components/sidebar/sidebar.jsx\" target=\"_blank\" rel=\"noopener\">Webpack style-loader</a></li>\n<li><a href=\"https://webpack.js.org/loaders/sass-loader/#components/sidebar/sidebar.jsx\" target=\"_blank\" rel=\"noopener\">Webpack sass-loader</a></li>\n<li><a href=\"https://webpack.js.org/plugins/extract-text-webpack-plugin/#components/sidebar/sidebar.jsx\" target=\"_blank\" rel=\"noopener\">Webpack ExtractTextWebpackPlugin</a></li>\n<li><a href=\"https://webpack.js.org/loaders/postcss-loader/#components/sidebar/sidebar.jsx\" target=\"_blank\" rel=\"noopener\">Webpack postcss-loader</a></li>\n<li><a href=\"https://github.com/ai/browserslist\" target=\"_blank\" rel=\"noopener\">Browserslist</a></li>\n</ul>"}],"PostAsset":[],"PostCategory":[{"post_id":"ck3bbu7390000tudhlm35mzjd","category_id":"ck3bbu73f0004tudh8eanbujk","_id":"ck3bbu73j0009tudh0b35u93v"},{"post_id":"ck3bbu73d0002tudhp0fdg78f","category_id":"ck3bbu73i0007tudh97x28w34","_id":"ck3bbu73j000ctudhg2wovp1q"},{"post_id":"ck3bbu74b000itudhr4b6chqe","category_id":"ck3bbu74a000ftudhguzmo7xf","_id":"ck3bbu74h000otudho0pz3lqg"},{"post_id":"ck3bbu748000dtudhaqswovo5","category_id":"ck3bbu74a000ftudhguzmo7xf","_id":"ck3bbu74i000studhptfadqq0"},{"post_id":"ck3bbu74d000jtudh2i9zmu93","category_id":"ck3bbu74a000ftudhguzmo7xf","_id":"ck3bbu74k000utudh1dbw0by8"},{"post_id":"ck3bbu74f000mtudhzkqfame5","category_id":"ck3bbu74a000ftudhguzmo7xf","_id":"ck3bbu74m000xtudh1agvnpo4"},{"post_id":"ck3bbu749000etudh7wlttfty","category_id":"ck3bbu74a000ftudhguzmo7xf","_id":"ck3bbu74n0010tudhsafho5v5"},{"post_id":"ck3bbu74g000ntudhm7er8pgh","category_id":"ck3bbu74a000ftudhguzmo7xf","_id":"ck3bbu74o0015tudh40etpbu9"},{"post_id":"ck3bbu74i000rtudhb5xowbqn","category_id":"ck3bbu74a000ftudhguzmo7xf","_id":"ck3bbu74p0018tudhm6ugr1c0"},{"post_id":"ck3bbu74a000htudhyk7ktcx5","category_id":"ck3bbu74a000ftudhguzmo7xf","_id":"ck3bbu74r001ctudh0wd8hhbu"},{"post_id":"ck3bbu74j000ttudh5nlb9kcu","category_id":"ck3bbu74a000ftudhguzmo7xf","_id":"ck3bbu74s001etudhy45q0cof"},{"post_id":"ck3bbu74p0017tudh84zpa2dv","category_id":"ck3bbu74n0013tudh3jtiu3y6","_id":"ck3bbu74t001itudhekvmogse"},{"post_id":"ck3bbu74l000wtudh98gaxpj9","category_id":"ck3bbu74n0013tudh3jtiu3y6","_id":"ck3bbu74u001ltudh8z2vwdpm"},{"post_id":"ck3bbu74r001dtudh551d542u","category_id":"ck3bbu74n0013tudh3jtiu3y6","_id":"ck3bbu74v001qtudhtf3mfw0s"},{"post_id":"ck3bbu74m000ztudhsbagvd60","category_id":"ck3bbu74n0013tudh3jtiu3y6","_id":"ck3bbu74w001ttudht9jkzq7p"},{"post_id":"ck3bbu74o0014tudhwl2mzxe1","category_id":"ck3bbu74n0013tudh3jtiu3y6","_id":"ck3bbu74y001wtudhbhpw1sld"},{"post_id":"ck3bbu74q001atudhcrtq4zzx","category_id":"ck3bbu74v001ptudhqzgglehp","_id":"ck3bbu7500021tudhev93p9cl"},{"post_id":"ck3bbu74s001gtudhvncjctpb","category_id":"ck3bbu74y001xtudht7g33y1h","_id":"ck3bbu753002atudhq1kyt7v4"},{"post_id":"ck3bbu74t001ktudhblf6ct40","category_id":"ck3bbu74v001ptudhqzgglehp","_id":"ck3bbu755002ftudh85qfxq6t"},{"post_id":"ck3bbu755002htudhyy2hz8a5","category_id":"ck3bbu74y001xtudht7g33y1h","_id":"ck3bbu759002qtudhef35zcxi"},{"post_id":"ck3bbu74w001studh4n9y8taz","category_id":"ck3bbu74y001xtudht7g33y1h","_id":"ck3bbu75a002utudh84130n75"},{"post_id":"ck3bbu74x001vtudhha3jtgf2","category_id":"ck3bbu74y001xtudht7g33y1h","_id":"ck3bbu75b002ytudh65m0c1hw"},{"post_id":"ck3bbu74y001ytudhr6ddez9x","category_id":"ck3bbu74y001xtudht7g33y1h","_id":"ck3bbu75d0036tudhrxlrp96w"},{"post_id":"ck3bbu74y001ytudhr6ddez9x","category_id":"ck3bbu759002rtudhrvv9yuuf","_id":"ck3bbu75d0038tudhmo662rae"},{"post_id":"ck3bbu74z0020tudhq2eunhqj","category_id":"ck3bbu74y001xtudht7g33y1h","_id":"ck3bbu75e003ctudh08trn7i7"},{"post_id":"ck3bbu74z0020tudhq2eunhqj","category_id":"ck3bbu759002rtudhrvv9yuuf","_id":"ck3bbu75e003etudh785891nx"},{"post_id":"ck3bbu7500024tudh2j3xqlix","category_id":"ck3bbu74y001xtudht7g33y1h","_id":"ck3bbu75f003itudhihczefiq"},{"post_id":"ck3bbu7500024tudh2j3xqlix","category_id":"ck3bbu759002rtudhrvv9yuuf","_id":"ck3bbu75f003ktudhimt6qk2w"},{"post_id":"ck3bbu7520027tudhfxynp6y8","category_id":"ck3bbu74y001xtudht7g33y1h","_id":"ck3bbu75f003ntudhf688zuxj"},{"post_id":"ck3bbu7520027tudhfxynp6y8","category_id":"ck3bbu759002rtudhrvv9yuuf","_id":"ck3bbu75g003qtudhp9k3pcoe"},{"post_id":"ck3bbu753002btudheqqw753x","category_id":"ck3bbu75f003htudhhm365qbq","_id":"ck3bbu75g003ttudhd1ux8gjg"},{"post_id":"ck3bbu74v001otudhdgmjylcy","category_id":"ck3bbu74v001ptudhqzgglehp","_id":"ck3bbu75h003ztudhquyeo6in"},{"post_id":"ck3bbu74v001otudhdgmjylcy","category_id":"ck3bbu75f003otudhc66pw2z0","_id":"ck3bbu75h0041tudhaxl9flmj"},{"post_id":"ck3bbu754002dtudhseyp24ok","category_id":"ck3bbu74y001xtudht7g33y1h","_id":"ck3bbu75i0043tudh2fw43ssn"},{"post_id":"ck3bbu754002dtudhseyp24ok","category_id":"ck3bbu759002rtudhrvv9yuuf","_id":"ck3bbu75j0045tudhav70b5zw"},{"post_id":"ck3bbu756002ktudhduwxi9hf","category_id":"ck3bbu75h003ytudhojb3md5w","_id":"ck3bbu75j0048tudhfddhgtdf"},{"post_id":"ck3bbu757002ntudhslugkv4s","category_id":"ck3bbu75h003ytudhojb3md5w","_id":"ck3bbu75k004btudhkkqffbl8"},{"post_id":"ck3bbu758002ptudhc5uz3c81","category_id":"ck3bbu75h003ytudhojb3md5w","_id":"ck3bbu75l004gtudhq37qnioc"},{"post_id":"ck3bbu759002ttudho00be87w","category_id":"ck3bbu75h003ytudhojb3md5w","_id":"ck3bbu75m004ltudhfue8upi5"},{"post_id":"ck3bbu75a002xtudh7dhilvfl","category_id":"ck3bbu75h003ytudhojb3md5w","_id":"ck3bbu75n004ptudh7k0zhj1m"},{"post_id":"ck3bbu75c0031tudh497sshrw","category_id":"ck3bbu75h003ytudhojb3md5w","_id":"ck3bbu75o004studhd1aqhn8c"}],"PostTag":[{"post_id":"ck3bbu7390000tudhlm35mzjd","tag_id":"ck3bbu73h0005tudhy29mk3ju","_id":"ck3bbu73j000atudhmtazshhi"},{"post_id":"ck3bbu7390000tudhlm35mzjd","tag_id":"ck3bbu73i0008tudh92m09geb","_id":"ck3bbu73j000btudhyy0zok1r"},{"post_id":"ck3bbu748000dtudhaqswovo5","tag_id":"ck3bbu74a000gtudhqhnc82to","_id":"ck3bbu74m000ytudhfc5d9hhm"},{"post_id":"ck3bbu748000dtudhaqswovo5","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu74n0011tudhsvg5zyj7"},{"post_id":"ck3bbu748000dtudhaqswovo5","tag_id":"ck3bbu74h000qtudhpapvbyf8","_id":"ck3bbu74p0016tudhpoborgrm"},{"post_id":"ck3bbu749000etudh7wlttfty","tag_id":"ck3bbu74a000gtudhqhnc82to","_id":"ck3bbu74t001jtudhz5xfmsvd"},{"post_id":"ck3bbu749000etudh7wlttfty","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu74u001mtudhdevqejyc"},{"post_id":"ck3bbu749000etudh7wlttfty","tag_id":"ck3bbu74h000qtudhpapvbyf8","_id":"ck3bbu74w001rtudh7ytei40f"},{"post_id":"ck3bbu74a000htudhyk7ktcx5","tag_id":"ck3bbu74a000gtudhqhnc82to","_id":"ck3bbu7500022tudh3agthab9"},{"post_id":"ck3bbu74a000htudhyk7ktcx5","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu7510025tudhg6wspo6g"},{"post_id":"ck3bbu74a000htudhyk7ktcx5","tag_id":"ck3bbu74h000qtudhpapvbyf8","_id":"ck3bbu7530028tudhwurqiasz"},{"post_id":"ck3bbu74b000itudhr4b6chqe","tag_id":"ck3bbu74a000gtudhqhnc82to","_id":"ck3bbu755002gtudhxr1h2ja6"},{"post_id":"ck3bbu74b000itudhr4b6chqe","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu756002itudhblei7k7t"},{"post_id":"ck3bbu74b000itudhr4b6chqe","tag_id":"ck3bbu7520026tudhevgas951","_id":"ck3bbu757002mtudhbovyiohl"},{"post_id":"ck3bbu74d000jtudh2i9zmu93","tag_id":"ck3bbu74a000gtudhqhnc82to","_id":"ck3bbu759002studha38txhdg"},{"post_id":"ck3bbu74d000jtudh2i9zmu93","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu75a002vtudhsbtfs6dr"},{"post_id":"ck3bbu74d000jtudh2i9zmu93","tag_id":"ck3bbu7520026tudhevgas951","_id":"ck3bbu75b002ztudh6u9plerg"},{"post_id":"ck3bbu74f000mtudhzkqfame5","tag_id":"ck3bbu74a000gtudhqhnc82to","_id":"ck3bbu75c0032tudhuetutzkx"},{"post_id":"ck3bbu74f000mtudhzkqfame5","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu75d0034tudhsa1ttpst"},{"post_id":"ck3bbu74f000mtudhzkqfame5","tag_id":"ck3bbu74h000qtudhpapvbyf8","_id":"ck3bbu75d0037tudho8lmky70"},{"post_id":"ck3bbu74g000ntudhm7er8pgh","tag_id":"ck3bbu74a000gtudhqhnc82to","_id":"ck3bbu75e003atudhu9upg2ma"},{"post_id":"ck3bbu74g000ntudhm7er8pgh","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu75e003dtudhgxfdhzfo"},{"post_id":"ck3bbu74g000ntudhm7er8pgh","tag_id":"ck3bbu7520026tudhevgas951","_id":"ck3bbu75f003gtudh0nv9yokl"},{"post_id":"ck3bbu74i000rtudhb5xowbqn","tag_id":"ck3bbu74a000gtudhqhnc82to","_id":"ck3bbu75f003jtudhi2jgv6di"},{"post_id":"ck3bbu74i000rtudhb5xowbqn","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu75f003mtudhahpf87zx"},{"post_id":"ck3bbu74i000rtudhb5xowbqn","tag_id":"ck3bbu7520026tudhevgas951","_id":"ck3bbu75g003ptudhim6yt48l"},{"post_id":"ck3bbu74j000ttudh5nlb9kcu","tag_id":"ck3bbu74a000gtudhqhnc82to","_id":"ck3bbu75g003studhaxbfazst"},{"post_id":"ck3bbu74j000ttudh5nlb9kcu","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu75g003vtudh77fiotm6"},{"post_id":"ck3bbu74j000ttudh5nlb9kcu","tag_id":"ck3bbu7520026tudhevgas951","_id":"ck3bbu75h003xtudhoja3lgnv"},{"post_id":"ck3bbu74j000ttudh5nlb9kcu","tag_id":"ck3bbu74h000qtudhpapvbyf8","_id":"ck3bbu75h0040tudhpusi5l62"},{"post_id":"ck3bbu74l000wtudh98gaxpj9","tag_id":"ck3bbu75e003ftudhswjof55h","_id":"ck3bbu75k004ctudhqeqp39pd"},{"post_id":"ck3bbu74l000wtudh98gaxpj9","tag_id":"ck3bbu75f003ltudh8awmqby5","_id":"ck3bbu75l004dtudh39s08c2n"},{"post_id":"ck3bbu74l000wtudh98gaxpj9","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu75l004htudhiqiovy17"},{"post_id":"ck3bbu74l000wtudh98gaxpj9","tag_id":"ck3bbu75g003rtudhooxo8bqd","_id":"ck3bbu75l004itudhnrhqwvu2"},{"post_id":"ck3bbu74l000wtudh98gaxpj9","tag_id":"ck3bbu75g003wtudhkktd7il8","_id":"ck3bbu75m004mtudhls24etn4"},{"post_id":"ck3bbu74l000wtudh98gaxpj9","tag_id":"ck3bbu75i0042tudhzzz03gns","_id":"ck3bbu75m004ntudhacz4x6te"},{"post_id":"ck3bbu74l000wtudh98gaxpj9","tag_id":"ck3bbu75j0046tudhhqfiqoeb","_id":"ck3bbu75n004qtudhz3k6ogwj"},{"post_id":"ck3bbu74m000ztudhsbagvd60","tag_id":"ck3bbu75e003ftudhswjof55h","_id":"ck3bbu75p004vtudhpkfucrs2"},{"post_id":"ck3bbu74m000ztudhsbagvd60","tag_id":"ck3bbu75f003ltudh8awmqby5","_id":"ck3bbu75p004wtudh8s9cjwby"},{"post_id":"ck3bbu74m000ztudhsbagvd60","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu75p004ytudhqyme2eat"},{"post_id":"ck3bbu74m000ztudhsbagvd60","tag_id":"ck3bbu75g003rtudhooxo8bqd","_id":"ck3bbu75p004ztudh5ecaunnl"},{"post_id":"ck3bbu74m000ztudhsbagvd60","tag_id":"ck3bbu75g003wtudhkktd7il8","_id":"ck3bbu75q0051tudh807n1uje"},{"post_id":"ck3bbu74m000ztudhsbagvd60","tag_id":"ck3bbu75i0042tudhzzz03gns","_id":"ck3bbu75q0052tudhkpogs0re"},{"post_id":"ck3bbu74m000ztudhsbagvd60","tag_id":"ck3bbu75j0046tudhhqfiqoeb","_id":"ck3bbu75q0054tudhtnnhoded"},{"post_id":"ck3bbu74o0014tudhwl2mzxe1","tag_id":"ck3bbu75e003ftudhswjof55h","_id":"ck3bbu75s0058tudhakxxzc8q"},{"post_id":"ck3bbu74o0014tudhwl2mzxe1","tag_id":"ck3bbu75f003ltudh8awmqby5","_id":"ck3bbu75s0059tudhs9d6z6y4"},{"post_id":"ck3bbu74o0014tudhwl2mzxe1","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu75s005btudhco651nbx"},{"post_id":"ck3bbu74o0014tudhwl2mzxe1","tag_id":"ck3bbu75g003rtudhooxo8bqd","_id":"ck3bbu75s005ctudhurqspku4"},{"post_id":"ck3bbu74o0014tudhwl2mzxe1","tag_id":"ck3bbu75g003wtudhkktd7il8","_id":"ck3bbu75s005etudhg9h17ff9"},{"post_id":"ck3bbu74o0014tudhwl2mzxe1","tag_id":"ck3bbu75i0042tudhzzz03gns","_id":"ck3bbu75s005ftudhrelfdnei"},{"post_id":"ck3bbu74o0014tudhwl2mzxe1","tag_id":"ck3bbu75j0046tudhhqfiqoeb","_id":"ck3bbu75t005htudhccqlejvy"},{"post_id":"ck3bbu74p0017tudh84zpa2dv","tag_id":"ck3bbu75e003ftudhswjof55h","_id":"ck3bbu75u005ltudh5bci0xr3"},{"post_id":"ck3bbu74p0017tudh84zpa2dv","tag_id":"ck3bbu75f003ltudh8awmqby5","_id":"ck3bbu75u005mtudhane4lo1e"},{"post_id":"ck3bbu74p0017tudh84zpa2dv","tag_id":"ck3bbu74e000ltudhrfumhjdl","_id":"ck3bbu75u005otudhh5yfda76"},{"post_id":"ck3bbu74p0017tudh84zpa2dv","tag_id":"ck3bbu75g003rtudhooxo8bqd","_id":"ck3bbu75u005ptudhs1um8llq"},{"post_id":"ck3bbu74p0017tudh84zpa2dv","tag_id":"ck3bbu75g003wtudhkktd7il8","_id":"ck3bbu75u005rtudhgtly4oae"},{"post_id":"ck3bbu74p0017tudh84zpa2dv","tag_id":"ck3bbu75i0042tudhzzz03gns","_id":"ck3bbu75u005studhfw0q8xjx"},{"post_id":"ck3bbu74p0017tudh84zpa2dv","tag_id":"ck3bbu75j0046tudhhqfiqoeb","_id":"ck3bbu75v005utudhwwavem2p"},{"post_id":"ck3bbu74q001atudhcrtq4zzx","tag_id":"ck3bbu75t005ktudhmuzaoiy0","_id":"ck3bbu75v005vtudhpr2092of"},{"post_id":"ck3bbu74r001dtudh551d542u","tag_id":"ck3bbu75e003ftudhswjof55h","_id":"ck3bbu75x0061tudh7mrphlxn"},{"post_id":"ck3bbu74r001dtudh551d542u","tag_id":"ck3bbu75f003ltudh8awmqby5","_id":"ck3bbu75x0062tudhdme44orc"},{"post_id":"ck3bbu74r001dtudh551d542u","tag_id":"ck3bbu75v005ttudhdxpru3uz","_id":"ck3bbu75x0064tudhgyajnkqj"},{"post_id":"ck3bbu74r001dtudh551d542u","tag_id":"ck3bbu75v005wtudh732fvaky","_id":"ck3bbu75x0065tudhz5gkovr3"},{"post_id":"ck3bbu74r001dtudh551d542u","tag_id":"ck3bbu75v005xtudhszdgi7yz","_id":"ck3bbu75x0067tudhmezcgqqc"},{"post_id":"ck3bbu74r001dtudh551d542u","tag_id":"ck3bbu75v005ytudh5ki6i55q","_id":"ck3bbu75x0068tudhstqkjl31"},{"post_id":"ck3bbu74r001dtudh551d542u","tag_id":"ck3bbu75j0046tudhhqfiqoeb","_id":"ck3bbu75x006atudhra0x3on9"},{"post_id":"ck3bbu74s001gtudhvncjctpb","tag_id":"ck3bbu75w0060tudhyrtp9oo7","_id":"ck3bbu75y006btudhyqd8fcd4"},{"post_id":"ck3bbu74s001gtudhvncjctpb","tag_id":"ck3bbu75x0063tudh1hgx909y","_id":"ck3bbu75y006dtudhgm2qp8ez"},{"post_id":"ck3bbu74s001gtudhvncjctpb","tag_id":"ck3bbu75x0066tudhnlhhl5fi","_id":"ck3bbu75y006etudhp704q3vs"},{"post_id":"ck3bbu74t001ktudhblf6ct40","tag_id":"ck3bbu75t005ktudhmuzaoiy0","_id":"ck3bbu75z006gtudhxl979sq5"},{"post_id":"ck3bbu74v001otudhdgmjylcy","tag_id":"ck3bbu75t005ktudhmuzaoiy0","_id":"ck3bbu75z006jtudhlj4v8f31"},{"post_id":"ck3bbu74v001otudhdgmjylcy","tag_id":"ck3bbu75y006ftudhi4ua1gq2","_id":"ck3bbu75z006ktudhzb53dbs0"},{"post_id":"ck3bbu74v001otudhdgmjylcy","tag_id":"ck3bbu75z006htudhdfcwqxch","_id":"ck3bbu760006mtudhgob0ybr7"},{"post_id":"ck3bbu74w001studh4n9y8taz","tag_id":"ck3bbu75z006itudhl8sakhih","_id":"ck3bbu761006ptudh0666rlb9"},{"post_id":"ck3bbu74w001studh4n9y8taz","tag_id":"ck3bbu75x0063tudh1hgx909y","_id":"ck3bbu761006qtudheodevu7y"},{"post_id":"ck3bbu74w001studh4n9y8taz","tag_id":"ck3bbu75x0066tudhnlhhl5fi","_id":"ck3bbu762006studhs6w4f5tq"},{"post_id":"ck3bbu74x001vtudhha3jtgf2","tag_id":"ck3bbu75w0060tudhyrtp9oo7","_id":"ck3bbu763006wtudho44kbi3b"},{"post_id":"ck3bbu74x001vtudhha3jtgf2","tag_id":"ck3bbu762006rtudht1dq68ky","_id":"ck3bbu763006xtudhrfu4t802"},{"post_id":"ck3bbu74x001vtudhha3jtgf2","tag_id":"ck3bbu75x0063tudh1hgx909y","_id":"ck3bbu763006ztudhb89epbjr"},{"post_id":"ck3bbu74x001vtudhha3jtgf2","tag_id":"ck3bbu75x0066tudhnlhhl5fi","_id":"ck3bbu7630070tudhk72us8ss"},{"post_id":"ck3bbu74y001ytudhr6ddez9x","tag_id":"ck3bbu75x0063tudh1hgx909y","_id":"ck3bbu7640073tudhb1katk5j"},{"post_id":"ck3bbu74y001ytudhr6ddez9x","tag_id":"ck3bbu75x0066tudhnlhhl5fi","_id":"ck3bbu7640074tudhe7fae06j"},{"post_id":"ck3bbu74y001ytudhr6ddez9x","tag_id":"ck3bbu7630071tudh5priuxh7","_id":"ck3bbu7650076tudhugwudyb3"},{"post_id":"ck3bbu74z0020tudhq2eunhqj","tag_id":"ck3bbu75x0063tudh1hgx909y","_id":"ck3bbu7650079tudhk0uay9a1"},{"post_id":"ck3bbu74z0020tudhq2eunhqj","tag_id":"ck3bbu75x0066tudhnlhhl5fi","_id":"ck3bbu765007atudhsmoo16gi"},{"post_id":"ck3bbu74z0020tudhq2eunhqj","tag_id":"ck3bbu7630071tudh5priuxh7","_id":"ck3bbu766007ctudh467fiqj5"},{"post_id":"ck3bbu7500024tudh2j3xqlix","tag_id":"ck3bbu75x0063tudh1hgx909y","_id":"ck3bbu767007ftudh89hs81gp"},{"post_id":"ck3bbu7500024tudh2j3xqlix","tag_id":"ck3bbu75x0066tudhnlhhl5fi","_id":"ck3bbu767007gtudhen5fc9rm"},{"post_id":"ck3bbu7500024tudh2j3xqlix","tag_id":"ck3bbu7630071tudh5priuxh7","_id":"ck3bbu767007itudhk416z5uz"},{"post_id":"ck3bbu7520027tudhfxynp6y8","tag_id":"ck3bbu75x0063tudh1hgx909y","_id":"ck3bbu768007ltudh7xhlz7lu"},{"post_id":"ck3bbu7520027tudhfxynp6y8","tag_id":"ck3bbu75x0066tudhnlhhl5fi","_id":"ck3bbu768007mtudhjpfs3ww4"},{"post_id":"ck3bbu7520027tudhfxynp6y8","tag_id":"ck3bbu7630071tudh5priuxh7","_id":"ck3bbu768007otudh9o6o0u6b"},{"post_id":"ck3bbu753002btudheqqw753x","tag_id":"ck3bbu768007ktudh7rgz185q","_id":"ck3bbu769007qtudh6vdwg94n"},{"post_id":"ck3bbu753002btudheqqw753x","tag_id":"ck3bbu75j0046tudhhqfiqoeb","_id":"ck3bbu769007rtudhlvmb3cqc"},{"post_id":"ck3bbu754002dtudhseyp24ok","tag_id":"ck3bbu75w0060tudhyrtp9oo7","_id":"ck3bbu76a007wtudhkvblmdm6"},{"post_id":"ck3bbu754002dtudhseyp24ok","tag_id":"ck3bbu75x0063tudh1hgx909y","_id":"ck3bbu76a007xtudhq4x3tg2p"},{"post_id":"ck3bbu754002dtudhseyp24ok","tag_id":"ck3bbu75x0066tudhnlhhl5fi","_id":"ck3bbu76b007ztudhkr7q7yqt"},{"post_id":"ck3bbu754002dtudhseyp24ok","tag_id":"ck3bbu7630071tudh5priuxh7","_id":"ck3bbu76b0080tudh1qvd7om7"},{"post_id":"ck3bbu755002htudhyy2hz8a5","tag_id":"ck3bbu75w0060tudhyrtp9oo7","_id":"ck3bbu76c0085tudhrlo2s9hh"},{"post_id":"ck3bbu755002htudhyy2hz8a5","tag_id":"ck3bbu762006rtudht1dq68ky","_id":"ck3bbu76c0086tudhfte3781c"},{"post_id":"ck3bbu755002htudhyy2hz8a5","tag_id":"ck3bbu75z006itudhl8sakhih","_id":"ck3bbu76d0088tudhl0thzv8k"},{"post_id":"ck3bbu755002htudhyy2hz8a5","tag_id":"ck3bbu75x0063tudh1hgx909y","_id":"ck3bbu76d0089tudhmlr9nj6o"},{"post_id":"ck3bbu755002htudhyy2hz8a5","tag_id":"ck3bbu75x0066tudhnlhhl5fi","_id":"ck3bbu76d008btudhx167fmui"},{"post_id":"ck3bbu756002ktudhduwxi9hf","tag_id":"ck3bbu75g003rtudhooxo8bqd","_id":"ck3bbu76d008ctudhimj940yx"},{"post_id":"ck3bbu757002ntudhslugkv4s","tag_id":"ck3bbu75g003rtudhooxo8bqd","_id":"ck3bbu76e008etudhdhgs8ip7"},{"post_id":"ck3bbu758002ptudhc5uz3c81","tag_id":"ck3bbu75g003rtudhooxo8bqd","_id":"ck3bbu76e008ftudh56bmf9ps"},{"post_id":"ck3bbu759002ttudho00be87w","tag_id":"ck3bbu75g003rtudhooxo8bqd","_id":"ck3bbu76e008htudh3rl11k8c"},{"post_id":"ck3bbu75a002xtudh7dhilvfl","tag_id":"ck3bbu75g003rtudhooxo8bqd","_id":"ck3bbu76f008jtudh7x7yb3aq"},{"post_id":"ck3bbu75c0031tudh497sshrw","tag_id":"ck3bbu75g003rtudhooxo8bqd","_id":"ck3bbu76f008ktudh1hb9i8by"}],"Tag":[{"name":"Portfolio","_id":"ck3bbu73h0005tudhy29mk3ju"},{"name":"作品集","_id":"ck3bbu73i0008tudh92m09geb"},{"name":"D3","_id":"ck3bbu74a000gtudhqhnc82to"},{"name":"Vue","_id":"ck3bbu74e000ltudhrfumhjdl"},{"name":"CANVAS","_id":"ck3bbu74h000qtudhpapvbyf8"},{"name":"SVG","_id":"ck3bbu7520026tudhevgas951"},{"name":".NET Core","_id":"ck3bbu75e003ftudhswjof55h"},{"name":"dotnet","_id":"ck3bbu75f003ltudh8awmqby5"},{"name":"Webpack","_id":"ck3bbu75g003rtudhooxo8bqd"},{"name":"SPA","_id":"ck3bbu75g003wtudhkktd7il8"},{"name":"MVC","_id":"ck3bbu75i0042tudhzzz03gns"},{"name":"VScode","_id":"ck3bbu75j0046tudhhqfiqoeb"},{"name":"JS","_id":"ck3bbu75t005ktudhmuzaoiy0"},{"name":"SignalR","_id":"ck3bbu75v005ttudhdxpru3uz"},{"name":"Serverless","_id":"ck3bbu75v005wtudh732fvaky"},{"name":"Azure Functions","_id":"ck3bbu75v005xtudhszdgi7yz"},{"name":"C#","_id":"ck3bbu75v005ytudh5ki6i55q"},{"name":"Sketch","_id":"ck3bbu75w0060tudhyrtp9oo7"},{"name":"UX","_id":"ck3bbu75x0063tudh1hgx909y"},{"name":"UI","_id":"ck3bbu75x0066tudhnlhhl5fi"},{"name":"React","_id":"ck3bbu75y006ftudhi4ua1gq2"},{"name":"Redux","_id":"ck3bbu75z006htudhdfcwqxch"},{"name":"Adobe XD","_id":"ck3bbu75z006itudhl8sakhih"},{"name":"Abstract","_id":"ck3bbu762006rtudht1dq68ky"},{"name":"Material Design","_id":"ck3bbu7630071tudh5priuxh7"},{"name":"Git","_id":"ck3bbu768007ktudh7rgz185q"}]}}